{"remainingRequest":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/babel-loader/lib/index.js!/Users/antonyching/Desktop/project/new-builder-demo/node_modules/@ckeditor/ckeditor5-engine/src/view/observer/selectionobserver.js","dependencies":[{"path":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/@ckeditor/ckeditor5-engine/src/view/observer/selectionobserver.js","mtime":499162500000},{"path":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/@ckeditor/ckeditor5-dev-webpack-plugin/lib/translatesourceloader.js","mtime":499162500000},{"path":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:LyoqCiAqIEBsaWNlbnNlIENvcHlyaWdodCAoYykgMjAwMy0yMDE5LCBDS1NvdXJjZSAtIEZyZWRlcmljbyBLbmFiYmVuLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKiBGb3IgbGljZW5zaW5nLCBzZWUgTElDRU5TRS5tZCBvciBodHRwczovL2NrZWRpdG9yLmNvbS9sZWdhbC9ja2VkaXRvci1vc3MtbGljZW5zZQogKi8KCi8qKgogKiBAbW9kdWxlIGVuZ2luZS92aWV3L29ic2VydmVyL3NlbGVjdGlvbm9ic2VydmVyCiAqLwoKLyogZ2xvYmFsIHNldEludGVydmFsLCBjbGVhckludGVydmFsICovCmltcG9ydCBPYnNlcnZlciBmcm9tICcuL29ic2VydmVyJzsKaW1wb3J0IE11dGF0aW9uT2JzZXJ2ZXIgZnJvbSAnLi9tdXRhdGlvbm9ic2VydmVyJzsKaW1wb3J0IHsgZGVib3VuY2UgfSBmcm9tICdsb2Rhc2gtZXMnOwovKioKICogU2VsZWN0aW9uIG9ic2VydmVyIGNsYXNzIG9ic2VydmVzIHNlbGVjdGlvbiBjaGFuZ2VzIGluIHRoZSBkb2N1bWVudC4gSWYgc2VsZWN0aW9uIGNoYW5nZXMgb24gdGhlIGRvY3VtZW50IHRoaXMKICogb2JzZXJ2ZXIgY2hlY2tzIGlmIHRoZXJlIGFyZSBhbnkgbXV0YXRpb25zIGFuZCBpZiBET00gc2VsZWN0aW9uIGlzIGRpZmZlcmVudCB0aGFuIHRoZQogKiB7QGxpbmsgbW9kdWxlOmVuZ2luZS92aWV3L2RvY3VtZW50fkRvY3VtZW50I3NlbGVjdGlvbiB2aWV3IHNlbGVjdGlvbn0uIFNlbGVjdGlvbiBvYnNlcnZlciBmaXJlcwogKiB7QGxpbmsgbW9kdWxlOmVuZ2luZS92aWV3L2RvY3VtZW50fkRvY3VtZW50I2V2ZW50OnNlbGVjdGlvbkNoYW5nZX0gZXZlbnQgb25seSBpZiBzZWxlY3Rpb24gY2hhbmdlIHdhcyB0aGUgb25seSBjaGFuZ2UgaW4gdGhlIGRvY3VtZW50CiAqIGFuZCBET00gc2VsZWN0aW9uIGlzIGRpZmZlcmVudCB0aGVuIHRoZSB2aWV3IHNlbGVjdGlvbi4KICoKICogTm90ZSB0aGF0IHRoaXMgb2JzZXJ2ZXIgaXMgYXR0YWNoZWQgYnkgdGhlIHtAbGluayBtb2R1bGU6ZW5naW5lL3ZpZXcvdmlld35WaWV3fSBhbmQgaXMgYXZhaWxhYmxlIGJ5IGRlZmF1bHQuCiAqCiAqIEBzZWUgbW9kdWxlOmVuZ2luZS92aWV3L29ic2VydmVyL211dGF0aW9ub2JzZXJ2ZXJ+TXV0YXRpb25PYnNlcnZlcgogKiBAZXh0ZW5kcyBtb2R1bGU6ZW5naW5lL3ZpZXcvb2JzZXJ2ZXIvb2JzZXJ2ZXJ+T2JzZXJ2ZXIKICovCgpleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWxlY3Rpb25PYnNlcnZlciBleHRlbmRzIE9ic2VydmVyIHsKICBjb25zdHJ1Y3Rvcih2aWV3KSB7CiAgICBzdXBlcih2aWV3KTsKICAgIC8qKgogICAgICogSW5zdGFuY2Ugb2YgdGhlIG11dGF0aW9uIG9ic2VydmVyLiBTZWxlY3Rpb24gb2JzZXJ2ZXIgY2FsbHMKICAgICAqIHtAbGluayBtb2R1bGU6ZW5naW5lL3ZpZXcvb2JzZXJ2ZXIvbXV0YXRpb25vYnNlcnZlcn5NdXRhdGlvbk9ic2VydmVyI2ZsdXNofSB0byBlbnN1cmUgdGhhdCB0aGUgbXV0YXRpb25zIHdpbGwgYmUgaGFuZGxlZAogICAgICogYmVmb3JlIHRoZSB7QGxpbmsgbW9kdWxlOmVuZ2luZS92aWV3L2RvY3VtZW50fkRvY3VtZW50I2V2ZW50OnNlbGVjdGlvbkNoYW5nZX0gZXZlbnQgaXMgZmlyZWQuCiAgICAgKgogICAgICogQHJlYWRvbmx5CiAgICAgKiBAbWVtYmVyIHttb2R1bGU6ZW5naW5lL3ZpZXcvb2JzZXJ2ZXIvbXV0YXRpb25vYnNlcnZlcn5NdXRhdGlvbk9ic2VydmVyfQogICAgICogbW9kdWxlOmVuZ2luZS92aWV3L29ic2VydmVyL3NlbGVjdGlvbm9ic2VydmVyflNlbGVjdGlvbk9ic2VydmVyI211dGF0aW9uT2JzZXJ2ZXIKICAgICAqLwoKICAgIHRoaXMubXV0YXRpb25PYnNlcnZlciA9IHZpZXcuZ2V0T2JzZXJ2ZXIoTXV0YXRpb25PYnNlcnZlcik7CiAgICAvKioKICAgICAqIFJlZmVyZW5jZSB0byB0aGUgdmlldyB7QGxpbmsgbW9kdWxlOmVuZ2luZS92aWV3L2RvY3VtZW50c2VsZWN0aW9ufkRvY3VtZW50U2VsZWN0aW9ufSBvYmplY3QgdXNlZCB0byBjb21wYXJlCiAgICAgKiBuZXcgc2VsZWN0aW9uIHdpdGggaXQuCiAgICAgKgogICAgICogQHJlYWRvbmx5CiAgICAgKiBAbWVtYmVyIHttb2R1bGU6ZW5naW5lL3ZpZXcvZG9jdW1lbnRzZWxlY3Rpb25+RG9jdW1lbnRTZWxlY3Rpb259CiAgICAgKiBtb2R1bGU6ZW5naW5lL3ZpZXcvb2JzZXJ2ZXIvc2VsZWN0aW9ub2JzZXJ2ZXJ+U2VsZWN0aW9uT2JzZXJ2ZXIjc2VsZWN0aW9uCiAgICAgKi8KCiAgICB0aGlzLnNlbGVjdGlvbiA9IHRoaXMuZG9jdW1lbnQuc2VsZWN0aW9uOwogICAgLyogZXNsaW50LWRpc2FibGUgbWF4LWxlbiAqLwoKICAgIC8qKgogICAgICogUmVmZXJlbmNlIHRvIHRoZSB7QGxpbmsgbW9kdWxlOmVuZ2luZS92aWV3L3ZpZXd+VmlldyNkb21Db252ZXJ0ZXJ9LgogICAgICoKICAgICAqIEByZWFkb25seQogICAgICogQG1lbWJlciB7bW9kdWxlOmVuZ2luZS92aWV3L2RvbWNvbnZlcnRlcn5Eb21Db252ZXJ0ZXJ9IG1vZHVsZTplbmdpbmUvdmlldy9vYnNlcnZlci9zZWxlY3Rpb25vYnNlcnZlcn5TZWxlY3Rpb25PYnNlcnZlciNkb21Db252ZXJ0ZXIKICAgICAqLwoKICAgIC8qIGVzbGludC1lbmFibGUgbWF4LWxlbiAqLwoKICAgIHRoaXMuZG9tQ29udmVydGVyID0gdmlldy5kb21Db252ZXJ0ZXI7CiAgICAvKioKICAgICAqIFNldCBvZiBkb2N1bWVudHMgd2hpY2ggaGF2ZSBhZGRlZCAic2VsZWN0aW9uY2hhbmdlIiBsaXN0ZW5lciB0byBhdm9pZCBhZGRpbmcgbGlzdGVuZXIgdHdpY2UgdG8gdGhlIHNhbWUKICAgICAqIGRvY3VtZW50LgogICAgICoKICAgICAqIEBwcml2YXRlCiAgICAgKiBAbWVtYmVyIHtXZWFrU2V0LjxEb2N1bWVudD59IG1vZHVsZTplbmdpbmUvdmlldy9vYnNlcnZlci9zZWxlY3Rpb25vYnNlcnZlcn5TZWxlY3Rpb25PYnNlcnZlciNfZG9jdW1lbnRzCiAgICAgKi8KCiAgICB0aGlzLl9kb2N1bWVudHMgPSBuZXcgV2Vha1NldCgpOwogICAgLyoqCiAgICAgKiBGaXJlcyBkZWJvdW5jZWQgZXZlbnQgYHNlbGVjdGlvbkNoYW5nZURvbmVgLiBJdCB1c2VzIGBsb2Rhc2gjZGVib3VuY2VgIG1ldGhvZCB0byBkZWxheSBmdW5jdGlvbiBjYWxsLgogICAgICoKICAgICAqIEBwcml2YXRlCiAgICAgKiBAcGFyYW0ge09iamVjdH0gZGF0YSBTZWxlY3Rpb24gY2hhbmdlIGRhdGEuCiAgICAgKiBAbWV0aG9kICNfZmlyZVNlbGVjdGlvbkNoYW5nZURvbmVEZWJvdW5jZWQKICAgICAqLwoKICAgIHRoaXMuX2ZpcmVTZWxlY3Rpb25DaGFuZ2VEb25lRGVib3VuY2VkID0gZGVib3VuY2UoZGF0YSA9PiB0aGlzLmRvY3VtZW50LmZpcmUoJ3NlbGVjdGlvbkNoYW5nZURvbmUnLCBkYXRhKSwgMjAwKTsKICAgIHRoaXMuX2NsZWFySW5maW5pdGVMb29wSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PiB0aGlzLl9jbGVhckluZmluaXRlTG9vcCgpLCAxMDAwKTsKICAgIC8qKgogICAgICogUHJpdmF0ZSBwcm9wZXJ0eSB0byBjaGVjayBpZiB0aGUgY29kZSBkb2VzIG5vdCBlbnRlciBpbmZpbml0ZSBsb29wLgogICAgICoKICAgICAqIEBwcml2YXRlCiAgICAgKiBAbWVtYmVyIHtOdW1iZXJ9IG1vZHVsZTplbmdpbmUvdmlldy9vYnNlcnZlci9zZWxlY3Rpb25vYnNlcnZlcn5TZWxlY3Rpb25PYnNlcnZlciNfbG9vcGJhY2tDb3VudGVyCiAgICAgKi8KCiAgICB0aGlzLl9sb29wYmFja0NvdW50ZXIgPSAwOwogIH0KICAvKioKICAgKiBAaW5oZXJpdERvYwogICAqLwoKCiAgb2JzZXJ2ZShkb21FbGVtZW50KSB7CiAgICBjb25zdCBkb21Eb2N1bWVudCA9IGRvbUVsZW1lbnQub3duZXJEb2N1bWVudDsgLy8gQWRkIGxpc3RlbmVyIG9uY2UgcGVyIGVhY2ggZG9jdW1lbnQuCgogICAgaWYgKHRoaXMuX2RvY3VtZW50cy5oYXMoZG9tRG9jdW1lbnQpKSB7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICB0aGlzLmxpc3RlblRvKGRvbURvY3VtZW50LCAnc2VsZWN0aW9uY2hhbmdlJywgKCkgPT4gewogICAgICB0aGlzLl9oYW5kbGVTZWxlY3Rpb25DaGFuZ2UoZG9tRG9jdW1lbnQpOwogICAgfSk7CgogICAgdGhpcy5fZG9jdW1lbnRzLmFkZChkb21Eb2N1bWVudCk7CiAgfQogIC8qKgogICAqIEBpbmhlcml0RG9jCiAgICovCgoKICBkZXN0cm95KCkgewogICAgc3VwZXIuZGVzdHJveSgpOwogICAgY2xlYXJJbnRlcnZhbCh0aGlzLl9jbGVhckluZmluaXRlTG9vcEludGVydmFsKTsKCiAgICB0aGlzLl9maXJlU2VsZWN0aW9uQ2hhbmdlRG9uZURlYm91bmNlZC5jYW5jZWwoKTsKICB9CiAgLyoqCiAgICogU2VsZWN0aW9uIGNoYW5nZSBsaXN0ZW5lci4ge0BsaW5rIG1vZHVsZTplbmdpbmUvdmlldy9vYnNlcnZlci9tdXRhdGlvbm9ic2VydmVyfk11dGF0aW9uT2JzZXJ2ZXIjZmx1c2ggRmx1c2h9IG11dGF0aW9ucywgY2hlY2sgaWYKICAgKiBzZWxlY3Rpb24gY2hhbmdlcyBhbmQgZmlyZXMge0BsaW5rIG1vZHVsZTplbmdpbmUvdmlldy9kb2N1bWVudH5Eb2N1bWVudCNldmVudDpzZWxlY3Rpb25DaGFuZ2V9IGV2ZW50IG9uIGV2ZXJ5IGNoYW5nZQogICAqIGFuZCB7QGxpbmsgbW9kdWxlOmVuZ2luZS92aWV3L2RvY3VtZW50fkRvY3VtZW50I2V2ZW50OnNlbGVjdGlvbkNoYW5nZURvbmV9IHdoZW4gc2VsZWN0aW9uIHN0b3AgY2hhbmdpbmcuCiAgICoKICAgKiBAcHJpdmF0ZQogICAqIEBwYXJhbSB7RG9jdW1lbnR9IGRvbURvY3VtZW50IERPTSBkb2N1bWVudC4KICAgKi8KCgogIF9oYW5kbGVTZWxlY3Rpb25DaGFuZ2UoZG9tRG9jdW1lbnQpIHsKICAgIC8vIFNlbGVjdGlvbiBpcyBoYW5kbGVkIHdoZW4gZG9jdW1lbnQgaXMgbm90IGZvY3VzZWQgYnV0IGlzIHJlYWQtb25seS4gVGhpcyBpcyBiZWNhdXNlIGluIHJlYWQtb25seQogICAgLy8gbW9kZSBjb250ZW50ZWRpdGFibGUgaXMgc2V0IGFzIGZhbHNlIGFuZCBlZGl0b3Igd29uJ3QgcmVjZWl2ZSBmb2N1cyBidXQgd2Ugc3RpbGwgbmVlZCB0byBrbm93CiAgICAvLyBzZWxlY3Rpb24gcG9zaXRpb24uCiAgICBpZiAoIXRoaXMuaXNFbmFibGVkIHx8ICF0aGlzLmRvY3VtZW50LmlzRm9jdXNlZCAmJiAhdGhpcy5kb2N1bWVudC5pc1JlYWRPbmx5KSB7CiAgICAgIHJldHVybjsKICAgIH0gLy8gRW5zdXJlIHRoZSBtdXRhdGlvbiBldmVudCB3aWxsIGJlIGJlZm9yZSBzZWxlY3Rpb24gZXZlbnQgb24gYWxsIGJyb3dzZXJzLgoKCiAgICB0aGlzLm11dGF0aW9uT2JzZXJ2ZXIuZmx1c2goKTsgLy8gSWYgdGhlcmUgd2VyZSBtdXRhdGlvbnMgdGhlbiB0aGUgdmlldyB3aWxsIGJlIHJlLXJlbmRlcmVkIGJ5IHRoZSBtdXRhdGlvbiBvYnNlcnZlciBhbmQgc2VsZWN0aW9uCiAgICAvLyB3aWxsIGJlIHVwZGF0ZWQsIHNvIHNlbGVjdGlvbnMgd2lsbCBlcXVhbCBhbmQgZXZlbnQgd2lsbCBub3QgYmUgZmlyZWQsIGFzIGV4cGVjdGVkLgoKICAgIGNvbnN0IGRvbVNlbGVjdGlvbiA9IGRvbURvY3VtZW50LmRlZmF1bHRWaWV3LmdldFNlbGVjdGlvbigpOwogICAgY29uc3QgbmV3Vmlld1NlbGVjdGlvbiA9IHRoaXMuZG9tQ29udmVydGVyLmRvbVNlbGVjdGlvblRvVmlldyhkb21TZWxlY3Rpb24pOwoKICAgIGlmICh0aGlzLnNlbGVjdGlvbi5pc0VxdWFsKG5ld1ZpZXdTZWxlY3Rpb24pICYmIHRoaXMuZG9tQ29udmVydGVyLmlzRG9tU2VsZWN0aW9uQ29ycmVjdChkb21TZWxlY3Rpb24pKSB7CiAgICAgIHJldHVybjsKICAgIH0gLy8gRW5zdXJlIHdlIGFyZSBub3QgaW4gdGhlIGluZmluaXRlIGxvb3AgKCM0MDApLgogICAgLy8gVGhpcyBjb3VudGVyIGlzIHJlc2V0IGVhY2ggc2Vjb25kLiA2MCBzZWxlY3Rpb24gY2hhbmdlcyBpbiAxIHNlY29uZCBpcyBlbm91Z2ggaGlnaCBudW1iZXIKICAgIC8vIHRvIGJlIHZlcnkgZGlmZmljdWx0IChpbXBvc3NpYmxlKSB0byBhY2hpZXZlIHVzaW5nIGp1c3Qga2V5Ym9hcmQga2V5cyAoZHVyaW5nIG5vcm1hbCBlZGl0b3IgdXNlKS4KCgogICAgaWYgKCsrdGhpcy5fbG9vcGJhY2tDb3VudGVyID4gNjApIHsKICAgICAgLy8gU2VsZWN0aW9uIGNoYW5nZSBvYnNlcnZlciBkZXRlY3RlZCBhbiBpbmZpbml0ZSByZW5kZXJpbmcgbG9vcC4KICAgICAgLy8gTW9zdCBwcm9iYWJseSB5b3UgdHJ5IHRvIHB1dCB0aGUgc2VsZWN0aW9uIGluIHRoZSBwb3NpdGlvbiB3aGljaCBpcyBub3QgYWxsb3dlZAogICAgICAvLyBieSB0aGUgYnJvd3NlciBhbmQgYnJvd3NlciBmaXhlcyBpdCBhdXRvbWF0aWNhbGx5IHdoYXQgY2F1c2VzIGBzZWxlY3Rpb25jaGFuZ2VgIGV2ZW50IG9uCiAgICAgIC8vIHdoaWNoIGEgbG9vcGJhY2sgdGhyb3VnaCBhIG1vZGVsIHRyaWVzIHRvIHJlLXJlbmRlciB0aGUgd3Jvbmcgc2VsZWN0aW9uIGFuZCBhZ2Fpbi4KICAgICAgLy8KICAgICAgLy8gQGlmIENLX0RFQlVHIC8vIGNvbnNvbGUud2FybiggJ1NlbGVjdGlvbiBjaGFuZ2Ugb2JzZXJ2ZXIgZGV0ZWN0ZWQgYW4gaW5maW5pdGUgcmVuZGVyaW5nIGxvb3AuJyApOwogICAgICByZXR1cm47CiAgICB9CgogICAgaWYgKHRoaXMuc2VsZWN0aW9uLmlzU2ltaWxhcihuZXdWaWV3U2VsZWN0aW9uKSkgewogICAgICAvLyBJZiBzZWxlY3Rpb24gd2FzIGVxdWFsIGFuZCB3ZSBhcmUgYXQgdGhpcyBwb2ludCBvZiBhbGdvcml0aG0sIGl0IG1lYW5zIHRoYXQgaXQgd2FzIGluY29ycmVjdC4KICAgICAgLy8gSnVzdCByZS1yZW5kZXIgaXQsIG5vIG5lZWQgdG8gZmlyZSBhbnkgZXZlbnRzLCBldGMuCiAgICAgIHRoaXMudmlldy5mb3JjZVJlbmRlcigpOwogICAgfSBlbHNlIHsKICAgICAgY29uc3QgZGF0YSA9IHsKICAgICAgICBvbGRTZWxlY3Rpb246IHRoaXMuc2VsZWN0aW9uLAogICAgICAgIG5ld1NlbGVjdGlvbjogbmV3Vmlld1NlbGVjdGlvbiwKICAgICAgICBkb21TZWxlY3Rpb24KICAgICAgfTsgLy8gUHJlcGFyZSBkYXRhIGZvciBuZXcgc2VsZWN0aW9uIGFuZCBmaXJlIGFwcHJvcHJpYXRlIGV2ZW50cy4KCiAgICAgIHRoaXMuZG9jdW1lbnQuZmlyZSgnc2VsZWN0aW9uQ2hhbmdlJywgZGF0YSk7IC8vIENhbGxgICNfZmlyZVNlbGVjdGlvbkNoYW5nZURvbmVEZWJvdW5jZWRgIGV2ZXJ5IHRpbWUgd2hlbiBgc2VsZWN0aW9uQ2hhbmdlYCBldmVudCBpcyBmaXJlZC4KICAgICAgLy8gVGhpcyBmdW5jdGlvbiBpcyBkZWJvdW5jZWQgd2hhdCBtZWFucyB0aGF0IGBzZWxlY3Rpb25DaGFuZ2VEb25lYCBldmVudCB3aWxsIGJlIGZpcmVkIG9ubHkgd2hlbgogICAgICAvLyBkZWZpbmVkIGludCB0aGUgZnVuY3Rpb24gdGltZSB3aWxsIGVsYXBzZSBzaW5jZSB0aGUgbGFzdCB0aW1lIHRoZSBmdW5jdGlvbiB3YXMgY2FsbGVkLgogICAgICAvLyBTbyBgc2VsZWN0aW9uQ2hhbmdlRG9uZWAgd2lsbCBiZSBmaXJlZCB3aGVuIHNlbGVjdGlvbiB3aWxsIHN0b3AgY2hhbmdpbmcuCgogICAgICB0aGlzLl9maXJlU2VsZWN0aW9uQ2hhbmdlRG9uZURlYm91bmNlZChkYXRhKTsKICAgIH0KICB9CiAgLyoqCiAgICogQ2xlYXJzIGBTZWxlY3Rpb25PYnNlcnZlcmAgaW50ZXJuYWwgcHJvcGVydGllcyBjb25uZWN0ZWQgd2l0aCBwcmV2ZW50aW5nIGluZmluaXRlIGxvb3AuCiAgICoKICAgKiBAcHJvdGVjdGVkCiAgICovCgoKICBfY2xlYXJJbmZpbml0ZUxvb3AoKSB7CiAgICB0aGlzLl9sb29wYmFja0NvdW50ZXIgPSAwOwogIH0KCn0KLyoqCiAqIEZpcmVkIHdoZW4gc2VsZWN0aW9uIGhhcyBjaGFuZ2VkLiBUaGlzIGV2ZW50IGlzIGZpcmVkIG9ubHkgd2hlbiB0aGUgc2VsZWN0aW9uIGNoYW5nZSB3YXMgdGhlIG9ubHkgY2hhbmdlIHRoYXQgaGFwcGVuZWQKICogaW4gdGhlIGRvY3VtZW50LCBhbmQgb2xkIHNlbGVjdGlvbiBpcyBkaWZmZXJlbnQgdGhlbiB0aGUgbmV3IHNlbGVjdGlvbi4KICoKICogSW50cm9kdWNlZCBieSB7QGxpbmsgbW9kdWxlOmVuZ2luZS92aWV3L29ic2VydmVyL3NlbGVjdGlvbm9ic2VydmVyflNlbGVjdGlvbk9ic2VydmVyfS4KICoKICogTm90ZSB0aGF0IGJlY2F1c2Uge0BsaW5rIG1vZHVsZTplbmdpbmUvdmlldy9vYnNlcnZlci9zZWxlY3Rpb25vYnNlcnZlcn5TZWxlY3Rpb25PYnNlcnZlcn0gaXMgYXR0YWNoZWQgYnkgdGhlCiAqIHtAbGluayBtb2R1bGU6ZW5naW5lL3ZpZXcvdmlld35WaWV3fSB0aGlzIGV2ZW50IGlzIGF2YWlsYWJsZSBieSBkZWZhdWx0LgogKgogKiBAc2VlIG1vZHVsZTplbmdpbmUvdmlldy9vYnNlcnZlci9zZWxlY3Rpb25vYnNlcnZlcn5TZWxlY3Rpb25PYnNlcnZlcgogKiBAZXZlbnQgbW9kdWxlOmVuZ2luZS92aWV3L2RvY3VtZW50fkRvY3VtZW50I2V2ZW50OnNlbGVjdGlvbkNoYW5nZQogKiBAcGFyYW0ge09iamVjdH0gZGF0YQogKiBAcGFyYW0ge21vZHVsZTplbmdpbmUvdmlldy9kb2N1bWVudHNlbGVjdGlvbn5Eb2N1bWVudFNlbGVjdGlvbn0gZGF0YS5vbGRTZWxlY3Rpb24gT2xkIFZpZXcgc2VsZWN0aW9uIHdoaWNoIGlzCiAqIHtAbGluayBtb2R1bGU6ZW5naW5lL3ZpZXcvZG9jdW1lbnR+RG9jdW1lbnQjc2VsZWN0aW9ufS4KICogQHBhcmFtIHttb2R1bGU6ZW5naW5lL3ZpZXcvc2VsZWN0aW9uflNlbGVjdGlvbn0gZGF0YS5uZXdTZWxlY3Rpb24gTmV3IFZpZXcgc2VsZWN0aW9uIHdoaWNoIGlzIGNvbnZlcnRlZCBET00gc2VsZWN0aW9uLgogKiBAcGFyYW0ge1NlbGVjdGlvbn0gZGF0YS5kb21TZWxlY3Rpb24gTmF0aXZlIERPTSBzZWxlY3Rpb24uCiAqLwoKLyoqCiAqIEZpcmVkIHdoZW4gc2VsZWN0aW9uIHN0b3BzIGNoYW5naW5nLgogKgogKiBJbnRyb2R1Y2VkIGJ5IHtAbGluayBtb2R1bGU6ZW5naW5lL3ZpZXcvb2JzZXJ2ZXIvc2VsZWN0aW9ub2JzZXJ2ZXJ+U2VsZWN0aW9uT2JzZXJ2ZXJ9LgogKgogKiBOb3RlIHRoYXQgYmVjYXVzZSB7QGxpbmsgbW9kdWxlOmVuZ2luZS92aWV3L29ic2VydmVyL3NlbGVjdGlvbm9ic2VydmVyflNlbGVjdGlvbk9ic2VydmVyfSBpcyBhdHRhY2hlZCBieSB0aGUKICoge0BsaW5rIG1vZHVsZTplbmdpbmUvdmlldy92aWV3flZpZXd9IHRoaXMgZXZlbnQgaXMgYXZhaWxhYmxlIGJ5IGRlZmF1bHQuCiAqCiAqIEBzZWUgbW9kdWxlOmVuZ2luZS92aWV3L29ic2VydmVyL3NlbGVjdGlvbm9ic2VydmVyflNlbGVjdGlvbk9ic2VydmVyCiAqIEBldmVudCBtb2R1bGU6ZW5naW5lL3ZpZXcvZG9jdW1lbnR+RG9jdW1lbnQjZXZlbnQ6c2VsZWN0aW9uQ2hhbmdlRG9uZQogKiBAcGFyYW0ge09iamVjdH0gZGF0YQogKiBAcGFyYW0ge21vZHVsZTplbmdpbmUvdmlldy9kb2N1bWVudHNlbGVjdGlvbn5Eb2N1bWVudFNlbGVjdGlvbn0gZGF0YS5vbGRTZWxlY3Rpb24gT2xkIFZpZXcgc2VsZWN0aW9uIHdoaWNoIGlzCiAqIHtAbGluayBtb2R1bGU6ZW5naW5lL3ZpZXcvZG9jdW1lbnR+RG9jdW1lbnQjc2VsZWN0aW9ufS4KICogQHBhcmFtIHttb2R1bGU6ZW5naW5lL3ZpZXcvc2VsZWN0aW9uflNlbGVjdGlvbn0gZGF0YS5uZXdTZWxlY3Rpb24gTmV3IFZpZXcgc2VsZWN0aW9uIHdoaWNoIGlzIGNvbnZlcnRlZCBET00gc2VsZWN0aW9uLgogKiBAcGFyYW0ge1NlbGVjdGlvbn0gZGF0YS5kb21TZWxlY3Rpb24gTmF0aXZlIERPTSBzZWxlY3Rpb24uCiAqLw=="},{"version":3,"sources":["/Users/antonyching/Desktop/project/new-builder-demo/node_modules/@ckeditor/ckeditor5-engine/src/view/observer/selectionobserver.js"],"names":["Observer","MutationObserver","debounce","SelectionObserver","constructor","view","mutationObserver","getObserver","selection","document","domConverter","_documents","WeakSet","_fireSelectionChangeDoneDebounced","data","fire","_clearInfiniteLoopInterval","setInterval","_clearInfiniteLoop","_loopbackCounter","observe","domElement","domDocument","ownerDocument","has","listenTo","_handleSelectionChange","add","destroy","clearInterval","cancel","isEnabled","isFocused","isReadOnly","flush","domSelection","defaultView","getSelection","newViewSelection","domSelectionToView","isEqual","isDomSelectionCorrect","isSimilar","forceRender","oldSelection","newSelection"],"mappings":"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","sourcesContent":["/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/view/observer/selectionobserver\n */\n\n/* global setInterval, clearInterval */\n\nimport Observer from './observer';\nimport MutationObserver from './mutationobserver';\nimport { debounce } from 'lodash-es';\n\n/**\n * Selection observer class observes selection changes in the document. If selection changes on the document this\n * observer checks if there are any mutations and if DOM selection is different than the\n * {@link module:engine/view/document~Document#selection view selection}. Selection observer fires\n * {@link module:engine/view/document~Document#event:selectionChange} event only if selection change was the only change in the document\n * and DOM selection is different then the view selection.\n *\n * Note that this observer is attached by the {@link module:engine/view/view~View} and is available by default.\n *\n * @see module:engine/view/observer/mutationobserver~MutationObserver\n * @extends module:engine/view/observer/observer~Observer\n */\nexport default class SelectionObserver extends Observer {\n\tconstructor( view ) {\n\t\tsuper( view );\n\n\t\t/**\n\t\t * Instance of the mutation observer. Selection observer calls\n\t\t * {@link module:engine/view/observer/mutationobserver~MutationObserver#flush} to ensure that the mutations will be handled\n\t\t * before the {@link module:engine/view/document~Document#event:selectionChange} event is fired.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/view/observer/mutationobserver~MutationObserver}\n\t\t * module:engine/view/observer/selectionobserver~SelectionObserver#mutationObserver\n\t\t */\n\t\tthis.mutationObserver = view.getObserver( MutationObserver );\n\n\t\t/**\n\t\t * Reference to the view {@link module:engine/view/documentselection~DocumentSelection} object used to compare\n\t\t * new selection with it.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/view/documentselection~DocumentSelection}\n\t\t * module:engine/view/observer/selectionobserver~SelectionObserver#selection\n\t\t */\n\t\tthis.selection = this.document.selection;\n\n\t\t/* eslint-disable max-len */\n\t\t/**\n\t\t * Reference to the {@link module:engine/view/view~View#domConverter}.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/view/domconverter~DomConverter} module:engine/view/observer/selectionobserver~SelectionObserver#domConverter\n\t\t */\n\t\t/* eslint-enable max-len */\n\t\tthis.domConverter = view.domConverter;\n\n\t\t/**\n\t\t * Set of documents which have added \"selectionchange\" listener to avoid adding listener twice to the same\n\t\t * document.\n\t\t *\n\t\t * @private\n\t\t * @member {WeakSet.<Document>} module:engine/view/observer/selectionobserver~SelectionObserver#_documents\n\t\t */\n\t\tthis._documents = new WeakSet();\n\n\t\t/**\n\t\t * Fires debounced event `selectionChangeDone`. It uses `lodash#debounce` method to delay function call.\n\t\t *\n\t\t * @private\n\t\t * @param {Object} data Selection change data.\n\t\t * @method #_fireSelectionChangeDoneDebounced\n\t\t */\n\t\tthis._fireSelectionChangeDoneDebounced = debounce( data => this.document.fire( 'selectionChangeDone', data ), 200 );\n\n\t\tthis._clearInfiniteLoopInterval = setInterval( () => this._clearInfiniteLoop(), 1000 );\n\n\t\t/**\n\t\t * Private property to check if the code does not enter infinite loop.\n\t\t *\n\t\t * @private\n\t\t * @member {Number} module:engine/view/observer/selectionobserver~SelectionObserver#_loopbackCounter\n\t\t */\n\t\tthis._loopbackCounter = 0;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tobserve( domElement ) {\n\t\tconst domDocument = domElement.ownerDocument;\n\n\t\t// Add listener once per each document.\n\t\tif ( this._documents.has( domDocument ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.listenTo( domDocument, 'selectionchange', () => {\n\t\t\tthis._handleSelectionChange( domDocument );\n\t\t} );\n\n\t\tthis._documents.add( domDocument );\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tdestroy() {\n\t\tsuper.destroy();\n\n\t\tclearInterval( this._clearInfiniteLoopInterval );\n\t\tthis._fireSelectionChangeDoneDebounced.cancel();\n\t}\n\n\t/**\n\t * Selection change listener. {@link module:engine/view/observer/mutationobserver~MutationObserver#flush Flush} mutations, check if\n\t * selection changes and fires {@link module:engine/view/document~Document#event:selectionChange} event on every change\n\t * and {@link module:engine/view/document~Document#event:selectionChangeDone} when selection stop changing.\n\t *\n\t * @private\n\t * @param {Document} domDocument DOM document.\n\t */\n\t_handleSelectionChange( domDocument ) {\n\t\t// Selection is handled when document is not focused but is read-only. This is because in read-only\n\t\t// mode contenteditable is set as false and editor won't receive focus but we still need to know\n\t\t// selection position.\n\t\tif ( !this.isEnabled || ( !this.document.isFocused && !this.document.isReadOnly ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Ensure the mutation event will be before selection event on all browsers.\n\t\tthis.mutationObserver.flush();\n\n\t\t// If there were mutations then the view will be re-rendered by the mutation observer and selection\n\t\t// will be updated, so selections will equal and event will not be fired, as expected.\n\t\tconst domSelection = domDocument.defaultView.getSelection();\n\t\tconst newViewSelection = this.domConverter.domSelectionToView( domSelection );\n\n\t\tif ( this.selection.isEqual( newViewSelection ) && this.domConverter.isDomSelectionCorrect( domSelection ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Ensure we are not in the infinite loop (#400).\n\t\t// This counter is reset each second. 60 selection changes in 1 second is enough high number\n\t\t// to be very difficult (impossible) to achieve using just keyboard keys (during normal editor use).\n\t\tif ( ++this._loopbackCounter > 60 ) {\n\t\t\t// Selection change observer detected an infinite rendering loop.\n\t\t\t// Most probably you try to put the selection in the position which is not allowed\n\t\t\t// by the browser and browser fixes it automatically what causes `selectionchange` event on\n\t\t\t// which a loopback through a model tries to re-render the wrong selection and again.\n\t\t\t//\n\t\t\t// @if CK_DEBUG // console.warn( 'Selection change observer detected an infinite rendering loop.' );\n\n\t\t\treturn;\n\t\t}\n\n\t\tif ( this.selection.isSimilar( newViewSelection ) ) {\n\t\t\t// If selection was equal and we are at this point of algorithm, it means that it was incorrect.\n\t\t\t// Just re-render it, no need to fire any events, etc.\n\t\t\tthis.view.forceRender();\n\t\t} else {\n\t\t\tconst data = {\n\t\t\t\toldSelection: this.selection,\n\t\t\t\tnewSelection: newViewSelection,\n\t\t\t\tdomSelection\n\t\t\t};\n\n\t\t\t// Prepare data for new selection and fire appropriate events.\n\t\t\tthis.document.fire( 'selectionChange', data );\n\n\t\t\t// Call` #_fireSelectionChangeDoneDebounced` every time when `selectionChange` event is fired.\n\t\t\t// This function is debounced what means that `selectionChangeDone` event will be fired only when\n\t\t\t// defined int the function time will elapse since the last time the function was called.\n\t\t\t// So `selectionChangeDone` will be fired when selection will stop changing.\n\t\t\tthis._fireSelectionChangeDoneDebounced( data );\n\t\t}\n\t}\n\n\t/**\n\t * Clears `SelectionObserver` internal properties connected with preventing infinite loop.\n\t *\n\t * @protected\n\t */\n\t_clearInfiniteLoop() {\n\t\tthis._loopbackCounter = 0;\n\t}\n}\n\n/**\n * Fired when selection has changed. This event is fired only when the selection change was the only change that happened\n * in the document, and old selection is different then the new selection.\n *\n * Introduced by {@link module:engine/view/observer/selectionobserver~SelectionObserver}.\n *\n * Note that because {@link module:engine/view/observer/selectionobserver~SelectionObserver} is attached by the\n * {@link module:engine/view/view~View} this event is available by default.\n *\n * @see module:engine/view/observer/selectionobserver~SelectionObserver\n * @event module:engine/view/document~Document#event:selectionChange\n * @param {Object} data\n * @param {module:engine/view/documentselection~DocumentSelection} data.oldSelection Old View selection which is\n * {@link module:engine/view/document~Document#selection}.\n * @param {module:engine/view/selection~Selection} data.newSelection New View selection which is converted DOM selection.\n * @param {Selection} data.domSelection Native DOM selection.\n */\n\n/**\n * Fired when selection stops changing.\n *\n * Introduced by {@link module:engine/view/observer/selectionobserver~SelectionObserver}.\n *\n * Note that because {@link module:engine/view/observer/selectionobserver~SelectionObserver} is attached by the\n * {@link module:engine/view/view~View} this event is available by default.\n *\n * @see module:engine/view/observer/selectionobserver~SelectionObserver\n * @event module:engine/view/document~Document#event:selectionChangeDone\n * @param {Object} data\n * @param {module:engine/view/documentselection~DocumentSelection} data.oldSelection Old View selection which is\n * {@link module:engine/view/document~Document#selection}.\n * @param {module:engine/view/selection~Selection} data.newSelection New View selection which is converted DOM selection.\n * @param {Selection} data.domSelection Native DOM selection.\n */\n"]}]}