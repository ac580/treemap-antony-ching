{"remainingRequest":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/babel-loader/lib/index.js!/Users/antonyching/Desktop/project/new-builder-demo/node_modules/@ckeditor/ckeditor5-image/src/imageupload/imageuploadui.js","dependencies":[{"path":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/@ckeditor/ckeditor5-image/src/imageupload/imageuploadui.js","mtime":499162500000},{"path":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/@ckeditor/ckeditor5-dev-webpack-plugin/lib/translatesourceloader.js","mtime":499162500000},{"path":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:LyoqCiAqIEBsaWNlbnNlIENvcHlyaWdodCAoYykgMjAwMy0yMDE5LCBDS1NvdXJjZSAtIEZyZWRlcmljbyBLbmFiYmVuLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKiBGb3IgbGljZW5zaW5nLCBzZWUgTElDRU5TRS5tZCBvciBodHRwczovL2NrZWRpdG9yLmNvbS9sZWdhbC9ja2VkaXRvci1vc3MtbGljZW5zZQogKi8KCi8qKgogKiBAbW9kdWxlIGltYWdlL2ltYWdldXBsb2FkL2ltYWdldXBsb2FkdWkKICovCmltcG9ydCBQbHVnaW4gZnJvbSAnQGNrZWRpdG9yL2NrZWRpdG9yNS1jb3JlL3NyYy9wbHVnaW4nOwppbXBvcnQgRmlsZURpYWxvZ0J1dHRvblZpZXcgZnJvbSAnQGNrZWRpdG9yL2NrZWRpdG9yNS11cGxvYWQvc3JjL3VpL2ZpbGVkaWFsb2didXR0b252aWV3JzsKaW1wb3J0IGltYWdlSWNvbiBmcm9tICdAY2tlZGl0b3IvY2tlZGl0b3I1LWNvcmUvdGhlbWUvaWNvbnMvaW1hZ2Uuc3ZnJzsKaW1wb3J0IHsgY3JlYXRlSW1hZ2VUeXBlUmVnRXhwIH0gZnJvbSAnLi91dGlscyc7Ci8qKgogKiBUaGUgaW1hZ2UgdXBsb2FkIGJ1dHRvbiBwbHVnaW4uCiAqCiAqIEZvciBhIGRldGFpbGVkIG92ZXJ2aWV3LCBjaGVjayB0aGUge0BnbGluayBmZWF0dXJlcy9pbWFnZS11cGxvYWQvaW1hZ2UtdXBsb2FkIEltYWdlIHVwbG9hZCBmZWF0dXJlfSBkb2N1bWVudGF0aW9uLgogKgogKiBBZGRzIHRoZSBgJ2ltYWdlVXBsb2FkJ2AgYnV0dG9uIHRvIHRoZSB7QGxpbmsgbW9kdWxlOnVpL2NvbXBvbmVudGZhY3Rvcnl+Q29tcG9uZW50RmFjdG9yeSBVSSBjb21wb25lbnQgZmFjdG9yeX0uCiAqCiAqIEBleHRlbmRzIG1vZHVsZTpjb3JlL3BsdWdpbn5QbHVnaW4KICovCgpleHBvcnQgZGVmYXVsdCBjbGFzcyBJbWFnZVVwbG9hZFVJIGV4dGVuZHMgUGx1Z2luIHsKICAvKioKICAgKiBAaW5oZXJpdERvYwogICAqLwogIGluaXQoKSB7CiAgICBjb25zdCBlZGl0b3IgPSB0aGlzLmVkaXRvcjsKICAgIGNvbnN0IHQgPSBlZGl0b3IudDsgLy8gU2V0dXAgYGltYWdlVXBsb2FkYCBidXR0b24uCgogICAgZWRpdG9yLnVpLmNvbXBvbmVudEZhY3RvcnkuYWRkKCdpbWFnZVVwbG9hZCcsIGxvY2FsZSA9PiB7CiAgICAgIGNvbnN0IHZpZXcgPSBuZXcgRmlsZURpYWxvZ0J1dHRvblZpZXcobG9jYWxlKTsKICAgICAgY29uc3QgY29tbWFuZCA9IGVkaXRvci5jb21tYW5kcy5nZXQoJ2ltYWdlVXBsb2FkJyk7CiAgICAgIGNvbnN0IGltYWdlVHlwZXMgPSBlZGl0b3IuY29uZmlnLmdldCgnaW1hZ2UudXBsb2FkLnR5cGVzJyk7CiAgICAgIGNvbnN0IGltYWdlVHlwZXNSZWdFeHAgPSBjcmVhdGVJbWFnZVR5cGVSZWdFeHAoaW1hZ2VUeXBlcyk7CiAgICAgIHZpZXcuc2V0KHsKICAgICAgICBhY2NlcHRlZFR5cGU6IGltYWdlVHlwZXMubWFwKHR5cGUgPT4gYGltYWdlLyR7dHlwZX1gKS5qb2luKCcsJyksCiAgICAgICAgYWxsb3dNdWx0aXBsZUZpbGVzOiB0cnVlCiAgICAgIH0pOwogICAgICB2aWV3LmJ1dHRvblZpZXcuc2V0KHsKICAgICAgICBsYWJlbDogdCgnSW5zZXJ0IGltYWdlJyksCiAgICAgICAgaWNvbjogaW1hZ2VJY29uLAogICAgICAgIHRvb2x0aXA6IHRydWUKICAgICAgfSk7CiAgICAgIHZpZXcuYnV0dG9uVmlldy5iaW5kKCdpc0VuYWJsZWQnKS50byhjb21tYW5kKTsKICAgICAgdmlldy5vbignZG9uZScsIChldnQsIGZpbGVzKSA9PiB7CiAgICAgICAgY29uc3QgaW1hZ2VzVG9VcGxvYWQgPSBBcnJheS5mcm9tKGZpbGVzKS5maWx0ZXIoZmlsZSA9PiBpbWFnZVR5cGVzUmVnRXhwLnRlc3QoZmlsZS50eXBlKSk7CgogICAgICAgIGlmIChpbWFnZXNUb1VwbG9hZC5sZW5ndGgpIHsKICAgICAgICAgIGVkaXRvci5leGVjdXRlKCdpbWFnZVVwbG9hZCcsIHsKICAgICAgICAgICAgZmlsZTogaW1hZ2VzVG9VcGxvYWQKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHJldHVybiB2aWV3OwogICAgfSk7CiAgfQoKfQ=="},{"version":3,"sources":["/Users/antonyching/Desktop/project/new-builder-demo/node_modules/@ckeditor/ckeditor5-image/src/imageupload/imageuploadui.js"],"names":["Plugin","FileDialogButtonView","imageIcon","createImageTypeRegExp","ImageUploadUI","init","editor","t","ui","componentFactory","add","locale","view","command","commands","get","imageTypes","config","imageTypesRegExp","set","acceptedType","map","type","join","allowMultipleFiles","buttonView","label","icon","tooltip","bind","to","on","evt","files","imagesToUpload","Array","from","filter","file","test","length","execute"],"mappings":"AAAA;;;;;AAKA;;;AAIA,OAAOA,MAAP,MAAmB,qCAAnB;AACA,OAAOC,oBAAP,MAAiC,wDAAjC;AACA,OAAOC,SAAP,MAAsB,gDAAtB;AACA,SAASC,qBAAT,QAAsC,SAAtC;AAEA;;;;;;;;;;AASA,eAAe,MAAMC,aAAN,SAA4BJ,MAA5B,CAAmC;AACjD;;;AAGAK,EAAAA,IAAI,GAAG;AACN,UAAMC,MAAM,GAAG,KAAKA,MAApB;AACA,UAAMC,CAAC,GAAGD,MAAM,CAACC,CAAjB,CAFM,CAIN;;AACAD,IAAAA,MAAM,CAACE,EAAP,CAAUC,gBAAV,CAA2BC,GAA3B,CAAgC,aAAhC,EAA+CC,MAAM,IAAI;AACxD,YAAMC,IAAI,GAAG,IAAIX,oBAAJ,CAA0BU,MAA1B,CAAb;AACA,YAAME,OAAO,GAAGP,MAAM,CAACQ,QAAP,CAAgBC,GAAhB,CAAqB,aAArB,CAAhB;AACA,YAAMC,UAAU,GAAGV,MAAM,CAACW,MAAP,CAAcF,GAAd,CAAmB,oBAAnB,CAAnB;AACA,YAAMG,gBAAgB,GAAGf,qBAAqB,CAAEa,UAAF,CAA9C;AAEAJ,MAAAA,IAAI,CAACO,GAAL,CAAU;AACTC,QAAAA,YAAY,EAAEJ,UAAU,CAACK,GAAX,CAAgBC,IAAI,IAAK,SAASA,IAAM,EAAxC,EAA4CC,IAA5C,CAAkD,GAAlD,CADL;AAETC,QAAAA,kBAAkB,EAAE;AAFX,OAAV;AAKAZ,MAAAA,IAAI,CAACa,UAAL,CAAgBN,GAAhB,CAAqB;AACpBO,QAAAA,KAAK,EAAEnB,CAAC,CAAE,cAAF,CADY;AAEpBoB,QAAAA,IAAI,EAAEzB,SAFc;AAGpB0B,QAAAA,OAAO,EAAE;AAHW,OAArB;AAMAhB,MAAAA,IAAI,CAACa,UAAL,CAAgBI,IAAhB,CAAsB,WAAtB,EAAoCC,EAApC,CAAwCjB,OAAxC;AAEAD,MAAAA,IAAI,CAACmB,EAAL,CAAS,MAAT,EAAiB,CAAEC,GAAF,EAAOC,KAAP,KAAkB;AAClC,cAAMC,cAAc,GAAGC,KAAK,CAACC,IAAN,CAAYH,KAAZ,EAAoBI,MAApB,CAA4BC,IAAI,IAAIpB,gBAAgB,CAACqB,IAAjB,CAAuBD,IAAI,CAAChB,IAA5B,CAApC,CAAvB;;AAEA,YAAKY,cAAc,CAACM,MAApB,EAA6B;AAC5BlC,UAAAA,MAAM,CAACmC,OAAP,CAAgB,aAAhB,EAA+B;AAAEH,YAAAA,IAAI,EAAEJ;AAAR,WAA/B;AACA;AACD,OAND;AAQA,aAAOtB,IAAP;AACA,KA5BD;AA6BA;;AAtCgD","sourcesContent":["/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module image/imageupload/imageuploadui\n */\n\nimport Plugin from '@ckeditor/ckeditor5-core/src/plugin';\nimport FileDialogButtonView from '@ckeditor/ckeditor5-upload/src/ui/filedialogbuttonview';\nimport imageIcon from '@ckeditor/ckeditor5-core/theme/icons/image.svg';\nimport { createImageTypeRegExp } from './utils';\n\n/**\n * The image upload button plugin.\n *\n * For a detailed overview, check the {@glink features/image-upload/image-upload Image upload feature} documentation.\n *\n * Adds the `'imageUpload'` button to the {@link module:ui/componentfactory~ComponentFactory UI component factory}.\n *\n * @extends module:core/plugin~Plugin\n */\nexport default class ImageUploadUI extends Plugin {\n\t/**\n\t * @inheritDoc\n\t */\n\tinit() {\n\t\tconst editor = this.editor;\n\t\tconst t = editor.t;\n\n\t\t// Setup `imageUpload` button.\n\t\teditor.ui.componentFactory.add( 'imageUpload', locale => {\n\t\t\tconst view = new FileDialogButtonView( locale );\n\t\t\tconst command = editor.commands.get( 'imageUpload' );\n\t\t\tconst imageTypes = editor.config.get( 'image.upload.types' );\n\t\t\tconst imageTypesRegExp = createImageTypeRegExp( imageTypes );\n\n\t\t\tview.set( {\n\t\t\t\tacceptedType: imageTypes.map( type => `image/${ type }` ).join( ',' ),\n\t\t\t\tallowMultipleFiles: true\n\t\t\t} );\n\n\t\t\tview.buttonView.set( {\n\t\t\t\tlabel: t( 'Insert image' ),\n\t\t\t\ticon: imageIcon,\n\t\t\t\ttooltip: true\n\t\t\t} );\n\n\t\t\tview.buttonView.bind( 'isEnabled' ).to( command );\n\n\t\t\tview.on( 'done', ( evt, files ) => {\n\t\t\t\tconst imagesToUpload = Array.from( files ).filter( file => imageTypesRegExp.test( file.type ) );\n\n\t\t\t\tif ( imagesToUpload.length ) {\n\t\t\t\t\teditor.execute( 'imageUpload', { file: imagesToUpload } );\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\treturn view;\n\t\t} );\n\t}\n}\n"]}]}