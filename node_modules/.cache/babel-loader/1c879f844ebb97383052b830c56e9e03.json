{"remainingRequest":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/babel-loader/lib/index.js!/Users/antonyching/Desktop/project/new-builder-demo/node_modules/@ckeditor/ckeditor5-widget/src/widgetresize.js","dependencies":[{"path":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/@ckeditor/ckeditor5-widget/src/widgetresize.js","mtime":499162500000},{"path":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/@ckeditor/ckeditor5-dev-webpack-plugin/lib/translatesourceloader.js","mtime":499162500000},{"path":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:LyoqCiAqIEBsaWNlbnNlIENvcHlyaWdodCAoYykgMjAwMy0yMDE5LCBDS1NvdXJjZSAtIEZyZWRlcmljbyBLbmFiYmVuLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKiBGb3IgbGljZW5zaW5nLCBzZWUgTElDRU5TRS5tZCBvciBodHRwczovL2NrZWRpdG9yLmNvbS9sZWdhbC9ja2VkaXRvci1vc3MtbGljZW5zZQogKi8KCi8qKgogKiBAbW9kdWxlIHdpZGdldC93aWRnZXRyZXNpemUKICovCmltcG9ydCBQbHVnaW4gZnJvbSAnQGNrZWRpdG9yL2NrZWRpdG9yNS1jb3JlL3NyYy9wbHVnaW4nOwppbXBvcnQgUmVzaXplciBmcm9tICcuL3dpZGdldHJlc2l6ZS9yZXNpemVyJzsKaW1wb3J0IERvbUVtaXR0ZXJNaXhpbiBmcm9tICdAY2tlZGl0b3IvY2tlZGl0b3I1LXV0aWxzL3NyYy9kb20vZW1pdHRlcm1peGluJzsKaW1wb3J0IGdsb2JhbCBmcm9tICdAY2tlZGl0b3IvY2tlZGl0b3I1LXV0aWxzL3NyYy9kb20vZ2xvYmFsJzsKaW1wb3J0IE9ic2VydmFibGVNaXhpbiBmcm9tICdAY2tlZGl0b3IvY2tlZGl0b3I1LXV0aWxzL3NyYy9vYnNlcnZhYmxlbWl4aW4nOwppbXBvcnQgbWl4IGZyb20gJ0Bja2VkaXRvci9ja2VkaXRvcjUtdXRpbHMvc3JjL21peCc7CmltcG9ydCB7IHRocm90dGxlIH0gZnJvbSAnbG9kYXNoLWVzJzsKaW1wb3J0ICcuLi90aGVtZS93aWRnZXRyZXNpemUuY3NzJzsKLyoqCiAqIFRoZSB3aWRnZXQgcmVzaXplIGZlYXR1cmUgcGx1Z2luLgogKgogKiBVc2UgdGhlIHtAbGluayBtb2R1bGU6d2lkZ2V0L3dpZGdldHJlc2l6ZX5XaWRnZXRSZXNpemUjYXR0YWNoVG99IG1ldGhvZCB0byBjcmVhdGUgYSByZXNpemVyIGZvciB0aGUgc3BlY2lmaWVkIHdpZGdldC4KICoKICogQGV4dGVuZHMgbW9kdWxlOmNvcmUvcGx1Z2luflBsdWdpbgogKiBAbWl4ZXMgbW9kdWxlOnV0aWxzL29ic2VydmFibGVtaXhpbn5PYnNlcnZhYmxlTWl4aW4KICovCgpleHBvcnQgZGVmYXVsdCBjbGFzcyBXaWRnZXRSZXNpemUgZXh0ZW5kcyBQbHVnaW4gewogIC8qKgogICAqIEBpbmhlcml0RG9jCiAgICovCiAgc3RhdGljIGdldCBwbHVnaW5OYW1lKCkgewogICAgcmV0dXJuICdXaWRnZXRSZXNpemUnOwogIH0KCiAgaW5pdCgpIHsKICAgIC8qKgogICAgICogVGhlIGN1cnJlbnRseSB2aXNpYmxlIHJlc2l6ZXIuCiAgICAgKgogICAgICogQHByb3RlY3RlZAogICAgICogQG9ic2VydmFibGUKICAgICAqIEBtZW1iZXIge21vZHVsZTp3aWRnZXQvd2lkZ2V0cmVzaXplL3Jlc2l6ZXJ+UmVzaXplcnxudWxsfSAjX3Zpc2libGVSZXNpemVyCiAgICAgKi8KICAgIHRoaXMuc2V0KCdfdmlzaWJsZVJlc2l6ZXInLCBudWxsKTsKICAgIC8qKgogICAgICogUmVmZXJlbmNlcyBhbiBhY3RpdmUgcmVzaXplci4KICAgICAqCiAgICAgKiBBY3RpdmUgcmVzaXplciBtZWFucyBhIHJlc2l6ZXIgd2hpY2ggaGFuZGxlIGlzIGFjdGl2ZWx5IHVzZWQgYnkgdGhlIGVuZCB1c2VyLgogICAgICoKICAgICAqIEBwcm90ZWN0ZWQKICAgICAqIEBvYnNlcnZhYmxlCiAgICAgKiBAbWVtYmVyIHttb2R1bGU6d2lkZ2V0L3dpZGdldHJlc2l6ZS9yZXNpemVyflJlc2l6ZXJ8bnVsbH0gI19hY3RpdmVSZXNpemVyCiAgICAgKi8KCiAgICB0aGlzLnNldCgnX2FjdGl2ZVJlc2l6ZXInLCBudWxsKTsKICAgIC8qKgogICAgICogQSBtYXAgb2YgcmVzaXplcnMgY3JlYXRlZCB1c2luZyB0aGlzIHBsdWdpbiBpbnN0YW5jZS4KICAgICAqCiAgICAgKiBAcHJpdmF0ZQogICAgICogQHR5cGUge01hcC48bW9kdWxlOmVuZ2luZS92aWV3L2NvbnRhaW5lcmVsZW1lbnR+Q29udGFpbmVyRWxlbWVudCwgbW9kdWxlOndpZGdldC93aWRnZXRyZXNpemUvcmVzaXplcn5SZXNpemVyPn0KICAgICAqLwoKICAgIHRoaXMuX3Jlc2l6ZXJzID0gbmV3IE1hcCgpOwogICAgY29uc3QgZG9tRG9jdW1lbnQgPSBnbG9iYWwud2luZG93LmRvY3VtZW50OwogICAgdGhpcy5lZGl0b3IubW9kZWwuc2NoZW1hLnNldEF0dHJpYnV0ZVByb3BlcnRpZXMoJ3dpZHRoJywgewogICAgICBpc0Zvcm1hdHRpbmc6IHRydWUKICAgIH0pOwogICAgdGhpcy5fb2JzZXJ2ZXIgPSBPYmplY3QuY3JlYXRlKERvbUVtaXR0ZXJNaXhpbik7CgogICAgdGhpcy5fb2JzZXJ2ZXIubGlzdGVuVG8oZG9tRG9jdW1lbnQsICdtb3VzZWRvd24nLCAoZXZlbnQsIGRvbUV2ZW50RGF0YSkgPT4gewogICAgICBpZiAoIVJlc2l6ZXIuaXNSZXNpemVIYW5kbGUoZG9tRXZlbnREYXRhLnRhcmdldCkpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGNvbnN0IHJlc2l6ZUhhbmRsZSA9IGRvbUV2ZW50RGF0YS50YXJnZXQ7CiAgICAgIHRoaXMuX2FjdGl2ZVJlc2l6ZXIgPSB0aGlzLl9nZXRSZXNpemVyQnlIYW5kbGUocmVzaXplSGFuZGxlKTsKCiAgICAgIGlmICh0aGlzLl9hY3RpdmVSZXNpemVyKSB7CiAgICAgICAgdGhpcy5fYWN0aXZlUmVzaXplci5iZWdpbihyZXNpemVIYW5kbGUpOwogICAgICB9CiAgICB9KTsKCiAgICB0aGlzLl9vYnNlcnZlci5saXN0ZW5Ubyhkb21Eb2N1bWVudCwgJ21vdXNlbW92ZScsIChldmVudCwgZG9tRXZlbnREYXRhKSA9PiB7CiAgICAgIGlmICh0aGlzLl9hY3RpdmVSZXNpemVyKSB7CiAgICAgICAgdGhpcy5fYWN0aXZlUmVzaXplci51cGRhdGVTaXplKGRvbUV2ZW50RGF0YSk7CiAgICAgIH0KICAgIH0pOwoKICAgIHRoaXMuX29ic2VydmVyLmxpc3RlblRvKGRvbURvY3VtZW50LCAnbW91c2V1cCcsICgpID0+IHsKICAgICAgaWYgKHRoaXMuX2FjdGl2ZVJlc2l6ZXIpIHsKICAgICAgICB0aGlzLl9hY3RpdmVSZXNpemVyLmNvbW1pdCgpOwoKICAgICAgICB0aGlzLl9hY3RpdmVSZXNpemVyID0gbnVsbDsKICAgICAgfQogICAgfSk7CgogICAgY29uc3QgcmVkcmF3Rm9jdXNlZFJlc2l6ZXIgPSAoKSA9PiB7CiAgICAgIGlmICh0aGlzLl92aXNpYmxlUmVzaXplcikgewogICAgICAgIHRoaXMuX3Zpc2libGVSZXNpemVyLnJlZHJhdygpOwogICAgICB9CiAgICB9OwoKICAgIGNvbnN0IHJlZHJhd0ZvY3VzZWRSZXNpemVyVGhyb3R0bGVkID0gdGhyb3R0bGUocmVkcmF3Rm9jdXNlZFJlc2l6ZXIsIDIwMCk7IC8vIDVmcHMKICAgIC8vIFJlZHJhd3Mgb2NjdXJyaW5nIHVwb24gYSBjaGFuZ2Ugb2YgdmlzaWJsZSByZXNpemVyIG11c3Qgbm90IGJlIHRocm90dGxlZCwgYXMgaXQgaXMgY3J1Y2lhbCBmb3IgdGhlIGluaXRpYWwKICAgIC8vIHJlbmRlci4gV2l0aG91dCBpdCB0aGUgcmVzaXplciBmcmFtZSB3b3VsZCBiZSBtaXNhbGlnbmVkIHdpdGggcmVzaXppbmcgaG9zdCBmb3IgYSBmcmFjdGlvbiBvZiBzZWNvbmQuCgogICAgdGhpcy5vbignY2hhbmdlOl92aXNpYmxlUmVzaXplcicsIHJlZHJhd0ZvY3VzZWRSZXNpemVyKTsgLy8gUmVkcmF3aW5nIG9uIGFueSBjaGFuZ2Ugb2YgdGhlIFVJIG9mIHRoZSBlZGl0b3IgKGluY2x1ZGluZyBjb250ZW50IGNoYW5nZXMpLgoKICAgIHRoaXMuZWRpdG9yLnVpLm9uKCd1cGRhdGUnLCByZWRyYXdGb2N1c2VkUmVzaXplclRocm90dGxlZCk7IC8vIFJlc2l6ZXJzIG5lZWQgdG8gYmUgcmVkcmF3biB1cG9uIHdpbmRvdyByZXNpemUsIGJlY2F1c2UgbmV3IHdpbmRvdyBtaWdodCBzaHJpbmsgcmVzaXplIGhvc3QuCgogICAgdGhpcy5fb2JzZXJ2ZXIubGlzdGVuVG8oZ2xvYmFsLndpbmRvdywgJ3Jlc2l6ZScsIHJlZHJhd0ZvY3VzZWRSZXNpemVyVGhyb3R0bGVkKTsKCiAgICBjb25zdCB2aWV3U2VsZWN0aW9uID0gdGhpcy5lZGl0b3IuZWRpdGluZy52aWV3LmRvY3VtZW50LnNlbGVjdGlvbjsKICAgIHZpZXdTZWxlY3Rpb24ub24oJ2NoYW5nZScsICgpID0+IHsKICAgICAgY29uc3Qgc2VsZWN0ZWRFbGVtZW50ID0gdmlld1NlbGVjdGlvbi5nZXRTZWxlY3RlZEVsZW1lbnQoKTsKICAgICAgdGhpcy5fdmlzaWJsZVJlc2l6ZXIgPSB0aGlzLl9nZXRSZXNpemVyQnlWaWV3RWxlbWVudChzZWxlY3RlZEVsZW1lbnQpIHx8IG51bGw7CiAgICB9KTsKICB9CgogIGRlc3Ryb3koKSB7CiAgICB0aGlzLl9vYnNlcnZlci5zdG9wTGlzdGVuaW5nKCk7CiAgfQogIC8qKgogICAqIEBwYXJhbSB7bW9kdWxlOndpZGdldC93aWRnZXRyZXNpemV+UmVzaXplck9wdGlvbnN9IFtvcHRpb25zXSBSZXNpemVyIG9wdGlvbnMuCiAgICogQHJldHVybnMge21vZHVsZTp3aWRnZXQvd2lkZ2V0cmVzaXplL3Jlc2l6ZXJ+UmVzaXplcn0KICAgKi8KCgogIGF0dGFjaFRvKG9wdGlvbnMpIHsKICAgIGNvbnN0IHJlc2l6ZXIgPSBuZXcgUmVzaXplcihvcHRpb25zKTsKICAgIHJlc2l6ZXIuYXR0YWNoKCk7CgogICAgdGhpcy5fcmVzaXplcnMuc2V0KG9wdGlvbnMudmlld0VsZW1lbnQsIHJlc2l6ZXIpOwoKICAgIHJldHVybiByZXNpemVyOwogIH0KICAvKioKICAgKiBSZXR1cm5zIGEgcmVzaXplciB0aGF0IGNvbnRhaW5zIGEgZ2l2ZW4gcmVzaXplIGhhbmRsZS4KICAgKgogICAqIEBwcm90ZWN0ZWQKICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBkb21SZXNpemVIYW5kbGUKICAgKiBAcmV0dXJucyB7bW9kdWxlOndpZGdldC93aWRnZXRyZXNpemUvcmVzaXplcn5SZXNpemVyfQogICAqLwoKCiAgX2dldFJlc2l6ZXJCeUhhbmRsZShkb21SZXNpemVIYW5kbGUpIHsKICAgIGZvciAoY29uc3QgcmVzaXplciBvZiB0aGlzLl9yZXNpemVycy52YWx1ZXMoKSkgewogICAgICBpZiAocmVzaXplci5jb250YWluc0hhbmRsZShkb21SZXNpemVIYW5kbGUpKSB7CiAgICAgICAgcmV0dXJuIHJlc2l6ZXI7CiAgICAgIH0KICAgIH0KICB9CiAgLyoqCiAgICogUmV0dXJucyBhIHJlc2l6ZXIgY3JlYXRlZCBmb3IgYSBnaXZlbiB2aWV3IGVsZW1lbnQgKHdpZGdldCBlbGVtZW50KS4KICAgKgogICAqIEBwcm90ZWN0ZWQKICAgKiBAcGFyYW0ge21vZHVsZTplbmdpbmUvdmlldy9jb250YWluZXJlbGVtZW50fkNvbnRhaW5lckVsZW1lbnR9IHZpZXdFbGVtZW50CiAgICogQHJldHVybnMge21vZHVsZTp3aWRnZXQvd2lkZ2V0cmVzaXplL3Jlc2l6ZXJ+UmVzaXplcn0KICAgKi8KCgogIF9nZXRSZXNpemVyQnlWaWV3RWxlbWVudCh2aWV3RWxlbWVudCkgewogICAgcmV0dXJuIHRoaXMuX3Jlc2l6ZXJzLmdldCh2aWV3RWxlbWVudCk7CiAgfQoKfQptaXgoV2lkZ2V0UmVzaXplLCBPYnNlcnZhYmxlTWl4aW4pOwovKioKICogSW50ZXJmYWNlIGRlc2NyaWJpbmcgYSByZXNpemVyLiBJdCBhbGxvd3MgdG8gc3BlY2lmeSB0aGUgcmVzaXppbmcgaG9zdCwgY3VzdG9tIGxvZ2ljIGZvciBjYWxjdWxhdGluZyBhc3BlY3QgcmF0aW8sIGV0Yy4KICoKICogQGludGVyZmFjZSBSZXNpemVyT3B0aW9ucwogKi8KCi8qKgogKiBAbWVtYmVyIHttb2R1bGU6ZW5naW5lL21vZGVsL2VsZW1lbnR+RWxlbWVudH0gbW9kdWxlOndpZGdldC93aWRnZXRyZXNpemV+UmVzaXplck9wdGlvbnMjbW9kZWxFbGVtZW50CiAqLwoKLyoqCiAqIEBtZW1iZXIge21vZHVsZTplbmdpbmUvdmlldy9jb250YWluZXJlbGVtZW50fkNvbnRhaW5lckVsZW1lbnR9IG1vZHVsZTp3aWRnZXQvd2lkZ2V0cmVzaXplflJlc2l6ZXJPcHRpb25zI3ZpZXdFbGVtZW50CiAqLwoKLyoqCiAqIEBtZW1iZXIge21vZHVsZTplbmdpbmUvdmlldy9kb3duY2FzdHdyaXRlcn5Eb3duY2FzdFdyaXRlcn0gbW9kdWxlOndpZGdldC93aWRnZXRyZXNpemV+UmVzaXplck9wdGlvbnMjZG93bmNhc3RXcml0ZXIKICovCgovKioKICogQSBjYWxsYmFjayB0byBiZSBleGVjdXRlZCBvbmNlIHRoZSByZXNpemluZyBwcm9jZXNzIGlzIGRvbmUuCiAqCiAqIEl0IHJlY2VpdmVzIGEgYE51bWJlcmAgKGBuZXdWYWx1ZWApIGFzIGEgcGFyYW1ldGVyLgogKgogKiBGb3IgZXhhbXBsZSwge0BsaW5rIG1vZHVsZTppbWFnZS9pbWFnZXJlc2l6ZX5JbWFnZVJlc2l6ZX0gdXNlcyBpdCB0byBleGVjdXRlIHRoZSBpbWFnZSByZXNpemUgY29tbWFuZAogKiB3aGljaCBwdXRzIHRoZSBuZXcgdmFsdWUgaW50byB0aGUgbW9kZWwuCiAqCiAqIGBgYGpzCiAqIHsKICoJbW9kZWxFbGVtZW50OiBkYXRhLml0ZW0sCiAqCXZpZXdFbGVtZW50OiB3aWRnZXQsCiAqCWRvd25jYXN0V3JpdGVyOiBjb252ZXJzaW9uQXBpLndyaXRlciwKICoKICoJb25Db21taXQoIG5ld1ZhbHVlICkgewogKgkJZWRpdG9yLmV4ZWN1dGUoICdpbWFnZVJlc2l6ZScsIHsgd2lkdGg6IG5ld1ZhbHVlIH0gKTsKICoJfQogKiB9OwogKiBgYGAKICoKICoKICogQG1lbWJlciB7RnVuY3Rpb259IG1vZHVsZTp3aWRnZXQvd2lkZ2V0cmVzaXplflJlc2l6ZXJPcHRpb25zI29uQ29tbWl0CiAqLwoKLyoqCiAqIEBtZW1iZXIge0Z1bmN0aW9ufSBtb2R1bGU6d2lkZ2V0L3dpZGdldHJlc2l6ZX5SZXNpemVyT3B0aW9ucyNnZXRSZXNpemVIb3N0CiAqLwoKLyoqCiAqIEBtZW1iZXIge0Z1bmN0aW9ufSBtb2R1bGU6d2lkZ2V0L3dpZGdldHJlc2l6ZX5SZXNpemVyT3B0aW9ucyNpc0NlbnRlcmVkCiAqLw=="},{"version":3,"sources":["/Users/antonyching/Desktop/project/new-builder-demo/node_modules/@ckeditor/ckeditor5-widget/src/widgetresize.js"],"names":["Plugin","Resizer","DomEmitterMixin","global","ObservableMixin","mix","throttle","WidgetResize","pluginName","init","set","_resizers","Map","domDocument","window","document","editor","model","schema","setAttributeProperties","isFormatting","_observer","Object","create","listenTo","event","domEventData","isResizeHandle","target","resizeHandle","_activeResizer","_getResizerByHandle","begin","updateSize","commit","redrawFocusedResizer","_visibleResizer","redraw","redrawFocusedResizerThrottled","on","ui","viewSelection","editing","view","selection","selectedElement","getSelectedElement","_getResizerByViewElement","destroy","stopListening","attachTo","options","resizer","attach","viewElement","domResizeHandle","values","containsHandle","get"],"mappings":"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","sourcesContent":["/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module widget/widgetresize\n */\n\nimport Plugin from '@ckeditor/ckeditor5-core/src/plugin';\nimport Resizer from './widgetresize/resizer';\nimport DomEmitterMixin from '@ckeditor/ckeditor5-utils/src/dom/emittermixin';\nimport global from '@ckeditor/ckeditor5-utils/src/dom/global';\nimport ObservableMixin from '@ckeditor/ckeditor5-utils/src/observablemixin';\nimport mix from '@ckeditor/ckeditor5-utils/src/mix';\nimport { throttle } from 'lodash-es';\n\nimport '../theme/widgetresize.css';\n\n/**\n * The widget resize feature plugin.\n *\n * Use the {@link module:widget/widgetresize~WidgetResize#attachTo} method to create a resizer for the specified widget.\n *\n * @extends module:core/plugin~Plugin\n * @mixes module:utils/observablemixin~ObservableMixin\n */\nexport default class WidgetResize extends Plugin {\n\t/**\n\t * @inheritDoc\n\t */\n\tstatic get pluginName() {\n\t\treturn 'WidgetResize';\n\t}\n\n\tinit() {\n\t\t/**\n\t\t * The currently visible resizer.\n\t\t *\n\t\t * @protected\n\t\t * @observable\n\t\t * @member {module:widget/widgetresize/resizer~Resizer|null} #_visibleResizer\n\t\t */\n\t\tthis.set( '_visibleResizer', null );\n\n\t\t/**\n\t\t * References an active resizer.\n\t\t *\n\t\t * Active resizer means a resizer which handle is actively used by the end user.\n\t\t *\n\t\t * @protected\n\t\t * @observable\n\t\t * @member {module:widget/widgetresize/resizer~Resizer|null} #_activeResizer\n\t\t */\n\t\tthis.set( '_activeResizer', null );\n\n\t\t/**\n\t\t * A map of resizers created using this plugin instance.\n\t\t *\n\t\t * @private\n\t\t * @type {Map.<module:engine/view/containerelement~ContainerElement, module:widget/widgetresize/resizer~Resizer>}\n\t\t */\n\t\tthis._resizers = new Map();\n\n\t\tconst domDocument = global.window.document;\n\n\t\tthis.editor.model.schema.setAttributeProperties( 'width', {\n\t\t\tisFormatting: true\n\t\t} );\n\n\t\tthis._observer = Object.create( DomEmitterMixin );\n\n\t\tthis._observer.listenTo( domDocument, 'mousedown', ( event, domEventData ) => {\n\t\t\tif ( !Resizer.isResizeHandle( domEventData.target ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst resizeHandle = domEventData.target;\n\n\t\t\tthis._activeResizer = this._getResizerByHandle( resizeHandle );\n\n\t\t\tif ( this._activeResizer ) {\n\t\t\t\tthis._activeResizer.begin( resizeHandle );\n\t\t\t}\n\t\t} );\n\n\t\tthis._observer.listenTo( domDocument, 'mousemove', ( event, domEventData ) => {\n\t\t\tif ( this._activeResizer ) {\n\t\t\t\tthis._activeResizer.updateSize( domEventData );\n\t\t\t}\n\t\t} );\n\n\t\tthis._observer.listenTo( domDocument, 'mouseup', () => {\n\t\t\tif ( this._activeResizer ) {\n\t\t\t\tthis._activeResizer.commit();\n\n\t\t\t\tthis._activeResizer = null;\n\t\t\t}\n\t\t} );\n\n\t\tconst redrawFocusedResizer = () => {\n\t\t\tif ( this._visibleResizer ) {\n\t\t\t\tthis._visibleResizer.redraw();\n\t\t\t}\n\t\t};\n\n\t\tconst redrawFocusedResizerThrottled = throttle( redrawFocusedResizer, 200 ); // 5fps\n\n\t\t// Redraws occurring upon a change of visible resizer must not be throttled, as it is crucial for the initial\n\t\t// render. Without it the resizer frame would be misaligned with resizing host for a fraction of second.\n\t\tthis.on( 'change:_visibleResizer', redrawFocusedResizer );\n\n\t\t// Redrawing on any change of the UI of the editor (including content changes).\n\t\tthis.editor.ui.on( 'update', redrawFocusedResizerThrottled );\n\n\t\t// Resizers need to be redrawn upon window resize, because new window might shrink resize host.\n\t\tthis._observer.listenTo( global.window, 'resize', redrawFocusedResizerThrottled );\n\n\t\tconst viewSelection = this.editor.editing.view.document.selection;\n\n\t\tviewSelection.on( 'change', () => {\n\t\t\tconst selectedElement = viewSelection.getSelectedElement();\n\n\t\t\tthis._visibleResizer = this._getResizerByViewElement( selectedElement ) || null;\n\t\t} );\n\t}\n\n\tdestroy() {\n\t\tthis._observer.stopListening();\n\t}\n\n\t/**\n\t * @param {module:widget/widgetresize~ResizerOptions} [options] Resizer options.\n\t * @returns {module:widget/widgetresize/resizer~Resizer}\n\t */\n\tattachTo( options ) {\n\t\tconst resizer = new Resizer( options );\n\n\t\tresizer.attach();\n\n\t\tthis._resizers.set( options.viewElement, resizer );\n\n\t\treturn resizer;\n\t}\n\n\t/**\n\t * Returns a resizer that contains a given resize handle.\n\t *\n\t * @protected\n\t * @param {HTMLElement} domResizeHandle\n\t * @returns {module:widget/widgetresize/resizer~Resizer}\n\t */\n\t_getResizerByHandle( domResizeHandle ) {\n\t\tfor ( const resizer of this._resizers.values() ) {\n\t\t\tif ( resizer.containsHandle( domResizeHandle ) ) {\n\t\t\t\treturn resizer;\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Returns a resizer created for a given view element (widget element).\n\t *\n\t * @protected\n\t * @param {module:engine/view/containerelement~ContainerElement} viewElement\n\t * @returns {module:widget/widgetresize/resizer~Resizer}\n\t */\n\t_getResizerByViewElement( viewElement ) {\n\t\treturn this._resizers.get( viewElement );\n\t}\n}\n\nmix( WidgetResize, ObservableMixin );\n\n/**\n * Interface describing a resizer. It allows to specify the resizing host, custom logic for calculating aspect ratio, etc.\n *\n * @interface ResizerOptions\n */\n\n/**\n * @member {module:engine/model/element~Element} module:widget/widgetresize~ResizerOptions#modelElement\n */\n\n/**\n * @member {module:engine/view/containerelement~ContainerElement} module:widget/widgetresize~ResizerOptions#viewElement\n */\n\n/**\n * @member {module:engine/view/downcastwriter~DowncastWriter} module:widget/widgetresize~ResizerOptions#downcastWriter\n */\n\n/**\n * A callback to be executed once the resizing process is done.\n *\n * It receives a `Number` (`newValue`) as a parameter.\n *\n * For example, {@link module:image/imageresize~ImageResize} uses it to execute the image resize command\n * which puts the new value into the model.\n *\n * ```js\n * {\n *\tmodelElement: data.item,\n *\tviewElement: widget,\n *\tdowncastWriter: conversionApi.writer,\n *\n *\tonCommit( newValue ) {\n *\t\teditor.execute( 'imageResize', { width: newValue } );\n *\t}\n * };\n * ```\n *\n *\n * @member {Function} module:widget/widgetresize~ResizerOptions#onCommit\n */\n\n/**\n * @member {Function} module:widget/widgetresize~ResizerOptions#getResizeHost\n */\n\n/**\n * @member {Function} module:widget/widgetresize~ResizerOptions#isCentered\n */\n"]}]}