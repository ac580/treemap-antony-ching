{"remainingRequest":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/babel-loader/lib/index.js!/Users/antonyching/Desktop/project/new-builder-demo/node_modules/@ckeditor/ckeditor5-engine/src/model/markercollection.js","dependencies":[{"path":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/@ckeditor/ckeditor5-engine/src/model/markercollection.js","mtime":499162500000},{"path":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/@ckeditor/ckeditor5-dev-webpack-plugin/lib/translatesourceloader.js","mtime":499162500000},{"path":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:LyoqCiAqIEBsaWNlbnNlIENvcHlyaWdodCAoYykgMjAwMy0yMDE5LCBDS1NvdXJjZSAtIEZyZWRlcmljbyBLbmFiYmVuLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKiBGb3IgbGljZW5zaW5nLCBzZWUgTElDRU5TRS5tZCBvciBodHRwczovL2NrZWRpdG9yLmNvbS9sZWdhbC9ja2VkaXRvci1vc3MtbGljZW5zZQogKi8KCi8qKgogKiBAbW9kdWxlIGVuZ2luZS9tb2RlbC9tYXJrZXJjb2xsZWN0aW9uCiAqLwppbXBvcnQgTGl2ZVJhbmdlIGZyb20gJy4vbGl2ZXJhbmdlJzsKaW1wb3J0IEVtaXR0ZXJNaXhpbiBmcm9tICdAY2tlZGl0b3IvY2tlZGl0b3I1LXV0aWxzL3NyYy9lbWl0dGVybWl4aW4nOwppbXBvcnQgQ0tFZGl0b3JFcnJvciBmcm9tICdAY2tlZGl0b3IvY2tlZGl0b3I1LXV0aWxzL3NyYy9ja2VkaXRvcmVycm9yJzsKaW1wb3J0IG1peCBmcm9tICdAY2tlZGl0b3IvY2tlZGl0b3I1LXV0aWxzL3NyYy9taXgnOwovKioKICogVGhlIGNvbGxlY3Rpb24gb2YgYWxsIHtAbGluayBtb2R1bGU6ZW5naW5lL21vZGVsL21hcmtlcmNvbGxlY3Rpb25+TWFya2VyIG1hcmtlcnN9IGF0dGFjaGVkIHRvIHRoZSBkb2N1bWVudC4KICogSXQgbGV0cyB5b3Uge0BsaW5rIG1vZHVsZTplbmdpbmUvbW9kZWwvbWFya2VyY29sbGVjdGlvbn5NYXJrZXJDb2xsZWN0aW9uI2dldCBnZXR9IG1hcmtlcnMgb3IgdHJhY2sgdGhlbSB1c2luZwogKiB7QGxpbmsgbW9kdWxlOmVuZ2luZS9tb2RlbC9tYXJrZXJjb2xsZWN0aW9ufk1hcmtlckNvbGxlY3Rpb24jZXZlbnQ6dXBkYXRlfSBldmVudC4KICoKICogVG8gY3JlYXRlLCBjaGFuZ2Ugb3IgcmVtb3ZlIG1ha2VycyB1c2Uge0BsaW5rIG1vZHVsZTplbmdpbmUvbW9kZWwvd3JpdGVyfldyaXRlciBtb2RlbCB3cml0ZXJzJ30gbWV0aG9kczoKICoge0BsaW5rIG1vZHVsZTplbmdpbmUvbW9kZWwvd3JpdGVyfldyaXRlciNhZGRNYXJrZXJ9IG9yIHtAbGluayBtb2R1bGU6ZW5naW5lL21vZGVsL3dyaXRlcn5Xcml0ZXIjcmVtb3ZlTWFya2VyfS4gU2luY2UKICogdGhlIHdyaXRlciBpcyB0aGUgb25seSBwcm9wZXIgd2F5IHRvIGNoYW5nZSB0aGUgZGF0YSBtb2RlbCBpdCBpcyBub3QgcG9zc2libGUgdG8gY2hhbmdlIG1hcmtlcnMgZGlyZWN0bHkgdXNpbmcgdGhpcwogKiBjb2xsZWN0aW9uLiBBbGwgbWFya2VycyBjcmVhdGVkIGJ5IHRoZSB3cml0ZXIgd2lsbCBiZSBhdXRvbWF0aWNhbGx5IGFkZGVkIHRvIHRoaXMgY29sbGVjdGlvbi4KICoKICogQnkgZGVmYXVsdCB0aGVyZSBpcyBvbmUgbWFya2VyIGNvbGxlY3Rpb24gYXZhaWxhYmxlIGFzIHtAbGluayBtb2R1bGU6ZW5naW5lL21vZGVsL21vZGVsfk1vZGVsI21hcmtlcnMgbW9kZWwgcHJvcGVydHl9LgogKgogKiBAc2VlIG1vZHVsZTplbmdpbmUvbW9kZWwvbWFya2VyY29sbGVjdGlvbn5NYXJrZXIKICovCgpleHBvcnQgZGVmYXVsdCBjbGFzcyBNYXJrZXJDb2xsZWN0aW9uIHsKICAvKioKICAgKiBDcmVhdGVzIGEgbWFya2VycyBjb2xsZWN0aW9uLgogICAqLwogIGNvbnN0cnVjdG9yKCkgewogICAgLyoqCiAgICAgKiBTdG9yZXMge0BsaW5rIH5NYXJrZXIgbWFya2Vyc30gYWRkZWQgdG8gdGhlIGNvbGxlY3Rpb24uCiAgICAgKgogICAgICogQHByaXZhdGUKICAgICAqIEBtZW1iZXIge01hcH0gI19tYXJrZXJzCiAgICAgKi8KICAgIHRoaXMuX21hcmtlcnMgPSBuZXcgTWFwKCk7CiAgfQogIC8qKgogICAqIEl0ZXJhYmxlIGludGVyZmFjZS4KICAgKgogICAqIEl0ZXJhdGVzIG92ZXIgYWxsIHtAbGluayB+TWFya2VyIG1hcmtlcnN9IGFkZGVkIHRvIHRoZSBjb2xsZWN0aW9uLgogICAqCiAgICogQHJldHVybnMge0l0ZXJhYmxlfQogICAqLwoKCiAgW1N5bWJvbC5pdGVyYXRvcl0oKSB7CiAgICByZXR1cm4gdGhpcy5fbWFya2Vycy52YWx1ZXMoKTsKICB9CiAgLyoqCiAgICogQ2hlY2tzIGlmIG1hcmtlciB3aXRoIGdpdmVuIGBtYXJrZXJOYW1lYCBpcyBpbiB0aGUgY29sbGVjdGlvbi4KICAgKgogICAqIEBwYXJhbSB7U3RyaW5nfSBtYXJrZXJOYW1lIE1hcmtlciBuYW1lLgogICAqIEByZXR1cm5zIHtCb29sZWFufSBgdHJ1ZWAgaWYgbWFya2VyIHdpdGggZ2l2ZW4gYG1hcmtlck5hbWVgIGlzIGluIHRoZSBjb2xsZWN0aW9uLCBgZmFsc2VgIG90aGVyd2lzZS4KICAgKi8KCgogIGhhcyhtYXJrZXJOYW1lKSB7CiAgICByZXR1cm4gdGhpcy5fbWFya2Vycy5oYXMobWFya2VyTmFtZSk7CiAgfQogIC8qKgogICAqIFJldHVybnMge0BsaW5rIH5NYXJrZXIgbWFya2VyfSB3aXRoIGdpdmVuIGBtYXJrZXJOYW1lYC4KICAgKgogICAqIEBwYXJhbSB7U3RyaW5nfSBtYXJrZXJOYW1lIE5hbWUgb2YgbWFya2VyIHRvIGdldC4KICAgKiBAcmV0dXJucyB7bW9kdWxlOmVuZ2luZS9tb2RlbC9tYXJrZXJjb2xsZWN0aW9ufk1hcmtlcnxudWxsfSBNYXJrZXIgd2l0aCBnaXZlbiBuYW1lIG9yIGBudWxsYCBpZiBzdWNoIG1hcmtlciB3YXMKICAgKiBub3QgYWRkZWQgdG8gdGhlIGNvbGxlY3Rpb24uCiAgICovCgoKICBnZXQobWFya2VyTmFtZSkgewogICAgcmV0dXJuIHRoaXMuX21hcmtlcnMuZ2V0KG1hcmtlck5hbWUpIHx8IG51bGw7CiAgfQogIC8qKgogICAqIENyZWF0ZXMgYW5kIGFkZHMgYSB7QGxpbmsgfk1hcmtlciBtYXJrZXJ9IHRvIHRoZSBgTWFya2VyQ29sbGVjdGlvbmAgd2l0aCBnaXZlbiBuYW1lIG9uIGdpdmVuCiAgICoge0BsaW5rIG1vZHVsZTplbmdpbmUvbW9kZWwvcmFuZ2V+UmFuZ2UgcmFuZ2V9LgogICAqCiAgICogSWYgYE1hcmtlckNvbGxlY3Rpb25gIGFscmVhZHkgaGFkIGEgbWFya2VyIHdpdGggZ2l2ZW4gbmFtZSAob3Ige0BsaW5rIH5NYXJrZXIgbWFya2VyfSB3YXMgcGFzc2VkKSwgdGhlIG1hcmtlciBpbgogICAqIGNvbGxlY3Rpb24gaXMgdXBkYXRlZCBhbmQge0BsaW5rIG1vZHVsZTplbmdpbmUvbW9kZWwvbWFya2VyY29sbGVjdGlvbn5NYXJrZXJDb2xsZWN0aW9uI2V2ZW50OnVwZGF0ZX0gZXZlbnQgaXMgZmlyZWQKICAgKiBidXQgb25seSBpZiB0aGVyZSB3YXMgYSBjaGFuZ2UgKG1hcmtlciByYW5nZSBvciB7QGxpbmsgbW9kdWxlOmVuZ2luZS9tb2RlbC9tYXJrZXJjb2xsZWN0aW9ufk1hcmtlciNtYW5hZ2VkVXNpbmdPcGVyYXRpb25zfQogICAqIGZsYWcgaGFzIGNoYW5nZWQuCiAgICoKICAgKiBAcHJvdGVjdGVkCiAgICogQGZpcmVzIG1vZHVsZTplbmdpbmUvbW9kZWwvbWFya2VyY29sbGVjdGlvbn5NYXJrZXJDb2xsZWN0aW9uI2V2ZW50OnVwZGF0ZQogICAqIEBwYXJhbSB7U3RyaW5nfG1vZHVsZTplbmdpbmUvbW9kZWwvbWFya2VyY29sbGVjdGlvbn5NYXJrZXJ9IG1hcmtlck9yTmFtZSBOYW1lIG9mIG1hcmtlciB0byBzZXQgb3IgbWFya2VyIGluc3RhbmNlIHRvIHVwZGF0ZS4KICAgKiBAcGFyYW0ge21vZHVsZTplbmdpbmUvbW9kZWwvcmFuZ2V+UmFuZ2V9IHJhbmdlIE1hcmtlciByYW5nZS4KICAgKiBAcGFyYW0ge0Jvb2xlYW59IFttYW5hZ2VkVXNpbmdPcGVyYXRpb25zPWZhbHNlXSBTcGVjaWZpZXMgd2hldGhlciB0aGUgbWFya2VyIGlzIG1hbmFnZWQgdXNpbmcgb3BlcmF0aW9ucy4KICAgKiBAcGFyYW0ge0Jvb2xlYW59IFthZmZlY3RzRGF0YT1mYWxzZV0gU3BlY2lmaWVzIHdoZXRoZXIgdGhlIG1hcmtlciBhZmZlY3RzIHRoZSBkYXRhIHByb2R1Y2VkIGJ5IHRoZSBkYXRhIHBpcGVsaW5lCiAgICogKGlzIHBlcnNpc3RlZCBpbiB0aGUgZWRpdG9yJ3MgZGF0YSkuCiAgICogQHJldHVybnMge21vZHVsZTplbmdpbmUvbW9kZWwvbWFya2VyY29sbGVjdGlvbn5NYXJrZXJ9IGBNYXJrZXJgIGluc3RhbmNlIHdoaWNoIHdhcyBhZGRlZCBvciB1cGRhdGVkLgogICAqLwoKCiAgX3NldChtYXJrZXJPck5hbWUsIHJhbmdlLCBtYW5hZ2VkVXNpbmdPcGVyYXRpb25zID0gZmFsc2UsIGFmZmVjdHNEYXRhID0gZmFsc2UpIHsKICAgIGNvbnN0IG1hcmtlck5hbWUgPSBtYXJrZXJPck5hbWUgaW5zdGFuY2VvZiBNYXJrZXIgPyBtYXJrZXJPck5hbWUubmFtZSA6IG1hcmtlck9yTmFtZTsKCiAgICBjb25zdCBvbGRNYXJrZXIgPSB0aGlzLl9tYXJrZXJzLmdldChtYXJrZXJOYW1lKTsKCiAgICBpZiAob2xkTWFya2VyKSB7CiAgICAgIGNvbnN0IG9sZFJhbmdlID0gb2xkTWFya2VyLmdldFJhbmdlKCk7CiAgICAgIGxldCBoYXNDaGFuZ2VkID0gZmFsc2U7CgogICAgICBpZiAoIW9sZFJhbmdlLmlzRXF1YWwocmFuZ2UpKSB7CiAgICAgICAgb2xkTWFya2VyLl9hdHRhY2hMaXZlUmFuZ2UoTGl2ZVJhbmdlLmZyb21SYW5nZShyYW5nZSkpOwoKICAgICAgICBoYXNDaGFuZ2VkID0gdHJ1ZTsKICAgICAgfQoKICAgICAgaWYgKG1hbmFnZWRVc2luZ09wZXJhdGlvbnMgIT0gb2xkTWFya2VyLm1hbmFnZWRVc2luZ09wZXJhdGlvbnMpIHsKICAgICAgICBvbGRNYXJrZXIuX21hbmFnZWRVc2luZ09wZXJhdGlvbnMgPSBtYW5hZ2VkVXNpbmdPcGVyYXRpb25zOwogICAgICAgIGhhc0NoYW5nZWQgPSB0cnVlOwogICAgICB9CgogICAgICBpZiAodHlwZW9mIGFmZmVjdHNEYXRhID09PSAnYm9vbGVhbicgJiYgYWZmZWN0c0RhdGEgIT0gb2xkTWFya2VyLmFmZmVjdHNEYXRhKSB7CiAgICAgICAgb2xkTWFya2VyLl9hZmZlY3RzRGF0YSA9IGFmZmVjdHNEYXRhOwogICAgICAgIGhhc0NoYW5nZWQgPSB0cnVlOwogICAgICB9CgogICAgICBpZiAoaGFzQ2hhbmdlZCkgewogICAgICAgIHRoaXMuZmlyZSgndXBkYXRlOicgKyBtYXJrZXJOYW1lLCBvbGRNYXJrZXIsIG9sZFJhbmdlLCByYW5nZSk7CiAgICAgIH0KCiAgICAgIHJldHVybiBvbGRNYXJrZXI7CiAgICB9CgogICAgY29uc3QgbGl2ZVJhbmdlID0gTGl2ZVJhbmdlLmZyb21SYW5nZShyYW5nZSk7CiAgICBjb25zdCBtYXJrZXIgPSBuZXcgTWFya2VyKG1hcmtlck5hbWUsIGxpdmVSYW5nZSwgbWFuYWdlZFVzaW5nT3BlcmF0aW9ucywgYWZmZWN0c0RhdGEpOwoKICAgIHRoaXMuX21hcmtlcnMuc2V0KG1hcmtlck5hbWUsIG1hcmtlcik7CgogICAgdGhpcy5maXJlKCd1cGRhdGU6JyArIG1hcmtlck5hbWUsIG1hcmtlciwgbnVsbCwgcmFuZ2UpOwogICAgcmV0dXJuIG1hcmtlcjsKICB9CiAgLyoqCiAgICogUmVtb3ZlcyBnaXZlbiB7QGxpbmsgfk1hcmtlciBtYXJrZXJ9IG9yIGEgbWFya2VyIHdpdGggZ2l2ZW4gbmFtZSBmcm9tIHRoZSBgTWFya2VyQ29sbGVjdGlvbmAuCiAgICoKICAgKiBAcHJvdGVjdGVkCiAgICogQGZpcmVzIG1vZHVsZTplbmdpbmUvbW9kZWwvbWFya2VyY29sbGVjdGlvbn5NYXJrZXJDb2xsZWN0aW9uI2V2ZW50OnVwZGF0ZQogICAqIEBwYXJhbSB7U3RyaW5nfSBtYXJrZXJPck5hbWUgTWFya2VyIG9yIG5hbWUgb2YgYSBtYXJrZXIgdG8gcmVtb3ZlLgogICAqIEByZXR1cm5zIHtCb29sZWFufSBgdHJ1ZWAgaWYgbWFya2VyIHdhcyBmb3VuZCBhbmQgcmVtb3ZlZCwgYGZhbHNlYCBvdGhlcndpc2UuCiAgICovCgoKICBfcmVtb3ZlKG1hcmtlck9yTmFtZSkgewogICAgY29uc3QgbWFya2VyTmFtZSA9IG1hcmtlck9yTmFtZSBpbnN0YW5jZW9mIE1hcmtlciA/IG1hcmtlck9yTmFtZS5uYW1lIDogbWFya2VyT3JOYW1lOwoKICAgIGNvbnN0IG9sZE1hcmtlciA9IHRoaXMuX21hcmtlcnMuZ2V0KG1hcmtlck5hbWUpOwoKICAgIGlmIChvbGRNYXJrZXIpIHsKICAgICAgdGhpcy5fbWFya2Vycy5kZWxldGUobWFya2VyTmFtZSk7CgogICAgICB0aGlzLmZpcmUoJ3VwZGF0ZTonICsgbWFya2VyTmFtZSwgb2xkTWFya2VyLCBvbGRNYXJrZXIuZ2V0UmFuZ2UoKSwgbnVsbCk7CgogICAgICB0aGlzLl9kZXN0cm95TWFya2VyKG9sZE1hcmtlcik7CgogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICByZXR1cm4gZmFsc2U7CiAgfQogIC8qKgogICAqIEZpcmVzIGFuIHtAbGluayBtb2R1bGU6ZW5naW5lL21vZGVsL21hcmtlcmNvbGxlY3Rpb25+TWFya2VyQ29sbGVjdGlvbiNldmVudDp1cGRhdGV9IGV2ZW50IGZvciB0aGUgZ2l2ZW4ge0BsaW5rIH5NYXJrZXIgbWFya2VyfQogICAqIGJ1dCBkb2VzIG5vdCBjaGFuZ2UgdGhlIG1hcmtlci4gVXNlZnVsIHRvIGZvcmNlIHtAbGluayBtb2R1bGU6ZW5naW5lL2NvbnZlcnNpb24vZG93bmNhc3RkaXNwYXRjaGVyfkRvd25jYXN0RGlzcGF0Y2hlciBkb3duY2FzdAogICAqIGNvbnZlcnNpb259IGZvciB0aGUgbWFya2VyLgogICAqCiAgICogQHByb3RlY3RlZAogICAqIEBmaXJlcyBtb2R1bGU6ZW5naW5lL21vZGVsL21hcmtlcmNvbGxlY3Rpb25+TWFya2VyQ29sbGVjdGlvbiNldmVudDp1cGRhdGUKICAgKiBAcGFyYW0ge1N0cmluZ30gbWFya2VyT3JOYW1lIE1hcmtlciBvciBuYW1lIG9mIGEgbWFya2VyIHRvIHJlZnJlc2guCiAgICovCgoKICBfcmVmcmVzaChtYXJrZXJPck5hbWUpIHsKICAgIGNvbnN0IG1hcmtlck5hbWUgPSBtYXJrZXJPck5hbWUgaW5zdGFuY2VvZiBNYXJrZXIgPyBtYXJrZXJPck5hbWUubmFtZSA6IG1hcmtlck9yTmFtZTsKCiAgICBjb25zdCBtYXJrZXIgPSB0aGlzLl9tYXJrZXJzLmdldChtYXJrZXJOYW1lKTsKCiAgICBpZiAoIW1hcmtlcikgewogICAgICB0aHJvdyBuZXcgQ0tFZGl0b3JFcnJvcignbWFya2VyY29sbGVjdGlvbi1yZWZyZXNoLW1hcmtlci1ub3QtZXhpc3RzOiBNYXJrZXIgd2l0aCBwcm92aWRlZCBuYW1lIGRvZXMgbm90IGV4aXN0cy4nLCB0aGlzKTsKICAgIH0KCiAgICBjb25zdCByYW5nZSA9IG1hcmtlci5nZXRSYW5nZSgpOwogICAgdGhpcy5maXJlKCd1cGRhdGU6JyArIG1hcmtlck5hbWUsIG1hcmtlciwgcmFuZ2UsIHJhbmdlLCBtYXJrZXIubWFuYWdlZFVzaW5nT3BlcmF0aW9ucywgbWFya2VyLmFmZmVjdHNEYXRhKTsKICB9CiAgLyoqCiAgICogUmV0dXJucyBpdGVyYXRvciB0aGF0IGl0ZXJhdGVzIG92ZXIgYWxsIG1hcmtlcnMsIHdoaWNoIHJhbmdlcyBjb250YWluIGdpdmVuIHtAbGluayBtb2R1bGU6ZW5naW5lL21vZGVsL3Bvc2l0aW9uflBvc2l0aW9uIHBvc2l0aW9ufS4KICAgKgogICAqIEBwYXJhbSB7bW9kdWxlOmVuZ2luZS9tb2RlbC9wb3NpdGlvbn5Qb3NpdGlvbn0gcG9zaXRpb24KICAgKiBAcmV0dXJucyB7SXRlcmFibGUuPG1vZHVsZTplbmdpbmUvbW9kZWwvbWFya2VyY29sbGVjdGlvbn5NYXJrZXI+fQogICAqLwoKCiAgKmdldE1hcmtlcnNBdFBvc2l0aW9uKHBvc2l0aW9uKSB7CiAgICBmb3IgKGNvbnN0IG1hcmtlciBvZiB0aGlzKSB7CiAgICAgIGlmIChtYXJrZXIuZ2V0UmFuZ2UoKS5jb250YWluc1Bvc2l0aW9uKHBvc2l0aW9uKSkgewogICAgICAgIHlpZWxkIG1hcmtlcjsKICAgICAgfQogICAgfQogIH0KICAvKioKICAgKiBSZXR1cm5zIGl0ZXJhdG9yIHRoYXQgaXRlcmF0ZXMgb3ZlciBhbGwgbWFya2Vycywgd2hpY2ggaW50ZXJzZWN0cyB3aXRoIGdpdmVuIHtAbGluayBtb2R1bGU6ZW5naW5lL21vZGVsL3JhbmdlflJhbmdlIHJhbmdlfS4KICAgKgogICAqIEBwYXJhbSB7bW9kdWxlOmVuZ2luZS9tb2RlbC9yYW5nZX5SYW5nZX0gcmFuZ2UKICAgKiBAcmV0dXJucyB7SXRlcmFibGUuPG1vZHVsZTplbmdpbmUvbW9kZWwvbWFya2VyY29sbGVjdGlvbn5NYXJrZXI+fQogICAqLwoKCiAgKmdldE1hcmtlcnNJbnRlcnNlY3RpbmdSYW5nZShyYW5nZSkgewogICAgZm9yIChjb25zdCBtYXJrZXIgb2YgdGhpcykgewogICAgICBpZiAobWFya2VyLmdldFJhbmdlKCkuZ2V0SW50ZXJzZWN0aW9uKHJhbmdlKSAhPT0gbnVsbCkgewogICAgICAgIHlpZWxkIG1hcmtlcjsKICAgICAgfQogICAgfQogIH0KICAvKioKICAgKiBEZXN0cm95cyBtYXJrZXIgY29sbGVjdGlvbiBhbmQgYWxsIG1hcmtlcnMgaW5zaWRlIGl0LgogICAqLwoKCiAgZGVzdHJveSgpIHsKICAgIGZvciAoY29uc3QgbWFya2VyIG9mIHRoaXMuX21hcmtlcnMudmFsdWVzKCkpIHsKICAgICAgdGhpcy5fZGVzdHJveU1hcmtlcihtYXJrZXIpOwogICAgfQoKICAgIHRoaXMuX21hcmtlcnMgPSBudWxsOwogICAgdGhpcy5zdG9wTGlzdGVuaW5nKCk7CiAgfQogIC8qKgogICAqIEl0ZXJhdGVzIG92ZXIgYWxsIG1hcmtlcnMgdGhhdCBzdGFydHMgd2l0aCBnaXZlbiBgcHJlZml4YC4KICAgKgogICAqCQljb25zdCBtYXJrZXJGb29BID0gbWFya2Vyc0NvbGxlY3Rpb24uc2V0KCAnZm9vOmEnLCByYW5nZUZvb0EgKTsKICAgKgkJY29uc3QgbWFya2VyRm9vQiA9IG1hcmtlcnNDb2xsZWN0aW9uLnNldCggJ2ZvbzpiJywgcmFuZ2VGb29CICk7CiAgICoJCWNvbnN0IG1hcmtlckJhckEgPSBtYXJrZXJzQ29sbGVjdGlvbi5zZXQoICdiYXI6YScsIHJhbmdlQmFyQSApOwogICAqCQljb25zdCBtYXJrZXJGb29CYXJBID0gbWFya2Vyc0NvbGxlY3Rpb24uc2V0KCAnZm9vYmFyOmEnLCByYW5nZUZvb0JhckEgKTsKICAgKgkJQXJyYXkuZnJvbSggbWFya2Vyc0NvbGxlY3Rpb24uZ2V0TWFya2Vyc0dyb3VwKCAnZm9vJyApICk7IC8vIFsgbWFya2VyRm9vQSwgbWFya2VyRm9vQiBdCiAgICoJCUFycmF5LmZyb20oIG1hcmtlcnNDb2xsZWN0aW9uLmdldE1hcmtlcnNHcm91cCggJ2EnICkgKTsgLy8gW10KICAgKgogICAqIEBwYXJhbSBwcmVmaXgKICAgKiBAcmV0dXJucyB7SXRlcmFibGUuPG1vZHVsZTplbmdpbmUvbW9kZWwvbWFya2VyY29sbGVjdGlvbn5NYXJrZXI+fQogICAqLwoKCiAgKmdldE1hcmtlcnNHcm91cChwcmVmaXgpIHsKICAgIGZvciAoY29uc3QgbWFya2VyIG9mIHRoaXMuX21hcmtlcnMudmFsdWVzKCkpIHsKICAgICAgaWYgKG1hcmtlci5uYW1lLnN0YXJ0c1dpdGgocHJlZml4ICsgJzonKSkgewogICAgICAgIHlpZWxkIG1hcmtlcjsKICAgICAgfQogICAgfQogIH0KICAvKioKICAgKiBEZXN0cm95cyB0aGUgbWFya2VyLgogICAqCiAgICogQHByaXZhdGUKICAgKiBAcGFyYW0ge21vZHVsZTplbmdpbmUvbW9kZWwvbWFya2VyY29sbGVjdGlvbn5NYXJrZXJ9IG1hcmtlciBNYXJrZXIgdG8gZGVzdHJveS4KICAgKi8KCgogIF9kZXN0cm95TWFya2VyKG1hcmtlcikgewogICAgbWFya2VyLnN0b3BMaXN0ZW5pbmcoKTsKCiAgICBtYXJrZXIuX2RldGFjaExpdmVSYW5nZSgpOwogIH0KICAvKioKICAgKiBGaXJlZCB3aGVuZXZlciBtYXJrZXIgaXMgYWRkZWQsIHVwZGF0ZWQgb3IgcmVtb3ZlZCBmcm9tIGBNYXJrZXJDb2xsZWN0aW9uYC4KICAgKgogICAqIEBldmVudCB1cGRhdGUKICAgKiBAcGFyYW0ge21vZHVsZTplbmdpbmUvbW9kZWwvbWFya2VyY29sbGVjdGlvbn5NYXJrZXJ9IG1hcmtlciBVcGRhdGVkIE1hcmtlci4KICAgKiBAcGFyYW0ge21vZHVsZTplbmdpbmUvbW9kZWwvcmFuZ2V+UmFuZ2V8bnVsbH0gb2xkUmFuZ2UgTWFya2VyIHJhbmdlIGJlZm9yZSB0aGUgdXBkYXRlLiBXaGVuIGlzIG5vdCBkZWZpbmVkIGl0CiAgICogbWVhbnMgdGhhdCBtYXJrZXIgaXMganVzdCBhZGRlZC4KICAgKiBAcGFyYW0ge21vZHVsZTplbmdpbmUvbW9kZWwvcmFuZ2V+UmFuZ2V8bnVsbH0gbmV3UmFuZ2UgTWFya2VyIHJhbmdlIGFmdGVyIHVwZGF0ZS4gV2hlbiBpcyBub3QgZGVmaW5lZCBpdAogICAqIG1lYW5zIHRoYXQgbWFya2VyIGlzIGp1c3QgcmVtb3ZlZC4KICAgKi8KCgp9Cm1peChNYXJrZXJDb2xsZWN0aW9uLCBFbWl0dGVyTWl4aW4pOwovKioKICogYE1hcmtlcmAgaXMgYSBjb250aW51b3VzIHBhcnRzIG9mIG1vZGVsIChsaWtlIGEgcmFuZ2UpLCBpcyBuYW1lZCBhbmQgcmVwcmVzZW50IHNvbWUga2luZCBvZiBpbmZvcm1hdGlvbiBhYm91dCBtYXJrZWQKICogcGFydCBvZiBtb2RlbCBkb2N1bWVudC4gSW4gY29udHJhcnkgdG8ge0BsaW5rIG1vZHVsZTplbmdpbmUvbW9kZWwvbm9kZX5Ob2RlIG5vZGVzfSwgd2hpY2ggYXJlIGJ1aWxkaW5nIGJsb2NrcyBvZgogKiBtb2RlbCBkb2N1bWVudCB0cmVlLCBtYXJrZXJzIGFyZSBub3Qgc3RvcmVkIGRpcmVjdGx5IGluIGRvY3VtZW50IHRyZWUgYnV0IGluCiAqIHtAbGluayBtb2R1bGU6ZW5naW5lL21vZGVsL21vZGVsfk1vZGVsI21hcmtlcnMgbW9kZWwgbWFya2VycycgY29sbGVjdGlvbn0uIFN0aWxsLCB0aGV5IGFyZSBkb2N1bWVudCBkYXRhLCBieSBnaXZpbmcKICogYWRkaXRpb25hbCBtZWFuaW5nIHRvIHRoZSBwYXJ0IG9mIGEgbW9kZWwgZG9jdW1lbnQgYmV0d2VlbiBtYXJrZXIgc3RhcnQgYW5kIG1hcmtlciBlbmQuCiAqCiAqIEluIHRoaXMgc2Vuc2UsIG1hcmtlcnMgYXJlIHNpbWlsYXIgdG8gYWRkaW5nIGFuZCBjb252ZXJ0aW5nIGF0dHJpYnV0ZXMgb24gbm9kZXMuIFRoZSBkaWZmZXJlbmNlIGlzIHRoYXQgYXR0cmlidXRlIGlzCiAqIGNvbm5lY3RlZCB3aXRoIGEgZ2l2ZW4gbm9kZSAoZS5nLiBhIGNoYXJhY3RlciBpcyBib2xkIG5vIG1hdHRlciBpZiBpdCBnZXRzIG1vdmVkIG9yIGNvbnRlbnQgYXJvdW5kIGl0IGNoYW5nZXMpLgogKiBNYXJrZXJzIG9uIHRoZSBvdGhlciBoYW5kIGFyZSBjb250aW51b3VzIHJhbmdlcyBhbmQgYXJlIGNoYXJhY3Rlcml6ZWQgYnkgdGhlaXIgc3RhcnQgYW5kIGVuZCBwb3NpdGlvbi4gVGhpcyBtZWFucyB0aGF0CiAqIGFueSBjaGFyYWN0ZXIgaW4gdGhlIG1hcmtlciBpcyBtYXJrZWQgYnkgdGhlIG1hcmtlci4gRm9yIGV4YW1wbGUsIGlmIGEgY2hhcmFjdGVyIGlzIG1vdmVkIG91dHNpZGUgb2YgbWFya2VyIGl0IHN0b3BzIGJlaW5nCiAqICJzcGVjaWFsIiBhbmQgdGhlIG1hcmtlciBpcyBzaHJ1bmsuIFNpbWlsYXJseSwgd2hlbiBhIGNoYXJhY3RlciBpcyBtb3ZlZCBpbnRvIHRoZSBtYXJrZXIgZnJvbSBvdGhlciBwbGFjZSBpbiBkb2N1bWVudAogKiBtb2RlbCwgaXQgc3RhcnRzIGJlaW5nICJzcGVjaWFsIiBhbmQgdGhlIG1hcmtlciBpcyBlbmxhcmdlZC4KICoKICogQW5vdGhlciB1cHNpZGUgb2YgbWFya2VycyBpcyB0aGF0IGZpbmRpbmcgbWFya2VkIHBhcnQgb2YgZG9jdW1lbnQgaXMgZmFzdCBhbmQgZWFzeS4gVXNpbmcgYXR0cmlidXRlcyB0byBtYXJrIHNvbWUgbm9kZXMKICogYW5kIHRoZW4gdHJ5aW5nIHRvIGZpbmQgdGhhdCBwYXJ0IG9mIGRvY3VtZW50IHdvdWxkIHJlcXVpcmUgdHJhdmVyc2luZyB3aG9sZSBkb2N1bWVudCB0cmVlLiBNYXJrZXIgZ2l2ZXMgaW5zdGFudCBhY2Nlc3MKICogdG8gdGhlIHJhbmdlIHdoaWNoIGl0IGlzIG1hcmtpbmcgYXQgdGhlIG1vbWVudC4KICoKICogTWFya2VycyBhcmUgYnVpbHQgZnJvbSBhIG5hbWUgYW5kIGEgcmFuZ2UuCiAqCiAqIFJhbmdlIG9mIHRoZSBtYXJrZXIgaXMgdXBkYXRlZCBhdXRvbWF0aWNhbGx5IHdoZW4gZG9jdW1lbnQgY2hhbmdlcywgdXNpbmcKICoge0BsaW5rIG1vZHVsZTplbmdpbmUvbW9kZWwvbGl2ZXJhbmdlfkxpdmVSYW5nZSBsaXZlIHJhbmdlfSBtZWNoYW5pc20uCiAqCiAqIE5hbWUgaXMgdXNlZCB0byBncm91cCBhbmQgaWRlbnRpZnkgbWFya2Vycy4gTmFtZXMgaGF2ZSB0byBiZSB1bmlxdWUsIGJ1dCBtYXJrZXJzIGNhbiBiZSBncm91cGVkIGJ5CiAqIHVzaW5nIGNvbW1vbiBwcmVmaXhlcywgc2VwYXJhdGVkIHdpdGggYDpgLCBmb3IgZXhhbXBsZTogYHVzZXI6am9obmAgb3IgYHNlYXJjaDozYC4gVGhhdCdzIHVzZWZ1bCBpbiB0ZXJtIG9mIGNyZWF0aW5nCiAqIG5hbWVzcGFjZXMgZm9yIGN1c3RvbSBlbGVtZW50cyAoZS5nLiBjb21tZW50cywgaGlnaGxpZ2h0cykuIFlvdSBjYW4gdXNlIHRoaXMgcHJlZml4ZXMgaW4KICoge0BsaW5rIG1vZHVsZTplbmdpbmUvbW9kZWwvbWFya2VyY29sbGVjdGlvbn5NYXJrZXJDb2xsZWN0aW9uI2V2ZW50OnVwZGF0ZX0gbGlzdGVuZXJzIHRvIGxpc3RlbiBvbiBjaGFuZ2VzIGluIGEgZ3JvdXAgb2YgbWFya2Vycy4KICogRm9yIGluc3RhbmNlOiBgbW9kZWwubWFya2Vycy5vbiggJ3VwZGF0ZTp1c2VyJywgY2FsbGJhY2sgKTtgIHdpbGwgYmUgY2FsbGVkIHdoZW5ldmVyIGFueSBgdXNlcjoqYCBtYXJrZXJzIGNoYW5nZXMuCiAqCiAqIFRoZXJlIGFyZSB0d28gdHlwZXMgb2YgbWFya2Vycy4KICoKICogMS4gTWFya2VycyBtYW5hZ2VkIGRpcmVjdGx5LCB3aXRob3V0IHVzaW5nIG9wZXJhdGlvbnMuIFRoZXkgYXJlIGFkZGVkIGRpcmVjdGx5IGJ5IHtAbGluayBtb2R1bGU6ZW5naW5lL21vZGVsL3dyaXRlcn5Xcml0ZXJ9CiAqIHRvIHRoZSB7QGxpbmsgbW9kdWxlOmVuZ2luZS9tb2RlbC9tYXJrZXJjb2xsZWN0aW9ufk1hcmtlckNvbGxlY3Rpb259IHdpdGhvdXQgYW55IGFkZGl0aW9uYWwgbWVjaGFuaXNtLiBUaGV5IGNhbiBiZSB1c2VkCiAqIGFzIGJvb2ttYXJrcyBvciB2aXN1YWwgbWFya2Vycy4gVGhleSBhcmUgZ3JlYXQgZm9yIHNob3dpbmcgcmVzdWx0cyBvZiB0aGUgZmluZCwgb3Igc2VsZWN0IGxpbmsgd2hlbiB0aGUgZm9jdXMgaXMgaW4gdGhlIGlucHV0LgogKgogKiAxLiBNYXJrZXJzIG1hbmFnZWQgdXNpbmcgb3BlcmF0aW9ucy4gVGhlc2UgbWFya2VycyBhcmUgYWxzbyBzdG9yZWQgaW4ge0BsaW5rIG1vZHVsZTplbmdpbmUvbW9kZWwvbWFya2VyY29sbGVjdGlvbn5NYXJrZXJDb2xsZWN0aW9ufQogKiBidXQgY2hhbmdlcyBpbiB0aGVzZSBtYXJrZXJzIGlzIG1hbmFnZWQgdGhlIHNhbWUgd2F5IGFsbCBvdGhlciBjaGFuZ2VzIGluIHRoZSBtb2RlbCBzdHJ1Y3R1cmUgLSB1c2luZyBvcGVyYXRpb25zLgogKiBUaGVyZWZvcmUsIHRoZXkgYXJlIGhhbmRsZWQgaW4gdGhlIHVuZG8gc3RhY2sgYW5kIHN5bmNocm9uaXplZCBiZXR3ZWVuIGNsaWVudHMgaWYgdGhlIGNvbGxhYm9yYXRpb24gcGx1Z2luIGlzIGVuYWJsZWQuCiAqIFRoaXMgdHlwZSBvZiBtYXJrZXJzIGlzIHVzZWZ1bCBmb3Igc29sdXRpb25zIGxpa2Ugc3BlbGwgY2hlY2tpbmcgb3IgY29tbWVudHMuCiAqCiAqIEJvdGggdHlwZSBvZiB0aGVtIHNob3VsZCBiZSBhZGRlZCAvIHVwZGF0ZWQgYnkge0BsaW5rIG1vZHVsZTplbmdpbmUvbW9kZWwvd3JpdGVyfldyaXRlciNhZGRNYXJrZXJ9CiAqIGFuZCByZW1vdmVkIGJ5IHtAbGluayBtb2R1bGU6ZW5naW5lL21vZGVsL3dyaXRlcn5Xcml0ZXIjcmVtb3ZlTWFya2VyfSBtZXRob2RzLgogKgogKgkJbW9kZWwuY2hhbmdlKCAoIHdyaXRlciApID0+IHsKICogCQkJY29uc3QgbWFya2VyID0gd3JpdGVyLmFkZE1hcmtlciggbmFtZSwgeyByYW5nZSwgdXNpbmdPcGVyYXRpb246IHRydWUgfSApOwogKgogKiAJCQkvLyAuLi4KICoKICogCQkJd3JpdGVyLnJlbW92ZU1hcmtlciggbWFya2VyICk7CiAqCQl9ICk7CiAqCiAqIFNlZSB7QGxpbmsgbW9kdWxlOmVuZ2luZS9tb2RlbC93cml0ZXJ+V3JpdGVyfSB0byBmaW5kIG1vcmUgZXhhbXBsZXMuCiAqCiAqIFNpbmNlIG1hcmtlcnMgbmVlZCB0byB0cmFjayBjaGFuZ2UgaW4gdGhlIGRvY3VtZW50LCBmb3IgZWZmaWNpZW5jeSByZWFzb25zLCBpdCBpcyBiZXN0IHRvIGNyZWF0ZSBhbmQga2VlcCBhcyBsaXR0bGUKICogbWFya2VycyBhcyBwb3NzaWJsZSBhbmQgcmVtb3ZlIHRoZW0gYXMgc29vbiBhcyB0aGV5IGFyZSBub3QgbmVlZGVkIGFueW1vcmUuCiAqCiAqIE1hcmtlcnMgY2FuIGJlIGRvd25jYXN0ZWQgYW5kIHVwY2FzdGVkLgogKgogKiBNYXJrZXJzIGRvd25jYXN0IGhhcHBlbnMgb24ge0BsaW5rIG1vZHVsZTplbmdpbmUvY29udmVyc2lvbi9kb3duY2FzdGRpc3BhdGNoZXJ+RG93bmNhc3REaXNwYXRjaGVyI2V2ZW50OmFkZE1hcmtlcn0gYW5kCiAqIHtAbGluayBtb2R1bGU6ZW5naW5lL2NvbnZlcnNpb24vZG93bmNhc3RkaXNwYXRjaGVyfkRvd25jYXN0RGlzcGF0Y2hlciNldmVudDpyZW1vdmVNYXJrZXJ9IGV2ZW50cy4KICogVXNlIHtAbGluayBtb2R1bGU6ZW5naW5lL2NvbnZlcnNpb24vZG93bmNhc3RoZWxwZXJzIGRvd25jYXN0IGNvbnZlcnRlcnN9IG9yIGF0dGFjaCBhIGN1c3RvbSBjb252ZXJ0ZXIgdG8gbWVudGlvbmVkIGV2ZW50cy4KICogRm9yIHtAbGluayBtb2R1bGU6ZW5naW5lL2NvbnRyb2xsZXIvZGF0YWNvbnRyb2xsZXJ+RGF0YUNvbnRyb2xsZXIgZGF0YSBwaXBlbGluZX0sIG1hcmtlciBzaG91bGQgYmUgZG93bmNhc3RlZCB0byBhbiBlbGVtZW50LgogKiBUaGVuLCBpdCBjYW4gYmUgdXBjYXN0ZWQgYmFjayB0byBhIG1hcmtlci4gQWdhaW4sIHVzZSB7QGxpbmsgbW9kdWxlOmVuZ2luZS9jb252ZXJzaW9uL3VwY2FzdGhlbHBlcnMgdXBjYXN0IGNvbnZlcnRlcnN9IG9yCiAqIGF0dGFjaCBhIGN1c3RvbSBjb252ZXJ0ZXIgdG8ge0BsaW5rIG1vZHVsZTplbmdpbmUvY29udmVyc2lvbi91cGNhc3RkaXNwYXRjaGVyflVwY2FzdERpc3BhdGNoZXIjZXZlbnQ6ZWxlbWVudH0uCiAqCiAqIGBNYXJrZXJgIGluc3RhbmNlcyBhcmUgY3JlYXRlZCBhbmQgZGVzdHJveWVkIG9ubHkgYnkge0BsaW5rIH5NYXJrZXJDb2xsZWN0aW9uIE1hcmtlckNvbGxlY3Rpb259LgogKi8KCmNsYXNzIE1hcmtlciB7CiAgLyoqCiAgICogQ3JlYXRlcyBhIG1hcmtlciBpbnN0YW5jZS4KICAgKgogICAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lIE1hcmtlciBuYW1lLgogICAqIEBwYXJhbSB7bW9kdWxlOmVuZ2luZS9tb2RlbC9saXZlcmFuZ2V+TGl2ZVJhbmdlfSBsaXZlUmFuZ2UgUmFuZ2UgbWFya2VkIGJ5IHRoZSBtYXJrZXIuCiAgICogQHBhcmFtIHtCb29sZWFufSBtYW5hZ2VkVXNpbmdPcGVyYXRpb25zIFNwZWNpZmllcyB3aGV0aGVyIHRoZSBtYXJrZXIgaXMgbWFuYWdlZCB1c2luZyBvcGVyYXRpb25zLgogICAqIEBwYXJhbSB7Qm9vbGVhbn0gYWZmZWN0c0RhdGEgU3BlY2lmaWVzIHdoZXRoZXIgdGhlIG1hcmtlciBhZmZlY3RzIHRoZSBkYXRhIHByb2R1Y2VkIGJ5IHRoZSBkYXRhIHBpcGVsaW5lCiAgICogKGlzIHBlcnNpc3RlZCBpbiB0aGUgZWRpdG9yJ3MgZGF0YSkuCiAgICovCiAgY29uc3RydWN0b3IobmFtZSwgbGl2ZVJhbmdlLCBtYW5hZ2VkVXNpbmdPcGVyYXRpb25zLCBhZmZlY3RzRGF0YSkgewogICAgLyoqCiAgICAgKiBNYXJrZXIncyBuYW1lLgogICAgICoKICAgICAqIEByZWFkb25seQogICAgICogQHR5cGUge1N0cmluZ30KICAgICAqLwogICAgdGhpcy5uYW1lID0gbmFtZTsKICAgIC8qKgogICAgICogUmFuZ2UgbWFya2VkIGJ5IHRoZSBtYXJrZXIuCiAgICAgKgogICAgICogQHByb3RlY3RlZAogICAgICogQG1lbWJlciB7bW9kdWxlOmVuZ2luZS9tb2RlbC9saXZlcmFuZ2V+TGl2ZVJhbmdlfQogICAgICovCgogICAgdGhpcy5fbGl2ZVJhbmdlID0gdGhpcy5fYXR0YWNoTGl2ZVJhbmdlKGxpdmVSYW5nZSk7CiAgICAvKioKICAgICAqIEZsYWcgaW5kaWNhdGVzIGlmIHRoZSBtYXJrZXIgaXMgbWFuYWdlZCB1c2luZyBvcGVyYXRpb25zIG9yIG5vdC4KICAgICAqCiAgICAgKiBAcHJpdmF0ZQogICAgICogQG1lbWJlciB7Qm9vbGVhbn0KICAgICAqLwoKICAgIHRoaXMuX21hbmFnZWRVc2luZ09wZXJhdGlvbnMgPSBtYW5hZ2VkVXNpbmdPcGVyYXRpb25zOwogICAgLyoqCiAgICAgKiBTcGVjaWZpZXMgd2hldGhlciB0aGUgbWFya2VyIGFmZmVjdHMgdGhlIGRhdGEgcHJvZHVjZWQgYnkgdGhlIGRhdGEgcGlwZWxpbmUKICAgICAqIChpcyBwZXJzaXN0ZWQgaW4gdGhlIGVkaXRvcidzIGRhdGEpLgogICAgICoKICAgICAqIEBwcml2YXRlCiAgICAgKiBAbWVtYmVyIHtCb29sZWFufQogICAgICovCgogICAgdGhpcy5fYWZmZWN0c0RhdGEgPSBhZmZlY3RzRGF0YTsKICB9CiAgLyoqCiAgICogQSB2YWx1ZSBpbmRpY2F0aW5nIGlmIHRoZSBtYXJrZXIgaXMgbWFuYWdlZCB1c2luZyBvcGVyYXRpb25zLgogICAqIFNlZSB7QGxpbmsgfk1hcmtlciBtYXJrZXIgY2xhc3MgZGVzY3JpcHRpb259IHRvIGxlYXJuIG1vcmUgYWJvdXQgbWFya2VyIHR5cGVzLgogICAqIFNlZSB7QGxpbmsgbW9kdWxlOmVuZ2luZS9tb2RlbC93cml0ZXJ+V3JpdGVyI2FkZE1hcmtlcn0uCiAgICoKICAgKiBAcmV0dXJucyB7Qm9vbGVhbn0KICAgKi8KCgogIGdldCBtYW5hZ2VkVXNpbmdPcGVyYXRpb25zKCkgewogICAgaWYgKCF0aGlzLl9saXZlUmFuZ2UpIHsKICAgICAgdGhyb3cgbmV3IENLRWRpdG9yRXJyb3IoJ21hcmtlci1kZXN0cm95ZWQ6IENhbm5vdCB1c2UgYSBkZXN0cm95ZWQgbWFya2VyIGluc3RhbmNlLicsIHRoaXMpOwogICAgfQoKICAgIHJldHVybiB0aGlzLl9tYW5hZ2VkVXNpbmdPcGVyYXRpb25zOwogIH0KICAvKioKICAgKiBBIHZhbHVlIGluZGljYXRpbmcgaWYgdGhlIG1hcmtlciBjaGFuZ2VzIHRoZSBkYXRhLgogICAqCiAgICogQHJldHVybnMge0Jvb2xlYW59CiAgICovCgoKICBnZXQgYWZmZWN0c0RhdGEoKSB7CiAgICBpZiAoIXRoaXMuX2xpdmVSYW5nZSkgewogICAgICB0aHJvdyBuZXcgQ0tFZGl0b3JFcnJvcignbWFya2VyLWRlc3Ryb3llZDogQ2Fubm90IHVzZSBhIGRlc3Ryb3llZCBtYXJrZXIgaW5zdGFuY2UuJywgdGhpcyk7CiAgICB9CgogICAgcmV0dXJuIHRoaXMuX2FmZmVjdHNEYXRhOwogIH0KICAvKioKICAgKiBSZXR1cm5zIGN1cnJlbnQgbWFya2VyIHN0YXJ0IHBvc2l0aW9uLgogICAqCiAgICogQHJldHVybnMge21vZHVsZTplbmdpbmUvbW9kZWwvcG9zaXRpb25+UG9zaXRpb259CiAgICovCgoKICBnZXRTdGFydCgpIHsKICAgIGlmICghdGhpcy5fbGl2ZVJhbmdlKSB7CiAgICAgIHRocm93IG5ldyBDS0VkaXRvckVycm9yKCdtYXJrZXItZGVzdHJveWVkOiBDYW5ub3QgdXNlIGEgZGVzdHJveWVkIG1hcmtlciBpbnN0YW5jZS4nLCB0aGlzKTsKICAgIH0KCiAgICByZXR1cm4gdGhpcy5fbGl2ZVJhbmdlLnN0YXJ0LmNsb25lKCk7CiAgfQogIC8qKgogICAqIFJldHVybnMgY3VycmVudCBtYXJrZXIgZW5kIHBvc2l0aW9uLgogICAqCiAgICogQHJldHVybnMge21vZHVsZTplbmdpbmUvbW9kZWwvcG9zaXRpb25+UG9zaXRpb259CiAgICovCgoKICBnZXRFbmQoKSB7CiAgICBpZiAoIXRoaXMuX2xpdmVSYW5nZSkgewogICAgICB0aHJvdyBuZXcgQ0tFZGl0b3JFcnJvcignbWFya2VyLWRlc3Ryb3llZDogQ2Fubm90IHVzZSBhIGRlc3Ryb3llZCBtYXJrZXIgaW5zdGFuY2UuJywgdGhpcyk7CiAgICB9CgogICAgcmV0dXJuIHRoaXMuX2xpdmVSYW5nZS5lbmQuY2xvbmUoKTsKICB9CiAgLyoqCiAgICogUmV0dXJucyBhIHJhbmdlIHRoYXQgcmVwcmVzZW50cyB0aGUgY3VycmVudCBzdGF0ZSBvZiB0aGUgbWFya2VyLgogICAqCiAgICogS2VlcCBpbiBtaW5kIHRoYXQgcmV0dXJuZWQgdmFsdWUgaXMgYSB7QGxpbmsgbW9kdWxlOmVuZ2luZS9tb2RlbC9yYW5nZX5SYW5nZSBSYW5nZX0sIG5vdCBhCiAgICoge0BsaW5rIG1vZHVsZTplbmdpbmUvbW9kZWwvbGl2ZXJhbmdlfkxpdmVSYW5nZSBMaXZlUmFuZ2V9LiBUaGlzIG1lYW5zIHRoYXQgaXQgaXMgdXAtdG8tZGF0ZSBhbmQgcmVsZXZhbnQgb25seQogICAqIHVudGlsIG5leHQgbW9kZWwgZG9jdW1lbnQgY2hhbmdlLiBEbyBub3Qgc3RvcmUgdmFsdWVzIHJldHVybmVkIGJ5IHRoaXMgbWV0aG9kLiBJbnN0ZWFkLCBzdG9yZSB7QGxpbmsgfk1hcmtlciNuYW1lfQogICAqIGFuZCBnZXQgYE1hcmtlcmAgaW5zdGFuY2UgZnJvbSB7QGxpbmsgbW9kdWxlOmVuZ2luZS9tb2RlbC9tYXJrZXJjb2xsZWN0aW9ufk1hcmtlckNvbGxlY3Rpb24gTWFya2VyQ29sbGVjdGlvbn0gZXZlcnkKICAgKiB0aW1lIHRoZXJlIGlzIGEgbmVlZCB0byByZWFkIG1hcmtlciBwcm9wZXJ0aWVzLiBUaGlzIHdpbGwgZ3VhcmFudGVlIHRoYXQgdGhlIG1hcmtlciBoYXMgbm90IGJlZW4gcmVtb3ZlZCBhbmQKICAgKiB0aGF0IGl0J3MgZGF0YSBpcyB1cC10by1kYXRlLgogICAqCiAgICogQHJldHVybnMge21vZHVsZTplbmdpbmUvbW9kZWwvcmFuZ2V+UmFuZ2V9CiAgICovCgoKICBnZXRSYW5nZSgpIHsKICAgIGlmICghdGhpcy5fbGl2ZVJhbmdlKSB7CiAgICAgIHRocm93IG5ldyBDS0VkaXRvckVycm9yKCdtYXJrZXItZGVzdHJveWVkOiBDYW5ub3QgdXNlIGEgZGVzdHJveWVkIG1hcmtlciBpbnN0YW5jZS4nLCB0aGlzKTsKICAgIH0KCiAgICByZXR1cm4gdGhpcy5fbGl2ZVJhbmdlLnRvUmFuZ2UoKTsKICB9CiAgLyoqCiAgICogQ2hlY2tzIHdoZXRoZXIgdGhpcyBvYmplY3QgaXMgb2YgdGhlIGdpdmVuLgogICAqCiAgICoJCW1hcmtlci5pcyggJ21hcmtlcicgKTsgLy8gLT4gdHJ1ZQogICAqCQltYXJrZXIuaXMoICdtb2RlbDptYXJrZXInICk7IC8vIC0+IHRydWUKICAgKgogICAqCQltYXJrZXIuaXMoICd2aWV3OmVsZW1lbnQnICk7IC8vIC0+IGZhbHNlCiAgICoJCW1hcmtlci5pcyggJ2RvY3VtZW50U2VsZWN0aW9uJyApOyAvLyAtPiBmYWxzZQogICAqCiAgICoge0BsaW5rIG1vZHVsZTplbmdpbmUvbW9kZWwvbm9kZX5Ob2RlI2lzIENoZWNrIHRoZSBlbnRpcmUgbGlzdCBvZiBtb2RlbCBvYmplY3RzfSB3aGljaCBpbXBsZW1lbnQgdGhlIGBpcygpYCBtZXRob2QuCiAgICoKICAgKiBAcGFyYW0ge1N0cmluZ30gdHlwZQogICAqIEByZXR1cm5zIHtCb29sZWFufQogICAqLwoKCiAgaXModHlwZSkgewogICAgcmV0dXJuIHR5cGUgPT0gJ21hcmtlcicgfHwgdHlwZSA9PSAnbW9kZWw6bWFya2VyJzsKICB9CiAgLyoqCiAgICogQmluZHMgbmV3IGxpdmUgcmFuZ2UgdG8gdGhlIG1hcmtlciBhbmQgZGV0YWNoIHRoZSBvbGQgb25lIGlmIGlzIGF0dGFjaGVkLgogICAqCiAgICogQHByb3RlY3RlZAogICAqIEBwYXJhbSB7bW9kdWxlOmVuZ2luZS9tb2RlbC9saXZlcmFuZ2V+TGl2ZVJhbmdlfSBsaXZlUmFuZ2UgTGl2ZSByYW5nZSB0byBhdHRhY2gKICAgKiBAcmV0dXJucyB7bW9kdWxlOmVuZ2luZS9tb2RlbC9saXZlcmFuZ2V+TGl2ZVJhbmdlfSBBdHRhY2hlZCBsaXZlIHJhbmdlLgogICAqLwoKCiAgX2F0dGFjaExpdmVSYW5nZShsaXZlUmFuZ2UpIHsKICAgIGlmICh0aGlzLl9saXZlUmFuZ2UpIHsKICAgICAgdGhpcy5fZGV0YWNoTGl2ZVJhbmdlKCk7CiAgICB9IC8vIERlbGVnYXRpbmcgZG9lcyBub3Qgd29yayB3aXRoIG5hbWVzcGFjZXMuIEFsdGVybmF0aXZlbHksIHdlIGNvdWxkIGRlbGVnYXRlIGFsbCBldmVudHMgKHVzaW5nIGAqYCkuCgoKICAgIGxpdmVSYW5nZS5kZWxlZ2F0ZSgnY2hhbmdlOnJhbmdlJykudG8odGhpcyk7CiAgICBsaXZlUmFuZ2UuZGVsZWdhdGUoJ2NoYW5nZTpjb250ZW50JykudG8odGhpcyk7CiAgICB0aGlzLl9saXZlUmFuZ2UgPSBsaXZlUmFuZ2U7CiAgICByZXR1cm4gbGl2ZVJhbmdlOwogIH0KICAvKioKICAgKiBVbmJpbmRzIGFuZCBkZXN0cm95cyBjdXJyZW50bHkgYXR0YWNoZWQgbGl2ZSByYW5nZS4KICAgKgogICAqIEBwcm90ZWN0ZWQKICAgKi8KCgogIF9kZXRhY2hMaXZlUmFuZ2UoKSB7CiAgICB0aGlzLl9saXZlUmFuZ2Uuc3RvcERlbGVnYXRpbmcoJ2NoYW5nZTpyYW5nZScsIHRoaXMpOwoKICAgIHRoaXMuX2xpdmVSYW5nZS5zdG9wRGVsZWdhdGluZygnY2hhbmdlOmNvbnRlbnQnLCB0aGlzKTsKCiAgICB0aGlzLl9saXZlUmFuZ2UuZGV0YWNoKCk7CgogICAgdGhpcy5fbGl2ZVJhbmdlID0gbnVsbDsKICB9CiAgLyoqCiAgICogRmlyZWQgd2hlbmV2ZXIge0BsaW5rIH5NYXJrZXIjX2xpdmVSYW5nZSBtYXJrZXIgcmFuZ2V9IGlzIGNoYW5nZWQgZHVlIHRvIGNoYW5nZXMgb24ge0BsaW5rIG1vZHVsZTplbmdpbmUvbW9kZWwvZG9jdW1lbnR+RG9jdW1lbnR9LgogICAqIFRoaXMgaXMgYSBkZWxlZ2F0ZWQge0BsaW5rIG1vZHVsZTplbmdpbmUvbW9kZWwvbGl2ZXJhbmdlfkxpdmVSYW5nZSNldmVudDpjaGFuZ2U6cmFuZ2UgTGl2ZVJhbmdlIGNoYW5nZTpyYW5nZSBldmVudH0uCiAgICoKICAgKiBXaGVuIG1hcmtlciBpcyByZW1vdmVkIGZyb20ge0BsaW5rIG1vZHVsZTplbmdpbmUvbW9kZWwvbWFya2VyY29sbGVjdGlvbn5NYXJrZXJDb2xsZWN0aW9uIE1hcmtlckNvbGxlY3Rpb259LAogICAqIGFsbCBldmVudCBsaXN0ZW5lcnMgbGlzdGVuaW5nIHRvIGl0IHNob3VsZCBiZSByZW1vdmVkLiBJdCBpcyBiZXN0IHRvIGRvIGl0IG9uCiAgICoge0BsaW5rIG1vZHVsZTplbmdpbmUvbW9kZWwvbWFya2VyY29sbGVjdGlvbn5NYXJrZXJDb2xsZWN0aW9uI2V2ZW50OnVwZGF0ZSBNYXJrZXJDb2xsZWN0aW9uIHVwZGF0ZSBldmVudH0uCiAgICoKICAgKiBAc2VlIG1vZHVsZTplbmdpbmUvbW9kZWwvbGl2ZXJhbmdlfkxpdmVSYW5nZSNldmVudDpjaGFuZ2U6cmFuZ2UKICAgKiBAZXZlbnQgY2hhbmdlOnJhbmdlCiAgICogQHBhcmFtIHttb2R1bGU6ZW5naW5lL21vZGVsL3JhbmdlflJhbmdlfSBvbGRSYW5nZQogICAqIEBwYXJhbSB7T2JqZWN0fSBkYXRhCiAgICovCgogIC8qKgogICAqIEZpcmVkIHdoZW5ldmVyIGNoYW5nZSBvbiB7QGxpbmsgbW9kdWxlOmVuZ2luZS9tb2RlbC9kb2N1bWVudH5Eb2N1bWVudH0gaXMgZG9uZSBpbnNpZGUge0BsaW5rIH5NYXJrZXIjX2xpdmVSYW5nZSBtYXJrZXIgcmFuZ2V9LgogICAqIFRoaXMgaXMgYSBkZWxlZ2F0ZWQge0BsaW5rIG1vZHVsZTplbmdpbmUvbW9kZWwvbGl2ZXJhbmdlfkxpdmVSYW5nZSNldmVudDpjaGFuZ2U6Y29udGVudCBMaXZlUmFuZ2UgY2hhbmdlOmNvbnRlbnQgZXZlbnR9LgogICAqCiAgICogV2hlbiBtYXJrZXIgaXMgcmVtb3ZlZCBmcm9tIHtAbGluayBtb2R1bGU6ZW5naW5lL21vZGVsL21hcmtlcmNvbGxlY3Rpb25+TWFya2VyQ29sbGVjdGlvbiBNYXJrZXJDb2xsZWN0aW9ufSwKICAgKiBhbGwgZXZlbnQgbGlzdGVuZXJzIGxpc3RlbmluZyB0byBpdCBzaG91bGQgYmUgcmVtb3ZlZC4gSXQgaXMgYmVzdCB0byBkbyBpdCBvbgogICAqIHtAbGluayBtb2R1bGU6ZW5naW5lL21vZGVsL21hcmtlcmNvbGxlY3Rpb25+TWFya2VyQ29sbGVjdGlvbiNldmVudDp1cGRhdGUgTWFya2VyQ29sbGVjdGlvbiB1cGRhdGUgZXZlbnR9LgogICAqCiAgICogQHNlZSBtb2R1bGU6ZW5naW5lL21vZGVsL2xpdmVyYW5nZX5MaXZlUmFuZ2UjZXZlbnQ6Y2hhbmdlOmNvbnRlbnQKICAgKiBAZXZlbnQgY2hhbmdlOmNvbnRlbnQKICAgKiBAcGFyYW0ge21vZHVsZTplbmdpbmUvbW9kZWwvcmFuZ2V+UmFuZ2V9IG9sZFJhbmdlCiAgICogQHBhcmFtIHtPYmplY3R9IGRhdGEKICAgKi8KCgp9CgptaXgoTWFya2VyLCBFbWl0dGVyTWl4aW4pOwovKioKICogQ2Fubm90IHVzZSBhIHtAbGluayBtb2R1bGU6ZW5naW5lL21vZGVsL21hcmtlcmNvbGxlY3Rpb25+TWFya2VyQ29sbGVjdGlvbiNkZXN0cm95IGRlc3Ryb3llZCBtYXJrZXJ9IGluc3RhbmNlLgogKgogKiBAZXJyb3IgbWFya2VyLWRlc3Ryb3llZAogKi8="},{"version":3,"sources":["/Users/antonyching/Desktop/project/new-builder-demo/node_modules/@ckeditor/ckeditor5-engine/src/model/markercollection.js"],"names":["LiveRange","EmitterMixin","CKEditorError","mix","MarkerCollection","constructor","_markers","Map","Symbol","iterator","values","has","markerName","get","_set","markerOrName","range","managedUsingOperations","affectsData","Marker","name","oldMarker","oldRange","getRange","hasChanged","isEqual","_attachLiveRange","fromRange","_managedUsingOperations","_affectsData","fire","liveRange","marker","set","_remove","delete","_destroyMarker","_refresh","getMarkersAtPosition","position","containsPosition","getMarkersIntersectingRange","getIntersection","destroy","stopListening","getMarkersGroup","prefix","startsWith","_detachLiveRange","_liveRange","getStart","start","clone","getEnd","end","toRange","is","type","delegate","to","stopDelegating","detach"],"mappings":"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","sourcesContent":["/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/model/markercollection\n */\n\nimport LiveRange from './liverange';\nimport EmitterMixin from '@ckeditor/ckeditor5-utils/src/emittermixin';\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\nimport mix from '@ckeditor/ckeditor5-utils/src/mix';\n\n/**\n * The collection of all {@link module:engine/model/markercollection~Marker markers} attached to the document.\n * It lets you {@link module:engine/model/markercollection~MarkerCollection#get get} markers or track them using\n * {@link module:engine/model/markercollection~MarkerCollection#event:update} event.\n *\n * To create, change or remove makers use {@link module:engine/model/writer~Writer model writers'} methods:\n * {@link module:engine/model/writer~Writer#addMarker} or {@link module:engine/model/writer~Writer#removeMarker}. Since\n * the writer is the only proper way to change the data model it is not possible to change markers directly using this\n * collection. All markers created by the writer will be automatically added to this collection.\n *\n * By default there is one marker collection available as {@link module:engine/model/model~Model#markers model property}.\n *\n * @see module:engine/model/markercollection~Marker\n */\nexport default class MarkerCollection {\n\t/**\n\t * Creates a markers collection.\n\t */\n\tconstructor() {\n\t\t/**\n\t\t * Stores {@link ~Marker markers} added to the collection.\n\t\t *\n\t\t * @private\n\t\t * @member {Map} #_markers\n\t\t */\n\t\tthis._markers = new Map();\n\t}\n\n\t/**\n\t * Iterable interface.\n\t *\n\t * Iterates over all {@link ~Marker markers} added to the collection.\n\t *\n\t * @returns {Iterable}\n\t */\n\t[ Symbol.iterator ]() {\n\t\treturn this._markers.values();\n\t}\n\n\t/**\n\t * Checks if marker with given `markerName` is in the collection.\n\t *\n\t * @param {String} markerName Marker name.\n\t * @returns {Boolean} `true` if marker with given `markerName` is in the collection, `false` otherwise.\n\t */\n\thas( markerName ) {\n\t\treturn this._markers.has( markerName );\n\t}\n\n\t/**\n\t * Returns {@link ~Marker marker} with given `markerName`.\n\t *\n\t * @param {String} markerName Name of marker to get.\n\t * @returns {module:engine/model/markercollection~Marker|null} Marker with given name or `null` if such marker was\n\t * not added to the collection.\n\t */\n\tget( markerName ) {\n\t\treturn this._markers.get( markerName ) || null;\n\t}\n\n\t/**\n\t * Creates and adds a {@link ~Marker marker} to the `MarkerCollection` with given name on given\n\t * {@link module:engine/model/range~Range range}.\n\t *\n\t * If `MarkerCollection` already had a marker with given name (or {@link ~Marker marker} was passed), the marker in\n\t * collection is updated and {@link module:engine/model/markercollection~MarkerCollection#event:update} event is fired\n\t * but only if there was a change (marker range or {@link module:engine/model/markercollection~Marker#managedUsingOperations}\n\t * flag has changed.\n\t *\n\t * @protected\n\t * @fires module:engine/model/markercollection~MarkerCollection#event:update\n\t * @param {String|module:engine/model/markercollection~Marker} markerOrName Name of marker to set or marker instance to update.\n\t * @param {module:engine/model/range~Range} range Marker range.\n\t * @param {Boolean} [managedUsingOperations=false] Specifies whether the marker is managed using operations.\n\t * @param {Boolean} [affectsData=false] Specifies whether the marker affects the data produced by the data pipeline\n\t * (is persisted in the editor's data).\n\t * @returns {module:engine/model/markercollection~Marker} `Marker` instance which was added or updated.\n\t */\n\t_set( markerOrName, range, managedUsingOperations = false, affectsData = false ) {\n\t\tconst markerName = markerOrName instanceof Marker ? markerOrName.name : markerOrName;\n\t\tconst oldMarker = this._markers.get( markerName );\n\n\t\tif ( oldMarker ) {\n\t\t\tconst oldRange = oldMarker.getRange();\n\t\t\tlet hasChanged = false;\n\n\t\t\tif ( !oldRange.isEqual( range ) ) {\n\t\t\t\toldMarker._attachLiveRange( LiveRange.fromRange( range ) );\n\t\t\t\thasChanged = true;\n\t\t\t}\n\n\t\t\tif ( managedUsingOperations != oldMarker.managedUsingOperations ) {\n\t\t\t\toldMarker._managedUsingOperations = managedUsingOperations;\n\t\t\t\thasChanged = true;\n\t\t\t}\n\n\t\t\tif ( typeof affectsData === 'boolean' && affectsData != oldMarker.affectsData ) {\n\t\t\t\toldMarker._affectsData = affectsData;\n\t\t\t\thasChanged = true;\n\t\t\t}\n\n\t\t\tif ( hasChanged ) {\n\t\t\t\tthis.fire( 'update:' + markerName, oldMarker, oldRange, range );\n\t\t\t}\n\n\t\t\treturn oldMarker;\n\t\t}\n\n\t\tconst liveRange = LiveRange.fromRange( range );\n\t\tconst marker = new Marker( markerName, liveRange, managedUsingOperations, affectsData );\n\n\t\tthis._markers.set( markerName, marker );\n\t\tthis.fire( 'update:' + markerName, marker, null, range );\n\n\t\treturn marker;\n\t}\n\n\t/**\n\t * Removes given {@link ~Marker marker} or a marker with given name from the `MarkerCollection`.\n\t *\n\t * @protected\n\t * @fires module:engine/model/markercollection~MarkerCollection#event:update\n\t * @param {String} markerOrName Marker or name of a marker to remove.\n\t * @returns {Boolean} `true` if marker was found and removed, `false` otherwise.\n\t */\n\t_remove( markerOrName ) {\n\t\tconst markerName = markerOrName instanceof Marker ? markerOrName.name : markerOrName;\n\t\tconst oldMarker = this._markers.get( markerName );\n\n\t\tif ( oldMarker ) {\n\t\t\tthis._markers.delete( markerName );\n\t\t\tthis.fire( 'update:' + markerName, oldMarker, oldMarker.getRange(), null );\n\n\t\t\tthis._destroyMarker( oldMarker );\n\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/**\n\t * Fires an {@link module:engine/model/markercollection~MarkerCollection#event:update} event for the given {@link ~Marker marker}\n\t * but does not change the marker. Useful to force {@link module:engine/conversion/downcastdispatcher~DowncastDispatcher downcast\n\t * conversion} for the marker.\n\t *\n\t * @protected\n\t * @fires module:engine/model/markercollection~MarkerCollection#event:update\n\t * @param {String} markerOrName Marker or name of a marker to refresh.\n\t */\n\t_refresh( markerOrName ) {\n\t\tconst markerName = markerOrName instanceof Marker ? markerOrName.name : markerOrName;\n\t\tconst marker = this._markers.get( markerName );\n\n\t\tif ( !marker ) {\n\t\t\tthrow new CKEditorError( 'markercollection-refresh-marker-not-exists: Marker with provided name does not exists.', this );\n\t\t}\n\n\t\tconst range = marker.getRange();\n\n\t\tthis.fire( 'update:' + markerName, marker, range, range, marker.managedUsingOperations, marker.affectsData );\n\t}\n\n\t/**\n\t * Returns iterator that iterates over all markers, which ranges contain given {@link module:engine/model/position~Position position}.\n\t *\n\t * @param {module:engine/model/position~Position} position\n\t * @returns {Iterable.<module:engine/model/markercollection~Marker>}\n\t */\n\t* getMarkersAtPosition( position ) {\n\t\tfor ( const marker of this ) {\n\t\t\tif ( marker.getRange().containsPosition( position ) ) {\n\t\t\t\tyield marker;\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Returns iterator that iterates over all markers, which intersects with given {@link module:engine/model/range~Range range}.\n\t *\n\t * @param {module:engine/model/range~Range} range\n\t * @returns {Iterable.<module:engine/model/markercollection~Marker>}\n\t */\n\t* getMarkersIntersectingRange( range ) {\n\t\tfor ( const marker of this ) {\n\t\t\tif ( marker.getRange().getIntersection( range ) !== null ) {\n\t\t\t\tyield marker;\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Destroys marker collection and all markers inside it.\n\t */\n\tdestroy() {\n\t\tfor ( const marker of this._markers.values() ) {\n\t\t\tthis._destroyMarker( marker );\n\t\t}\n\n\t\tthis._markers = null;\n\n\t\tthis.stopListening();\n\t}\n\n\t/**\n\t * Iterates over all markers that starts with given `prefix`.\n\t *\n\t *\t\tconst markerFooA = markersCollection.set( 'foo:a', rangeFooA );\n\t *\t\tconst markerFooB = markersCollection.set( 'foo:b', rangeFooB );\n\t *\t\tconst markerBarA = markersCollection.set( 'bar:a', rangeBarA );\n\t *\t\tconst markerFooBarA = markersCollection.set( 'foobar:a', rangeFooBarA );\n\t *\t\tArray.from( markersCollection.getMarkersGroup( 'foo' ) ); // [ markerFooA, markerFooB ]\n\t *\t\tArray.from( markersCollection.getMarkersGroup( 'a' ) ); // []\n\t *\n\t * @param prefix\n\t * @returns {Iterable.<module:engine/model/markercollection~Marker>}\n\t */\n\t* getMarkersGroup( prefix ) {\n\t\tfor ( const marker of this._markers.values() ) {\n\t\t\tif ( marker.name.startsWith( prefix + ':' ) ) {\n\t\t\t\tyield marker;\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Destroys the marker.\n\t *\n\t * @private\n\t * @param {module:engine/model/markercollection~Marker} marker Marker to destroy.\n\t */\n\t_destroyMarker( marker ) {\n\t\tmarker.stopListening();\n\t\tmarker._detachLiveRange();\n\t}\n\n\t/**\n\t * Fired whenever marker is added, updated or removed from `MarkerCollection`.\n\t *\n\t * @event update\n\t * @param {module:engine/model/markercollection~Marker} marker Updated Marker.\n\t * @param {module:engine/model/range~Range|null} oldRange Marker range before the update. When is not defined it\n\t * means that marker is just added.\n\t * @param {module:engine/model/range~Range|null} newRange Marker range after update. When is not defined it\n\t * means that marker is just removed.\n\t */\n}\n\nmix( MarkerCollection, EmitterMixin );\n\n/**\n * `Marker` is a continuous parts of model (like a range), is named and represent some kind of information about marked\n * part of model document. In contrary to {@link module:engine/model/node~Node nodes}, which are building blocks of\n * model document tree, markers are not stored directly in document tree but in\n * {@link module:engine/model/model~Model#markers model markers' collection}. Still, they are document data, by giving\n * additional meaning to the part of a model document between marker start and marker end.\n *\n * In this sense, markers are similar to adding and converting attributes on nodes. The difference is that attribute is\n * connected with a given node (e.g. a character is bold no matter if it gets moved or content around it changes).\n * Markers on the other hand are continuous ranges and are characterized by their start and end position. This means that\n * any character in the marker is marked by the marker. For example, if a character is moved outside of marker it stops being\n * \"special\" and the marker is shrunk. Similarly, when a character is moved into the marker from other place in document\n * model, it starts being \"special\" and the marker is enlarged.\n *\n * Another upside of markers is that finding marked part of document is fast and easy. Using attributes to mark some nodes\n * and then trying to find that part of document would require traversing whole document tree. Marker gives instant access\n * to the range which it is marking at the moment.\n *\n * Markers are built from a name and a range.\n *\n * Range of the marker is updated automatically when document changes, using\n * {@link module:engine/model/liverange~LiveRange live range} mechanism.\n *\n * Name is used to group and identify markers. Names have to be unique, but markers can be grouped by\n * using common prefixes, separated with `:`, for example: `user:john` or `search:3`. That's useful in term of creating\n * namespaces for custom elements (e.g. comments, highlights). You can use this prefixes in\n * {@link module:engine/model/markercollection~MarkerCollection#event:update} listeners to listen on changes in a group of markers.\n * For instance: `model.markers.on( 'update:user', callback );` will be called whenever any `user:*` markers changes.\n *\n * There are two types of markers.\n *\n * 1. Markers managed directly, without using operations. They are added directly by {@link module:engine/model/writer~Writer}\n * to the {@link module:engine/model/markercollection~MarkerCollection} without any additional mechanism. They can be used\n * as bookmarks or visual markers. They are great for showing results of the find, or select link when the focus is in the input.\n *\n * 1. Markers managed using operations. These markers are also stored in {@link module:engine/model/markercollection~MarkerCollection}\n * but changes in these markers is managed the same way all other changes in the model structure - using operations.\n * Therefore, they are handled in the undo stack and synchronized between clients if the collaboration plugin is enabled.\n * This type of markers is useful for solutions like spell checking or comments.\n *\n * Both type of them should be added / updated by {@link module:engine/model/writer~Writer#addMarker}\n * and removed by {@link module:engine/model/writer~Writer#removeMarker} methods.\n *\n *\t\tmodel.change( ( writer ) => {\n * \t\t\tconst marker = writer.addMarker( name, { range, usingOperation: true } );\n *\n * \t\t\t// ...\n *\n * \t\t\twriter.removeMarker( marker );\n *\t\t} );\n *\n * See {@link module:engine/model/writer~Writer} to find more examples.\n *\n * Since markers need to track change in the document, for efficiency reasons, it is best to create and keep as little\n * markers as possible and remove them as soon as they are not needed anymore.\n *\n * Markers can be downcasted and upcasted.\n *\n * Markers downcast happens on {@link module:engine/conversion/downcastdispatcher~DowncastDispatcher#event:addMarker} and\n * {@link module:engine/conversion/downcastdispatcher~DowncastDispatcher#event:removeMarker} events.\n * Use {@link module:engine/conversion/downcasthelpers downcast converters} or attach a custom converter to mentioned events.\n * For {@link module:engine/controller/datacontroller~DataController data pipeline}, marker should be downcasted to an element.\n * Then, it can be upcasted back to a marker. Again, use {@link module:engine/conversion/upcasthelpers upcast converters} or\n * attach a custom converter to {@link module:engine/conversion/upcastdispatcher~UpcastDispatcher#event:element}.\n *\n * `Marker` instances are created and destroyed only by {@link ~MarkerCollection MarkerCollection}.\n */\nclass Marker {\n\t/**\n\t * Creates a marker instance.\n\t *\n\t * @param {String} name Marker name.\n\t * @param {module:engine/model/liverange~LiveRange} liveRange Range marked by the marker.\n\t * @param {Boolean} managedUsingOperations Specifies whether the marker is managed using operations.\n\t * @param {Boolean} affectsData Specifies whether the marker affects the data produced by the data pipeline\n\t * (is persisted in the editor's data).\n\t */\n\tconstructor( name, liveRange, managedUsingOperations, affectsData ) {\n\t\t/**\n\t\t * Marker's name.\n\t\t *\n\t\t * @readonly\n\t\t * @type {String}\n\t\t */\n\t\tthis.name = name;\n\n\t\t/**\n\t\t * Range marked by the marker.\n\t\t *\n\t\t * @protected\n\t\t * @member {module:engine/model/liverange~LiveRange}\n\t\t */\n\t\tthis._liveRange = this._attachLiveRange( liveRange );\n\n\t\t/**\n\t\t * Flag indicates if the marker is managed using operations or not.\n\t\t *\n\t\t * @private\n\t\t * @member {Boolean}\n\t\t */\n\t\tthis._managedUsingOperations = managedUsingOperations;\n\n\t\t/**\n\t\t * Specifies whether the marker affects the data produced by the data pipeline\n\t\t * (is persisted in the editor's data).\n\t\t *\n\t\t * @private\n\t\t * @member {Boolean}\n\t\t */\n\t\tthis._affectsData = affectsData;\n\t}\n\n\t/**\n\t * A value indicating if the marker is managed using operations.\n\t * See {@link ~Marker marker class description} to learn more about marker types.\n\t * See {@link module:engine/model/writer~Writer#addMarker}.\n\t *\n\t * @returns {Boolean}\n\t */\n\tget managedUsingOperations() {\n\t\tif ( !this._liveRange ) {\n\t\t\tthrow new CKEditorError( 'marker-destroyed: Cannot use a destroyed marker instance.', this );\n\t\t}\n\n\t\treturn this._managedUsingOperations;\n\t}\n\n\t/**\n\t * A value indicating if the marker changes the data.\n\t *\n\t * @returns {Boolean}\n\t */\n\tget affectsData() {\n\t\tif ( !this._liveRange ) {\n\t\t\tthrow new CKEditorError( 'marker-destroyed: Cannot use a destroyed marker instance.', this );\n\t\t}\n\n\t\treturn this._affectsData;\n\t}\n\n\t/**\n\t * Returns current marker start position.\n\t *\n\t * @returns {module:engine/model/position~Position}\n\t */\n\tgetStart() {\n\t\tif ( !this._liveRange ) {\n\t\t\tthrow new CKEditorError( 'marker-destroyed: Cannot use a destroyed marker instance.', this );\n\t\t}\n\n\t\treturn this._liveRange.start.clone();\n\t}\n\n\t/**\n\t * Returns current marker end position.\n\t *\n\t * @returns {module:engine/model/position~Position}\n\t */\n\tgetEnd() {\n\t\tif ( !this._liveRange ) {\n\t\t\tthrow new CKEditorError( 'marker-destroyed: Cannot use a destroyed marker instance.', this );\n\t\t}\n\n\t\treturn this._liveRange.end.clone();\n\t}\n\n\t/**\n\t * Returns a range that represents the current state of the marker.\n\t *\n\t * Keep in mind that returned value is a {@link module:engine/model/range~Range Range}, not a\n\t * {@link module:engine/model/liverange~LiveRange LiveRange}. This means that it is up-to-date and relevant only\n\t * until next model document change. Do not store values returned by this method. Instead, store {@link ~Marker#name}\n\t * and get `Marker` instance from {@link module:engine/model/markercollection~MarkerCollection MarkerCollection} every\n\t * time there is a need to read marker properties. This will guarantee that the marker has not been removed and\n\t * that it's data is up-to-date.\n\t *\n\t * @returns {module:engine/model/range~Range}\n\t */\n\tgetRange() {\n\t\tif ( !this._liveRange ) {\n\t\t\tthrow new CKEditorError( 'marker-destroyed: Cannot use a destroyed marker instance.', this );\n\t\t}\n\n\t\treturn this._liveRange.toRange();\n\t}\n\n\t/**\n\t * Checks whether this object is of the given.\n\t *\n\t *\t\tmarker.is( 'marker' ); // -> true\n\t *\t\tmarker.is( 'model:marker' ); // -> true\n\t *\n\t *\t\tmarker.is( 'view:element' ); // -> false\n\t *\t\tmarker.is( 'documentSelection' ); // -> false\n\t *\n\t * {@link module:engine/model/node~Node#is Check the entire list of model objects} which implement the `is()` method.\n\t *\n\t * @param {String} type\n\t * @returns {Boolean}\n\t */\n\tis( type ) {\n\t\treturn type == 'marker' || type == 'model:marker';\n\t}\n\n\t/**\n\t * Binds new live range to the marker and detach the old one if is attached.\n\t *\n\t * @protected\n\t * @param {module:engine/model/liverange~LiveRange} liveRange Live range to attach\n\t * @returns {module:engine/model/liverange~LiveRange} Attached live range.\n\t */\n\t_attachLiveRange( liveRange ) {\n\t\tif ( this._liveRange ) {\n\t\t\tthis._detachLiveRange();\n\t\t}\n\n\t\t// Delegating does not work with namespaces. Alternatively, we could delegate all events (using `*`).\n\t\tliveRange.delegate( 'change:range' ).to( this );\n\t\tliveRange.delegate( 'change:content' ).to( this );\n\n\t\tthis._liveRange = liveRange;\n\n\t\treturn liveRange;\n\t}\n\n\t/**\n\t * Unbinds and destroys currently attached live range.\n\t *\n\t * @protected\n\t */\n\t_detachLiveRange() {\n\t\tthis._liveRange.stopDelegating( 'change:range', this );\n\t\tthis._liveRange.stopDelegating( 'change:content', this );\n\t\tthis._liveRange.detach();\n\t\tthis._liveRange = null;\n\t}\n\n\t/**\n\t * Fired whenever {@link ~Marker#_liveRange marker range} is changed due to changes on {@link module:engine/model/document~Document}.\n\t * This is a delegated {@link module:engine/model/liverange~LiveRange#event:change:range LiveRange change:range event}.\n\t *\n\t * When marker is removed from {@link module:engine/model/markercollection~MarkerCollection MarkerCollection},\n\t * all event listeners listening to it should be removed. It is best to do it on\n\t * {@link module:engine/model/markercollection~MarkerCollection#event:update MarkerCollection update event}.\n\t *\n\t * @see module:engine/model/liverange~LiveRange#event:change:range\n\t * @event change:range\n\t * @param {module:engine/model/range~Range} oldRange\n\t * @param {Object} data\n\t */\n\n\t/**\n\t * Fired whenever change on {@link module:engine/model/document~Document} is done inside {@link ~Marker#_liveRange marker range}.\n\t * This is a delegated {@link module:engine/model/liverange~LiveRange#event:change:content LiveRange change:content event}.\n\t *\n\t * When marker is removed from {@link module:engine/model/markercollection~MarkerCollection MarkerCollection},\n\t * all event listeners listening to it should be removed. It is best to do it on\n\t * {@link module:engine/model/markercollection~MarkerCollection#event:update MarkerCollection update event}.\n\t *\n\t * @see module:engine/model/liverange~LiveRange#event:change:content\n\t * @event change:content\n\t * @param {module:engine/model/range~Range} oldRange\n\t * @param {Object} data\n\t */\n}\n\nmix( Marker, EmitterMixin );\n\n/**\n * Cannot use a {@link module:engine/model/markercollection~MarkerCollection#destroy destroyed marker} instance.\n *\n * @error marker-destroyed\n */\n"]}]}