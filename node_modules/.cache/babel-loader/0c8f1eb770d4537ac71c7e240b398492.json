{"remainingRequest":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/babel-loader/lib/index.js!/Users/antonyching/Desktop/project/new-builder-demo/node_modules/@ckeditor/ckeditor5-enter/src/shiftentercommand.js","dependencies":[{"path":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/@ckeditor/ckeditor5-enter/src/shiftentercommand.js","mtime":499162500000},{"path":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/@ckeditor/ckeditor5-dev-webpack-plugin/lib/translatesourceloader.js","mtime":499162500000},{"path":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:LyoqCiAqIEBsaWNlbnNlIENvcHlyaWdodCAoYykgMjAwMy0yMDE5LCBDS1NvdXJjZSAtIEZyZWRlcmljbyBLbmFiYmVuLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKiBGb3IgbGljZW5zaW5nLCBzZWUgTElDRU5TRS5tZCBvciBodHRwczovL2NrZWRpdG9yLmNvbS9sZWdhbC9ja2VkaXRvci1vc3MtbGljZW5zZQogKi8KCi8qKgogKiBAbW9kdWxlIGVudGVyL3NoaWZ0ZW50ZXJjb21tYW5kCiAqLwppbXBvcnQgQ29tbWFuZCBmcm9tICdAY2tlZGl0b3IvY2tlZGl0b3I1LWNvcmUvc3JjL2NvbW1hbmQnOwppbXBvcnQgeyBnZXRDb3B5T25FbnRlckF0dHJpYnV0ZXMgfSBmcm9tICcuL3V0aWxzJzsKLyoqCiAqIFNoaWZ0RW50ZXIgY29tbWFuZC4gSXQgaXMgdXNlZCBieSB0aGUge0BsaW5rIG1vZHVsZTplbnRlci9zaGlmdGVudGVyflNoaWZ0RW50ZXIgU2hpZnRFbnRlciBmZWF0dXJlfSB0byBoYW5kbGUKICogdGhlIDxrYmQ+U2hpZnQ8L2tiZD4rPGtiZD5FbnRlcjwva2JkPiBrZXlzdHJva2UuCiAqCiAqIEBleHRlbmRzIG1vZHVsZTpjb3JlL2NvbW1hbmR+Q29tbWFuZAogKi8KCmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNoaWZ0RW50ZXJDb21tYW5kIGV4dGVuZHMgQ29tbWFuZCB7CiAgLyoqCiAgICogQGluaGVyaXREb2MKICAgKi8KICBleGVjdXRlKCkgewogICAgY29uc3QgbW9kZWwgPSB0aGlzLmVkaXRvci5tb2RlbDsKICAgIGNvbnN0IGRvYyA9IG1vZGVsLmRvY3VtZW50OwogICAgbW9kZWwuY2hhbmdlKHdyaXRlciA9PiB7CiAgICAgIHNvZnRCcmVha0FjdGlvbihtb2RlbCwgd3JpdGVyLCBkb2Muc2VsZWN0aW9uKTsKICAgICAgdGhpcy5maXJlKCdhZnRlckV4ZWN1dGUnLCB7CiAgICAgICAgd3JpdGVyCiAgICAgIH0pOwogICAgfSk7CiAgfQoKICByZWZyZXNoKCkgewogICAgY29uc3QgbW9kZWwgPSB0aGlzLmVkaXRvci5tb2RlbDsKICAgIGNvbnN0IGRvYyA9IG1vZGVsLmRvY3VtZW50OwogICAgdGhpcy5pc0VuYWJsZWQgPSBpc0VuYWJsZWQobW9kZWwuc2NoZW1hLCBkb2Muc2VsZWN0aW9uKTsKICB9Cgp9IC8vIENoZWNrcyB3aGV0aGVyIHRoZSBTaGlmdEVudGVyIGNvbW1hbmQgc2hvdWxkIGJlIGVuYWJsZWQgaW4gdGhlIHNwZWNpZmllZCBzZWxlY3Rpb24uCi8vCi8vIEBwYXJhbSB7bW9kdWxlOmVuZ2luZS9tb2RlbC9zY2hlbWF+U2NoZW1hfSBzY2hlbWEKLy8gQHBhcmFtIHttb2R1bGU6ZW5naW5lL21vZGVsL3NlbGVjdGlvbn5TZWxlY3Rpb258bW9kdWxlOmVuZ2luZS9tb2RlbC9kb2N1bWVudHNlbGVjdGlvbn5Eb2N1bWVudFNlbGVjdGlvbn0gc2VsZWN0aW9uCgpmdW5jdGlvbiBpc0VuYWJsZWQoc2NoZW1hLCBzZWxlY3Rpb24pIHsKICAvLyBBdCB0aGlzIG1vbWVudCBpdCBpcyBva2F5IHRvIHN1cHBvcnQgc2luZ2xlIHJhbmdlIHNlbGVjdGlvbnMgb25seS4KICAvLyBCdXQgaW4gdGhlIGZ1dHVyZSB3ZSBtYXkgbmVlZCB0byBjaGFuZ2UgdGhhdC4KICBpZiAoc2VsZWN0aW9uLnJhbmdlQ291bnQgPiAxKSB7CiAgICByZXR1cm4gZmFsc2U7CiAgfQoKICBjb25zdCBhbmNob3JQb3MgPSBzZWxlY3Rpb24uYW5jaG9yOyAvLyBDaGVjayB3aGV0aGVyIHRoZSBicmVhayBlbGVtZW50IGNhbiBiZSBpbnNlcnRlZCBpbiB0aGUgY3VycmVudCBzZWxlY3Rpb24gYW5jaG9yLgoKICBpZiAoIWFuY2hvclBvcyB8fCAhc2NoZW1hLmNoZWNrQ2hpbGQoYW5jaG9yUG9zLCAnc29mdEJyZWFrJykpIHsKICAgIHJldHVybiBmYWxzZTsKICB9CgogIGNvbnN0IHJhbmdlID0gc2VsZWN0aW9uLmdldEZpcnN0UmFuZ2UoKTsKICBjb25zdCBzdGFydEVsZW1lbnQgPSByYW5nZS5zdGFydC5wYXJlbnQ7CiAgY29uc3QgZW5kRWxlbWVudCA9IHJhbmdlLmVuZC5wYXJlbnQ7IC8vIERvIG5vdCBtb2RpZnkgdGhlIGNvbnRlbnQgaWYgc2VsZWN0aW9uIGlzIGNyb3NzLWxpbWl0IGVsZW1lbnRzLgoKICBpZiAoKGlzSW5zaWRlTGltaXRFbGVtZW50KHN0YXJ0RWxlbWVudCwgc2NoZW1hKSB8fCBpc0luc2lkZUxpbWl0RWxlbWVudChlbmRFbGVtZW50LCBzY2hlbWEpKSAmJiBzdGFydEVsZW1lbnQgIT09IGVuZEVsZW1lbnQpIHsKICAgIHJldHVybiBmYWxzZTsKICB9CgogIHJldHVybiB0cnVlOwp9IC8vIENyZWF0ZXMgYSBicmVhayBpbiB0aGUgd2F5IHRoYXQgdGhlIDxrYmQ+U2hpZnQ8L2tiZD4rPGtiZD5FbnRlcjwva2JkPiBrZXlzdHJva2UgaXMgZXhwZWN0ZWQgdG8gd29yay4KLy8KLy8gQHBhcmFtIHttb2R1bGU6ZW5naW5lL21vZGVsfk1vZGVsfSBtb2RlbAovLyBAcGFyYW0ge21vZHVsZTplbmdpbmUvbW9kZWwvd3JpdGVyfldyaXRlcn0gd3JpdGVyCi8vIEBwYXJhbSB7bW9kdWxlOmVuZ2luZS9tb2RlbC9zZWxlY3Rpb25+U2VsZWN0aW9ufG1vZHVsZTplbmdpbmUvbW9kZWwvZG9jdW1lbnRzZWxlY3Rpb25+RG9jdW1lbnRTZWxlY3Rpb259IHNlbGVjdGlvbgovLyBTZWxlY3Rpb24gb24gd2hpY2ggdGhlIGFjdGlvbiBzaG91bGQgYmUgcGVyZm9ybWVkLgoKCmZ1bmN0aW9uIHNvZnRCcmVha0FjdGlvbihtb2RlbCwgd3JpdGVyLCBzZWxlY3Rpb24pIHsKICBjb25zdCBpc1NlbGVjdGlvbkVtcHR5ID0gc2VsZWN0aW9uLmlzQ29sbGFwc2VkOwogIGNvbnN0IHJhbmdlID0gc2VsZWN0aW9uLmdldEZpcnN0UmFuZ2UoKTsKICBjb25zdCBzdGFydEVsZW1lbnQgPSByYW5nZS5zdGFydC5wYXJlbnQ7CiAgY29uc3QgZW5kRWxlbWVudCA9IHJhbmdlLmVuZC5wYXJlbnQ7CiAgY29uc3QgaXNDb250YWluZWRXaXRoaW5PbmVFbGVtZW50ID0gc3RhcnRFbGVtZW50ID09IGVuZEVsZW1lbnQ7CgogIGlmIChpc1NlbGVjdGlvbkVtcHR5KSB7CiAgICBjb25zdCBhdHRyaWJ1dGVzVG9Db3B5ID0gZ2V0Q29weU9uRW50ZXJBdHRyaWJ1dGVzKG1vZGVsLnNjaGVtYSwgc2VsZWN0aW9uLmdldEF0dHJpYnV0ZXMoKSk7CiAgICBpbnNlcnRCcmVhayh3cml0ZXIsIHJhbmdlLmVuZCk7CiAgICB3cml0ZXIucmVtb3ZlU2VsZWN0aW9uQXR0cmlidXRlKHNlbGVjdGlvbi5nZXRBdHRyaWJ1dGVLZXlzKCkpOwogICAgd3JpdGVyLnNldFNlbGVjdGlvbkF0dHJpYnV0ZShhdHRyaWJ1dGVzVG9Db3B5KTsKICB9IGVsc2UgewogICAgY29uc3QgbGVhdmVVbm1lcmdlZCA9ICEocmFuZ2Uuc3RhcnQuaXNBdFN0YXJ0ICYmIHJhbmdlLmVuZC5pc0F0RW5kKTsKICAgIG1vZGVsLmRlbGV0ZUNvbnRlbnQoc2VsZWN0aW9uLCB7CiAgICAgIGxlYXZlVW5tZXJnZWQKICAgIH0pOyAvLyBTZWxlY3Rpb24gd2l0aGluIG9uZSBlbGVtZW50OgogICAgLy8KICAgIC8vIDxoPnhbeHhdeDwvaD4JCS0+IDxoPnheeDwvaD4JCQktPiA8aD54PGJyPl54PC9oPgoKICAgIGlmIChpc0NvbnRhaW5lZFdpdGhpbk9uZUVsZW1lbnQpIHsKICAgICAgaW5zZXJ0QnJlYWsod3JpdGVyLCBzZWxlY3Rpb24uZm9jdXMpOwogICAgfSAvLyBTZWxlY3Rpb24gb3ZlciBtdWx0aXBsZSBlbGVtZW50cy4KICAgIC8vCiAgICAvLyA8aD54W3g8L2g+PHA+eV15PHA+CS0+IDxoPnhePC9oPjxwPnk8L3A+CS0+IDxoPng8L2g+PHA+Xnk8L3A+CiAgICAvLwogICAgLy8gV2UgY2hvc2Ugbm90IHRvIGluc2VydCBhIGxpbmUgYnJlYWsgaW4gdGhpcyBjYXNlIGJlY2F1c2U6CiAgICAvLwogICAgLy8gKiBpdCdzIG5vdCBhIHZlcnkgY29tbW9uIHNjZW5hcmlvLAogICAgLy8gKiBpdCBhY3R1YWxseSBzdXJwcmlzZWQgbWUgd2hlbiBJIHNhdyB0aGUgImV4cGVjdGVkIGJlaGF2aW9yIiBpbiByZWFsIGxpZmUuCiAgICAvLwogICAgLy8gSXQncyBvayBpZiB0aGUgdXNlciB3aWxsIG5lZWQgdG8gYmUgbW9yZSBzcGVjaWZpYyB3aGVyZSB0aGV5IHdhbnQgdGhlIDxicj4gdG8gYmUgaW5zZXJ0ZWQuCiAgICBlbHNlIHsKICAgICAgICAvLyBNb3ZlIHRoZSBzZWxlY3Rpb24gdG8gdGhlIDJuZCBlbGVtZW50IChsYXN0IHN0ZXAgb2YgdGhlIGV4YW1wbGUgYWJvdmUpLgogICAgICAgIGlmIChsZWF2ZVVubWVyZ2VkKSB7CiAgICAgICAgICB3cml0ZXIuc2V0U2VsZWN0aW9uKGVuZEVsZW1lbnQsIDApOwogICAgICAgIH0KICAgICAgfQogIH0KfQoKZnVuY3Rpb24gaW5zZXJ0QnJlYWsod3JpdGVyLCBwb3NpdGlvbikgewogIGNvbnN0IGJyZWFrTGluZUVsZW1lbnQgPSB3cml0ZXIuY3JlYXRlRWxlbWVudCgnc29mdEJyZWFrJyk7CiAgd3JpdGVyLmluc2VydChicmVha0xpbmVFbGVtZW50LCBwb3NpdGlvbik7CiAgd3JpdGVyLnNldFNlbGVjdGlvbihicmVha0xpbmVFbGVtZW50LCAnYWZ0ZXInKTsKfSAvLyBDaGVja3Mgd2hldGhlciB0aGUgc3BlY2lmaWVkIGBlbGVtZW50YCBpcyBhIGNoaWxkIG9mIHRoZSBsaW1pdCBlbGVtZW50LgovLwovLyBDaGVja2luZyB3aGV0aGVyIHRoZSBgPHA+YCBlbGVtZW50IGlzIGluc2lkZSBhIGxpbWl0IGVsZW1lbnQ6Ci8vICAgLSA8JHJvb3Q+PHA+VGV4dC48L3A+PC8kcm9vdD4gPT4gZmFsc2UKLy8gICAtIDwkcm9vdD48bGltaXRFbGVtZW50PjxwPlRleHQ8L3A+PC9saW1pdEVsZW1lbnQ+PC8kcm9vdD4gPT4gdHJ1ZQovLwovLyBAcGFyYW0ge21vZHVsZTplbmdpbmUvbW9kZWwvZWxlbWVudH5FbGVtZW50fSBlbGVtZW50Ci8vIEBwYXJhbSB7bW9kdWxlOmVuZ2luZS9zY2hlbWF+U2NoZW1hfSBzY2hlbWEKLy8gQHJldHVybnMge0Jvb2xlYW59CgoKZnVuY3Rpb24gaXNJbnNpZGVMaW1pdEVsZW1lbnQoZWxlbWVudCwgc2NoZW1hKSB7CiAgLy8gYCRyb290YCBpcyBhIGxpbWl0IGVsZW1lbnQgYnV0IGluIHRoaXMgY2FzZSBpcyBhbiBpbnZhbGlkIGVsZW1lbnQuCiAgaWYgKGVsZW1lbnQuaXMoJ3Jvb3RFbGVtZW50JykpIHsKICAgIHJldHVybiBmYWxzZTsKICB9CgogIHJldHVybiBzY2hlbWEuaXNMaW1pdChlbGVtZW50KSB8fCBpc0luc2lkZUxpbWl0RWxlbWVudChlbGVtZW50LnBhcmVudCwgc2NoZW1hKTsKfQ=="},{"version":3,"sources":["/Users/antonyching/Desktop/project/new-builder-demo/node_modules/@ckeditor/ckeditor5-enter/src/shiftentercommand.js"],"names":["Command","getCopyOnEnterAttributes","ShiftEnterCommand","execute","model","editor","doc","document","change","writer","softBreakAction","selection","fire","refresh","isEnabled","schema","rangeCount","anchorPos","anchor","checkChild","range","getFirstRange","startElement","start","parent","endElement","end","isInsideLimitElement","isSelectionEmpty","isCollapsed","isContainedWithinOneElement","attributesToCopy","getAttributes","insertBreak","removeSelectionAttribute","getAttributeKeys","setSelectionAttribute","leaveUnmerged","isAtStart","isAtEnd","deleteContent","focus","setSelection","position","breakLineElement","createElement","insert","element","is","isLimit"],"mappings":"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","sourcesContent":["/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module enter/shiftentercommand\n */\n\nimport Command from '@ckeditor/ckeditor5-core/src/command';\nimport { getCopyOnEnterAttributes } from './utils';\n\n/**\n * ShiftEnter command. It is used by the {@link module:enter/shiftenter~ShiftEnter ShiftEnter feature} to handle\n * the <kbd>Shift</kbd>+<kbd>Enter</kbd> keystroke.\n *\n * @extends module:core/command~Command\n */\nexport default class ShiftEnterCommand extends Command {\n\t/**\n\t * @inheritDoc\n\t */\n\texecute() {\n\t\tconst model = this.editor.model;\n\t\tconst doc = model.document;\n\n\t\tmodel.change( writer => {\n\t\t\tsoftBreakAction( model, writer, doc.selection );\n\t\t\tthis.fire( 'afterExecute', { writer } );\n\t\t} );\n\t}\n\n\trefresh() {\n\t\tconst model = this.editor.model;\n\t\tconst doc = model.document;\n\n\t\tthis.isEnabled = isEnabled( model.schema, doc.selection );\n\t}\n}\n\n// Checks whether the ShiftEnter command should be enabled in the specified selection.\n//\n// @param {module:engine/model/schema~Schema} schema\n// @param {module:engine/model/selection~Selection|module:engine/model/documentselection~DocumentSelection} selection\nfunction isEnabled( schema, selection ) {\n\t// At this moment it is okay to support single range selections only.\n\t// But in the future we may need to change that.\n\tif ( selection.rangeCount > 1 ) {\n\t\treturn false;\n\t}\n\n\tconst anchorPos = selection.anchor;\n\n\t// Check whether the break element can be inserted in the current selection anchor.\n\tif ( !anchorPos || !schema.checkChild( anchorPos, 'softBreak' ) ) {\n\t\treturn false;\n\t}\n\n\tconst range = selection.getFirstRange();\n\tconst startElement = range.start.parent;\n\tconst endElement = range.end.parent;\n\n\t// Do not modify the content if selection is cross-limit elements.\n\tif ( ( isInsideLimitElement( startElement, schema ) || isInsideLimitElement( endElement, schema ) ) && startElement !== endElement ) {\n\t\treturn false;\n\t}\n\n\treturn true;\n}\n\n// Creates a break in the way that the <kbd>Shift</kbd>+<kbd>Enter</kbd> keystroke is expected to work.\n//\n// @param {module:engine/model~Model} model\n// @param {module:engine/model/writer~Writer} writer\n// @param {module:engine/model/selection~Selection|module:engine/model/documentselection~DocumentSelection} selection\n// Selection on which the action should be performed.\nfunction softBreakAction( model, writer, selection ) {\n\tconst isSelectionEmpty = selection.isCollapsed;\n\tconst range = selection.getFirstRange();\n\tconst startElement = range.start.parent;\n\tconst endElement = range.end.parent;\n\tconst isContainedWithinOneElement = ( startElement == endElement );\n\n\tif ( isSelectionEmpty ) {\n\t\tconst attributesToCopy = getCopyOnEnterAttributes( model.schema, selection.getAttributes() );\n\t\tinsertBreak( writer, range.end );\n\n\t\twriter.removeSelectionAttribute( selection.getAttributeKeys() );\n\t\twriter.setSelectionAttribute( attributesToCopy );\n\t} else {\n\t\tconst leaveUnmerged = !( range.start.isAtStart && range.end.isAtEnd );\n\t\tmodel.deleteContent( selection, { leaveUnmerged } );\n\n\t\t// Selection within one element:\n\t\t//\n\t\t// <h>x[xx]x</h>\t\t-> <h>x^x</h>\t\t\t-> <h>x<br>^x</h>\n\t\tif ( isContainedWithinOneElement ) {\n\t\t\tinsertBreak( writer, selection.focus );\n\t\t}\n\t\t// Selection over multiple elements.\n\t\t//\n\t\t// <h>x[x</h><p>y]y<p>\t-> <h>x^</h><p>y</p>\t-> <h>x</h><p>^y</p>\n\t\t//\n\t\t// We chose not to insert a line break in this case because:\n\t\t//\n\t\t// * it's not a very common scenario,\n\t\t// * it actually surprised me when I saw the \"expected behavior\" in real life.\n\t\t//\n\t\t// It's ok if the user will need to be more specific where they want the <br> to be inserted.\n\t\telse {\n\t\t\t// Move the selection to the 2nd element (last step of the example above).\n\t\t\tif ( leaveUnmerged ) {\n\t\t\t\twriter.setSelection( endElement, 0 );\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction insertBreak( writer, position ) {\n\tconst breakLineElement = writer.createElement( 'softBreak' );\n\n\twriter.insert( breakLineElement, position );\n\twriter.setSelection( breakLineElement, 'after' );\n}\n\n// Checks whether the specified `element` is a child of the limit element.\n//\n// Checking whether the `<p>` element is inside a limit element:\n//   - <$root><p>Text.</p></$root> => false\n//   - <$root><limitElement><p>Text</p></limitElement></$root> => true\n//\n// @param {module:engine/model/element~Element} element\n// @param {module:engine/schema~Schema} schema\n// @returns {Boolean}\nfunction isInsideLimitElement( element, schema ) {\n\t// `$root` is a limit element but in this case is an invalid element.\n\tif ( element.is( 'rootElement' ) ) {\n\t\treturn false;\n\t}\n\n\treturn schema.isLimit( element ) || isInsideLimitElement( element.parent, schema );\n}\n"]}]}