{"remainingRequest":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/babel-loader/lib/index.js!/Users/antonyching/Desktop/project/new-builder-demo/node_modules/@ckeditor/ckeditor5-engine/src/view/upcastwriter.js","dependencies":[{"path":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/@ckeditor/ckeditor5-engine/src/view/upcastwriter.js","mtime":499162500000},{"path":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/@ckeditor/ckeditor5-dev-webpack-plugin/lib/translatesourceloader.js","mtime":499162500000},{"path":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:LyoqCiAqIEBsaWNlbnNlIENvcHlyaWdodCAoYykgMjAwMy0yMDE5LCBDS1NvdXJjZSAtIEZyZWRlcmljbyBLbmFiYmVuLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKiBGb3IgbGljZW5zaW5nLCBzZWUgTElDRU5TRS5tZCBvciBodHRwczovL2NrZWRpdG9yLmNvbS9sZWdhbC9ja2VkaXRvci1vc3MtbGljZW5zZQogKi8KCi8qKgogKiBAbW9kdWxlIG1vZHVsZTplbmdpbmUvdmlldy91cGNhc3R3cml0ZXIKICovCmltcG9ydCBEb2N1bWVudEZyYWdtZW50IGZyb20gJy4vZG9jdW1lbnRmcmFnbWVudCc7CmltcG9ydCBFbGVtZW50IGZyb20gJy4vZWxlbWVudCc7CmltcG9ydCBUZXh0IGZyb20gJy4vdGV4dCc7CmltcG9ydCB7IGlzUGxhaW5PYmplY3QgfSBmcm9tICdsb2Rhc2gtZXMnOwppbXBvcnQgUG9zaXRpb24gZnJvbSAnLi9wb3NpdGlvbic7CmltcG9ydCBSYW5nZSBmcm9tICcuL3JhbmdlJzsKaW1wb3J0IFNlbGVjdGlvbiBmcm9tICcuL3NlbGVjdGlvbic7Ci8qKgogKiBWaWV3IHVwY2FzdCB3cml0ZXIuIEl0IHByb3ZpZGVzIGEgc2V0IG9mIG1ldGhvZHMgdXNlZCB0byBtYW5pcHVsYXRlIG5vbi1zZW1hbnRpYyB2aWV3IHRyZWVzLgogKgogKiBJdCBzaG91bGQgYmUgdXNlZCBvbmx5IHdoaWxlIHdvcmtpbmcgb24gYSBub24tc2VtYW50aWMgdmlldwogKiAoZS5nLiBhIHZpZXcgY3JlYXRlZCBmcm9tIEhUTUwgc3RyaW5nIG9uIHBhc3RlKS4KICogVG8gbWFuaXB1bGF0ZSBhIHZpZXcgd2hpY2ggd2FzIG9yIGlzIGJlaW5nIGRvd25jYXN0ZWQgZnJvbSB0aGUgdGhlIG1vZGVsIHVzZSB0aGUKICoge0BsaW5rIG1vZHVsZTplbmdpbmUvdmlldy9kb3duY2FzdHdyaXRlcn5Eb3duY2FzdFdyaXRlciBkb3duY2FzdCB3cml0ZXJ9LgogKgogKiBSZWFkIG1vcmUgYWJvdXQgY2hhbmdpbmcgdGhlIHZpZXcgaW4gdGhlIHtAZ2xpbmsgZnJhbWV3b3JrL2d1aWRlcy9hcmNoaXRlY3R1cmUvZWRpdGluZy1lbmdpbmUjY2hhbmdpbmctdGhlLXZpZXcgQ2hhbmdpbmcgdGhlIHZpZXd9CiAqIHNlY3Rpb24gb2YgdGhlIHtAZ2xpbmsgZnJhbWV3b3JrL2d1aWRlcy9hcmNoaXRlY3R1cmUvZWRpdGluZy1lbmdpbmUgRWRpdGluZyBlbmdpbmUgYXJjaGl0ZWN0dXJlfSBndWlkZS4KICoKICogVW5saWtlIGBEb3duY2FzdFdyaXRlcmAsIHdoaWNoIGlzIGF2YWlsYWJsZSBpbiB0aGUge0BsaW5rIG1vZHVsZTplbmdpbmUvdmlldy92aWV3flZpZXcjY2hhbmdlIGBWaWV3I2NoYW5nZSgpYH0gYmxvY2ssCiAqIGBVcGNhc3RXcml0ZXJgIGNhbiBiZSBjcmVhdGVkIHdoZXJldmVyIHlvdSBuZWVkIGl0OgogKgogKgkJY29uc3Qgd3JpdGVyID0gbmV3IFVwY2FzdFdyaXRlcigpOwogKgkJY29uc3QgdGV4dCA9IHdyaXRlci5jcmVhdGVUZXh0KCAnZm9vIScgKTsKICoKICoJCXdyaXRlci5hcHBlbmRDaGlsZCggdGV4dCwgc29tZVZpZXdFbGVtZW50ICk7CiAqLwoKZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXBjYXN0V3JpdGVyIHsKICAvKioKICAgKiBDcmVhdGVzIGEgbmV3IHtAbGluayBtb2R1bGU6ZW5naW5lL3ZpZXcvZG9jdW1lbnRmcmFnbWVudH5Eb2N1bWVudEZyYWdtZW50fSBpbnN0YW5jZS4KICAgKgogICAqIEBwYXJhbSB7bW9kdWxlOmVuZ2luZS92aWV3L25vZGV+Tm9kZXxJdGVyYWJsZS48bW9kdWxlOmVuZ2luZS92aWV3L25vZGV+Tm9kZT59IFtjaGlsZHJlbl0KICAgKiBBIGxpc3Qgb2Ygbm9kZXMgdG8gYmUgaW5zZXJ0ZWQgaW50byB0aGUgY3JlYXRlZCBkb2N1bWVudCBmcmFnbWVudC4KICAgKiBAcmV0dXJucyB7bW9kdWxlOmVuZ2luZS92aWV3L2RvY3VtZW50ZnJhZ21lbnR+RG9jdW1lbnRGcmFnbWVudH0gVGhlIGNyZWF0ZWQgZG9jdW1lbnQgZnJhZ21lbnQuCiAgICovCiAgY3JlYXRlRG9jdW1lbnRGcmFnbWVudChjaGlsZHJlbikgewogICAgcmV0dXJuIG5ldyBEb2N1bWVudEZyYWdtZW50KGNoaWxkcmVuKTsKICB9CiAgLyoqCiAgICogQ3JlYXRlcyBhIG5ldyB7QGxpbmsgbW9kdWxlOmVuZ2luZS92aWV3L2VsZW1lbnR+RWxlbWVudH0gaW5zdGFuY2UuCiAgICoKICAgKiBBdHRyaWJ1dGVzIGNhbiBiZSBwYXNzZWQgaW4gdmFyaW91cyBmb3JtYXRzOgogICAqCiAgICoJCXVwY2FzdFdyaXRlci5jcmVhdGVFbGVtZW50KCAnZGl2JywgeyBjbGFzczogJ2VkaXRvcicsIGNvbnRlbnRFZGl0YWJsZTogJ3RydWUnIH0gKTsgLy8gb2JqZWN0CiAgICoJCXVwY2FzdFdyaXRlci5jcmVhdGVFbGVtZW50KCAnZGl2JywgWyBbICdjbGFzcycsICdlZGl0b3InIF0sIFsgJ2NvbnRlbnRFZGl0YWJsZScsICd0cnVlJyBdIF0gKTsgLy8gbWFwLWxpa2UgaXRlcmF0b3IKICAgKgkJdXBjYXN0V3JpdGVyLmNyZWF0ZUVsZW1lbnQoICdkaXYnLCBtYXBPZkF0dHJpYnV0ZXMgKTsgLy8gbWFwCiAgICoKICAgKiBAcGFyYW0ge1N0cmluZ30gbmFtZSBOb2RlIG5hbWUuCiAgICogQHBhcmFtIHtPYmplY3R8SXRlcmFibGV9IFthdHRyc10gQ29sbGVjdGlvbiBvZiBhdHRyaWJ1dGVzLgogICAqIEBwYXJhbSB7bW9kdWxlOmVuZ2luZS92aWV3L25vZGV+Tm9kZXxJdGVyYWJsZS48bW9kdWxlOmVuZ2luZS92aWV3L25vZGV+Tm9kZT59IFtjaGlsZHJlbl0KICAgKiBBIGxpc3Qgb2Ygbm9kZXMgdG8gYmUgaW5zZXJ0ZWQgaW50byBjcmVhdGVkIGVsZW1lbnQuCiAgICogQHJldHVybnMge21vZHVsZTplbmdpbmUvdmlldy9lbGVtZW50fkVsZW1lbnR9IENyZWF0ZWQgZWxlbWVudC4KICAgKi8KCgogIGNyZWF0ZUVsZW1lbnQobmFtZSwgYXR0cnMsIGNoaWxkcmVuKSB7CiAgICByZXR1cm4gbmV3IEVsZW1lbnQobmFtZSwgYXR0cnMsIGNoaWxkcmVuKTsKICB9CiAgLyoqCiAgICogQ3JlYXRlcyBhIG5ldyB7QGxpbmsgbW9kdWxlOmVuZ2luZS92aWV3L3RleHR+VGV4dH0gaW5zdGFuY2UuCiAgICoKICAgKiBAcGFyYW0ge1N0cmluZ30gZGF0YSBUaGUgdGV4dCdzIGRhdGEuCiAgICogQHJldHVybnMge21vZHVsZTplbmdpbmUvdmlldy90ZXh0flRleHR9IFRoZSBjcmVhdGVkIHRleHQgbm9kZS4KICAgKi8KCgogIGNyZWF0ZVRleHQoZGF0YSkgewogICAgcmV0dXJuIG5ldyBUZXh0KGRhdGEpOwogIH0KICAvKioKICAgKiBDbG9uZXMgdGhlIHByb3ZpZGVkIGVsZW1lbnQuCiAgICoKICAgKiBAc2VlIG1vZHVsZTplbmdpbmUvdmlldy9lbGVtZW50fkVsZW1lbnQjX2Nsb25lCiAgICogQHBhcmFtIHttb2R1bGU6ZW5naW5lL3ZpZXcvZWxlbWVudH5FbGVtZW50fSBlbGVtZW50IEVsZW1lbnQgdG8gYmUgY2xvbmVkLgogICAqIEBwYXJhbSB7Qm9vbGVhbn0gW2RlZXA9ZmFsc2VdIElmIHNldCB0byBgdHJ1ZWAgY2xvbmVzIGVsZW1lbnQgYW5kIGFsbCBpdHMgY2hpbGRyZW4gcmVjdXJzaXZlbHkuIFdoZW4gc2V0IHRvIGBmYWxzZWAsCiAgICogZWxlbWVudCB3aWxsIGJlIGNsb25lZCB3aXRob3V0IGFueSBjaGlsZHJlbi4KICAgKiBAcmV0dXJucyB7bW9kdWxlOmVuZ2luZS92aWV3L2VsZW1lbnR+RWxlbWVudH0gQ2xvbmUgb2YgdGhpcyBlbGVtZW50LgogICAqLwoKCiAgY2xvbmUoZWxlbWVudCwgZGVlcCA9IGZhbHNlKSB7CiAgICByZXR1cm4gZWxlbWVudC5fY2xvbmUoZGVlcCk7CiAgfQogIC8qKgogICAqIEFwcGVuZHMgYSBjaGlsZCBub2RlIG9yIGEgbGlzdCBvZiBjaGlsZCBub2RlcyBhdCB0aGUgZW5kIG9mIHRoaXMgbm9kZQogICAqIGFuZCBzZXRzIHRoZSBwYXJlbnQgb2YgdGhlc2Ugbm9kZXMgdG8gdGhpcyBlbGVtZW50LgogICAqCiAgICogQHNlZSBtb2R1bGU6ZW5naW5lL3ZpZXcvZWxlbWVudH5FbGVtZW50I19hcHBlbmRDaGlsZAogICAqIEBwYXJhbSB7bW9kdWxlOmVuZ2luZS92aWV3L2l0ZW1+SXRlbXxJdGVyYWJsZS48bW9kdWxlOmVuZ2luZS92aWV3L2l0ZW1+SXRlbT59IGl0ZW1zIEl0ZW1zIHRvIGJlIGluc2VydGVkLgogICAqIEBwYXJhbSB7bW9kdWxlOmVuZ2luZS92aWV3L2VsZW1lbnR+RWxlbWVudHxtb2R1bGU6ZW5naW5lL3ZpZXcvZG9jdW1lbnRmcmFnbWVudH5Eb2N1bWVudEZyYWdtZW50fSBlbGVtZW50IEVsZW1lbnQKICAgKiB0byB3aGljaCBpdGVtcyB3aWxsIGJlIGFwcGVuZGVkLgogICAqIEBmaXJlcyBtb2R1bGU6ZW5naW5lL3ZpZXcvbm9kZX5Ob2RlI2V2ZW50OmNoYW5nZQogICAqIEByZXR1cm5zIHtOdW1iZXJ9IE51bWJlciBvZiBhcHBlbmRlZCBub2Rlcy4KICAgKi8KCgogIGFwcGVuZENoaWxkKGl0ZW1zLCBlbGVtZW50KSB7CiAgICByZXR1cm4gZWxlbWVudC5fYXBwZW5kQ2hpbGQoaXRlbXMpOwogIH0KICAvKioKICAgKiBJbnNlcnRzIGEgY2hpbGQgbm9kZSBvciBhIGxpc3Qgb2YgY2hpbGQgbm9kZXMgb24gdGhlIGdpdmVuIGluZGV4IGFuZCBzZXRzIHRoZSBwYXJlbnQgb2YgdGhlc2Ugbm9kZXMgdG8KICAgKiB0aGlzIGVsZW1lbnQuCiAgICoKICAgKiBAc2VlIG1vZHVsZTplbmdpbmUvdmlldy9lbGVtZW50fkVsZW1lbnQjX2luc2VydENoaWxkCiAgICogQHBhcmFtIHtOdW1iZXJ9IGluZGV4IE9mZnNldCBhdCB3aGljaCBub2RlcyBzaG91bGQgYmUgaW5zZXJ0ZWQuCiAgICogQHBhcmFtIHttb2R1bGU6ZW5naW5lL3ZpZXcvaXRlbX5JdGVtfEl0ZXJhYmxlLjxtb2R1bGU6ZW5naW5lL3ZpZXcvaXRlbX5JdGVtPn0gaXRlbXMgSXRlbXMgdG8gYmUgaW5zZXJ0ZWQuCiAgICogQHBhcmFtIHttb2R1bGU6ZW5naW5lL3ZpZXcvZWxlbWVudH5FbGVtZW50fG1vZHVsZTplbmdpbmUvdmlldy9kb2N1bWVudGZyYWdtZW50fkRvY3VtZW50RnJhZ21lbnR9IGVsZW1lbnQgRWxlbWVudAogICAqIHRvIHdoaWNoIGl0ZW1zIHdpbGwgYmUgaW5zZXJ0ZWQuCiAgICogQGZpcmVzIG1vZHVsZTplbmdpbmUvdmlldy9ub2Rlfk5vZGUjZXZlbnQ6Y2hhbmdlCiAgICogQHJldHVybnMge051bWJlcn0gTnVtYmVyIG9mIGluc2VydGVkIG5vZGVzLgogICAqLwoKCiAgaW5zZXJ0Q2hpbGQoaW5kZXgsIGl0ZW1zLCBlbGVtZW50KSB7CiAgICByZXR1cm4gZWxlbWVudC5faW5zZXJ0Q2hpbGQoaW5kZXgsIGl0ZW1zKTsKICB9CiAgLyoqCiAgICogUmVtb3ZlcyB0aGUgZ2l2ZW4gbnVtYmVyIG9mIGNoaWxkIG5vZGVzIHN0YXJ0aW5nIGF0IHRoZSBnaXZlbiBpbmRleCBhbmQgc2V0IHRoZSBwYXJlbnQgb2YgdGhlc2Ugbm9kZXMgdG8gYG51bGxgLgogICAqCiAgICogQHNlZSBtb2R1bGU6ZW5naW5lL3ZpZXcvZWxlbWVudH5FbGVtZW50I19yZW1vdmVDaGlsZHJlbgogICAqIEBwYXJhbSB7TnVtYmVyfSBpbmRleCBPZmZzZXQgZnJvbSB3aGljaCBub2RlcyB3aWxsIGJlIHJlbW92ZWQuCiAgICogQHBhcmFtIHtOdW1iZXJ9IGhvd01hbnkgTnVtYmVyIG9mIG5vZGVzIHRvIHJlbW92ZS4KICAgKiBAcGFyYW0ge21vZHVsZTplbmdpbmUvdmlldy9lbGVtZW50fkVsZW1lbnR8bW9kdWxlOmVuZ2luZS92aWV3L2RvY3VtZW50ZnJhZ21lbnR+RG9jdW1lbnRGcmFnbWVudH0gZWxlbWVudCBFbGVtZW50CiAgICogd2hpY2ggY2hpbGRyZW4gd2lsbCBiZSByZW1vdmVkLgogICAqIEBmaXJlcyBtb2R1bGU6ZW5naW5lL3ZpZXcvbm9kZX5Ob2RlI2V2ZW50OmNoYW5nZQogICAqIEByZXR1cm5zIHtBcnJheS48bW9kdWxlOmVuZ2luZS92aWV3L25vZGV+Tm9kZT59IFRoZSBhcnJheSBjb250YWluaW5nIHJlbW92ZWQgbm9kZXMuCiAgICovCgoKICByZW1vdmVDaGlsZHJlbihpbmRleCwgaG93TWFueSwgZWxlbWVudCkgewogICAgcmV0dXJuIGVsZW1lbnQuX3JlbW92ZUNoaWxkcmVuKGluZGV4LCBob3dNYW55KTsKICB9CiAgLyoqCiAgICogUmVtb3ZlcyBnaXZlbiBlbGVtZW50IGZyb20gdGhlIHZpZXcgc3RydWN0dXJlLiBXaWxsIG5vdCBoYXZlIGVmZmVjdCBvbiBkZXRhY2hlZCBlbGVtZW50cy4KICAgKgogICAqIEBwYXJhbSB7bW9kdWxlOmVuZ2luZS92aWV3L2VsZW1lbnR+RWxlbWVudH0gZWxlbWVudCBFbGVtZW50IHdoaWNoIHdpbGwgYmUgcmVtb3ZlZC4KICAgKiBAcmV0dXJucyB7QXJyYXkuPG1vZHVsZTplbmdpbmUvdmlldy9ub2Rlfk5vZGU+fSBUaGUgYXJyYXkgY29udGFpbmluZyByZW1vdmVkIG5vZGVzLgogICAqLwoKCiAgcmVtb3ZlKGVsZW1lbnQpIHsKICAgIGNvbnN0IHBhcmVudCA9IGVsZW1lbnQucGFyZW50OwoKICAgIGlmIChwYXJlbnQpIHsKICAgICAgcmV0dXJuIHRoaXMucmVtb3ZlQ2hpbGRyZW4ocGFyZW50LmdldENoaWxkSW5kZXgoZWxlbWVudCksIDEsIHBhcmVudCk7CiAgICB9CgogICAgcmV0dXJuIFtdOwogIH0KICAvKioKICAgKiBSZXBsYWNlcyBnaXZlbiBlbGVtZW50IHdpdGggdGhlIG5ldyBvbmUgaW4gdGhlIHZpZXcgc3RydWN0dXJlLiBXaWxsIG5vdCBoYXZlIGVmZmVjdCBvbiBkZXRhY2hlZCBlbGVtZW50cy4KICAgKgogICAqIEBwYXJhbSB7bW9kdWxlOmVuZ2luZS92aWV3L2VsZW1lbnR+RWxlbWVudH0gb2xkRWxlbWVudCBFbGVtZW50IHdoaWNoIHdpbGwgYmUgcmVwbGFjZWQuCiAgICogQHBhcmFtIHttb2R1bGU6ZW5naW5lL3ZpZXcvZWxlbWVudH5FbGVtZW50fSBuZXdFbGVtZW50IEVsZW1lbnQgd2hpY2ggd2lsbCBiZSBpbnNlcnRlZCBpbiB0aGUgcGxhY2Ugb2YgdGhlIG9sZCBlbGVtZW50LgogICAqIEByZXR1cm5zIHtCb29sZWFufSBXaGV0aGVyIG9sZCBlbGVtZW50IHdhcyBzdWNjZXNzZnVsbHkgcmVwbGFjZWQuCiAgICovCgoKICByZXBsYWNlKG9sZEVsZW1lbnQsIG5ld0VsZW1lbnQpIHsKICAgIGNvbnN0IHBhcmVudCA9IG9sZEVsZW1lbnQucGFyZW50OwoKICAgIGlmIChwYXJlbnQpIHsKICAgICAgY29uc3QgaW5kZXggPSBwYXJlbnQuZ2V0Q2hpbGRJbmRleChvbGRFbGVtZW50KTsKICAgICAgdGhpcy5yZW1vdmVDaGlsZHJlbihpbmRleCwgMSwgcGFyZW50KTsKICAgICAgdGhpcy5pbnNlcnRDaGlsZChpbmRleCwgbmV3RWxlbWVudCwgcGFyZW50KTsKICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgcmV0dXJuIGZhbHNlOwogIH0KICAvKioKICAgKiBSZW1vdmVzIGdpdmVuIGVsZW1lbnQgZnJvbSB2aWV3IHN0cnVjdHVyZSBhbmQgcGxhY2VzIGl0cyBjaGlsZHJlbiBpbiBpdHMgcG9zaXRpb24uCiAgICogSXQgZG9lcyBub3RoaW5nIGlmIGVsZW1lbnQgaGFzIG5vIHBhcmVudC4KICAgKgogICAqIEBwYXJhbSB7bW9kdWxlOmVuZ2luZS92aWV3L2VsZW1lbnR+RWxlbWVudH0gZWxlbWVudCBFbGVtZW50IHRvIHVud3JhcC4KICAgKi8KCgogIHVud3JhcEVsZW1lbnQoZWxlbWVudCkgewogICAgY29uc3QgcGFyZW50ID0gZWxlbWVudC5wYXJlbnQ7CgogICAgaWYgKHBhcmVudCkgewogICAgICBjb25zdCBpbmRleCA9IHBhcmVudC5nZXRDaGlsZEluZGV4KGVsZW1lbnQpOwogICAgICB0aGlzLnJlbW92ZShlbGVtZW50KTsKICAgICAgdGhpcy5pbnNlcnRDaGlsZChpbmRleCwgZWxlbWVudC5nZXRDaGlsZHJlbigpLCBwYXJlbnQpOwogICAgfQogIH0KICAvKioKICAgKiBSZW5hbWVzIGVsZW1lbnQgYnkgY3JlYXRpbmcgYSBjb3B5IG9mIGEgZ2l2ZW4gZWxlbWVudCBidXQgd2l0aCBpdHMgbmFtZSBjaGFuZ2VkIGFuZCB0aGVuIG1vdmluZyBjb250ZW50cyBvZiB0aGUKICAgKiBvbGQgZWxlbWVudCB0byB0aGUgbmV3IG9uZS4KICAgKgogICAqIFNpbmNlIHRoaXMgZnVuY3Rpb24gY3JlYXRlcyBhIG5ldyBlbGVtZW50IGFuZCByZW1vdmVzIHRoZSBnaXZlbiBvbmUsIHRoZSBuZXcgZWxlbWVudCBpcyByZXR1cm5lZCB0byBrZWVwIHJlZmVyZW5jZS4KICAgKgogICAqIEBwYXJhbSB7U3RyaW5nfSBuZXdOYW1lIE5ldyBlbGVtZW50IG5hbWUuCiAgICogQHBhcmFtIHttb2R1bGU6ZW5naW5lL3ZpZXcvZWxlbWVudH5FbGVtZW50fSBlbGVtZW50IEVsZW1lbnQgdG8gYmUgcmVuYW1lZC4KICAgKiBAcmV0dXJucyB7bW9kdWxlOmVuZ2luZS92aWV3L2VsZW1lbnR+RWxlbWVudHxudWxsfSBOZXcgZWxlbWVudCBvciBudWxsIGlmIHRoZSBvbGQgZWxlbWVudAogICAqIHdhcyBub3QgcmVwbGFjZWQgKGhhcHBlbnMgZm9yIGRldGFjaGVkIGVsZW1lbnRzKS4KICAgKi8KCgogIHJlbmFtZShuZXdOYW1lLCBlbGVtZW50KSB7CiAgICBjb25zdCBuZXdFbGVtZW50ID0gbmV3IEVsZW1lbnQobmV3TmFtZSwgZWxlbWVudC5nZXRBdHRyaWJ1dGVzKCksIGVsZW1lbnQuZ2V0Q2hpbGRyZW4oKSk7CiAgICByZXR1cm4gdGhpcy5yZXBsYWNlKGVsZW1lbnQsIG5ld0VsZW1lbnQpID8gbmV3RWxlbWVudCA6IG51bGw7CiAgfQogIC8qKgogICAqIEFkZHMgb3Igb3ZlcndyaXRlcyBlbGVtZW50J3MgYXR0cmlidXRlIHdpdGggYSBzcGVjaWZpZWQga2V5IGFuZCB2YWx1ZS4KICAgKgogICAqCQl3cml0ZXIuc2V0QXR0cmlidXRlKCBsaW5rRWxlbWVudCwgJ2hyZWYnLCAnaHR0cDovL2NrZWRpdG9yLmNvbScgKTsKICAgKgogICAqIEBzZWUgbW9kdWxlOmVuZ2luZS92aWV3L2VsZW1lbnR+RWxlbWVudCNfc2V0QXR0cmlidXRlCiAgICogQHBhcmFtIHtTdHJpbmd9IGtleSBBdHRyaWJ1dGUga2V5LgogICAqIEBwYXJhbSB7U3RyaW5nfSB2YWx1ZSBBdHRyaWJ1dGUgdmFsdWUuCiAgICogQHBhcmFtIHttb2R1bGU6ZW5naW5lL3ZpZXcvZWxlbWVudH5FbGVtZW50fSBlbGVtZW50IEVsZW1lbnQgZm9yIHdoaWNoIGF0dHJpYnV0ZSB3aWxsIGJlIHNldC4KICAgKi8KCgogIHNldEF0dHJpYnV0ZShrZXksIHZhbHVlLCBlbGVtZW50KSB7CiAgICBlbGVtZW50Ll9zZXRBdHRyaWJ1dGUoa2V5LCB2YWx1ZSk7CiAgfQogIC8qKgogICAqIFJlbW92ZXMgYXR0cmlidXRlIGZyb20gdGhlIGVsZW1lbnQuCiAgICoKICAgKgkJd3JpdGVyLnJlbW92ZUF0dHJpYnV0ZSggbGlua0VsZW1lbnQsICdocmVmJyApOwogICAqCiAgICogQHNlZSBtb2R1bGU6ZW5naW5lL3ZpZXcvZWxlbWVudH5FbGVtZW50I19yZW1vdmVBdHRyaWJ1dGUKICAgKiBAcGFyYW0ge1N0cmluZ30ga2V5IEF0dHJpYnV0ZSBrZXkuCiAgICogQHBhcmFtIHttb2R1bGU6ZW5naW5lL3ZpZXcvZWxlbWVudH5FbGVtZW50fSBlbGVtZW50IEVsZW1lbnQgZnJvbSB3aGljaCBhdHRyaWJ1dGUgd2lsbCBiZSByZW1vdmVkLgogICAqLwoKCiAgcmVtb3ZlQXR0cmlidXRlKGtleSwgZWxlbWVudCkgewogICAgZWxlbWVudC5fcmVtb3ZlQXR0cmlidXRlKGtleSk7CiAgfQogIC8qKgogICAqIEFkZHMgc3BlY2lmaWVkIGNsYXNzIHRvIHRoZSBlbGVtZW50LgogICAqCiAgICoJCXdyaXRlci5hZGRDbGFzcyggbGlua0VsZW1lbnQsICdmb28nICk7CiAgICoJCXdyaXRlci5hZGRDbGFzcyggbGlua0VsZW1lbnQsIFsgJ2ZvbycsICdiYXInIF0gKTsKICAgKgogICAqIEBzZWUgbW9kdWxlOmVuZ2luZS92aWV3L2VsZW1lbnR+RWxlbWVudCNfYWRkQ2xhc3MKICAgKiBAcGFyYW0ge0FycmF5LjxTdHJpbmc+fFN0cmluZ30gY2xhc3NOYW1lIFNpbmdsZSBjbGFzcyBuYW1lIG9yIGFycmF5IG9mIGNsYXNzIG5hbWVzIHdoaWNoIHdpbGwgYmUgYWRkZWQuCiAgICogQHBhcmFtIHttb2R1bGU6ZW5naW5lL3ZpZXcvZWxlbWVudH5FbGVtZW50fSBlbGVtZW50IEVsZW1lbnQgZm9yIHdoaWNoIGNsYXNzIHdpbGwgYmUgYWRkZWQuCiAgICovCgoKICBhZGRDbGFzcyhjbGFzc05hbWUsIGVsZW1lbnQpIHsKICAgIGVsZW1lbnQuX2FkZENsYXNzKGNsYXNzTmFtZSk7CiAgfQogIC8qKgogICAqIFJlbW92ZXMgc3BlY2lmaWVkIGNsYXNzIGZyb20gdGhlIGVsZW1lbnQuCiAgICoKICAgKgkJd3JpdGVyLnJlbW92ZUNsYXNzKCBsaW5rRWxlbWVudCwgJ2ZvbycgKTsKICAgKgkJd3JpdGVyLnJlbW92ZUNsYXNzKCBsaW5rRWxlbWVudCwgWyAnZm9vJywgJ2JhcicgXSApOwogICAqCiAgICogQHNlZSBtb2R1bGU6ZW5naW5lL3ZpZXcvZWxlbWVudH5FbGVtZW50I19yZW1vdmVDbGFzcwogICAqIEBwYXJhbSB7QXJyYXkuPFN0cmluZz58U3RyaW5nfSBjbGFzc05hbWUgU2luZ2xlIGNsYXNzIG5hbWUgb3IgYXJyYXkgb2YgY2xhc3MgbmFtZXMgd2hpY2ggd2lsbCBiZSByZW1vdmVkLgogICAqIEBwYXJhbSB7bW9kdWxlOmVuZ2luZS92aWV3L2VsZW1lbnR+RWxlbWVudH0gZWxlbWVudCBFbGVtZW50IGZyb20gd2hpY2ggY2xhc3Mgd2lsbCBiZSByZW1vdmVkLgogICAqLwoKCiAgcmVtb3ZlQ2xhc3MoY2xhc3NOYW1lLCBlbGVtZW50KSB7CiAgICBlbGVtZW50Ll9yZW1vdmVDbGFzcyhjbGFzc05hbWUpOwogIH0KICAvKioKICAgKiBBZGRzIHN0eWxlIHRvIHRoZSBlbGVtZW50LgogICAqCiAgICoJCXdyaXRlci5zZXRTdHlsZSggZWxlbWVudCwgJ2NvbG9yJywgJ3JlZCcgKTsKICAgKgkJd3JpdGVyLnNldFN0eWxlKCBlbGVtZW50LCB7CiAgICoJCQljb2xvcjogJ3JlZCcsCiAgICoJCQlwb3NpdGlvbjogJ2ZpeGVkJwogICAqCQl9ICk7CiAgICoKICAgKiBAc2VlIG1vZHVsZTplbmdpbmUvdmlldy9lbGVtZW50fkVsZW1lbnQjX3NldFN0eWxlCiAgICogQHBhcmFtIHtTdHJpbmd8T2JqZWN0fSBwcm9wZXJ0eSBQcm9wZXJ0eSBuYW1lIG9yIG9iamVjdCB3aXRoIGtleSAtIHZhbHVlIHBhaXJzLgogICAqIEBwYXJhbSB7U3RyaW5nfSBbdmFsdWVdIFZhbHVlIHRvIHNldC4gVGhpcyBwYXJhbWV0ZXIgaXMgaWdub3JlZCBpZiBvYmplY3QgaXMgcHJvdmlkZWQgYXMgdGhlIGZpcnN0IHBhcmFtZXRlci4KICAgKiBAcGFyYW0ge21vZHVsZTplbmdpbmUvdmlldy9lbGVtZW50fkVsZW1lbnR9IGVsZW1lbnQgRWxlbWVudCBmb3Igd2hpY2ggc3R5bGUgd2lsbCBiZSBhZGRlZC4KICAgKi8KCgogIHNldFN0eWxlKHByb3BlcnR5LCB2YWx1ZSwgZWxlbWVudCkgewogICAgaWYgKGlzUGxhaW5PYmplY3QocHJvcGVydHkpICYmIGVsZW1lbnQgPT09IHVuZGVmaW5lZCkgewogICAgICBlbGVtZW50ID0gdmFsdWU7CiAgICB9CgogICAgZWxlbWVudC5fc2V0U3R5bGUocHJvcGVydHksIHZhbHVlKTsKICB9CiAgLyoqCiAgICogUmVtb3ZlcyBzcGVjaWZpZWQgc3R5bGUgZnJvbSB0aGUgZWxlbWVudC4KICAgKgogICAqCQl3cml0ZXIucmVtb3ZlU3R5bGUoIGVsZW1lbnQsICdjb2xvcicgKTsgIC8vIFJlbW92ZXMgJ2NvbG9yJyBzdHlsZS4KICAgKgkJd3JpdGVyLnJlbW92ZVN0eWxlKCBlbGVtZW50LCBbICdjb2xvcicsICdib3JkZXItdG9wJyBdICk7IC8vIFJlbW92ZXMgYm90aCAnY29sb3InIGFuZCAnYm9yZGVyLXRvcCcgc3R5bGVzLgogICAqCiAgICogQHNlZSBtb2R1bGU6ZW5naW5lL3ZpZXcvZWxlbWVudH5FbGVtZW50I19yZW1vdmVTdHlsZQogICAqIEBwYXJhbSB7QXJyYXkuPFN0cmluZz58U3RyaW5nfSBwcm9wZXJ0eSBTdHlsZSBwcm9wZXJ0eSBuYW1lIG9yIG5hbWVzIHRvIGJlIHJlbW92ZWQuCiAgICogQHBhcmFtIHttb2R1bGU6ZW5naW5lL3ZpZXcvZWxlbWVudH5FbGVtZW50fSBlbGVtZW50IEVsZW1lbnQgZnJvbSB3aGljaCBzdHlsZSB3aWxsIGJlIHJlbW92ZWQuCiAgICovCgoKICByZW1vdmVTdHlsZShwcm9wZXJ0eSwgZWxlbWVudCkgewogICAgZWxlbWVudC5fcmVtb3ZlU3R5bGUocHJvcGVydHkpOwogIH0KICAvKioKICAgKiBTZXRzIGEgY3VzdG9tIHByb3BlcnR5IG9uIGVsZW1lbnQuIFVubGlrZSBhdHRyaWJ1dGVzLCBjdXN0b20gcHJvcGVydGllcyBhcmUgbm90IHJlbmRlcmVkIHRvIHRoZSBET00sCiAgICogc28gdGhleSBjYW4gYmUgdXNlZCB0byBhZGQgc3BlY2lhbCBkYXRhIHRvIGVsZW1lbnRzLgogICAqCiAgICogQHNlZSBtb2R1bGU6ZW5naW5lL3ZpZXcvZWxlbWVudH5FbGVtZW50I19zZXRDdXN0b21Qcm9wZXJ0eQogICAqIEBwYXJhbSB7U3RyaW5nfFN5bWJvbH0ga2V5IEN1c3RvbSBwcm9wZXJ0eSBuYW1lL2tleS4KICAgKiBAcGFyYW0geyp9IHZhbHVlIEN1c3RvbSBwcm9wZXJ0eSB2YWx1ZSB0byBiZSBzdG9yZWQuCiAgICogQHBhcmFtIHttb2R1bGU6ZW5naW5lL3ZpZXcvZWxlbWVudH5FbGVtZW50fSBlbGVtZW50IEVsZW1lbnQgZm9yIHdoaWNoIGN1c3RvbSBwcm9wZXJ0eSB3aWxsIGJlIHNldC4KICAgKi8KCgogIHNldEN1c3RvbVByb3BlcnR5KGtleSwgdmFsdWUsIGVsZW1lbnQpIHsKICAgIGVsZW1lbnQuX3NldEN1c3RvbVByb3BlcnR5KGtleSwgdmFsdWUpOwogIH0KICAvKioKICAgKiBSZW1vdmVzIGEgY3VzdG9tIHByb3BlcnR5IHN0b3JlZCB1bmRlciB0aGUgZ2l2ZW4ga2V5LgogICAqCiAgICogQHNlZSBtb2R1bGU6ZW5naW5lL3ZpZXcvZWxlbWVudH5FbGVtZW50I19yZW1vdmVDdXN0b21Qcm9wZXJ0eQogICAqIEBwYXJhbSB7U3RyaW5nfFN5bWJvbH0ga2V5IE5hbWUva2V5IG9mIHRoZSBjdXN0b20gcHJvcGVydHkgdG8gYmUgcmVtb3ZlZC4KICAgKiBAcGFyYW0ge21vZHVsZTplbmdpbmUvdmlldy9lbGVtZW50fkVsZW1lbnR9IGVsZW1lbnQgRWxlbWVudCBmcm9tIHdoaWNoIHRoZSBjdXN0b20gcHJvcGVydHkgd2lsbCBiZSByZW1vdmVkLgogICAqIEByZXR1cm5zIHtCb29sZWFufSBSZXR1cm5zIHRydWUgaWYgcHJvcGVydHkgd2FzIHJlbW92ZWQuCiAgICovCgoKICByZW1vdmVDdXN0b21Qcm9wZXJ0eShrZXksIGVsZW1lbnQpIHsKICAgIHJldHVybiBlbGVtZW50Ll9yZW1vdmVDdXN0b21Qcm9wZXJ0eShrZXkpOwogIH0KICAvKioKICAgKiBDcmVhdGVzIHBvc2l0aW9uIGF0IHRoZSBnaXZlbiBsb2NhdGlvbi4gVGhlIGxvY2F0aW9uIGNhbiBiZSBzcGVjaWZpZWQgYXM6CiAgICoKICAgKiAqIGEge0BsaW5rIG1vZHVsZTplbmdpbmUvdmlldy9wb3NpdGlvbn5Qb3NpdGlvbiBwb3NpdGlvbn0sCiAgICogKiBwYXJlbnQgZWxlbWVudCBhbmQgb2Zmc2V0IChvZmZzZXQgZGVmYXVsdHMgdG8gYDBgKSwKICAgKiAqIHBhcmVudCBlbGVtZW50IGFuZCBgJ2VuZCdgIChzZXRzIHBvc2l0aW9uIGF0IHRoZSBlbmQgb2YgdGhhdCBlbGVtZW50KSwKICAgKiAqIHtAbGluayBtb2R1bGU6ZW5naW5lL3ZpZXcvaXRlbX5JdGVtIHZpZXcgaXRlbX0gYW5kIGAnYmVmb3JlJ2Agb3IgYCdhZnRlcidgIChzZXRzIHBvc2l0aW9uIGJlZm9yZSBvciBhZnRlciBnaXZlbiB2aWV3IGl0ZW0pLgogICAqCiAgICogVGhpcyBtZXRob2QgaXMgYSBzaG9ydGN1dCB0byBvdGhlciBjb25zdHJ1Y3RvcnMgc3VjaCBhczoKICAgKgogICAqICoge0BsaW5rICNjcmVhdGVQb3NpdGlvbkJlZm9yZX0sCiAgICogKiB7QGxpbmsgI2NyZWF0ZVBvc2l0aW9uQWZ0ZXJ9LAogICAqCiAgICogQHBhcmFtIHttb2R1bGU6ZW5naW5lL3ZpZXcvaXRlbX5JdGVtfG1vZHVsZTplbmdpbmUvbW9kZWwvcG9zaXRpb25+UG9zaXRpb259IGl0ZW1PclBvc2l0aW9uCiAgICogQHBhcmFtIHtOdW1iZXJ8J2VuZCd8J2JlZm9yZSd8J2FmdGVyJ30gW29mZnNldF0gT2Zmc2V0IG9yIG9uZSBvZiB0aGUgZmxhZ3MuIFVzZWQgb25seSB3aGVuCiAgICogZmlyc3QgcGFyYW1ldGVyIGlzIGEge0BsaW5rIG1vZHVsZTplbmdpbmUvdmlldy9pdGVtfkl0ZW0gdmlldyBpdGVtfS4KICAgKi8KCgogIGNyZWF0ZVBvc2l0aW9uQXQoaXRlbU9yUG9zaXRpb24sIG9mZnNldCkgewogICAgcmV0dXJuIFBvc2l0aW9uLl9jcmVhdGVBdChpdGVtT3JQb3NpdGlvbiwgb2Zmc2V0KTsKICB9CiAgLyoqCiAgICogQ3JlYXRlcyBhIG5ldyBwb3NpdGlvbiBhZnRlciBnaXZlbiB2aWV3IGl0ZW0uCiAgICoKICAgKiBAcGFyYW0ge21vZHVsZTplbmdpbmUvdmlldy9pdGVtfkl0ZW19IGl0ZW0gVmlldyBpdGVtIGFmdGVyIHdoaWNoIHRoZSBwb3NpdGlvbiBzaG91bGQgYmUgbG9jYXRlZC4KICAgKiBAcmV0dXJucyB7bW9kdWxlOmVuZ2luZS92aWV3L3Bvc2l0aW9uflBvc2l0aW9ufQogICAqLwoKCiAgY3JlYXRlUG9zaXRpb25BZnRlcihpdGVtKSB7CiAgICByZXR1cm4gUG9zaXRpb24uX2NyZWF0ZUFmdGVyKGl0ZW0pOwogIH0KICAvKioKICAgKiBDcmVhdGVzIGEgbmV3IHBvc2l0aW9uIGJlZm9yZSBnaXZlbiB2aWV3IGl0ZW0uCiAgICoKICAgKiBAcGFyYW0ge21vZHVsZTplbmdpbmUvdmlldy9pdGVtfkl0ZW19IGl0ZW0gVmlldyBpdGVtIGJlZm9yZSB3aGljaCB0aGUgcG9zaXRpb24gc2hvdWxkIGJlIGxvY2F0ZWQuCiAgICogQHJldHVybnMge21vZHVsZTplbmdpbmUvdmlldy9wb3NpdGlvbn5Qb3NpdGlvbn0KICAgKi8KCgogIGNyZWF0ZVBvc2l0aW9uQmVmb3JlKGl0ZW0pIHsKICAgIHJldHVybiBQb3NpdGlvbi5fY3JlYXRlQmVmb3JlKGl0ZW0pOwogIH0KICAvKioKICAgKiBDcmVhdGVzIGEgcmFuZ2Ugc3Bhbm5pbmcgZnJvbSBgc3RhcnRgIHBvc2l0aW9uIHRvIGBlbmRgIHBvc2l0aW9uLgogICAqCiAgICogKipOb3RlOioqIFRoaXMgZmFjdG9yeSBtZXRob2QgY3JlYXRlcyBpdCdzIG93biB7QGxpbmsgbW9kdWxlOmVuZ2luZS92aWV3L3Bvc2l0aW9uflBvc2l0aW9ufSBpbnN0YW5jZXMgYmFzaW5nIG9uIHBhc3NlZCB2YWx1ZXMuCiAgICoKICAgKiBAcGFyYW0ge21vZHVsZTplbmdpbmUvdmlldy9wb3NpdGlvbn5Qb3NpdGlvbn0gc3RhcnQgU3RhcnQgcG9zaXRpb24uCiAgICogQHBhcmFtIHttb2R1bGU6ZW5naW5lL3ZpZXcvcG9zaXRpb25+UG9zaXRpb259IFtlbmRdIEVuZCBwb3NpdGlvbi4gSWYgbm90IHNldCwgcmFuZ2Ugd2lsbCBiZSBjb2xsYXBzZWQgYXQgYHN0YXJ0YCBwb3NpdGlvbi4KICAgKiBAcmV0dXJucyB7bW9kdWxlOmVuZ2luZS92aWV3L3JhbmdlflJhbmdlfQogICAqLwoKCiAgY3JlYXRlUmFuZ2Uoc3RhcnQsIGVuZCkgewogICAgcmV0dXJuIG5ldyBSYW5nZShzdGFydCwgZW5kKTsKICB9CiAgLyoqCiAgICogQ3JlYXRlcyBhIHJhbmdlIHRoYXQgc3RhcnRzIGJlZm9yZSBnaXZlbiB7QGxpbmsgbW9kdWxlOmVuZ2luZS92aWV3L2l0ZW1+SXRlbSB2aWV3IGl0ZW19IGFuZCBlbmRzIGFmdGVyIGl0LgogICAqCiAgICogQHBhcmFtIHttb2R1bGU6ZW5naW5lL3ZpZXcvaXRlbX5JdGVtfSBpdGVtCiAgICogQHJldHVybnMge21vZHVsZTplbmdpbmUvdmlldy9yYW5nZX5SYW5nZX0KICAgKi8KCgogIGNyZWF0ZVJhbmdlT24oaXRlbSkgewogICAgcmV0dXJuIFJhbmdlLl9jcmVhdGVPbihpdGVtKTsKICB9CiAgLyoqCiAgICogQ3JlYXRlcyBhIHJhbmdlIGluc2lkZSBhbiB7QGxpbmsgbW9kdWxlOmVuZ2luZS92aWV3L2VsZW1lbnR+RWxlbWVudCBlbGVtZW50fSB3aGljaCBzdGFydHMgYmVmb3JlIHRoZSBmaXJzdCBjaGlsZCBvZgogICAqIHRoYXQgZWxlbWVudCBhbmQgZW5kcyBhZnRlciB0aGUgbGFzdCBjaGlsZCBvZiB0aGF0IGVsZW1lbnQuCiAgICoKICAgKiBAcGFyYW0ge21vZHVsZTplbmdpbmUvdmlldy9lbGVtZW50fkVsZW1lbnR9IGVsZW1lbnQgRWxlbWVudCB3aGljaCBpcyBhIHBhcmVudCBmb3IgdGhlIHJhbmdlLgogICAqIEByZXR1cm5zIHttb2R1bGU6ZW5naW5lL3ZpZXcvcmFuZ2V+UmFuZ2V9CiAgICovCgoKICBjcmVhdGVSYW5nZUluKGVsZW1lbnQpIHsKICAgIHJldHVybiBSYW5nZS5fY3JlYXRlSW4oZWxlbWVudCk7CiAgfQogIC8qKgogICAqIENyZWF0ZXMgYSBuZXcge0BsaW5rIG1vZHVsZTplbmdpbmUvdmlldy9zZWxlY3Rpb25+U2VsZWN0aW9ufSBpbnN0YW5jZS4KICAgKgogICAqIAkJLy8gQ3JlYXRlcyBlbXB0eSBzZWxlY3Rpb24gd2l0aG91dCByYW5nZXMuCiAgICoJCWNvbnN0IHNlbGVjdGlvbiA9IHdyaXRlci5jcmVhdGVTZWxlY3Rpb24oKTsKICAgKgogICAqCQkvLyBDcmVhdGVzIHNlbGVjdGlvbiBhdCB0aGUgZ2l2ZW4gcmFuZ2UuCiAgICoJCWNvbnN0IHJhbmdlID0gd3JpdGVyLmNyZWF0ZVJhbmdlKCBzdGFydCwgZW5kICk7CiAgICoJCWNvbnN0IHNlbGVjdGlvbiA9IHdyaXRlci5jcmVhdGVTZWxlY3Rpb24oIHJhbmdlICk7CiAgICoKICAgKgkJLy8gQ3JlYXRlcyBzZWxlY3Rpb24gYXQgdGhlIGdpdmVuIHJhbmdlcwogICAqIAkJY29uc3QgcmFuZ2VzID0gWyB3cml0ZXIuY3JlYXRlUmFuZ2UoIHN0YXJ0MSwgZW5kMiApLCB3cml0ZXIuY3JlYXRlUmFuZ2UoIHN0YXIyLCBlbmQyICkgXTsKICAgKgkJY29uc3Qgc2VsZWN0aW9uID0gd3JpdGVyLmNyZWF0ZVNlbGVjdGlvbiggcmFuZ2VzICk7CiAgICoKICAgKgkJLy8gQ3JlYXRlcyBzZWxlY3Rpb24gZnJvbSB0aGUgb3RoZXIgc2VsZWN0aW9uLgogICAqCQljb25zdCBvdGhlclNlbGVjdGlvbiA9IHdyaXRlci5jcmVhdGVTZWxlY3Rpb24oKTsKICAgKgkJY29uc3Qgc2VsZWN0aW9uID0gd3JpdGVyLmNyZWF0ZVNlbGVjdGlvbiggb3RoZXJTZWxlY3Rpb24gKTsKICAgKgogICAqCQkvLyBDcmVhdGVzIHNlbGVjdGlvbiBmcm9tIHRoZSBkb2N1bWVudCBzZWxlY3Rpb24uCiAgICoJCWNvbnN0IHNlbGVjdGlvbiA9IHdyaXRlci5jcmVhdGVTZWxlY3Rpb24oIGVkaXRvci5lZGl0aW5nLnZpZXcuZG9jdW1lbnQuc2VsZWN0aW9uICk7CiAgICoKICAgKiAJCS8vIENyZWF0ZXMgc2VsZWN0aW9uIGF0IHRoZSBnaXZlbiBwb3NpdGlvbi4KICAgKgkJY29uc3QgcG9zaXRpb24gPSB3cml0ZXIuY3JlYXRlUG9zaXRpb25Gcm9tUGF0aCggcm9vdCwgcGF0aCApOwogICAqCQljb25zdCBzZWxlY3Rpb24gPSB3cml0ZXIuY3JlYXRlU2VsZWN0aW9uKCBwb3NpdGlvbiApOwogICAqCiAgICoJCS8vIENyZWF0ZXMgY29sbGFwc2VkIHNlbGVjdGlvbiBhdCB0aGUgcG9zaXRpb24gb2YgZ2l2ZW4gaXRlbSBhbmQgb2Zmc2V0LgogICAqCQljb25zdCBwYXJhZ3JhcGggPSB3cml0ZXIuY3JlYXRlQ29udGFpbmVyRWxlbWVudCggJ3BhcmFncmFwaCcgKTsKICAgKgkJY29uc3Qgc2VsZWN0aW9uID0gd3JpdGVyLmNyZWF0ZVNlbGVjdGlvbiggcGFyYWdyYXBoLCBvZmZzZXQgKTsKICAgKgogICAqCQkvLyBDcmVhdGVzIGEgcmFuZ2UgaW5zaWRlIGFuIHtAbGluayBtb2R1bGU6ZW5naW5lL3ZpZXcvZWxlbWVudH5FbGVtZW50IGVsZW1lbnR9IHdoaWNoIHN0YXJ0cyBiZWZvcmUgdGhlCiAgICoJCS8vIGZpcnN0IGNoaWxkIG9mIHRoYXQgZWxlbWVudCBhbmQgZW5kcyBhZnRlciB0aGUgbGFzdCBjaGlsZCBvZiB0aGF0IGVsZW1lbnQuCiAgICoJCWNvbnN0IHNlbGVjdGlvbiA9IHdyaXRlci5jcmVhdGVTZWxlY3Rpb24oIHBhcmFncmFwaCwgJ2luJyApOwogICAqCiAgICoJCS8vIENyZWF0ZXMgYSByYW5nZSBvbiBhbiB7QGxpbmsgbW9kdWxlOmVuZ2luZS92aWV3L2l0ZW1+SXRlbSBpdGVtfSB3aGljaCBzdGFydHMgYmVmb3JlIHRoZSBpdGVtIGFuZCBlbmRzCiAgICoJCS8vIGp1c3QgYWZ0ZXIgdGhlIGl0ZW0uCiAgICoJCWNvbnN0IHNlbGVjdGlvbiA9IHdyaXRlci5jcmVhdGVTZWxlY3Rpb24oIHBhcmFncmFwaCwgJ29uJyApOwogICAqCiAgICogYFNlbGVjdGlvbmAncyBjb25zdHJ1Y3RvciBhbGxvdyBwYXNzaW5nIGFkZGl0aW9uYWwgb3B0aW9ucyAoYGJhY2t3YXJkYCwgYGZha2VgIGFuZCBgbGFiZWxgKSBhcyB0aGUgbGFzdCBhcmd1bWVudC4KICAgKgogICAqCQkvLyBDcmVhdGVzIGJhY2t3YXJkIHNlbGVjdGlvbi4KICAgKgkJY29uc3Qgc2VsZWN0aW9uID0gd3JpdGVyLmNyZWF0ZVNlbGVjdGlvbiggcmFuZ2UsIHsgYmFja3dhcmQ6IHRydWUgfSApOwogICAqCiAgICogRmFrZSBzZWxlY3Rpb24gZG9lcyBub3QgcmVuZGVyIGFzIGJyb3dzZXIgbmF0aXZlIHNlbGVjdGlvbiBvdmVyIHNlbGVjdGVkIGVsZW1lbnRzIGFuZCBpcyBoaWRkZW4gdG8gdGhlIHVzZXIuCiAgICogVGhpcyB3YXksIG5vIG5hdGl2ZSBzZWxlY3Rpb24gVUkgYXJ0aWZhY3RzIGFyZSBkaXNwbGF5ZWQgdG8gdGhlIHVzZXIgYW5kIHNlbGVjdGlvbiBvdmVyIGVsZW1lbnRzIGNhbiBiZQogICAqIHJlcHJlc2VudGVkIGluIG90aGVyIHdheSwgZm9yIGV4YW1wbGUgYnkgYXBwbHlpbmcgcHJvcGVyIENTUyBjbGFzcy4KICAgKgogICAqIEFkZGl0aW9uYWxseSBmYWtlJ3Mgc2VsZWN0aW9uIGxhYmVsIGNhbiBiZSBwcm92aWRlZC4gSXQgd2lsbCBiZSB1c2VkIHRvIGRlc2NyaWJlIGZha2Ugc2VsZWN0aW9uIGluIERPTQogICAqIChhbmQgYmUgIHByb3Blcmx5IGhhbmRsZWQgYnkgc2NyZWVuIHJlYWRlcnMpLgogICAqCiAgICoJCS8vIENyZWF0ZXMgZmFrZSBzZWxlY3Rpb24gd2l0aCBsYWJlbC4KICAgKgkJY29uc3Qgc2VsZWN0aW9uID0gd3JpdGVyLmNyZWF0ZVNlbGVjdGlvbiggcmFuZ2UsIHsgZmFrZTogdHJ1ZSwgbGFiZWw6ICdmb28nIH0gKTsKICAgKgogICAqIEBwYXJhbSB7bW9kdWxlOmVuZ2luZS92aWV3L3NlbGVjdGlvbn5TZWxlY3RhYmxlfSBbc2VsZWN0YWJsZT1udWxsXQogICAqIEBwYXJhbSB7TnVtYmVyfCdiZWZvcmUnfCdlbmQnfCdhZnRlcid8J29uJ3wnaW4nfSBbcGxhY2VPck9mZnNldF0gT2Zmc2V0IG9yIHBsYWNlIHdoZW4gc2VsZWN0YWJsZSBpcyBhbiBgSXRlbWAuCiAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXQogICAqIEBwYXJhbSB7Qm9vbGVhbn0gW29wdGlvbnMuYmFja3dhcmRdIFNldHMgdGhpcyBzZWxlY3Rpb24gaW5zdGFuY2UgdG8gYmUgYmFja3dhcmQuCiAgICogQHBhcmFtIHtCb29sZWFufSBbb3B0aW9ucy5mYWtlXSBTZXRzIHRoaXMgc2VsZWN0aW9uIGluc3RhbmNlIHRvIGJlIG1hcmtlZCBhcyBgZmFrZWAuCiAgICogQHBhcmFtIHtTdHJpbmd9IFtvcHRpb25zLmxhYmVsXSBMYWJlbCBmb3IgdGhlIGZha2Ugc2VsZWN0aW9uLgogICAqIEByZXR1cm5zIHttb2R1bGU6ZW5naW5lL3ZpZXcvc2VsZWN0aW9uflNlbGVjdGlvbn0KICAgKi8KCgogIGNyZWF0ZVNlbGVjdGlvbihzZWxlY3RhYmxlLCBwbGFjZU9yT2Zmc2V0LCBvcHRpb25zKSB7CiAgICByZXR1cm4gbmV3IFNlbGVjdGlvbihzZWxlY3RhYmxlLCBwbGFjZU9yT2Zmc2V0LCBvcHRpb25zKTsKICB9Cgp9"},{"version":3,"sources":["/Users/antonyching/Desktop/project/new-builder-demo/node_modules/@ckeditor/ckeditor5-engine/src/view/upcastwriter.js"],"names":["DocumentFragment","Element","Text","isPlainObject","Position","Range","Selection","UpcastWriter","createDocumentFragment","children","createElement","name","attrs","createText","data","clone","element","deep","_clone","appendChild","items","_appendChild","insertChild","index","_insertChild","removeChildren","howMany","_removeChildren","remove","parent","getChildIndex","replace","oldElement","newElement","unwrapElement","getChildren","rename","newName","getAttributes","setAttribute","key","value","_setAttribute","removeAttribute","_removeAttribute","addClass","className","_addClass","removeClass","_removeClass","setStyle","property","undefined","_setStyle","removeStyle","_removeStyle","setCustomProperty","_setCustomProperty","removeCustomProperty","_removeCustomProperty","createPositionAt","itemOrPosition","offset","_createAt","createPositionAfter","item","_createAfter","createPositionBefore","_createBefore","createRange","start","end","createRangeOn","_createOn","createRangeIn","_createIn","createSelection","selectable","placeOrOffset","options"],"mappings":"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","sourcesContent":["/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module module:engine/view/upcastwriter\n */\n\nimport DocumentFragment from './documentfragment';\nimport Element from './element';\nimport Text from './text';\nimport { isPlainObject } from 'lodash-es';\nimport Position from './position';\nimport Range from './range';\nimport Selection from './selection';\n\n/**\n * View upcast writer. It provides a set of methods used to manipulate non-semantic view trees.\n *\n * It should be used only while working on a non-semantic view\n * (e.g. a view created from HTML string on paste).\n * To manipulate a view which was or is being downcasted from the the model use the\n * {@link module:engine/view/downcastwriter~DowncastWriter downcast writer}.\n *\n * Read more about changing the view in the {@glink framework/guides/architecture/editing-engine#changing-the-view Changing the view}\n * section of the {@glink framework/guides/architecture/editing-engine Editing engine architecture} guide.\n *\n * Unlike `DowncastWriter`, which is available in the {@link module:engine/view/view~View#change `View#change()`} block,\n * `UpcastWriter` can be created wherever you need it:\n *\n *\t\tconst writer = new UpcastWriter();\n *\t\tconst text = writer.createText( 'foo!' );\n *\n *\t\twriter.appendChild( text, someViewElement );\n */\nexport default class UpcastWriter {\n\t/**\n\t * Creates a new {@link module:engine/view/documentfragment~DocumentFragment} instance.\n\t *\n\t * @param {module:engine/view/node~Node|Iterable.<module:engine/view/node~Node>} [children]\n\t * A list of nodes to be inserted into the created document fragment.\n\t * @returns {module:engine/view/documentfragment~DocumentFragment} The created document fragment.\n\t */\n\tcreateDocumentFragment( children ) {\n\t\treturn new DocumentFragment( children );\n\t}\n\n\t/**\n\t * Creates a new {@link module:engine/view/element~Element} instance.\n\t *\n\t * Attributes can be passed in various formats:\n\t *\n\t *\t\tupcastWriter.createElement( 'div', { class: 'editor', contentEditable: 'true' } ); // object\n\t *\t\tupcastWriter.createElement( 'div', [ [ 'class', 'editor' ], [ 'contentEditable', 'true' ] ] ); // map-like iterator\n\t *\t\tupcastWriter.createElement( 'div', mapOfAttributes ); // map\n\t *\n\t * @param {String} name Node name.\n\t * @param {Object|Iterable} [attrs] Collection of attributes.\n\t * @param {module:engine/view/node~Node|Iterable.<module:engine/view/node~Node>} [children]\n\t * A list of nodes to be inserted into created element.\n\t * @returns {module:engine/view/element~Element} Created element.\n\t */\n\tcreateElement( name, attrs, children ) {\n\t\treturn new Element( name, attrs, children );\n\t}\n\n\t/**\n\t * Creates a new {@link module:engine/view/text~Text} instance.\n\t *\n\t * @param {String} data The text's data.\n\t * @returns {module:engine/view/text~Text} The created text node.\n\t */\n\tcreateText( data ) {\n\t\treturn new Text( data );\n\t}\n\n\t/**\n\t * Clones the provided element.\n\t *\n\t * @see module:engine/view/element~Element#_clone\n\t * @param {module:engine/view/element~Element} element Element to be cloned.\n\t * @param {Boolean} [deep=false] If set to `true` clones element and all its children recursively. When set to `false`,\n\t * element will be cloned without any children.\n\t * @returns {module:engine/view/element~Element} Clone of this element.\n\t */\n\tclone( element, deep = false ) {\n\t\treturn element._clone( deep );\n\t}\n\n\t/**\n\t * Appends a child node or a list of child nodes at the end of this node\n\t * and sets the parent of these nodes to this element.\n\t *\n\t * @see module:engine/view/element~Element#_appendChild\n\t * @param {module:engine/view/item~Item|Iterable.<module:engine/view/item~Item>} items Items to be inserted.\n\t * @param {module:engine/view/element~Element|module:engine/view/documentfragment~DocumentFragment} element Element\n\t * to which items will be appended.\n\t * @fires module:engine/view/node~Node#event:change\n\t * @returns {Number} Number of appended nodes.\n\t */\n\tappendChild( items, element ) {\n\t\treturn element._appendChild( items );\n\t}\n\n\t/**\n\t * Inserts a child node or a list of child nodes on the given index and sets the parent of these nodes to\n\t * this element.\n\t *\n\t * @see module:engine/view/element~Element#_insertChild\n\t * @param {Number} index Offset at which nodes should be inserted.\n\t * @param {module:engine/view/item~Item|Iterable.<module:engine/view/item~Item>} items Items to be inserted.\n\t * @param {module:engine/view/element~Element|module:engine/view/documentfragment~DocumentFragment} element Element\n\t * to which items will be inserted.\n\t * @fires module:engine/view/node~Node#event:change\n\t * @returns {Number} Number of inserted nodes.\n\t */\n\tinsertChild( index, items, element ) {\n\t\treturn element._insertChild( index, items );\n\t}\n\n\t/**\n\t * Removes the given number of child nodes starting at the given index and set the parent of these nodes to `null`.\n\t *\n\t * @see module:engine/view/element~Element#_removeChildren\n\t * @param {Number} index Offset from which nodes will be removed.\n\t * @param {Number} howMany Number of nodes to remove.\n\t * @param {module:engine/view/element~Element|module:engine/view/documentfragment~DocumentFragment} element Element\n\t * which children will be removed.\n\t * @fires module:engine/view/node~Node#event:change\n\t * @returns {Array.<module:engine/view/node~Node>} The array containing removed nodes.\n\t */\n\tremoveChildren( index, howMany, element ) {\n\t\treturn element._removeChildren( index, howMany );\n\t}\n\n\t/**\n\t * Removes given element from the view structure. Will not have effect on detached elements.\n\t *\n\t * @param {module:engine/view/element~Element} element Element which will be removed.\n\t * @returns {Array.<module:engine/view/node~Node>} The array containing removed nodes.\n\t */\n\tremove( element ) {\n\t\tconst parent = element.parent;\n\n\t\tif ( parent ) {\n\t\t\treturn this.removeChildren( parent.getChildIndex( element ), 1, parent );\n\t\t}\n\n\t\treturn [];\n\t}\n\n\t/**\n\t * Replaces given element with the new one in the view structure. Will not have effect on detached elements.\n\t *\n\t * @param {module:engine/view/element~Element} oldElement Element which will be replaced.\n\t * @param {module:engine/view/element~Element} newElement Element which will be inserted in the place of the old element.\n\t * @returns {Boolean} Whether old element was successfully replaced.\n\t */\n\treplace( oldElement, newElement ) {\n\t\tconst parent = oldElement.parent;\n\n\t\tif ( parent ) {\n\t\t\tconst index = parent.getChildIndex( oldElement );\n\n\t\t\tthis.removeChildren( index, 1, parent );\n\t\t\tthis.insertChild( index, newElement, parent );\n\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/**\n\t * Removes given element from view structure and places its children in its position.\n\t * It does nothing if element has no parent.\n\t *\n\t * @param {module:engine/view/element~Element} element Element to unwrap.\n\t */\n\tunwrapElement( element ) {\n\t\tconst parent = element.parent;\n\n\t\tif ( parent ) {\n\t\t\tconst index = parent.getChildIndex( element );\n\n\t\t\tthis.remove( element );\n\t\t\tthis.insertChild( index, element.getChildren(), parent );\n\t\t}\n\t}\n\n\t/**\n\t * Renames element by creating a copy of a given element but with its name changed and then moving contents of the\n\t * old element to the new one.\n\t *\n\t * Since this function creates a new element and removes the given one, the new element is returned to keep reference.\n\t *\n\t * @param {String} newName New element name.\n\t * @param {module:engine/view/element~Element} element Element to be renamed.\n\t * @returns {module:engine/view/element~Element|null} New element or null if the old element\n\t * was not replaced (happens for detached elements).\n\t */\n\trename( newName, element ) {\n\t\tconst newElement = new Element( newName, element.getAttributes(), element.getChildren() );\n\n\t\treturn this.replace( element, newElement ) ? newElement : null;\n\t}\n\n\t/**\n\t * Adds or overwrites element's attribute with a specified key and value.\n\t *\n\t *\t\twriter.setAttribute( linkElement, 'href', 'http://ckeditor.com' );\n\t *\n\t * @see module:engine/view/element~Element#_setAttribute\n\t * @param {String} key Attribute key.\n\t * @param {String} value Attribute value.\n\t * @param {module:engine/view/element~Element} element Element for which attribute will be set.\n\t */\n\tsetAttribute( key, value, element ) {\n\t\telement._setAttribute( key, value );\n\t}\n\n\t/**\n\t * Removes attribute from the element.\n\t *\n\t *\t\twriter.removeAttribute( linkElement, 'href' );\n\t *\n\t * @see module:engine/view/element~Element#_removeAttribute\n\t * @param {String} key Attribute key.\n\t * @param {module:engine/view/element~Element} element Element from which attribute will be removed.\n\t */\n\tremoveAttribute( key, element ) {\n\t\telement._removeAttribute( key );\n\t}\n\n\t/**\n\t * Adds specified class to the element.\n\t *\n\t *\t\twriter.addClass( linkElement, 'foo' );\n\t *\t\twriter.addClass( linkElement, [ 'foo', 'bar' ] );\n\t *\n\t * @see module:engine/view/element~Element#_addClass\n\t * @param {Array.<String>|String} className Single class name or array of class names which will be added.\n\t * @param {module:engine/view/element~Element} element Element for which class will be added.\n\t */\n\taddClass( className, element ) {\n\t\telement._addClass( className );\n\t}\n\n\t/**\n\t * Removes specified class from the element.\n\t *\n\t *\t\twriter.removeClass( linkElement, 'foo' );\n\t *\t\twriter.removeClass( linkElement, [ 'foo', 'bar' ] );\n\t *\n\t * @see module:engine/view/element~Element#_removeClass\n\t * @param {Array.<String>|String} className Single class name or array of class names which will be removed.\n\t * @param {module:engine/view/element~Element} element Element from which class will be removed.\n\t */\n\tremoveClass( className, element ) {\n\t\telement._removeClass( className );\n\t}\n\n\t/**\n\t * Adds style to the element.\n\t *\n\t *\t\twriter.setStyle( element, 'color', 'red' );\n\t *\t\twriter.setStyle( element, {\n\t *\t\t\tcolor: 'red',\n\t *\t\t\tposition: 'fixed'\n\t *\t\t} );\n\t *\n\t * @see module:engine/view/element~Element#_setStyle\n\t * @param {String|Object} property Property name or object with key - value pairs.\n\t * @param {String} [value] Value to set. This parameter is ignored if object is provided as the first parameter.\n\t * @param {module:engine/view/element~Element} element Element for which style will be added.\n\t */\n\tsetStyle( property, value, element ) {\n\t\tif ( isPlainObject( property ) && element === undefined ) {\n\t\t\telement = value;\n\t\t}\n\t\telement._setStyle( property, value );\n\t}\n\n\t/**\n\t * Removes specified style from the element.\n\t *\n\t *\t\twriter.removeStyle( element, 'color' );  // Removes 'color' style.\n\t *\t\twriter.removeStyle( element, [ 'color', 'border-top' ] ); // Removes both 'color' and 'border-top' styles.\n\t *\n\t * @see module:engine/view/element~Element#_removeStyle\n\t * @param {Array.<String>|String} property Style property name or names to be removed.\n\t * @param {module:engine/view/element~Element} element Element from which style will be removed.\n\t */\n\tremoveStyle( property, element ) {\n\t\telement._removeStyle( property );\n\t}\n\n\t/**\n\t * Sets a custom property on element. Unlike attributes, custom properties are not rendered to the DOM,\n\t * so they can be used to add special data to elements.\n\t *\n\t * @see module:engine/view/element~Element#_setCustomProperty\n\t * @param {String|Symbol} key Custom property name/key.\n\t * @param {*} value Custom property value to be stored.\n\t * @param {module:engine/view/element~Element} element Element for which custom property will be set.\n\t */\n\tsetCustomProperty( key, value, element ) {\n\t\telement._setCustomProperty( key, value );\n\t}\n\n\t/**\n\t * Removes a custom property stored under the given key.\n\t *\n\t * @see module:engine/view/element~Element#_removeCustomProperty\n\t * @param {String|Symbol} key Name/key of the custom property to be removed.\n\t * @param {module:engine/view/element~Element} element Element from which the custom property will be removed.\n\t * @returns {Boolean} Returns true if property was removed.\n\t */\n\tremoveCustomProperty( key, element ) {\n\t\treturn element._removeCustomProperty( key );\n\t}\n\n\t/**\n\t * Creates position at the given location. The location can be specified as:\n\t *\n\t * * a {@link module:engine/view/position~Position position},\n\t * * parent element and offset (offset defaults to `0`),\n\t * * parent element and `'end'` (sets position at the end of that element),\n\t * * {@link module:engine/view/item~Item view item} and `'before'` or `'after'` (sets position before or after given view item).\n\t *\n\t * This method is a shortcut to other constructors such as:\n\t *\n\t * * {@link #createPositionBefore},\n\t * * {@link #createPositionAfter},\n\t *\n\t * @param {module:engine/view/item~Item|module:engine/model/position~Position} itemOrPosition\n\t * @param {Number|'end'|'before'|'after'} [offset] Offset or one of the flags. Used only when\n\t * first parameter is a {@link module:engine/view/item~Item view item}.\n\t */\n\tcreatePositionAt( itemOrPosition, offset ) {\n\t\treturn Position._createAt( itemOrPosition, offset );\n\t}\n\n\t/**\n\t * Creates a new position after given view item.\n\t *\n\t * @param {module:engine/view/item~Item} item View item after which the position should be located.\n\t * @returns {module:engine/view/position~Position}\n\t */\n\tcreatePositionAfter( item ) {\n\t\treturn Position._createAfter( item );\n\t}\n\n\t/**\n\t * Creates a new position before given view item.\n\t *\n\t * @param {module:engine/view/item~Item} item View item before which the position should be located.\n\t * @returns {module:engine/view/position~Position}\n\t */\n\tcreatePositionBefore( item ) {\n\t\treturn Position._createBefore( item );\n\t}\n\n\t/**\n\t * Creates a range spanning from `start` position to `end` position.\n\t *\n\t * **Note:** This factory method creates it's own {@link module:engine/view/position~Position} instances basing on passed values.\n\t *\n\t * @param {module:engine/view/position~Position} start Start position.\n\t * @param {module:engine/view/position~Position} [end] End position. If not set, range will be collapsed at `start` position.\n\t * @returns {module:engine/view/range~Range}\n\t */\n\tcreateRange( start, end ) {\n\t\treturn new Range( start, end );\n\t}\n\n\t/**\n\t * Creates a range that starts before given {@link module:engine/view/item~Item view item} and ends after it.\n\t *\n\t * @param {module:engine/view/item~Item} item\n\t * @returns {module:engine/view/range~Range}\n\t */\n\tcreateRangeOn( item ) {\n\t\treturn Range._createOn( item );\n\t}\n\n\t/**\n\t * Creates a range inside an {@link module:engine/view/element~Element element} which starts before the first child of\n\t * that element and ends after the last child of that element.\n\t *\n\t * @param {module:engine/view/element~Element} element Element which is a parent for the range.\n\t * @returns {module:engine/view/range~Range}\n\t */\n\tcreateRangeIn( element ) {\n\t\treturn Range._createIn( element );\n\t}\n\n\t/**\n\t * Creates a new {@link module:engine/view/selection~Selection} instance.\n\t *\n\t * \t\t// Creates empty selection without ranges.\n\t *\t\tconst selection = writer.createSelection();\n\t *\n\t *\t\t// Creates selection at the given range.\n\t *\t\tconst range = writer.createRange( start, end );\n\t *\t\tconst selection = writer.createSelection( range );\n\t *\n\t *\t\t// Creates selection at the given ranges\n\t * \t\tconst ranges = [ writer.createRange( start1, end2 ), writer.createRange( star2, end2 ) ];\n\t *\t\tconst selection = writer.createSelection( ranges );\n\t *\n\t *\t\t// Creates selection from the other selection.\n\t *\t\tconst otherSelection = writer.createSelection();\n\t *\t\tconst selection = writer.createSelection( otherSelection );\n\t *\n\t *\t\t// Creates selection from the document selection.\n\t *\t\tconst selection = writer.createSelection( editor.editing.view.document.selection );\n\t *\n\t * \t\t// Creates selection at the given position.\n\t *\t\tconst position = writer.createPositionFromPath( root, path );\n\t *\t\tconst selection = writer.createSelection( position );\n\t *\n\t *\t\t// Creates collapsed selection at the position of given item and offset.\n\t *\t\tconst paragraph = writer.createContainerElement( 'paragraph' );\n\t *\t\tconst selection = writer.createSelection( paragraph, offset );\n\t *\n\t *\t\t// Creates a range inside an {@link module:engine/view/element~Element element} which starts before the\n\t *\t\t// first child of that element and ends after the last child of that element.\n\t *\t\tconst selection = writer.createSelection( paragraph, 'in' );\n\t *\n\t *\t\t// Creates a range on an {@link module:engine/view/item~Item item} which starts before the item and ends\n\t *\t\t// just after the item.\n\t *\t\tconst selection = writer.createSelection( paragraph, 'on' );\n\t *\n\t * `Selection`'s constructor allow passing additional options (`backward`, `fake` and `label`) as the last argument.\n\t *\n\t *\t\t// Creates backward selection.\n\t *\t\tconst selection = writer.createSelection( range, { backward: true } );\n\t *\n\t * Fake selection does not render as browser native selection over selected elements and is hidden to the user.\n\t * This way, no native selection UI artifacts are displayed to the user and selection over elements can be\n\t * represented in other way, for example by applying proper CSS class.\n\t *\n\t * Additionally fake's selection label can be provided. It will be used to describe fake selection in DOM\n\t * (and be  properly handled by screen readers).\n\t *\n\t *\t\t// Creates fake selection with label.\n\t *\t\tconst selection = writer.createSelection( range, { fake: true, label: 'foo' } );\n\t *\n\t * @param {module:engine/view/selection~Selectable} [selectable=null]\n\t * @param {Number|'before'|'end'|'after'|'on'|'in'} [placeOrOffset] Offset or place when selectable is an `Item`.\n\t * @param {Object} [options]\n\t * @param {Boolean} [options.backward] Sets this selection instance to be backward.\n\t * @param {Boolean} [options.fake] Sets this selection instance to be marked as `fake`.\n\t * @param {String} [options.label] Label for the fake selection.\n\t * @returns {module:engine/view/selection~Selection}\n\t */\n\tcreateSelection( selectable, placeOrOffset, options ) {\n\t\treturn new Selection( selectable, placeOrOffset, options );\n\t}\n}\n"]}]}