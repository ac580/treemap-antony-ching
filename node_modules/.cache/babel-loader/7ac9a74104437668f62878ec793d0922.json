{"remainingRequest":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/babel-loader/lib/index.js!/Users/antonyching/Desktop/project/new-builder-demo/node_modules/@ckeditor/ckeditor5-list/src/listcommand.js","dependencies":[{"path":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/@ckeditor/ckeditor5-list/src/listcommand.js","mtime":499162500000},{"path":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/@ckeditor/ckeditor5-dev-webpack-plugin/lib/translatesourceloader.js","mtime":499162500000},{"path":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:LyoqCiAqIEBsaWNlbnNlIENvcHlyaWdodCAoYykgMjAwMy0yMDE5LCBDS1NvdXJjZSAtIEZyZWRlcmljbyBLbmFiYmVuLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKiBGb3IgbGljZW5zaW5nLCBzZWUgTElDRU5TRS5tZCBvciBodHRwczovL2NrZWRpdG9yLmNvbS9sZWdhbC9ja2VkaXRvci1vc3MtbGljZW5zZQogKi8KCi8qKgogKiBAbW9kdWxlIGxpc3QvbGlzdGNvbW1hbmQKICovCmltcG9ydCBDb21tYW5kIGZyb20gJ0Bja2VkaXRvci9ja2VkaXRvcjUtY29yZS9zcmMvY29tbWFuZCc7CmltcG9ydCBmaXJzdCBmcm9tICdAY2tlZGl0b3IvY2tlZGl0b3I1LXV0aWxzL3NyYy9maXJzdCc7Ci8qKgogKiBUaGUgbGlzdCBjb21tYW5kLiBJdCBpcyB1c2VkIGJ5IHRoZSB7QGxpbmsgbW9kdWxlOmxpc3QvbGlzdH5MaXN0IGxpc3QgZmVhdHVyZX0uCiAqCiAqIEBleHRlbmRzIG1vZHVsZTpjb3JlL2NvbW1hbmR+Q29tbWFuZAogKi8KCmV4cG9ydCBkZWZhdWx0IGNsYXNzIExpc3RDb21tYW5kIGV4dGVuZHMgQ29tbWFuZCB7CiAgLyoqCiAgICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiB0aGUgY29tbWFuZC4KICAgKgogICAqIEBwYXJhbSB7bW9kdWxlOmNvcmUvZWRpdG9yL2VkaXRvcn5FZGl0b3J9IGVkaXRvciBUaGUgZWRpdG9yIGluc3RhbmNlLgogICAqIEBwYXJhbSB7J251bWJlcmVkJ3wnYnVsbGV0ZWQnfSB0eXBlIExpc3QgdHlwZSB0aGF0IHdpbGwgYmUgaGFuZGxlZCBieSB0aGlzIGNvbW1hbmQuCiAgICovCiAgY29uc3RydWN0b3IoZWRpdG9yLCB0eXBlKSB7CiAgICBzdXBlcihlZGl0b3IpOwogICAgLyoqCiAgICAgKiBUaGUgdHlwZSBvZiB0aGUgbGlzdCBjcmVhdGVkIGJ5IHRoZSBjb21tYW5kLgogICAgICoKICAgICAqIEByZWFkb25seQogICAgICogQG1lbWJlciB7J251bWJlcmVkJ3wnYnVsbGV0ZWQnfCd0b2RvJ30KICAgICAqLwoKICAgIHRoaXMudHlwZSA9IHR5cGU7CiAgICAvKioKICAgICAqIEEgZmxhZyBpbmRpY2F0aW5nIHdoZXRoZXIgdGhlIGNvbW1hbmQgaXMgYWN0aXZlLCB3aGljaCBtZWFucyB0aGF0IHRoZSBzZWxlY3Rpb24gc3RhcnRzIGluIGEgbGlzdCBvZiB0aGUgc2FtZSB0eXBlLgogICAgICoKICAgICAqIEBvYnNlcnZhYmxlCiAgICAgKiBAcmVhZG9ubHkKICAgICAqIEBtZW1iZXIge0Jvb2xlYW59ICN2YWx1ZQogICAgICovCiAgfQogIC8qKgogICAqIEBpbmhlcml0RG9jCiAgICovCgoKICByZWZyZXNoKCkgewogICAgdGhpcy52YWx1ZSA9IHRoaXMuX2dldFZhbHVlKCk7CiAgICB0aGlzLmlzRW5hYmxlZCA9IHRoaXMuX2NoZWNrRW5hYmxlZCgpOwogIH0KICAvKioKICAgKiBFeGVjdXRlcyB0aGUgY29tbWFuZC4KICAgKgogICAqIEBwcm90ZWN0ZWQKICAgKi8KCgogIGV4ZWN1dGUoKSB7CiAgICBjb25zdCBtb2RlbCA9IHRoaXMuZWRpdG9yLm1vZGVsOwogICAgY29uc3QgZG9jdW1lbnQgPSBtb2RlbC5kb2N1bWVudDsKICAgIGNvbnN0IGJsb2NrcyA9IEFycmF5LmZyb20oZG9jdW1lbnQuc2VsZWN0aW9uLmdldFNlbGVjdGVkQmxvY2tzKCkpLmZpbHRlcihibG9jayA9PiBjaGVja0NhbkJlY29tZUxpc3RJdGVtKGJsb2NrLCBtb2RlbC5zY2hlbWEpKTsgLy8gV2hldGhlciB3ZSBhcmUgdHVybmluZyBvZmYgc29tZSBpdGVtcy4KCiAgICBjb25zdCB0dXJuT2ZmID0gdGhpcy52YWx1ZSA9PT0gdHJ1ZTsgLy8gSWYgd2UgYXJlIHR1cm5pbmcgb2ZmIGl0ZW1zLCB3ZSBhcmUgZ29pbmcgdG8gcmVuYW1lIHRoZW0gdG8gcGFyYWdyYXBocy4KCiAgICBtb2RlbC5jaGFuZ2Uod3JpdGVyID0+IHsKICAgICAgLy8gSWYgcGFydCBvZiBhIGxpc3QgZ290IHR1cm5lZCBvZmYsIHdlIG5lZWQgdG8gaGFuZGxlIChvdXRkZW50KSBhbGwgb2Ygc3ViLWl0ZW1zIG9mIHRoZSBsYXN0IHR1cm5lZC1vZmYgaXRlbS4KICAgICAgLy8gVG8gYmUgc3VyZSB0aGF0IG1vZGVsIGlzIGFsbCB0aGUgdGltZSBpbiBhIGdvb2Qgc3RhdGUsIHdlIGZpcnN0IGZpeCBpdGVtcyBiZWxvdyB0dXJuZWQtb2ZmIGl0ZW0uCiAgICAgIGlmICh0dXJuT2ZmKSB7CiAgICAgICAgLy8gU3RhcnQgZnJvbSB0aGUgbW9kZWwgaXRlbSB0aGF0IGlzIGp1c3QgYWZ0ZXIgdGhlIGxhc3QgdHVybmVkLW9mZiBpdGVtLgogICAgICAgIGxldCBuZXh0ID0gYmxvY2tzW2Jsb2Nrcy5sZW5ndGggLSAxXS5uZXh0U2libGluZzsKICAgICAgICBsZXQgY3VycmVudEluZGVudCA9IE51bWJlci5QT1NJVElWRV9JTkZJTklUWTsKICAgICAgICBsZXQgY2hhbmdlcyA9IFtdOyAvLyBDb3JyZWN0IGluZGVudCBvZiBhbGwgaXRlbXMgYWZ0ZXIgdGhlIGxhc3QgdHVybmVkIG9mZiBpdGVtLgogICAgICAgIC8vIFJ1bGVzIHRoYXQgc2hvdWxkIGJlIGZvbGxvd2VkOgogICAgICAgIC8vIDEuIEFsbCBkaXJlY3Qgc3ViLWl0ZW1zIG9mIHR1cm5lZC1vZmYgaXRlbSBzaG91bGQgYmVjb21lIGluZGVudCAwLCBiZWNhdXNlIHRoZSBmaXJzdCBpdGVtIGFmdGVyIGl0CiAgICAgICAgLy8gICAgd2lsbCBiZSB0aGUgZmlyc3QgaXRlbSBvZiBhIG5ldyBsaXN0LiBPdGhlciBpdGVtcyBhcmUgYXQgdGhlIHNhbWUgbGV2ZWwsIHNvIHNob3VsZCBoYXZlIHNhbWUgMCBpbmRleC4KICAgICAgICAvLyAyLiBBbGwgaXRlbXMgd2l0aCBpbmRlbnQgbG93ZXIgdGhhbiBpbmRlbnQgb2YgdHVybmVkLW9mZiBpdGVtIHNob3VsZCBiZWNvbWUgaW5kZW50IDAsIGJlY2F1c2UgdGhleQogICAgICAgIC8vICAgIHNob3VsZCBub3QgZW5kIHVwIGFzIGEgY2hpbGQgb2YgYW55IG9mIGxpc3QgaXRlbXMgdGhhdCB0aGV5IHdlcmUgbm90IGNoaWxkcmVuIG9mIGJlZm9yZS4KICAgICAgICAvLyAzLiBBbGwgb3RoZXIgaXRlbXMgc2hvdWxkIGhhdmUgdGhlaXIgaW5kZW50IGNoYW5nZWQgcmVsYXRpdmVseSB0byBpdCdzIHBhcmVudC4KICAgICAgICAvLwogICAgICAgIC8vIEZvciBleGFtcGxlOgogICAgICAgIC8vIDEgICogLS0tLS0tLS0KICAgICAgICAvLyAyICAgICAqIC0tLS0tLS0tCiAgICAgICAgLy8gMyAgICAgICAgKiAtLS0tLS0tLQkJCTwtLSB0aGlzIGlzIHR1cm5lZCBvZmYuCiAgICAgICAgLy8gNCAgICAgICAgICAgKiAtLS0tLS0tLQkJPC0tIHRoaXMgaGFzIHRvIGJlY29tZSBpbmRlbnQgPSAwLCBiZWNhdXNlIGl0IHdpbGwgYmUgZmlyc3QgaXRlbSBvbiBhIG5ldyBsaXN0LgogICAgICAgIC8vIDUgICAgICAgICAgICAgICogLS0tLS0tLS0JPC0tIHRoaXMgc2hvdWxkIGJlIHN0aWxsIGJlIGEgY2hpbGQgb2YgaXRlbSBhYm92ZSwgc28gaW5kZW50ID0gMS4KICAgICAgICAvLyA2ICAgICAgICAqIC0tLS0tLS0tCQkJPC0tIHRoaXMgaGFzIHRvIGJlY29tZSBpbmRlbnQgPSAwLCBiZWNhdXNlIGl0IHNob3VsZCBub3QgYmUgYSBjaGlsZCBvZiBhbnkgb2YgaXRlbXMgYWJvdmUuCiAgICAgICAgLy8gNyAgICAgICAgICAgKiAtLS0tLS0tLQkJPC0tIHRoaXMgc2hvdWxkIGJlIHN0aWxsIGJlIGEgY2hpbGQgb2YgaXRlbSBhYm92ZSwgc28gaW5kZW50ID0gMS4KICAgICAgICAvLyA4ICAgICAqIC0tLS0tLS0tCQkJCTwtLSB0aGlzIGhhcyB0byBiZWNvbWUgaW5kZW50ID0gMC4KICAgICAgICAvLyA5ICAgICAgICAqIC0tLS0tLS0tCQkJPC0tIHRoaXMgc2hvdWxkIHN0aWxsIGJlIGEgY2hpbGQgb2YgaXRlbSBhYm92ZSwgc28gaW5kZW50ID0gMS4KICAgICAgICAvLyAxMCAgICAgICAgICAqIC0tLS0tLS0tCQk8LS0gdGhpcyBzaG91bGQgc3RpbGwgYmUgYSBjaGlsZCBvZiBpdGVtIGFib3ZlLCBzbyBpbmRlbnQgPSAyLgogICAgICAgIC8vIDExICAgICAgICAgICogLS0tLS0tLS0JCTwtLSB0aGlzIHNob3VsZCBzdGlsbCBiZSBhdCB0aGUgc2FtZSBsZXZlbCBhcyBpdGVtIGFib3ZlLCBzbyBpbmRlbnQgPSAyLgogICAgICAgIC8vIDEyICogLS0tLS0tLS0JCQkJPC0tIHRoaXMgYW5kIGFsbCBiZWxvdyBhcmUgbGVmdCB1bmNoYW5nZWQuCiAgICAgICAgLy8gMTMgICAgKiAtLS0tLS0tLQogICAgICAgIC8vIDE0ICAgICAgICogLS0tLS0tLS0KICAgICAgICAvLwogICAgICAgIC8vIEFmdGVyIHR1cm5pbmcgb2ZmIDMgdGhlIGxpc3QgYmVjb21lczoKICAgICAgICAvLwogICAgICAgIC8vIDEgICogLS0tLS0tLS0KICAgICAgICAvLyAyICAgICAqIC0tLS0tLS0tCiAgICAgICAgLy8KICAgICAgICAvLyAzICAtLS0tLS0tLQogICAgICAgIC8vCiAgICAgICAgLy8gNCAgKiAtLS0tLS0tLQogICAgICAgIC8vIDUgICAgICogLS0tLS0tLS0KICAgICAgICAvLyA2ICAqIC0tLS0tLS0tCiAgICAgICAgLy8gNyAgICAgKiAtLS0tLS0tLQogICAgICAgIC8vIDggICogLS0tLS0tLS0KICAgICAgICAvLyA5ICAgICAqIC0tLS0tLS0tCiAgICAgICAgLy8gMTAgICAgICAgKiAtLS0tLS0tLQogICAgICAgIC8vIDExICAgICAgICogLS0tLS0tLS0KICAgICAgICAvLyAxMiAqIC0tLS0tLS0tCiAgICAgICAgLy8gMTMgICAgKiAtLS0tLS0tLQogICAgICAgIC8vIDE0ICAgICAgICogLS0tLS0tLS0KICAgICAgICAvLwogICAgICAgIC8vIFRoYW5rcyB0byB0aGlzIGFsZ29yaXRobSBubyBsaXN0cyBhcmUgbWlzbWF0Y2hlZCBhbmQgbm8gaXRlbXMgZ2V0IHVuZXhwZWN0ZWQgY2hpbGRyZW4vcGFyZW50LCB3aGlsZQogICAgICAgIC8vIHRob3NlIHBhcmVudC1jaGlsZCBjb25uZWN0aW9uIHdoaWNoIGFyZSBwb3NzaWJsZSB0byBtYWludGFpbiBhcmUgc3RpbGwgbWFpbnRhaW5lZC4gSXQncyB3b3J0aCBub3RpbmcKICAgICAgICAvLyB0aGF0IHRoaXMgaXMgdGhlIHNhbWUgZWZmZWN0IHRoYXQgd2Ugd291bGQgYmUgZ2V0IGJ5IG11bHRpcGxlIHVzZSBvZiBvdXRkZW50IGNvbW1hbmQuIEhvd2V2ZXIgZG9pbmcKICAgICAgICAvLyBpdCBsaWtlIHRoaXMgaXMgbXVjaCBtb3JlIGVmZmljaWVudCBiZWNhdXNlIGl0J3MgbGVzcyBvcGVyYXRpb24gKGxlc3MgbWVtb3J5IHVzYWdlLCBlYXNpZXIgT1QpIGFuZAogICAgICAgIC8vIGxlc3MgY29udmVyc2lvbiAoZmFzdGVyKS4KCiAgICAgICAgd2hpbGUgKG5leHQgJiYgbmV4dC5uYW1lID09ICdsaXN0SXRlbScgJiYgbmV4dC5nZXRBdHRyaWJ1dGUoJ2xpc3RJbmRlbnQnKSAhPT0gMCkgewogICAgICAgICAgLy8gQ2hlY2sgZWFjaCBuZXh0IGxpc3QgaXRlbSwgYXMgbG9uZyBhcyBpdHMgaW5kZW50IGlzIGJpZ2dlciB0aGFuIDAuCiAgICAgICAgICAvLyBJZiB0aGUgaW5kZW50IGlzIDAgd2UgYXJlIG5vdCBnb2luZyB0byBjaGFuZ2UgYW55dGhpbmcgYW55d2F5LgogICAgICAgICAgY29uc3QgaW5kZW50ID0gbmV4dC5nZXRBdHRyaWJ1dGUoJ2xpc3RJbmRlbnQnKTsgLy8gV2UgY2hlY2sgaWYgdGhhdCdzIGl0ZW0gaW5kZW50IGlzIGxvd2VyIGFzIGN1cnJlbnQgcmVsYXRpdmUgaW5kZW50LgoKICAgICAgICAgIGlmIChpbmRlbnQgPCBjdXJyZW50SW5kZW50KSB7CiAgICAgICAgICAgIC8vIElmIGl0IGlzLCBjdXJyZW50IHJlbGF0aXZlIGluZGVudCBiZWNvbWVzIHRoYXQgaW5kZW50LgogICAgICAgICAgICBjdXJyZW50SW5kZW50ID0gaW5kZW50OwogICAgICAgICAgfSAvLyBGaXggaW5kZW50IHJlbGF0aXZlbHkgdG8gY3VycmVudCByZWxhdGl2ZSBpbmRlbnQuCiAgICAgICAgICAvLyBOb3RlLCB0aGF0IGlmIHdlIGp1c3QgY2hhbmdlZCB0aGUgY3VycmVudCByZWxhdGl2ZSBpbmRlbnQsIHRoZSBuZXdJbmRlbnQgd2lsbCBiZSBlcXVhbCB0byAwLgoKCiAgICAgICAgICBjb25zdCBuZXdJbmRlbnQgPSBpbmRlbnQgLSBjdXJyZW50SW5kZW50OyAvLyBTYXZlIHRoZSBlbnRyeSBpbiBjaGFuZ2VzIGFycmF5LiBXZSBkbyBub3QgYXBwbHkgaXQgYXQgdGhlIG1vbWVudCwgYmVjYXVzZSB3ZSB3aWxsIG5lZWQgdG8KICAgICAgICAgIC8vIHJldmVyc2UgdGhlIGNoYW5nZXMgc28gdGhlIGxhc3QgaXRlbSBpcyBjaGFuZ2VkIGZpcnN0LgogICAgICAgICAgLy8gVGhpcyBpcyB0byBrZWVwIG1vZGVsIGluIGNvcnJlY3Qgc3RhdGUgYWxsIHRoZSB0aW1lLgoKICAgICAgICAgIGNoYW5nZXMucHVzaCh7CiAgICAgICAgICAgIGVsZW1lbnQ6IG5leHQsCiAgICAgICAgICAgIGxpc3RJbmRlbnQ6IG5ld0luZGVudAogICAgICAgICAgfSk7IC8vIEZpbmQgbmV4dCBpdGVtLgoKICAgICAgICAgIG5leHQgPSBuZXh0Lm5leHRTaWJsaW5nOwogICAgICAgIH0KCiAgICAgICAgY2hhbmdlcyA9IGNoYW5nZXMucmV2ZXJzZSgpOwoKICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgY2hhbmdlcykgewogICAgICAgICAgd3JpdGVyLnNldEF0dHJpYnV0ZSgnbGlzdEluZGVudCcsIGl0ZW0ubGlzdEluZGVudCwgaXRlbS5lbGVtZW50KTsKICAgICAgICB9CiAgICAgIH0gLy8gSWYgd2UgYXJlIHR1cm5pbmcgb24sIHdlIG1pZ2h0IGNoYW5nZSBzb21lIGl0ZW1zIHRoYXQgYXJlIGFscmVhZHkgYGxpc3RJdGVtYHMgYnV0IHdpdGggZGlmZmVyZW50IHR5cGUuCiAgICAgIC8vIENoYW5naW5nIG9uZSBuZXN0ZWQgbGlzdCBpdGVtIHRvIG90aGVyIHR5cGUgc2hvdWxkIGFsc28gdHJpZ2dlciBjaGFuZ2luZyBhbGwgaXRzIHNpYmxpbmdzIHNvIHRoZQogICAgICAvLyB3aG9sZSBuZXN0ZWQgbGlzdCBpcyBvZiB0aGUgc2FtZSB0eXBlLgogICAgICAvLyBFeGFtcGxlIChhc3N1bWUgY2hhbmdpbmcgdG8gbnVtYmVyZWQgbGlzdCk6CiAgICAgIC8vICogLS0tLS0tCQkJCTwtLSBkbyBub3QgZml4LCB0b3AgbGV2ZWwgaXRlbQogICAgICAvLyAgICogLS0tLS0tCQkJPC0tIGZpeCwgYmVjYXVzZSBsYXR0ZXIgbGlzdCBpdGVtIG9mIHRoaXMgaXRlbSdzIGxpc3QgaXMgY2hhbmdlZAogICAgICAvLyAgICAgICogLS0tLS0tCQk8LS0gZG8gbm90IGZpeCwgaXRlbSBpcyBub3QgYWZmZWN0ZWQgKGRpZmZlcmVudCBsaXN0KQogICAgICAvLyAgICogLS0tLS0tCQkJPC0tIGZpeCwgYmVjYXVzZSBsYXR0ZXIgbGlzdCBpdGVtIG9mIHRoaXMgaXRlbSdzIGxpc3QgaXMgY2hhbmdlZAogICAgICAvLyAgICAgICogLS0tLS0tCQk8LS0gZml4LCBiZWNhdXNlIGxhdHRlciBsaXN0IGl0ZW0gb2YgdGhpcyBpdGVtJ3MgbGlzdCBpcyBjaGFuZ2VkCiAgICAgIC8vICAgICAgKiAtLS1bLS0JCTwtLSBhbHJlYWR5IGluIHNlbGVjdGlvbgogICAgICAvLyAgICogLS0tLS0tCQkJPC0tIGFscmVhZHkgaW4gc2VsZWN0aW9uCiAgICAgIC8vICAgKiAtLS0tLS0JCQk8LS0gYWxyZWFkeSBpbiBzZWxlY3Rpb24KICAgICAgLy8gKiAtLS0tLS0JCQkJPC0tIGFscmVhZHkgaW4gc2VsZWN0aW9uLCBidXQgZG9lcyBub3QgY2F1c2Ugb3RoZXIgbGlzdCBpdGVtcyB0byBjaGFuZ2UgYmVjYXVzZSBpcyB0b3AtbGV2ZWwKICAgICAgLy8gICAqIC0tLV0tLQkJCTwtLSBhbHJlYWR5IGluIHNlbGVjdGlvbgogICAgICAvLyAgICogLS0tLS0tCQkJPC0tIGZpeCwgYmVjYXVzZSBwcmVjZWRpbmcgbGlzdCBpdGVtIG9mIHRoaXMgaXRlbSdzIGxpc3QgaXMgY2hhbmdlZAogICAgICAvLyAgICAgICogLS0tLS0tCQk8LS0gZG8gbm90IGZpeCwgaXRlbSBpcyBub3QgYWZmZWN0ZWQgKGRpZmZlcmVudCBsaXN0KQogICAgICAvLyAqIC0tLS0tLQkJCQk8LS0gZG8gbm90IGZpeCwgdG9wIGxldmVsIGl0ZW0KCgogICAgICBpZiAoIXR1cm5PZmYpIHsKICAgICAgICAvLyBGaW5kIGxvd2VzdCBpbmRlbnQgYW1vbmcgc2VsZWN0ZWQgaXRlbXMuIFRoaXMgd2lsbCBiZSBpbmRpY2F0b3Igd2hhdCBpcyB0aGUgaW5kZW50IG9mCiAgICAgICAgLy8gdG9wLW1vc3QgbGlzdCBhZmZlY3RlZCBieSB0aGUgY29tbWFuZC4KICAgICAgICBsZXQgbG93ZXN0SW5kZW50ID0gTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZOwoKICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgYmxvY2tzKSB7CiAgICAgICAgICBpZiAoaXRlbS5pcygnbGlzdEl0ZW0nKSAmJiBpdGVtLmdldEF0dHJpYnV0ZSgnbGlzdEluZGVudCcpIDwgbG93ZXN0SW5kZW50KSB7CiAgICAgICAgICAgIGxvd2VzdEluZGVudCA9IGl0ZW0uZ2V0QXR0cmlidXRlKCdsaXN0SW5kZW50Jyk7CiAgICAgICAgICB9CiAgICAgICAgfSAvLyBEbyBub3QgZXhlY3V0ZSB0aGUgZml4IGZvciB0b3AtbGV2ZWwgbGlzdHMuCgoKICAgICAgICBsb3dlc3RJbmRlbnQgPSBsb3dlc3RJbmRlbnQgPT09IDAgPyAxIDogbG93ZXN0SW5kZW50OyAvLyBGaXggdHlwZXMgb2YgbGlzdCBpdGVtcyB0aGF0IGFyZSAiYmVmb3JlIiB0aGUgc2VsZWN0ZWQgYmxvY2tzLgoKICAgICAgICBfZml4VHlwZShibG9ja3MsIHRydWUsIGxvd2VzdEluZGVudCk7IC8vIEZpeCB0eXBlcyBvZiBsaXN0IGl0ZW1zIHRoYXQgYXJlICJhZnRlciIgdGhlIHNlbGVjdGVkIGJsb2Nrcy4KCgogICAgICAgIF9maXhUeXBlKGJsb2NrcywgZmFsc2UsIGxvd2VzdEluZGVudCk7CiAgICAgIH0gLy8gUGhldyEgTm93IGl0IHdpbGwgYmUgZWFzaWVyIDopLgogICAgICAvLyBGb3IgZWFjaCBibG9jayBlbGVtZW50IHRoYXQgd2FzIGluIHRoZSBzZWxlY3Rpb24sIHdlIHdpbGwgZWl0aGVyOiB0dXJuIGl0IHRvIGxpc3QgaXRlbSwKICAgICAgLy8gdHVybiBpdCB0byBwYXJhZ3JhcGgsIG9yIGNoYW5nZSBpdCdzIHR5cGUuIE9yIGxlYXZlIGl0IGFzIGl0IGlzLgogICAgICAvLyBEbyBpdCBpbiByZXZlcnNlIGFzIHRoZXJlIG1pZ2h0IGJlIG11bHRpcGxlIGJsb2NrcyAoc2FtZSBhcyB3aXRoIGNoYW5naW5nIGluZGVudHMpLgoKCiAgICAgIGZvciAoY29uc3QgZWxlbWVudCBvZiBibG9ja3MucmV2ZXJzZSgpKSB7CiAgICAgICAgaWYgKHR1cm5PZmYgJiYgZWxlbWVudC5uYW1lID09ICdsaXN0SXRlbScpIHsKICAgICAgICAgIC8vIFdlIGFyZSB0dXJuaW5nIG9mZiBhbmQgdGhlIGVsZW1lbnQgaXMgYSBgbGlzdEl0ZW1gIC0gaXQgc2hvdWxkIGJlIGNvbnZlcnRlZCB0byBgcGFyYWdyYXBoYC4KICAgICAgICAgIC8vIExpc3QgaXRlbSBzcGVjaWZpYyBhdHRyaWJ1dGVzIGFyZSByZW1vdmVkIGJ5IHBvc3QgZml4ZXIuCiAgICAgICAgICB3cml0ZXIucmVuYW1lKGVsZW1lbnQsICdwYXJhZ3JhcGgnKTsKICAgICAgICB9IGVsc2UgaWYgKCF0dXJuT2ZmICYmIGVsZW1lbnQubmFtZSAhPSAnbGlzdEl0ZW0nKSB7CiAgICAgICAgICAvLyBXZSBhcmUgdHVybmluZyBvbiBhbmQgdGhlIGVsZW1lbnQgaXMgbm90IGEgYGxpc3RJdGVtYCAtIGl0IHNob3VsZCBiZSBjb252ZXJ0ZWQgdG8gYGxpc3RJdGVtYC4KICAgICAgICAgIC8vIFRoZSBvcmRlciBvZiBvcGVyYXRpb25zIGlzIGltcG9ydGFudCB0byBrZWVwIG1vZGVsIGluIGNvcnJlY3Qgc3RhdGUuCiAgICAgICAgICB3cml0ZXIuc2V0QXR0cmlidXRlcyh7CiAgICAgICAgICAgIGxpc3RUeXBlOiB0aGlzLnR5cGUsCiAgICAgICAgICAgIGxpc3RJbmRlbnQ6IDAKICAgICAgICAgIH0sIGVsZW1lbnQpOwogICAgICAgICAgd3JpdGVyLnJlbmFtZShlbGVtZW50LCAnbGlzdEl0ZW0nKTsKICAgICAgICB9IGVsc2UgaWYgKCF0dXJuT2ZmICYmIGVsZW1lbnQubmFtZSA9PSAnbGlzdEl0ZW0nICYmIGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdsaXN0VHlwZScpICE9IHRoaXMudHlwZSkgewogICAgICAgICAgLy8gV2UgYXJlIHR1cm5pbmcgb24gYW5kIHRoZSBlbGVtZW50IGlzIGEgYGxpc3RJdGVtYCBidXQgaGFzIGRpZmZlcmVudCB0eXBlIC0gY2hhbmdlIGl0J3MgdHlwZSBhbmQKICAgICAgICAgIC8vIHR5cGUgb2YgaXQncyBhbGwgc2libGluZ3MgdGhhdCBoYXZlIHNhbWUgaW5kZW50LgogICAgICAgICAgd3JpdGVyLnNldEF0dHJpYnV0ZSgnbGlzdFR5cGUnLCB0aGlzLnR5cGUsIGVsZW1lbnQpOwogICAgICAgIH0KICAgICAgfQogICAgfSk7CiAgfQogIC8qKgogICAqIENoZWNrcyB0aGUgY29tbWFuZCdzIHtAbGluayAjdmFsdWV9LgogICAqCiAgICogQHByaXZhdGUKICAgKiBAcmV0dXJucyB7Qm9vbGVhbn0gVGhlIGN1cnJlbnQgdmFsdWUuCiAgICovCgoKICBfZ2V0VmFsdWUoKSB7CiAgICAvLyBDaGVjayB3aGV0aGVyIGNsb3Nlc3QgYGxpc3RJdGVtYCBhbmNlc3RvciBvZiB0aGUgcG9zaXRpb24gaGFzIGEgY29ycmVjdCB0eXBlLgogICAgY29uc3QgbGlzdEl0ZW0gPSBmaXJzdCh0aGlzLmVkaXRvci5tb2RlbC5kb2N1bWVudC5zZWxlY3Rpb24uZ2V0U2VsZWN0ZWRCbG9ja3MoKSk7CiAgICByZXR1cm4gISFsaXN0SXRlbSAmJiBsaXN0SXRlbS5pcygnbGlzdEl0ZW0nKSAmJiBsaXN0SXRlbS5nZXRBdHRyaWJ1dGUoJ2xpc3RUeXBlJykgPT0gdGhpcy50eXBlOwogIH0KICAvKioKICAgKiBDaGVja3Mgd2hldGhlciB0aGUgY29tbWFuZCBjYW4gYmUgZW5hYmxlZCBpbiB0aGUgY3VycmVudCBjb250ZXh0LgogICAqCiAgICogQHByaXZhdGUKICAgKiBAcmV0dXJucyB7Qm9vbGVhbn0gV2hldGhlciB0aGUgY29tbWFuZCBzaG91bGQgYmUgZW5hYmxlZC4KICAgKi8KCgogIF9jaGVja0VuYWJsZWQoKSB7CiAgICAvLyBJZiBjb21tYW5kIHZhbHVlIGlzIHRydWUgaXQgbWVhbnMgdGhhdCB3ZSBhcmUgaW4gbGlzdCBpdGVtLCBzbyB0aGUgY29tbWFuZCBzaG91bGQgYmUgZW5hYmxlZC4KICAgIGlmICh0aGlzLnZhbHVlKSB7CiAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGNvbnN0IHNlbGVjdGlvbiA9IHRoaXMuZWRpdG9yLm1vZGVsLmRvY3VtZW50LnNlbGVjdGlvbjsKICAgIGNvbnN0IHNjaGVtYSA9IHRoaXMuZWRpdG9yLm1vZGVsLnNjaGVtYTsKICAgIGNvbnN0IGZpcnN0QmxvY2sgPSBmaXJzdChzZWxlY3Rpb24uZ2V0U2VsZWN0ZWRCbG9ja3MoKSk7CgogICAgaWYgKCFmaXJzdEJsb2NrKSB7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0gLy8gT3RoZXJ3aXNlLCBjaGVjayBpZiBsaXN0IGl0ZW0gY2FuIGJlIGluc2VydGVkIGF0IHRoZSBwb3NpdGlvbiBzdGFydC4KCgogICAgcmV0dXJuIGNoZWNrQ2FuQmVjb21lTGlzdEl0ZW0oZmlyc3RCbG9jaywgc2NoZW1hKTsKICB9Cgp9IC8vIEhlbHBlciBmdW5jdGlvbiB1c2VkIHdoZW4gb25lIG9yIG1vcmUgbGlzdCBpdGVtIGhhdmUgdGhlaXIgdHlwZSBjaGFuZ2VkLiBGaXhlcyB0eXBlIG9mIG90aGVyIGxpc3QgaXRlbXMKLy8gdGhhdCBhcmUgYWZmZWN0ZWQgYnkgdGhlIGNoYW5nZSAoYXJlIGluIHNhbWUgbGlzdHMpIGJ1dCBhcmUgbm90IGRpcmVjdGx5IGluIHNlbGVjdGlvbi4gVGhlIGZ1bmN0aW9uIGdvdCBleHRyYWN0ZWQKLy8gbm90IHRvIGR1cGxpY2F0ZWQgY29kZSwgYXMgc2FtZSBmaXggaGFzIHRvIGJlIHBlcmZvcm1lZCBiZWZvcmUgYW5kIGFmdGVyIHNlbGVjdGlvbi4KLy8KLy8gQHBhcmFtIHtBcnJheS48bW9kdWxlOmVuZ2luZS9tb2RlbC9ub2Rlfk5vZGU+fSBibG9ja3MgQmxvY2tzIHRoYXQgYXJlIGluIHNlbGVjdGlvbi4KLy8gQHBhcmFtIHtCb29sZWFufSBpc0JhY2t3YXJkIFNwZWNpZmllZCB3aGV0aGVyIGZpeCB3aWxsIGJlIGFwcGxpZWQgZm9yIGJsb2NrcyBiZWZvcmUgZmlyc3Qgc2VsZWN0ZWQgYmxvY2sgKGB0cnVlYCkKLy8gb3IgYmxvY2tzIGFmdGVyIGxhc3Qgc2VsZWN0ZWQgYmxvY2sgKGBmYWxzZWApLgovLyBAcGFyYW0ge051bWJlcn0gbG93ZXN0SW5kZW50IExvd2VzdCBpbmRlbnQgYW1vbmcgc2VsZWN0ZWQgYmxvY2tzLgoKZnVuY3Rpb24gX2ZpeFR5cGUoYmxvY2tzLCBpc0JhY2t3YXJkLCBsb3dlc3RJbmRlbnQpIHsKICAvLyBXZSBuZWVkIHRvIGNoZWNrIHByZXZpb3VzIHNpYmxpbmcgb2YgZmlyc3QgY2hhbmdlZCBpdGVtIGFuZCBuZXh0IHNpYmxpbmdzIG9mIGxhc3QgY2hhbmdlZCBpdGVtLgogIGNvbnN0IHN0YXJ0aW5nSXRlbSA9IGlzQmFja3dhcmQgPyBibG9ja3NbMF0gOiBibG9ja3NbYmxvY2tzLmxlbmd0aCAtIDFdOwoKICBpZiAoc3RhcnRpbmdJdGVtLmlzKCdsaXN0SXRlbScpKSB7CiAgICBsZXQgaXRlbSA9IHN0YXJ0aW5nSXRlbVtpc0JhY2t3YXJkID8gJ3ByZXZpb3VzU2libGluZycgOiAnbmV4dFNpYmxpbmcnXTsgLy8gRHVyaW5nIHByb2Nlc3NpbmcgaXRlbXMsIGtlZXBzIHRoZSBsb3dlc3QgaW5kZW50IG9mIGFscmVhZHkgcHJvY2Vzc2VkIGl0ZW1zLgogICAgLy8gVGhpcyBzYXZlcyB1cyBmcm9tIGNoYW5naW5nIHRvbyBtYW55IGl0ZW1zLgogICAgLy8gRm9sbG93aW5nIGV4YW1wbGUgaXMgZm9yIGdvaW5nIGZvcndhcmQgYXMgaXQgaXMgZWFzaWVyIHRvIHJlYWQsIGhvd2V2ZXIgc2FtZSBhcHBsaWVzIHRvIGdvaW5nIGJhY2t3YXJkLgogICAgLy8gKiAtLS0tLS0KICAgIC8vICAgKiAtLS0tLS0KICAgIC8vICAgICAqIC0tWy0tLQogICAgLy8gICAqIC0tLS0tLQkJPC0tIGBsb3dlc3RJbmRlbnRgIHNob3VsZCBiZSAxCiAgICAvLyAgICAgKiAtLV0tLS0JCTwtLSBgc3RhcnRpbmdJdGVtYCwgYGN1cnJlbnRJbmRlbnRgID0gMiwgYGxvd2VzdEluZGVudGAgPT0gMQogICAgLy8gICAgICogLS0tLS0tCQk8LS0gc2hvdWxkIGJlIGZpeGVkLCBgaW5kZW50YCA9PSAyID09IGBjdXJyZW50SW5kZW50YAogICAgLy8gICAqIC0tLS0tLQkJPC0tIHNob3VsZCBiZSBmaXhlZCwgc2V0IGBjdXJyZW50SW5kZW50YCB0byAxLCBgaW5kZW50YCA9PSAxID09IGBjdXJyZW50SW5kZW50YAogICAgLy8gICAgICogLS0tLS0tCQk8LS0gc2hvdWxkIG5vdCBiZSBmaXhlZCwgaXRlbSBpcyBpbiBkaWZmZXJlbnQgbGlzdCwgYGluZGVudGAgPSAyLCBgaW5kZW50YCAhPSBgY3VycmVudEluZGVudGAKICAgIC8vICAgKiAtLS0tLS0JCTwtLSBzaG91bGQgYmUgZml4ZWQsIGBpbmRlbnRgID09IDEgPT0gYGN1cnJlbnRJbmRlbnRgCiAgICAvLyAqIC0tLS0tLQkJCTwtLSBicmVhayBsb29wIChgaW5kZW50YCA8IGBsb3dlc3RJbmRlbnRgKQoKICAgIGxldCBjdXJyZW50SW5kZW50ID0gc3RhcnRpbmdJdGVtLmdldEF0dHJpYnV0ZSgnbGlzdEluZGVudCcpOyAvLyBMb29rIGJhY2sgdW50aWwgYSBsaXN0IGl0ZW0gd2l0aCBpbmRlbnQgbG93ZXIgdGhhbiByZWZlcmVuY2UgYGxvd2VzdEluZGVudGAuCiAgICAvLyBUaGF0IHdvdWxkIGJlIHRoZSBwYXJlbnQgb2YgbmVzdGVkIHN1Ymxpc3Qgd2hpY2ggY29udGFpbnMgaXRlbSBoYXZpbmcgYGxvd2VzdEluZGVudGAuCgogICAgd2hpbGUgKGl0ZW0gJiYgaXRlbS5pcygnbGlzdEl0ZW0nKSAmJiBpdGVtLmdldEF0dHJpYnV0ZSgnbGlzdEluZGVudCcpID49IGxvd2VzdEluZGVudCkgewogICAgICBpZiAoY3VycmVudEluZGVudCA+IGl0ZW0uZ2V0QXR0cmlidXRlKCdsaXN0SW5kZW50JykpIHsKICAgICAgICBjdXJyZW50SW5kZW50ID0gaXRlbS5nZXRBdHRyaWJ1dGUoJ2xpc3RJbmRlbnQnKTsKICAgICAgfSAvLyBGb3VuZCBhbiBpdGVtIHRoYXQgaXMgaW4gdGhlIHNhbWUgbmVzdGVkIHN1Ymxpc3QuCgoKICAgICAgaWYgKGl0ZW0uZ2V0QXR0cmlidXRlKCdsaXN0SW5kZW50JykgPT0gY3VycmVudEluZGVudCkgewogICAgICAgIC8vIEp1c3QgYWRkIHRoZSBpdGVtIHRvIHNlbGVjdGVkIGJsb2NrcyBsaWtlIGl0IHdhcyBzZWxlY3RlZCBieSB0aGUgdXNlci4KICAgICAgICBibG9ja3NbaXNCYWNrd2FyZCA/ICd1bnNoaWZ0JyA6ICdwdXNoJ10oaXRlbSk7CiAgICAgIH0KCiAgICAgIGl0ZW0gPSBpdGVtW2lzQmFja3dhcmQgPyAncHJldmlvdXNTaWJsaW5nJyA6ICduZXh0U2libGluZyddOwogICAgfQogIH0KfSAvLyBDaGVja3Mgd2hldGhlciB0aGUgZ2l2ZW4gYmxvY2sgY2FuIGJlIHJlcGxhY2VkIGJ5IGEgbGlzdEl0ZW0uCi8vCi8vIEBwcml2YXRlCi8vIEBwYXJhbSB7bW9kdWxlOmVuZ2luZS9tb2RlbC9lbGVtZW50fkVsZW1lbnR9IGJsb2NrIEEgYmxvY2sgdG8gYmUgdGVzdGVkLgovLyBAcGFyYW0ge21vZHVsZTplbmdpbmUvbW9kZWwvc2NoZW1hflNjaGVtYX0gc2NoZW1hIFRoZSBzY2hlbWEgb2YgdGhlIGRvY3VtZW50LgovLyBAcmV0dXJucyB7Qm9vbGVhbn0KCgpmdW5jdGlvbiBjaGVja0NhbkJlY29tZUxpc3RJdGVtKGJsb2NrLCBzY2hlbWEpIHsKICByZXR1cm4gc2NoZW1hLmNoZWNrQ2hpbGQoYmxvY2sucGFyZW50LCAnbGlzdEl0ZW0nKSAmJiAhc2NoZW1hLmlzT2JqZWN0KGJsb2NrKTsKfQ=="},{"version":3,"sources":["/Users/antonyching/Desktop/project/new-builder-demo/node_modules/@ckeditor/ckeditor5-list/src/listcommand.js"],"names":["Command","first","ListCommand","constructor","editor","type","refresh","value","_getValue","isEnabled","_checkEnabled","execute","model","document","blocks","Array","from","selection","getSelectedBlocks","filter","block","checkCanBecomeListItem","schema","turnOff","change","writer","next","length","nextSibling","currentIndent","Number","POSITIVE_INFINITY","changes","name","getAttribute","indent","newIndent","push","element","listIndent","reverse","item","setAttribute","lowestIndent","is","_fixType","rename","setAttributes","listType","listItem","firstBlock","isBackward","startingItem","checkChild","parent","isObject"],"mappings":"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","sourcesContent":["/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module list/listcommand\n */\n\nimport Command from '@ckeditor/ckeditor5-core/src/command';\nimport first from '@ckeditor/ckeditor5-utils/src/first';\n\n/**\n * The list command. It is used by the {@link module:list/list~List list feature}.\n *\n * @extends module:core/command~Command\n */\nexport default class ListCommand extends Command {\n\t/**\n\t * Creates an instance of the command.\n\t *\n\t * @param {module:core/editor/editor~Editor} editor The editor instance.\n\t * @param {'numbered'|'bulleted'} type List type that will be handled by this command.\n\t */\n\tconstructor( editor, type ) {\n\t\tsuper( editor );\n\n\t\t/**\n\t\t * The type of the list created by the command.\n\t\t *\n\t\t * @readonly\n\t\t * @member {'numbered'|'bulleted'|'todo'}\n\t\t */\n\t\tthis.type = type;\n\n\t\t/**\n\t\t * A flag indicating whether the command is active, which means that the selection starts in a list of the same type.\n\t\t *\n\t\t * @observable\n\t\t * @readonly\n\t\t * @member {Boolean} #value\n\t\t */\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\trefresh() {\n\t\tthis.value = this._getValue();\n\t\tthis.isEnabled = this._checkEnabled();\n\t}\n\n\t/**\n\t * Executes the command.\n\t *\n\t * @protected\n\t */\n\texecute() {\n\t\tconst model = this.editor.model;\n\t\tconst document = model.document;\n\t\tconst blocks = Array.from( document.selection.getSelectedBlocks() )\n\t\t\t.filter( block => checkCanBecomeListItem( block, model.schema ) );\n\n\t\t// Whether we are turning off some items.\n\t\tconst turnOff = this.value === true;\n\t\t// If we are turning off items, we are going to rename them to paragraphs.\n\n\t\tmodel.change( writer => {\n\t\t\t// If part of a list got turned off, we need to handle (outdent) all of sub-items of the last turned-off item.\n\t\t\t// To be sure that model is all the time in a good state, we first fix items below turned-off item.\n\t\t\tif ( turnOff ) {\n\t\t\t\t// Start from the model item that is just after the last turned-off item.\n\t\t\t\tlet next = blocks[ blocks.length - 1 ].nextSibling;\n\t\t\t\tlet currentIndent = Number.POSITIVE_INFINITY;\n\t\t\t\tlet changes = [];\n\n\t\t\t\t// Correct indent of all items after the last turned off item.\n\t\t\t\t// Rules that should be followed:\n\t\t\t\t// 1. All direct sub-items of turned-off item should become indent 0, because the first item after it\n\t\t\t\t//    will be the first item of a new list. Other items are at the same level, so should have same 0 index.\n\t\t\t\t// 2. All items with indent lower than indent of turned-off item should become indent 0, because they\n\t\t\t\t//    should not end up as a child of any of list items that they were not children of before.\n\t\t\t\t// 3. All other items should have their indent changed relatively to it's parent.\n\t\t\t\t//\n\t\t\t\t// For example:\n\t\t\t\t// 1  * --------\n\t\t\t\t// 2     * --------\n\t\t\t\t// 3        * --------\t\t\t<-- this is turned off.\n\t\t\t\t// 4           * --------\t\t<-- this has to become indent = 0, because it will be first item on a new list.\n\t\t\t\t// 5              * --------\t<-- this should be still be a child of item above, so indent = 1.\n\t\t\t\t// 6        * --------\t\t\t<-- this has to become indent = 0, because it should not be a child of any of items above.\n\t\t\t\t// 7           * --------\t\t<-- this should be still be a child of item above, so indent = 1.\n\t\t\t\t// 8     * --------\t\t\t\t<-- this has to become indent = 0.\n\t\t\t\t// 9        * --------\t\t\t<-- this should still be a child of item above, so indent = 1.\n\t\t\t\t// 10          * --------\t\t<-- this should still be a child of item above, so indent = 2.\n\t\t\t\t// 11          * --------\t\t<-- this should still be at the same level as item above, so indent = 2.\n\t\t\t\t// 12 * --------\t\t\t\t<-- this and all below are left unchanged.\n\t\t\t\t// 13    * --------\n\t\t\t\t// 14       * --------\n\t\t\t\t//\n\t\t\t\t// After turning off 3 the list becomes:\n\t\t\t\t//\n\t\t\t\t// 1  * --------\n\t\t\t\t// 2     * --------\n\t\t\t\t//\n\t\t\t\t// 3  --------\n\t\t\t\t//\n\t\t\t\t// 4  * --------\n\t\t\t\t// 5     * --------\n\t\t\t\t// 6  * --------\n\t\t\t\t// 7     * --------\n\t\t\t\t// 8  * --------\n\t\t\t\t// 9     * --------\n\t\t\t\t// 10       * --------\n\t\t\t\t// 11       * --------\n\t\t\t\t// 12 * --------\n\t\t\t\t// 13    * --------\n\t\t\t\t// 14       * --------\n\t\t\t\t//\n\t\t\t\t// Thanks to this algorithm no lists are mismatched and no items get unexpected children/parent, while\n\t\t\t\t// those parent-child connection which are possible to maintain are still maintained. It's worth noting\n\t\t\t\t// that this is the same effect that we would be get by multiple use of outdent command. However doing\n\t\t\t\t// it like this is much more efficient because it's less operation (less memory usage, easier OT) and\n\t\t\t\t// less conversion (faster).\n\t\t\t\twhile ( next && next.name == 'listItem' && next.getAttribute( 'listIndent' ) !== 0 ) {\n\t\t\t\t\t// Check each next list item, as long as its indent is bigger than 0.\n\t\t\t\t\t// If the indent is 0 we are not going to change anything anyway.\n\t\t\t\t\tconst indent = next.getAttribute( 'listIndent' );\n\n\t\t\t\t\t// We check if that's item indent is lower as current relative indent.\n\t\t\t\t\tif ( indent < currentIndent ) {\n\t\t\t\t\t\t// If it is, current relative indent becomes that indent.\n\t\t\t\t\t\tcurrentIndent = indent;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Fix indent relatively to current relative indent.\n\t\t\t\t\t// Note, that if we just changed the current relative indent, the newIndent will be equal to 0.\n\t\t\t\t\tconst newIndent = indent - currentIndent;\n\n\t\t\t\t\t// Save the entry in changes array. We do not apply it at the moment, because we will need to\n\t\t\t\t\t// reverse the changes so the last item is changed first.\n\t\t\t\t\t// This is to keep model in correct state all the time.\n\t\t\t\t\tchanges.push( { element: next, listIndent: newIndent } );\n\n\t\t\t\t\t// Find next item.\n\t\t\t\t\tnext = next.nextSibling;\n\t\t\t\t}\n\n\t\t\t\tchanges = changes.reverse();\n\n\t\t\t\tfor ( const item of changes ) {\n\t\t\t\t\twriter.setAttribute( 'listIndent', item.listIndent, item.element );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// If we are turning on, we might change some items that are already `listItem`s but with different type.\n\t\t\t// Changing one nested list item to other type should also trigger changing all its siblings so the\n\t\t\t// whole nested list is of the same type.\n\t\t\t// Example (assume changing to numbered list):\n\t\t\t// * ------\t\t\t\t<-- do not fix, top level item\n\t\t\t//   * ------\t\t\t<-- fix, because latter list item of this item's list is changed\n\t\t\t//      * ------\t\t<-- do not fix, item is not affected (different list)\n\t\t\t//   * ------\t\t\t<-- fix, because latter list item of this item's list is changed\n\t\t\t//      * ------\t\t<-- fix, because latter list item of this item's list is changed\n\t\t\t//      * ---[--\t\t<-- already in selection\n\t\t\t//   * ------\t\t\t<-- already in selection\n\t\t\t//   * ------\t\t\t<-- already in selection\n\t\t\t// * ------\t\t\t\t<-- already in selection, but does not cause other list items to change because is top-level\n\t\t\t//   * ---]--\t\t\t<-- already in selection\n\t\t\t//   * ------\t\t\t<-- fix, because preceding list item of this item's list is changed\n\t\t\t//      * ------\t\t<-- do not fix, item is not affected (different list)\n\t\t\t// * ------\t\t\t\t<-- do not fix, top level item\n\t\t\tif ( !turnOff ) {\n\t\t\t\t// Find lowest indent among selected items. This will be indicator what is the indent of\n\t\t\t\t// top-most list affected by the command.\n\t\t\t\tlet lowestIndent = Number.POSITIVE_INFINITY;\n\n\t\t\t\tfor ( const item of blocks ) {\n\t\t\t\t\tif ( item.is( 'listItem' ) && item.getAttribute( 'listIndent' ) < lowestIndent ) {\n\t\t\t\t\t\tlowestIndent = item.getAttribute( 'listIndent' );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Do not execute the fix for top-level lists.\n\t\t\t\tlowestIndent = lowestIndent === 0 ? 1 : lowestIndent;\n\n\t\t\t\t// Fix types of list items that are \"before\" the selected blocks.\n\t\t\t\t_fixType( blocks, true, lowestIndent );\n\n\t\t\t\t// Fix types of list items that are \"after\" the selected blocks.\n\t\t\t\t_fixType( blocks, false, lowestIndent );\n\t\t\t}\n\n\t\t\t// Phew! Now it will be easier :).\n\t\t\t// For each block element that was in the selection, we will either: turn it to list item,\n\t\t\t// turn it to paragraph, or change it's type. Or leave it as it is.\n\t\t\t// Do it in reverse as there might be multiple blocks (same as with changing indents).\n\t\t\tfor ( const element of blocks.reverse() ) {\n\t\t\t\tif ( turnOff && element.name == 'listItem' ) {\n\t\t\t\t\t// We are turning off and the element is a `listItem` - it should be converted to `paragraph`.\n\t\t\t\t\t// List item specific attributes are removed by post fixer.\n\t\t\t\t\twriter.rename( element, 'paragraph' );\n\t\t\t\t} else if ( !turnOff && element.name != 'listItem' ) {\n\t\t\t\t\t// We are turning on and the element is not a `listItem` - it should be converted to `listItem`.\n\t\t\t\t\t// The order of operations is important to keep model in correct state.\n\t\t\t\t\twriter.setAttributes( { listType: this.type, listIndent: 0 }, element );\n\t\t\t\t\twriter.rename( element, 'listItem' );\n\t\t\t\t} else if ( !turnOff && element.name == 'listItem' && element.getAttribute( 'listType' ) != this.type ) {\n\t\t\t\t\t// We are turning on and the element is a `listItem` but has different type - change it's type and\n\t\t\t\t\t// type of it's all siblings that have same indent.\n\t\t\t\t\twriter.setAttribute( 'listType', this.type, element );\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t}\n\n\t/**\n\t * Checks the command's {@link #value}.\n\t *\n\t * @private\n\t * @returns {Boolean} The current value.\n\t */\n\t_getValue() {\n\t\t// Check whether closest `listItem` ancestor of the position has a correct type.\n\t\tconst listItem = first( this.editor.model.document.selection.getSelectedBlocks() );\n\n\t\treturn !!listItem && listItem.is( 'listItem' ) && listItem.getAttribute( 'listType' ) == this.type;\n\t}\n\n\t/**\n\t * Checks whether the command can be enabled in the current context.\n\t *\n\t * @private\n\t * @returns {Boolean} Whether the command should be enabled.\n\t */\n\t_checkEnabled() {\n\t\t// If command value is true it means that we are in list item, so the command should be enabled.\n\t\tif ( this.value ) {\n\t\t\treturn true;\n\t\t}\n\n\t\tconst selection = this.editor.model.document.selection;\n\t\tconst schema = this.editor.model.schema;\n\n\t\tconst firstBlock = first( selection.getSelectedBlocks() );\n\n\t\tif ( !firstBlock ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Otherwise, check if list item can be inserted at the position start.\n\t\treturn checkCanBecomeListItem( firstBlock, schema );\n\t}\n}\n\n// Helper function used when one or more list item have their type changed. Fixes type of other list items\n// that are affected by the change (are in same lists) but are not directly in selection. The function got extracted\n// not to duplicated code, as same fix has to be performed before and after selection.\n//\n// @param {Array.<module:engine/model/node~Node>} blocks Blocks that are in selection.\n// @param {Boolean} isBackward Specified whether fix will be applied for blocks before first selected block (`true`)\n// or blocks after last selected block (`false`).\n// @param {Number} lowestIndent Lowest indent among selected blocks.\nfunction _fixType( blocks, isBackward, lowestIndent ) {\n\t// We need to check previous sibling of first changed item and next siblings of last changed item.\n\tconst startingItem = isBackward ? blocks[ 0 ] : blocks[ blocks.length - 1 ];\n\n\tif ( startingItem.is( 'listItem' ) ) {\n\t\tlet item = startingItem[ isBackward ? 'previousSibling' : 'nextSibling' ];\n\t\t// During processing items, keeps the lowest indent of already processed items.\n\t\t// This saves us from changing too many items.\n\t\t// Following example is for going forward as it is easier to read, however same applies to going backward.\n\t\t// * ------\n\t\t//   * ------\n\t\t//     * --[---\n\t\t//   * ------\t\t<-- `lowestIndent` should be 1\n\t\t//     * --]---\t\t<-- `startingItem`, `currentIndent` = 2, `lowestIndent` == 1\n\t\t//     * ------\t\t<-- should be fixed, `indent` == 2 == `currentIndent`\n\t\t//   * ------\t\t<-- should be fixed, set `currentIndent` to 1, `indent` == 1 == `currentIndent`\n\t\t//     * ------\t\t<-- should not be fixed, item is in different list, `indent` = 2, `indent` != `currentIndent`\n\t\t//   * ------\t\t<-- should be fixed, `indent` == 1 == `currentIndent`\n\t\t// * ------\t\t\t<-- break loop (`indent` < `lowestIndent`)\n\t\tlet currentIndent = startingItem.getAttribute( 'listIndent' );\n\n\t\t// Look back until a list item with indent lower than reference `lowestIndent`.\n\t\t// That would be the parent of nested sublist which contains item having `lowestIndent`.\n\t\twhile ( item && item.is( 'listItem' ) && item.getAttribute( 'listIndent' ) >= lowestIndent ) {\n\t\t\tif ( currentIndent > item.getAttribute( 'listIndent' ) ) {\n\t\t\t\tcurrentIndent = item.getAttribute( 'listIndent' );\n\t\t\t}\n\n\t\t\t// Found an item that is in the same nested sublist.\n\t\t\tif ( item.getAttribute( 'listIndent' ) == currentIndent ) {\n\t\t\t\t// Just add the item to selected blocks like it was selected by the user.\n\t\t\t\tblocks[ isBackward ? 'unshift' : 'push' ]( item );\n\t\t\t}\n\n\t\t\titem = item[ isBackward ? 'previousSibling' : 'nextSibling' ];\n\t\t}\n\t}\n}\n\n// Checks whether the given block can be replaced by a listItem.\n//\n// @private\n// @param {module:engine/model/element~Element} block A block to be tested.\n// @param {module:engine/model/schema~Schema} schema The schema of the document.\n// @returns {Boolean}\nfunction checkCanBecomeListItem( block, schema ) {\n\treturn schema.checkChild( block.parent, 'listItem' ) && !schema.isObject( block );\n}\n"]}]}