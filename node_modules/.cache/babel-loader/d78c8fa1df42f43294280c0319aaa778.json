{"remainingRequest":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/babel-loader/lib/index.js!/Users/antonyching/Desktop/project/new-builder-demo/node_modules/@ckeditor/ckeditor5-easy-image/src/cloudservicesuploadadapter.js","dependencies":[{"path":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/@ckeditor/ckeditor5-easy-image/src/cloudservicesuploadadapter.js","mtime":499162500000},{"path":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/@ckeditor/ckeditor5-dev-webpack-plugin/lib/translatesourceloader.js","mtime":499162500000},{"path":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:LyoqCiAqIEBsaWNlbnNlIENvcHlyaWdodCAoYykgMjAwMy0yMDE5LCBDS1NvdXJjZSAtIEZyZWRlcmljbyBLbmFiYmVuLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKiBGb3IgbGljZW5zaW5nLCBzZWUgTElDRU5TRS5tZCBvciBodHRwczovL2NrZWRpdG9yLmNvbS9sZWdhbC9ja2VkaXRvci1vc3MtbGljZW5zZQogKi8KCi8qKgoqIEBtb2R1bGUgZWFzeS1pbWFnZS9jbG91ZHNlcnZpY2VzdXBsb2FkYWRhcHRlcgoqLwppbXBvcnQgUGx1Z2luIGZyb20gJ0Bja2VkaXRvci9ja2VkaXRvcjUtY29yZS9zcmMvcGx1Z2luJzsKaW1wb3J0IEZpbGVSZXBvc2l0b3J5IGZyb20gJ0Bja2VkaXRvci9ja2VkaXRvcjUtdXBsb2FkL3NyYy9maWxlcmVwb3NpdG9yeSc7CmltcG9ydCBVcGxvYWRHYXRld2F5IGZyb20gJ0Bja2VkaXRvci9ja2VkaXRvci1jbG91ZC1zZXJ2aWNlcy1jb3JlL3NyYy91cGxvYWRnYXRld2F5L3VwbG9hZGdhdGV3YXknOwppbXBvcnQgQ2xvdWRTZXJ2aWNlcyBmcm9tICdAY2tlZGl0b3IvY2tlZGl0b3I1LWNsb3VkLXNlcnZpY2VzL3NyYy9jbG91ZHNlcnZpY2VzJzsKLyoqCiAqIEEgcGx1Z2luIHRoYXQgZW5hYmxlcyB1cGxvYWQgdG8gW0NLRWRpdG9yIENsb3VkIFNlcnZpY2VzXShodHRwczovL2NrZWRpdG9yLmNvbS9ja2VkaXRvci1jbG91ZC1zZXJ2aWNlcy8pLgogKgogKiBJdCBpcyBtYWlubHkgdXNlZCBieSB0aGUge0BsaW5rIG1vZHVsZTplYXN5LWltYWdlL2Vhc3lpbWFnZX5FYXN5SW1hZ2V9IGZlYXR1cmUuCiAqCiAqIEFmdGVyIGVuYWJsaW5nIHRoaXMgYWRhcHRlciB5b3UgbmVlZCB0byBjb25maWd1cmUgdGhlIENLRWRpdG9yIENsb3VkIFNlcnZpY2VzIGludGVncmF0aW9uIHRocm91Z2gKICoge0BsaW5rIG1vZHVsZTpjbG91ZC1zZXJ2aWNlcy9jbG91ZHNlcnZpY2VzfkNsb3VkU2VydmljZXNDb25maWcgYGNvbmZpZy5jbG91ZFNlcnZpY2VzYH0uCiAqCiAqIEBleHRlbmRzIG1vZHVsZTpjb3JlL3BsdWdpbn5QbHVnaW4KICovCgpleHBvcnQgZGVmYXVsdCBjbGFzcyBDbG91ZFNlcnZpY2VzVXBsb2FkQWRhcHRlciBleHRlbmRzIFBsdWdpbiB7CiAgLyoqCiAgICogQGluaGVyaXREb2MKICAgKi8KICBzdGF0aWMgZ2V0IHJlcXVpcmVzKCkgewogICAgcmV0dXJuIFtGaWxlUmVwb3NpdG9yeSwgQ2xvdWRTZXJ2aWNlc107CiAgfQogIC8qKgogICAqIEBpbmhlcml0RG9jCiAgICovCgoKICBpbml0KCkgewogICAgY29uc3QgZWRpdG9yID0gdGhpcy5lZGl0b3I7CiAgICBjb25zdCBjbG91ZFNlcnZpY2VzID0gZWRpdG9yLnBsdWdpbnMuZ2V0KENsb3VkU2VydmljZXMpOwogICAgY29uc3QgdG9rZW4gPSBjbG91ZFNlcnZpY2VzLnRva2VuOwogICAgY29uc3QgdXBsb2FkVXJsID0gY2xvdWRTZXJ2aWNlcy51cGxvYWRVcmw7CgogICAgaWYgKCF0b2tlbikgewogICAgICByZXR1cm47CiAgICB9CgogICAgdGhpcy5fdXBsb2FkR2F0ZXdheSA9IG5ldyBDbG91ZFNlcnZpY2VzVXBsb2FkQWRhcHRlci5fVXBsb2FkR2F0ZXdheSh0b2tlbiwgdXBsb2FkVXJsKTsKCiAgICBlZGl0b3IucGx1Z2lucy5nZXQoRmlsZVJlcG9zaXRvcnkpLmNyZWF0ZVVwbG9hZEFkYXB0ZXIgPSBsb2FkZXIgPT4gewogICAgICByZXR1cm4gbmV3IEFkYXB0ZXIodGhpcy5fdXBsb2FkR2F0ZXdheSwgbG9hZGVyKTsKICAgIH07CiAgfQoKfQovKioKICogQHByaXZhdGUKICovCgpjbGFzcyBBZGFwdGVyIHsKICBjb25zdHJ1Y3Rvcih1cGxvYWRHYXRld2F5LCBsb2FkZXIpIHsKICAgIHRoaXMudXBsb2FkR2F0ZXdheSA9IHVwbG9hZEdhdGV3YXk7CiAgICB0aGlzLmxvYWRlciA9IGxvYWRlcjsKICB9CgogIHVwbG9hZCgpIHsKICAgIHJldHVybiB0aGlzLmxvYWRlci5maWxlLnRoZW4oZmlsZSA9PiB7CiAgICAgIHRoaXMuZmlsZVVwbG9hZGVyID0gdGhpcy51cGxvYWRHYXRld2F5LnVwbG9hZChmaWxlKTsKICAgICAgdGhpcy5maWxlVXBsb2FkZXIub24oJ3Byb2dyZXNzJywgKGV2dCwgZGF0YSkgPT4gewogICAgICAgIHRoaXMubG9hZGVyLnVwbG9hZFRvdGFsID0gZGF0YS50b3RhbDsKICAgICAgICB0aGlzLmxvYWRlci51cGxvYWRlZCA9IGRhdGEudXBsb2FkZWQ7CiAgICAgIH0pOwogICAgICByZXR1cm4gdGhpcy5maWxlVXBsb2FkZXIuc2VuZCgpOwogICAgfSk7CiAgfQoKICBhYm9ydCgpIHsKICAgIHRoaXMuZmlsZVVwbG9hZGVyLmFib3J0KCk7CiAgfQoKfSAvLyBTdG9yZSB0aGUgQVBJIGluIHN0YXRpYyBwcm9wZXJ0eSB0byBlYXNpbHkgb3ZlcndyaXRlIGl0IGluIHRlc3RzLgovLyBUb28gYmFkIGRlcGVuZGVuY3kgaW5qZWN0aW9uIGRvZXMgbm90IHdvcmsgaW4gV2VicGFjayArIEVTIDYgKGNvbnN0KSArIEJhYmVsLgoKCkNsb3VkU2VydmljZXNVcGxvYWRBZGFwdGVyLl9VcGxvYWRHYXRld2F5ID0gVXBsb2FkR2F0ZXdheTs="},{"version":3,"sources":["/Users/antonyching/Desktop/project/new-builder-demo/node_modules/@ckeditor/ckeditor5-easy-image/src/cloudservicesuploadadapter.js"],"names":["Plugin","FileRepository","UploadGateway","CloudServices","CloudServicesUploadAdapter","requires","init","editor","cloudServices","plugins","get","token","uploadUrl","_uploadGateway","_UploadGateway","createUploadAdapter","loader","Adapter","constructor","uploadGateway","upload","file","then","fileUploader","on","evt","data","uploadTotal","total","uploaded","send","abort"],"mappings":"AAAA;;;;;AAKA;;;AAIA,OAAOA,MAAP,MAAmB,qCAAnB;AACA,OAAOC,cAAP,MAA2B,+CAA3B;AACA,OAAOC,aAAP,MAA0B,wEAA1B;AACA,OAAOC,aAAP,MAA0B,sDAA1B;AAEA;;;;;;;;;;;AAUA,eAAe,MAAMC,0BAAN,SAAyCJ,MAAzC,CAAgD;AAC9D;;;AAGA,aAAWK,QAAX,GAAsB;AACrB,WAAO,CAAEJ,cAAF,EAAkBE,aAAlB,CAAP;AACA;AAED;;;;;AAGAG,EAAAA,IAAI,GAAG;AACN,UAAMC,MAAM,GAAG,KAAKA,MAApB;AAEA,UAAMC,aAAa,GAAGD,MAAM,CAACE,OAAP,CAAeC,GAAf,CAAoBP,aAApB,CAAtB;AAEA,UAAMQ,KAAK,GAAGH,aAAa,CAACG,KAA5B;AACA,UAAMC,SAAS,GAAGJ,aAAa,CAACI,SAAhC;;AAEA,QAAK,CAACD,KAAN,EAAc;AACb;AACA;;AAED,SAAKE,cAAL,GAAsB,IAAIT,0BAA0B,CAACU,cAA/B,CAA+CH,KAA/C,EAAsDC,SAAtD,CAAtB;;AAEAL,IAAAA,MAAM,CAACE,OAAP,CAAeC,GAAf,CAAoBT,cAApB,EAAqCc,mBAArC,GAA2DC,MAAM,IAAI;AACpE,aAAO,IAAIC,OAAJ,CAAa,KAAKJ,cAAlB,EAAkCG,MAAlC,CAAP;AACA,KAFD;AAGA;;AA5B6D;AA+B/D;;;;AAGA,MAAMC,OAAN,CAAc;AACbC,EAAAA,WAAW,CAAEC,aAAF,EAAiBH,MAAjB,EAA0B;AACpC,SAAKG,aAAL,GAAqBA,aAArB;AAEA,SAAKH,MAAL,GAAcA,MAAd;AACA;;AAEDI,EAAAA,MAAM,GAAG;AACR,WAAO,KAAKJ,MAAL,CAAYK,IAAZ,CAAiBC,IAAjB,CAAuBD,IAAI,IAAI;AACrC,WAAKE,YAAL,GAAoB,KAAKJ,aAAL,CAAmBC,MAAnB,CAA2BC,IAA3B,CAApB;AAEA,WAAKE,YAAL,CAAkBC,EAAlB,CAAsB,UAAtB,EAAkC,CAAEC,GAAF,EAAOC,IAAP,KAAiB;AAClD,aAAKV,MAAL,CAAYW,WAAZ,GAA0BD,IAAI,CAACE,KAA/B;AACA,aAAKZ,MAAL,CAAYa,QAAZ,GAAuBH,IAAI,CAACG,QAA5B;AACA,OAHD;AAKA,aAAO,KAAKN,YAAL,CAAkBO,IAAlB,EAAP;AACA,KATM,CAAP;AAUA;;AAEDC,EAAAA,KAAK,GAAG;AACP,SAAKR,YAAL,CAAkBQ,KAAlB;AACA;;AAtBY,C,CAyBd;AACA;;;AACA3B,0BAA0B,CAACU,cAA3B,GAA4CZ,aAA5C","sourcesContent":["/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n* @module easy-image/cloudservicesuploadadapter\n*/\n\nimport Plugin from '@ckeditor/ckeditor5-core/src/plugin';\nimport FileRepository from '@ckeditor/ckeditor5-upload/src/filerepository';\nimport UploadGateway from '@ckeditor/ckeditor-cloud-services-core/src/uploadgateway/uploadgateway';\nimport CloudServices from '@ckeditor/ckeditor5-cloud-services/src/cloudservices';\n\n/**\n * A plugin that enables upload to [CKEditor Cloud Services](https://ckeditor.com/ckeditor-cloud-services/).\n *\n * It is mainly used by the {@link module:easy-image/easyimage~EasyImage} feature.\n *\n * After enabling this adapter you need to configure the CKEditor Cloud Services integration through\n * {@link module:cloud-services/cloudservices~CloudServicesConfig `config.cloudServices`}.\n *\n * @extends module:core/plugin~Plugin\n */\nexport default class CloudServicesUploadAdapter extends Plugin {\n\t/**\n\t * @inheritDoc\n\t */\n\tstatic get requires() {\n\t\treturn [ FileRepository, CloudServices ];\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tinit() {\n\t\tconst editor = this.editor;\n\n\t\tconst cloudServices = editor.plugins.get( CloudServices );\n\n\t\tconst token = cloudServices.token;\n\t\tconst uploadUrl = cloudServices.uploadUrl;\n\n\t\tif ( !token ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._uploadGateway = new CloudServicesUploadAdapter._UploadGateway( token, uploadUrl );\n\n\t\teditor.plugins.get( FileRepository ).createUploadAdapter = loader => {\n\t\t\treturn new Adapter( this._uploadGateway, loader );\n\t\t};\n\t}\n}\n\n/**\n * @private\n */\nclass Adapter {\n\tconstructor( uploadGateway, loader ) {\n\t\tthis.uploadGateway = uploadGateway;\n\n\t\tthis.loader = loader;\n\t}\n\n\tupload() {\n\t\treturn this.loader.file.then( file => {\n\t\t\tthis.fileUploader = this.uploadGateway.upload( file );\n\n\t\t\tthis.fileUploader.on( 'progress', ( evt, data ) => {\n\t\t\t\tthis.loader.uploadTotal = data.total;\n\t\t\t\tthis.loader.uploaded = data.uploaded;\n\t\t\t} );\n\n\t\t\treturn this.fileUploader.send();\n\t\t} );\n\t}\n\n\tabort() {\n\t\tthis.fileUploader.abort();\n\t}\n}\n\n// Store the API in static property to easily overwrite it in tests.\n// Too bad dependency injection does not work in Webpack + ES 6 (const) + Babel.\nCloudServicesUploadAdapter._UploadGateway = UploadGateway;\n"]}]}