{"remainingRequest":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/babel-loader/lib/index.js!/Users/antonyching/Desktop/project/new-builder-demo/node_modules/@ckeditor/ckeditor5-image/src/imagetextalternative/imagetextalternativeui.js","dependencies":[{"path":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/@ckeditor/ckeditor5-image/src/imagetextalternative/imagetextalternativeui.js","mtime":499162500000},{"path":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/@ckeditor/ckeditor5-dev-webpack-plugin/lib/translatesourceloader.js","mtime":499162500000},{"path":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:LyoqCiAqIEBsaWNlbnNlIENvcHlyaWdodCAoYykgMjAwMy0yMDE5LCBDS1NvdXJjZSAtIEZyZWRlcmljbyBLbmFiYmVuLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKiBGb3IgbGljZW5zaW5nLCBzZWUgTElDRU5TRS5tZCBvciBodHRwczovL2NrZWRpdG9yLmNvbS9sZWdhbC9ja2VkaXRvci1vc3MtbGljZW5zZQogKi8KCi8qKgogKiBAbW9kdWxlIGltYWdlL2ltYWdldGV4dGFsdGVybmF0aXZlL2ltYWdldGV4dGFsdGVybmF0aXZldWkKICovCmltcG9ydCBQbHVnaW4gZnJvbSAnQGNrZWRpdG9yL2NrZWRpdG9yNS1jb3JlL3NyYy9wbHVnaW4nOwppbXBvcnQgQnV0dG9uVmlldyBmcm9tICdAY2tlZGl0b3IvY2tlZGl0b3I1LXVpL3NyYy9idXR0b24vYnV0dG9udmlldyc7CmltcG9ydCBjbGlja091dHNpZGVIYW5kbGVyIGZyb20gJ0Bja2VkaXRvci9ja2VkaXRvcjUtdWkvc3JjL2JpbmRpbmdzL2NsaWNrb3V0c2lkZWhhbmRsZXInOwppbXBvcnQgVGV4dEFsdGVybmF0aXZlRm9ybVZpZXcgZnJvbSAnLi91aS90ZXh0YWx0ZXJuYXRpdmVmb3Jtdmlldyc7CmltcG9ydCBDb250ZXh0dWFsQmFsbG9vbiBmcm9tICdAY2tlZGl0b3IvY2tlZGl0b3I1LXVpL3NyYy9wYW5lbC9iYWxsb29uL2NvbnRleHR1YWxiYWxsb29uJzsKaW1wb3J0IHRleHRBbHRlcm5hdGl2ZUljb24gZnJvbSAnQGNrZWRpdG9yL2NrZWRpdG9yNS1jb3JlL3RoZW1lL2ljb25zL2xvdy12aXNpb24uc3ZnJzsKaW1wb3J0IHsgcmVwb3NpdGlvbkNvbnRleHR1YWxCYWxsb29uLCBnZXRCYWxsb29uUG9zaXRpb25EYXRhIH0gZnJvbSAnLi4vaW1hZ2UvdWkvdXRpbHMnOwppbXBvcnQgeyBnZXRTZWxlY3RlZEltYWdlV2lkZ2V0IH0gZnJvbSAnLi4vaW1hZ2UvdXRpbHMnOwovKioKICogVGhlIGltYWdlIHRleHQgYWx0ZXJuYXRpdmUgVUkgcGx1Z2luLgogKgogKiBUaGUgcGx1Z2luIHVzZXMgdGhlIHtAbGluayBtb2R1bGU6dWkvcGFuZWwvYmFsbG9vbi9jb250ZXh0dWFsYmFsbG9vbn5Db250ZXh0dWFsQmFsbG9vbn0uCiAqCiAqIEBleHRlbmRzIG1vZHVsZTpjb3JlL3BsdWdpbn5QbHVnaW4KICovCgpleHBvcnQgZGVmYXVsdCBjbGFzcyBJbWFnZVRleHRBbHRlcm5hdGl2ZVVJIGV4dGVuZHMgUGx1Z2luIHsKICAvKioKICAgKiBAaW5oZXJpdERvYwogICAqLwogIHN0YXRpYyBnZXQgcmVxdWlyZXMoKSB7CiAgICByZXR1cm4gW0NvbnRleHR1YWxCYWxsb29uXTsKICB9CiAgLyoqCiAgICogQGluaGVyaXREb2MKICAgKi8KCgogIHN0YXRpYyBnZXQgcGx1Z2luTmFtZSgpIHsKICAgIHJldHVybiAnSW1hZ2VUZXh0QWx0ZXJuYXRpdmVVSSc7CiAgfQogIC8qKgogICAqIEBpbmhlcml0RG9jCiAgICovCgoKICBpbml0KCkgewogICAgdGhpcy5fY3JlYXRlQnV0dG9uKCk7CgogICAgdGhpcy5fY3JlYXRlRm9ybSgpOwogIH0KICAvKioKICAgKiBAaW5oZXJpdERvYwogICAqLwoKCiAgZGVzdHJveSgpIHsKICAgIHN1cGVyLmRlc3Ryb3koKTsgLy8gRGVzdHJveSBjcmVhdGVkIFVJIGNvbXBvbmVudHMgYXMgdGhleSBhcmUgbm90IGF1dG9tYXRpY2FsbHkgZGVzdHJveWVkIChzZWUgY2tlZGl0b3I1IzEzNDEpLgoKICAgIHRoaXMuX2Zvcm0uZGVzdHJveSgpOwogIH0KICAvKioKICAgKiBDcmVhdGVzIGEgYnV0dG9uIHNob3dpbmcgdGhlIGJhbGxvb24gcGFuZWwgZm9yIGNoYW5naW5nIHRoZSBpbWFnZSB0ZXh0IGFsdGVybmF0aXZlIGFuZAogICAqIHJlZ2lzdGVycyBpdCBpbiB0aGUgZWRpdG9yIHtAbGluayBtb2R1bGU6dWkvY29tcG9uZW50ZmFjdG9yeX5Db21wb25lbnRGYWN0b3J5IENvbXBvbmVudEZhY3Rvcnl9LgogICAqCiAgICogQHByaXZhdGUKICAgKi8KCgogIF9jcmVhdGVCdXR0b24oKSB7CiAgICBjb25zdCBlZGl0b3IgPSB0aGlzLmVkaXRvcjsKICAgIGNvbnN0IHQgPSBlZGl0b3IudDsKICAgIGVkaXRvci51aS5jb21wb25lbnRGYWN0b3J5LmFkZCgnaW1hZ2VUZXh0QWx0ZXJuYXRpdmUnLCBsb2NhbGUgPT4gewogICAgICBjb25zdCBjb21tYW5kID0gZWRpdG9yLmNvbW1hbmRzLmdldCgnaW1hZ2VUZXh0QWx0ZXJuYXRpdmUnKTsKICAgICAgY29uc3QgdmlldyA9IG5ldyBCdXR0b25WaWV3KGxvY2FsZSk7CiAgICAgIHZpZXcuc2V0KHsKICAgICAgICBsYWJlbDogdCgnQ2hhbmdlIGltYWdlIHRleHQgYWx0ZXJuYXRpdmUnKSwKICAgICAgICBpY29uOiB0ZXh0QWx0ZXJuYXRpdmVJY29uLAogICAgICAgIHRvb2x0aXA6IHRydWUKICAgICAgfSk7CiAgICAgIHZpZXcuYmluZCgnaXNFbmFibGVkJykudG8oY29tbWFuZCwgJ2lzRW5hYmxlZCcpOwogICAgICB0aGlzLmxpc3RlblRvKHZpZXcsICdleGVjdXRlJywgKCkgPT4gdGhpcy5fc2hvd0Zvcm0oKSk7CiAgICAgIHJldHVybiB2aWV3OwogICAgfSk7CiAgfQogIC8qKgogICAqIENyZWF0ZXMgdGhlIHtAbGluayBtb2R1bGU6aW1hZ2UvaW1hZ2V0ZXh0YWx0ZXJuYXRpdmUvdWkvdGV4dGFsdGVybmF0aXZlZm9ybXZpZXd+VGV4dEFsdGVybmF0aXZlRm9ybVZpZXd9CiAgICogZm9ybS4KICAgKgogICAqIEBwcml2YXRlCiAgICovCgoKICBfY3JlYXRlRm9ybSgpIHsKICAgIGNvbnN0IGVkaXRvciA9IHRoaXMuZWRpdG9yOwogICAgY29uc3QgdmlldyA9IGVkaXRvci5lZGl0aW5nLnZpZXc7CiAgICBjb25zdCB2aWV3RG9jdW1lbnQgPSB2aWV3LmRvY3VtZW50OwogICAgLyoqCiAgICAgKiBUaGUgY29udGV4dHVhbCBiYWxsb29uIHBsdWdpbiBpbnN0YW5jZS4KICAgICAqCiAgICAgKiBAcHJpdmF0ZQogICAgICogQG1lbWJlciB7bW9kdWxlOnVpL3BhbmVsL2JhbGxvb24vY29udGV4dHVhbGJhbGxvb25+Q29udGV4dHVhbEJhbGxvb259CiAgICAgKi8KCiAgICB0aGlzLl9iYWxsb29uID0gdGhpcy5lZGl0b3IucGx1Z2lucy5nZXQoJ0NvbnRleHR1YWxCYWxsb29uJyk7CiAgICAvKioKICAgICAqIEEgZm9ybSBjb250YWluaW5nIGEgdGV4dGFyZWEgYW5kIGJ1dHRvbnMsIHVzZWQgdG8gY2hhbmdlIHRoZSBgYWx0YCB0ZXh0IHZhbHVlLgogICAgICoKICAgICAqIEBtZW1iZXIge21vZHVsZTppbWFnZS9pbWFnZXRleHRhbHRlcm5hdGl2ZS91aS90ZXh0YWx0ZXJuYXRpdmVmb3Jtdmlld35UZXh0QWx0ZXJuYXRpdmVGb3JtVmlld30KICAgICAqLwoKICAgIHRoaXMuX2Zvcm0gPSBuZXcgVGV4dEFsdGVybmF0aXZlRm9ybVZpZXcoZWRpdG9yLmxvY2FsZSk7IC8vIFJlbmRlciB0aGUgZm9ybSBzbyBpdHMgI2VsZW1lbnQgaXMgYXZhaWxhYmxlIGZvciBjbGlja091dHNpZGVIYW5kbGVyLgoKICAgIHRoaXMuX2Zvcm0ucmVuZGVyKCk7CgogICAgdGhpcy5saXN0ZW5Ubyh0aGlzLl9mb3JtLCAnc3VibWl0JywgKCkgPT4gewogICAgICBlZGl0b3IuZXhlY3V0ZSgnaW1hZ2VUZXh0QWx0ZXJuYXRpdmUnLCB7CiAgICAgICAgbmV3VmFsdWU6IHRoaXMuX2Zvcm0ubGFiZWxlZElucHV0LmlucHV0Vmlldy5lbGVtZW50LnZhbHVlCiAgICAgIH0pOwoKICAgICAgdGhpcy5faGlkZUZvcm0odHJ1ZSk7CiAgICB9KTsKICAgIHRoaXMubGlzdGVuVG8odGhpcy5fZm9ybSwgJ2NhbmNlbCcsICgpID0+IHsKICAgICAgdGhpcy5faGlkZUZvcm0odHJ1ZSk7CiAgICB9KTsgLy8gQ2xvc2UgdGhlIGZvcm0gb24gRXNjIGtleSBwcmVzcy4KCiAgICB0aGlzLl9mb3JtLmtleXN0cm9rZXMuc2V0KCdFc2MnLCAoZGF0YSwgY2FuY2VsKSA9PiB7CiAgICAgIHRoaXMuX2hpZGVGb3JtKHRydWUpOwoKICAgICAgY2FuY2VsKCk7CiAgICB9KTsgLy8gUmVwb3NpdGlvbiB0aGUgYmFsbG9vbiBvciBoaWRlIHRoZSBmb3JtIGlmIGFuIGltYWdlIHdpZGdldCBpcyBubyBsb25nZXIgc2VsZWN0ZWQuCgoKICAgIHRoaXMubGlzdGVuVG8oZWRpdG9yLnVpLCAndXBkYXRlJywgKCkgPT4gewogICAgICBpZiAoIWdldFNlbGVjdGVkSW1hZ2VXaWRnZXQodmlld0RvY3VtZW50LnNlbGVjdGlvbikpIHsKICAgICAgICB0aGlzLl9oaWRlRm9ybSh0cnVlKTsKICAgICAgfSBlbHNlIGlmICh0aGlzLl9pc1Zpc2libGUpIHsKICAgICAgICByZXBvc2l0aW9uQ29udGV4dHVhbEJhbGxvb24oZWRpdG9yKTsKICAgICAgfQogICAgfSk7IC8vIENsb3NlIG9uIGNsaWNrIG91dHNpZGUgb2YgYmFsbG9vbiBwYW5lbCBlbGVtZW50LgoKICAgIGNsaWNrT3V0c2lkZUhhbmRsZXIoewogICAgICBlbWl0dGVyOiB0aGlzLl9mb3JtLAogICAgICBhY3RpdmF0b3I6ICgpID0+IHRoaXMuX2lzVmlzaWJsZSwKICAgICAgY29udGV4dEVsZW1lbnRzOiBbdGhpcy5fYmFsbG9vbi52aWV3LmVsZW1lbnRdLAogICAgICBjYWxsYmFjazogKCkgPT4gdGhpcy5faGlkZUZvcm0oKQogICAgfSk7CiAgfQogIC8qKgogICAqIFNob3dzIHRoZSB7QGxpbmsgI19mb3JtfSBpbiB0aGUge0BsaW5rICNfYmFsbG9vbn0uCiAgICoKICAgKiBAcHJpdmF0ZQogICAqLwoKCiAgX3Nob3dGb3JtKCkgewogICAgaWYgKHRoaXMuX2lzVmlzaWJsZSkgewogICAgICByZXR1cm47CiAgICB9CgogICAgY29uc3QgZWRpdG9yID0gdGhpcy5lZGl0b3I7CiAgICBjb25zdCBjb21tYW5kID0gZWRpdG9yLmNvbW1hbmRzLmdldCgnaW1hZ2VUZXh0QWx0ZXJuYXRpdmUnKTsKICAgIGNvbnN0IGxhYmVsZWRJbnB1dCA9IHRoaXMuX2Zvcm0ubGFiZWxlZElucHV0OwoKICAgIGlmICghdGhpcy5faXNJbkJhbGxvb24pIHsKICAgICAgdGhpcy5fYmFsbG9vbi5hZGQoewogICAgICAgIHZpZXc6IHRoaXMuX2Zvcm0sCiAgICAgICAgcG9zaXRpb246IGdldEJhbGxvb25Qb3NpdGlvbkRhdGEoZWRpdG9yKQogICAgICB9KTsKICAgIH0gLy8gTWFrZSBzdXJlIHRoYXQgZWFjaCB0aW1lIHRoZSBwYW5lbCBzaG93cyB1cCwgdGhlIGZpZWxkIHJlbWFpbnMgaW4gc3luYyB3aXRoIHRoZSB2YWx1ZSBvZgogICAgLy8gdGhlIGNvbW1hbmQuIElmIHRoZSB1c2VyIHR5cGVkIGluIHRoZSBpbnB1dCwgdGhlbiBjYW5jZWxlZCB0aGUgYmFsbG9vbiAoYGxhYmVsZWRJbnB1dCN2YWx1ZWAKICAgIC8vIHN0YXlzIHVuYWx0ZXJlZCkgYW5kIHJlLW9wZW5lZCBpdCB3aXRob3V0IGNoYW5naW5nIHRoZSB2YWx1ZSBvZiB0aGUgY29tbWFuZCwgdGhleSB3b3VsZCBzZWUgdGhlCiAgICAvLyBvbGQgdmFsdWUgaW5zdGVhZCBvZiB0aGUgYWN0dWFsIHZhbHVlIG9mIHRoZSBjb21tYW5kLgogICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2NrZWRpdG9yL2NrZWRpdG9yNS1pbWFnZS9pc3N1ZXMvMTE0CgoKICAgIGxhYmVsZWRJbnB1dC52YWx1ZSA9IGxhYmVsZWRJbnB1dC5pbnB1dFZpZXcuZWxlbWVudC52YWx1ZSA9IGNvbW1hbmQudmFsdWUgfHwgJyc7CgogICAgdGhpcy5fZm9ybS5sYWJlbGVkSW5wdXQuc2VsZWN0KCk7CiAgfQogIC8qKgogICAqIFJlbW92ZXMgdGhlIHtAbGluayAjX2Zvcm19IGZyb20gdGhlIHtAbGluayAjX2JhbGxvb259LgogICAqCiAgICogQHBhcmFtIHtCb29sZWFufSBbZm9jdXNFZGl0YWJsZT1mYWxzZV0gQ29udHJvbHMgd2hldGhlciB0aGUgZWRpdGluZyB2aWV3IGlzIGZvY3VzZWQgYWZ0ZXJ3YXJkcy4KICAgKiBAcHJpdmF0ZQogICAqLwoKCiAgX2hpZGVGb3JtKGZvY3VzRWRpdGFibGUpIHsKICAgIGlmICghdGhpcy5faXNJbkJhbGxvb24pIHsKICAgICAgcmV0dXJuOwogICAgfSAvLyBCbHVyIHRoZSBpbnB1dCBlbGVtZW50IGJlZm9yZSByZW1vdmluZyBpdCBmcm9tIERPTSB0byBwcmV2ZW50IGlzc3VlcyBpbiBzb21lIGJyb3dzZXJzLgogICAgLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9ja2VkaXRvci9ja2VkaXRvcjUvaXNzdWVzLzE1MDEuCgoKICAgIGlmICh0aGlzLl9mb3JtLmZvY3VzVHJhY2tlci5pc0ZvY3VzZWQpIHsKICAgICAgdGhpcy5fZm9ybS5zYXZlQnV0dG9uVmlldy5mb2N1cygpOwogICAgfQoKICAgIHRoaXMuX2JhbGxvb24ucmVtb3ZlKHRoaXMuX2Zvcm0pOwoKICAgIGlmIChmb2N1c0VkaXRhYmxlKSB7CiAgICAgIHRoaXMuZWRpdG9yLmVkaXRpbmcudmlldy5mb2N1cygpOwogICAgfQogIH0KICAvKioKICAgKiBSZXR1cm5zIGB0cnVlYCB3aGVuIHRoZSB7QGxpbmsgI19mb3JtfSBpcyB0aGUgdmlzaWJsZSB2aWV3IGluIHRoZSB7QGxpbmsgI19iYWxsb29ufS4KICAgKgogICAqIEBwcml2YXRlCiAgICogQHR5cGUge0Jvb2xlYW59CiAgICovCgoKICBnZXQgX2lzVmlzaWJsZSgpIHsKICAgIHJldHVybiB0aGlzLl9iYWxsb29uLnZpc2libGVWaWV3ID09PSB0aGlzLl9mb3JtOwogIH0KICAvKioKICAgKiBSZXR1cm5zIGB0cnVlYCB3aGVuIHRoZSB7QGxpbmsgI19mb3JtfSBpcyBpbiB0aGUge0BsaW5rICNfYmFsbG9vbn0uCiAgICoKICAgKiBAcHJpdmF0ZQogICAqIEB0eXBlIHtCb29sZWFufQogICAqLwoKCiAgZ2V0IF9pc0luQmFsbG9vbigpIHsKICAgIHJldHVybiB0aGlzLl9iYWxsb29uLmhhc1ZpZXcodGhpcy5fZm9ybSk7CiAgfQoKfQ=="},{"version":3,"sources":["/Users/antonyching/Desktop/project/new-builder-demo/node_modules/@ckeditor/ckeditor5-image/src/imagetextalternative/imagetextalternativeui.js"],"names":["Plugin","ButtonView","clickOutsideHandler","TextAlternativeFormView","ContextualBalloon","textAlternativeIcon","repositionContextualBalloon","getBalloonPositionData","getSelectedImageWidget","ImageTextAlternativeUI","requires","pluginName","init","_createButton","_createForm","destroy","_form","editor","t","ui","componentFactory","add","locale","command","commands","get","view","set","label","icon","tooltip","bind","to","listenTo","_showForm","editing","viewDocument","document","_balloon","plugins","render","execute","newValue","labeledInput","inputView","element","value","_hideForm","keystrokes","data","cancel","selection","_isVisible","emitter","activator","contextElements","callback","_isInBalloon","position","select","focusEditable","focusTracker","isFocused","saveButtonView","focus","remove","visibleView","hasView"],"mappings":"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","sourcesContent":["/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module image/imagetextalternative/imagetextalternativeui\n */\n\nimport Plugin from '@ckeditor/ckeditor5-core/src/plugin';\nimport ButtonView from '@ckeditor/ckeditor5-ui/src/button/buttonview';\nimport clickOutsideHandler from '@ckeditor/ckeditor5-ui/src/bindings/clickoutsidehandler';\nimport TextAlternativeFormView from './ui/textalternativeformview';\nimport ContextualBalloon from '@ckeditor/ckeditor5-ui/src/panel/balloon/contextualballoon';\nimport textAlternativeIcon from '@ckeditor/ckeditor5-core/theme/icons/low-vision.svg';\nimport { repositionContextualBalloon, getBalloonPositionData } from '../image/ui/utils';\nimport { getSelectedImageWidget } from '../image/utils';\n\n/**\n * The image text alternative UI plugin.\n *\n * The plugin uses the {@link module:ui/panel/balloon/contextualballoon~ContextualBalloon}.\n *\n * @extends module:core/plugin~Plugin\n */\nexport default class ImageTextAlternativeUI extends Plugin {\n\t/**\n\t * @inheritDoc\n\t */\n\tstatic get requires() {\n\t\treturn [ ContextualBalloon ];\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tstatic get pluginName() {\n\t\treturn 'ImageTextAlternativeUI';\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tinit() {\n\t\tthis._createButton();\n\t\tthis._createForm();\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tdestroy() {\n\t\tsuper.destroy();\n\n\t\t// Destroy created UI components as they are not automatically destroyed (see ckeditor5#1341).\n\t\tthis._form.destroy();\n\t}\n\n\t/**\n\t * Creates a button showing the balloon panel for changing the image text alternative and\n\t * registers it in the editor {@link module:ui/componentfactory~ComponentFactory ComponentFactory}.\n\t *\n\t * @private\n\t */\n\t_createButton() {\n\t\tconst editor = this.editor;\n\t\tconst t = editor.t;\n\n\t\teditor.ui.componentFactory.add( 'imageTextAlternative', locale => {\n\t\t\tconst command = editor.commands.get( 'imageTextAlternative' );\n\t\t\tconst view = new ButtonView( locale );\n\n\t\t\tview.set( {\n\t\t\t\tlabel: t( 'Change image text alternative' ),\n\t\t\t\ticon: textAlternativeIcon,\n\t\t\t\ttooltip: true\n\t\t\t} );\n\n\t\t\tview.bind( 'isEnabled' ).to( command, 'isEnabled' );\n\n\t\t\tthis.listenTo( view, 'execute', () => this._showForm() );\n\n\t\t\treturn view;\n\t\t} );\n\t}\n\n\t/**\n\t * Creates the {@link module:image/imagetextalternative/ui/textalternativeformview~TextAlternativeFormView}\n\t * form.\n\t *\n\t * @private\n\t */\n\t_createForm() {\n\t\tconst editor = this.editor;\n\t\tconst view = editor.editing.view;\n\t\tconst viewDocument = view.document;\n\n\t\t/**\n\t\t * The contextual balloon plugin instance.\n\t\t *\n\t\t * @private\n\t\t * @member {module:ui/panel/balloon/contextualballoon~ContextualBalloon}\n\t\t */\n\t\tthis._balloon = this.editor.plugins.get( 'ContextualBalloon' );\n\n\t\t/**\n\t\t * A form containing a textarea and buttons, used to change the `alt` text value.\n\t\t *\n\t\t * @member {module:image/imagetextalternative/ui/textalternativeformview~TextAlternativeFormView}\n\t\t */\n\t\tthis._form = new TextAlternativeFormView( editor.locale );\n\n\t\t// Render the form so its #element is available for clickOutsideHandler.\n\t\tthis._form.render();\n\n\t\tthis.listenTo( this._form, 'submit', () => {\n\t\t\teditor.execute( 'imageTextAlternative', {\n\t\t\t\tnewValue: this._form.labeledInput.inputView.element.value\n\t\t\t} );\n\n\t\t\tthis._hideForm( true );\n\t\t} );\n\n\t\tthis.listenTo( this._form, 'cancel', () => {\n\t\t\tthis._hideForm( true );\n\t\t} );\n\n\t\t// Close the form on Esc key press.\n\t\tthis._form.keystrokes.set( 'Esc', ( data, cancel ) => {\n\t\t\tthis._hideForm( true );\n\t\t\tcancel();\n\t\t} );\n\n\t\t// Reposition the balloon or hide the form if an image widget is no longer selected.\n\t\tthis.listenTo( editor.ui, 'update', () => {\n\t\t\tif ( !getSelectedImageWidget( viewDocument.selection ) ) {\n\t\t\t\tthis._hideForm( true );\n\t\t\t} else if ( this._isVisible ) {\n\t\t\t\trepositionContextualBalloon( editor );\n\t\t\t}\n\t\t} );\n\n\t\t// Close on click outside of balloon panel element.\n\t\tclickOutsideHandler( {\n\t\t\temitter: this._form,\n\t\t\tactivator: () => this._isVisible,\n\t\t\tcontextElements: [ this._balloon.view.element ],\n\t\t\tcallback: () => this._hideForm()\n\t\t} );\n\t}\n\n\t/**\n\t * Shows the {@link #_form} in the {@link #_balloon}.\n\t *\n\t * @private\n\t */\n\t_showForm() {\n\t\tif ( this._isVisible ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst editor = this.editor;\n\t\tconst command = editor.commands.get( 'imageTextAlternative' );\n\t\tconst labeledInput = this._form.labeledInput;\n\n\t\tif ( !this._isInBalloon ) {\n\t\t\tthis._balloon.add( {\n\t\t\t\tview: this._form,\n\t\t\t\tposition: getBalloonPositionData( editor )\n\t\t\t} );\n\t\t}\n\n\t\t// Make sure that each time the panel shows up, the field remains in sync with the value of\n\t\t// the command. If the user typed in the input, then canceled the balloon (`labeledInput#value`\n\t\t// stays unaltered) and re-opened it without changing the value of the command, they would see the\n\t\t// old value instead of the actual value of the command.\n\t\t// https://github.com/ckeditor/ckeditor5-image/issues/114\n\t\tlabeledInput.value = labeledInput.inputView.element.value = command.value || '';\n\n\t\tthis._form.labeledInput.select();\n\t}\n\n\t/**\n\t * Removes the {@link #_form} from the {@link #_balloon}.\n\t *\n\t * @param {Boolean} [focusEditable=false] Controls whether the editing view is focused afterwards.\n\t * @private\n\t */\n\t_hideForm( focusEditable ) {\n\t\tif ( !this._isInBalloon ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Blur the input element before removing it from DOM to prevent issues in some browsers.\n\t\t// See https://github.com/ckeditor/ckeditor5/issues/1501.\n\t\tif ( this._form.focusTracker.isFocused ) {\n\t\t\tthis._form.saveButtonView.focus();\n\t\t}\n\n\t\tthis._balloon.remove( this._form );\n\n\t\tif ( focusEditable ) {\n\t\t\tthis.editor.editing.view.focus();\n\t\t}\n\t}\n\n\t/**\n\t * Returns `true` when the {@link #_form} is the visible view in the {@link #_balloon}.\n\t *\n\t * @private\n\t * @type {Boolean}\n\t */\n\tget _isVisible() {\n\t\treturn this._balloon.visibleView === this._form;\n\t}\n\n\t/**\n\t * Returns `true` when the {@link #_form} is in the {@link #_balloon}.\n\t *\n\t * @private\n\t * @type {Boolean}\n\t */\n\tget _isInBalloon() {\n\t\treturn this._balloon.hasView( this._form );\n\t}\n}\n"]}]}