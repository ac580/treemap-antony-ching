{"remainingRequest":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/babel-loader/lib/index.js!/Users/antonyching/Desktop/project/new-builder-demo/node_modules/@ckeditor/ckeditor5-table/src/converters/upcasttable.js","dependencies":[{"path":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/@ckeditor/ckeditor5-table/src/converters/upcasttable.js","mtime":499162500000},{"path":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/@ckeditor/ckeditor5-dev-webpack-plugin/lib/translatesourceloader.js","mtime":499162500000},{"path":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:LyoqCiAqIEBsaWNlbnNlIENvcHlyaWdodCAoYykgMjAwMy0yMDE5LCBDS1NvdXJjZSAtIEZyZWRlcmljbyBLbmFiYmVuLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKiBGb3IgbGljZW5zaW5nLCBzZWUgTElDRU5TRS5tZCBvciBodHRwczovL2NrZWRpdG9yLmNvbS9sZWdhbC9ja2VkaXRvci1vc3MtbGljZW5zZQogKi8KCi8qKgogKiBAbW9kdWxlIHRhYmxlL2NvbnZlcnRlcnMvdXBjYXN0dGFibGUKICovCmltcG9ydCB7IGNyZWF0ZUVtcHR5VGFibGVDZWxsIH0gZnJvbSAnLi4vY29tbWFuZHMvdXRpbHMnOwovKioKICogVmlldyB0YWJsZSBlbGVtZW50IHRvIG1vZGVsIHRhYmxlIGVsZW1lbnQgY29udmVyc2lvbiBoZWxwZXIuCiAqCiAqIFRoaXMgY29udmVyc2lvbiBoZWxwZXIgY29udmVydHMgdGhlIHRhYmxlIGVsZW1lbnQgYXMgd2VsbCBhcyB0YWJsZSByb3dzLgogKgogKiBAcmV0dXJucyB7RnVuY3Rpb259IENvbnZlcnNpb24gaGVscGVyLgogKi8KCmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHVwY2FzdFRhYmxlKCkgewogIHJldHVybiBkaXNwYXRjaGVyID0+IHsKICAgIGRpc3BhdGNoZXIub24oJ2VsZW1lbnQ6dGFibGUnLCAoZXZ0LCBkYXRhLCBjb252ZXJzaW9uQXBpKSA9PiB7CiAgICAgIGNvbnN0IHZpZXdUYWJsZSA9IGRhdGEudmlld0l0ZW07IC8vIFdoZW4gZWxlbWVudCB3YXMgYWxyZWFkeSBjb25zdW1lZCB0aGVuIHNraXAgaXQuCgogICAgICBpZiAoIWNvbnZlcnNpb25BcGkuY29uc3VtYWJsZS50ZXN0KHZpZXdUYWJsZSwgewogICAgICAgIG5hbWU6IHRydWUKICAgICAgfSkpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGNvbnN0IHsKICAgICAgICByb3dzLAogICAgICAgIGhlYWRpbmdSb3dzLAogICAgICAgIGhlYWRpbmdDb2x1bW5zCiAgICAgIH0gPSBzY2FuVGFibGUodmlld1RhYmxlKTsgLy8gT25seSBzZXQgYXR0cmlidXRlcyBpZiB2YWx1ZXMgaXMgZ3JlYXRlciB0aGVuIDAuCgogICAgICBjb25zdCBhdHRyaWJ1dGVzID0ge307CgogICAgICBpZiAoaGVhZGluZ0NvbHVtbnMpIHsKICAgICAgICBhdHRyaWJ1dGVzLmhlYWRpbmdDb2x1bW5zID0gaGVhZGluZ0NvbHVtbnM7CiAgICAgIH0KCiAgICAgIGlmIChoZWFkaW5nUm93cykgewogICAgICAgIGF0dHJpYnV0ZXMuaGVhZGluZ1Jvd3MgPSBoZWFkaW5nUm93czsKICAgICAgfQoKICAgICAgY29uc3QgdGFibGUgPSBjb252ZXJzaW9uQXBpLndyaXRlci5jcmVhdGVFbGVtZW50KCd0YWJsZScsIGF0dHJpYnV0ZXMpOyAvLyBJbnNlcnQgZWxlbWVudCBvbiBhbGxvd2VkIHBvc2l0aW9uLgoKICAgICAgY29uc3Qgc3BsaXRSZXN1bHQgPSBjb252ZXJzaW9uQXBpLnNwbGl0VG9BbGxvd2VkUGFyZW50KHRhYmxlLCBkYXRhLm1vZGVsQ3Vyc29yKTsgLy8gV2hlbiB0aGVyZSBpcyBubyBzcGxpdCByZXN1bHQgaXQgbWVhbnMgdGhhdCB3ZSBjYW4ndCBpbnNlcnQgZWxlbWVudCB0byBtb2RlbCB0cmVlLCBzbyBsZXQncyBza2lwIGl0LgoKICAgICAgaWYgKCFzcGxpdFJlc3VsdCkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgY29udmVyc2lvbkFwaS53cml0ZXIuaW5zZXJ0KHRhYmxlLCBzcGxpdFJlc3VsdC5wb3NpdGlvbik7CiAgICAgIGNvbnZlcnNpb25BcGkuY29uc3VtYWJsZS5jb25zdW1lKHZpZXdUYWJsZSwgewogICAgICAgIG5hbWU6IHRydWUKICAgICAgfSk7CgogICAgICBpZiAocm93cy5sZW5ndGgpIHsKICAgICAgICAvLyBVcGNhc3QgdGFibGUgcm93cyBpbiBwcm9wZXIgb3JkZXIgKGhlYWRpbmcgcm93cyBmaXJzdCkuCiAgICAgICAgcm93cy5mb3JFYWNoKHJvdyA9PiBjb252ZXJzaW9uQXBpLmNvbnZlcnRJdGVtKHJvdywgY29udmVyc2lvbkFwaS53cml0ZXIuY3JlYXRlUG9zaXRpb25BdCh0YWJsZSwgJ2VuZCcpKSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gQ3JlYXRlIG9uZSByb3cgYW5kIG9uZSB0YWJsZSBjZWxsIGZvciBlbXB0eSB0YWJsZS4KICAgICAgICBjb25zdCByb3cgPSBjb252ZXJzaW9uQXBpLndyaXRlci5jcmVhdGVFbGVtZW50KCd0YWJsZVJvdycpOwogICAgICAgIGNvbnZlcnNpb25BcGkud3JpdGVyLmluc2VydChyb3csIGNvbnZlcnNpb25BcGkud3JpdGVyLmNyZWF0ZVBvc2l0aW9uQXQodGFibGUsICdlbmQnKSk7CiAgICAgICAgY3JlYXRlRW1wdHlUYWJsZUNlbGwoY29udmVyc2lvbkFwaS53cml0ZXIsIGNvbnZlcnNpb25BcGkud3JpdGVyLmNyZWF0ZVBvc2l0aW9uQXQocm93LCAnZW5kJykpOwogICAgICB9IC8vIFNldCBjb252ZXJzaW9uIHJlc3VsdCByYW5nZS4KCgogICAgICBkYXRhLm1vZGVsUmFuZ2UgPSBjb252ZXJzaW9uQXBpLndyaXRlci5jcmVhdGVSYW5nZSggLy8gUmFuZ2Ugc2hvdWxkIHN0YXJ0IGJlZm9yZSBpbnNlcnRlZCBlbGVtZW50CiAgICAgIGNvbnZlcnNpb25BcGkud3JpdGVyLmNyZWF0ZVBvc2l0aW9uQmVmb3JlKHRhYmxlKSwgLy8gU2hvdWxkIGVuZCBhZnRlciBidXQgd2UgbmVlZCB0byB0YWtlIGludG8gY29uc2lkZXJhdGlvbiB0aGF0IGNoaWxkcmVuIGNvdWxkIHNwbGl0IG91cgogICAgICAvLyBlbGVtZW50LCBzbyB3ZSBuZWVkIHRvIG1vdmUgcmFuZ2UgYWZ0ZXIgcGFyZW50IG9mIHRoZSBsYXN0IGNvbnZlcnRlZCBjaGlsZC4KICAgICAgLy8gYmVmb3JlOiA8YWxsb3dlZD5bXTwvYWxsb3dlZD4KICAgICAgLy8gYWZ0ZXI6IDxhbGxvd2VkPls8Y29udmVydGVkPjxjaGlsZD48L2NoaWxkPjwvY29udmVydGVkPjxjaGlsZD48L2NoaWxkPjxjb252ZXJ0ZWQ+XTwvY29udmVydGVkPjwvYWxsb3dlZD4KICAgICAgY29udmVyc2lvbkFwaS53cml0ZXIuY3JlYXRlUG9zaXRpb25BZnRlcih0YWJsZSkpOyAvLyBOb3cgd2UgbmVlZCB0byBjaGVjayB3aGVyZSB0aGUgbW9kZWxDdXJzb3Igc2hvdWxkIGJlLgogICAgICAvLyBJZiB3ZSBoYWQgdG8gc3BsaXQgcGFyZW50IHRvIGluc2VydCBvdXIgZWxlbWVudCB0aGVuIHdlIHdhbnQgdG8gY29udGludWUgY29udmVyc2lvbiBpbnNpZGUgc3BsaXQgcGFyZW50LgogICAgICAvLwogICAgICAvLyBiZWZvcmU6IDxhbGxvd2VkPjxub3RBbGxvd2VkPltdPC9ub3RBbGxvd2VkPjwvYWxsb3dlZD4KICAgICAgLy8gYWZ0ZXI6ICA8YWxsb3dlZD48bm90QWxsb3dlZD48L25vdEFsbG93ZWQ+PGNvbnZlcnRlZD48L2NvbnZlcnRlZD48bm90QWxsb3dlZD5bXTwvbm90QWxsb3dlZD48L2FsbG93ZWQ+CgogICAgICBpZiAoc3BsaXRSZXN1bHQuY3Vyc29yUGFyZW50KSB7CiAgICAgICAgZGF0YS5tb2RlbEN1cnNvciA9IGNvbnZlcnNpb25BcGkud3JpdGVyLmNyZWF0ZVBvc2l0aW9uQXQoc3BsaXRSZXN1bHQuY3Vyc29yUGFyZW50LCAwKTsgLy8gT3RoZXJ3aXNlIGp1c3QgY29udGludWUgYWZ0ZXIgaW5zZXJ0ZWQgZWxlbWVudC4KICAgICAgfSBlbHNlIHsKICAgICAgICBkYXRhLm1vZGVsQ3Vyc29yID0gZGF0YS5tb2RlbFJhbmdlLmVuZDsKICAgICAgfQogICAgfSk7CiAgfTsKfQpleHBvcnQgZnVuY3Rpb24gdXBjYXN0VGFibGVDZWxsKGVsZW1lbnROYW1lKSB7CiAgcmV0dXJuIGRpc3BhdGNoZXIgPT4gewogICAgZGlzcGF0Y2hlci5vbihgZWxlbWVudDoke2VsZW1lbnROYW1lfWAsIChldnQsIGRhdGEsIGNvbnZlcnNpb25BcGkpID0+IHsKICAgICAgY29uc3Qgdmlld1RhYmxlQ2VsbCA9IGRhdGEudmlld0l0ZW07IC8vIFdoZW4gZWxlbWVudCB3YXMgYWxyZWFkeSBjb25zdW1lZCB0aGVuIHNraXAgaXQuCgogICAgICBpZiAoIWNvbnZlcnNpb25BcGkuY29uc3VtYWJsZS50ZXN0KHZpZXdUYWJsZUNlbGwsIHsKICAgICAgICBuYW1lOiB0cnVlCiAgICAgIH0pKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBjb25zdCB0YWJsZUNlbGwgPSBjb252ZXJzaW9uQXBpLndyaXRlci5jcmVhdGVFbGVtZW50KCd0YWJsZUNlbGwnKTsgLy8gSW5zZXJ0IGVsZW1lbnQgb24gYWxsb3dlZCBwb3NpdGlvbi4KCiAgICAgIGNvbnN0IHNwbGl0UmVzdWx0ID0gY29udmVyc2lvbkFwaS5zcGxpdFRvQWxsb3dlZFBhcmVudCh0YWJsZUNlbGwsIGRhdGEubW9kZWxDdXJzb3IpOyAvLyBXaGVuIHRoZXJlIGlzIG5vIHNwbGl0IHJlc3VsdCBpdCBtZWFucyB0aGF0IHdlIGNhbid0IGluc2VydCBlbGVtZW50IHRvIG1vZGVsIHRyZWUsIHNvIGxldCdzIHNraXAgaXQuCgogICAgICBpZiAoIXNwbGl0UmVzdWx0KSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBjb252ZXJzaW9uQXBpLndyaXRlci5pbnNlcnQodGFibGVDZWxsLCBzcGxpdFJlc3VsdC5wb3NpdGlvbik7CiAgICAgIGNvbnZlcnNpb25BcGkuY29uc3VtYWJsZS5jb25zdW1lKHZpZXdUYWJsZUNlbGwsIHsKICAgICAgICBuYW1lOiB0cnVlCiAgICAgIH0pOwogICAgICBjb25zdCBtb2RlbEN1cnNvciA9IGNvbnZlcnNpb25BcGkud3JpdGVyLmNyZWF0ZVBvc2l0aW9uQXQodGFibGVDZWxsLCAwKTsKICAgICAgY29udmVyc2lvbkFwaS5jb252ZXJ0Q2hpbGRyZW4odmlld1RhYmxlQ2VsbCwgbW9kZWxDdXJzb3IpOyAvLyBFbnN1cmUgYSBwYXJhZ3JhcGggaW4gdGhlIG1vZGVsIGZvciBlbXB0eSB0YWJsZSBjZWxscy4KCiAgICAgIGlmICghdGFibGVDZWxsLmNoaWxkQ291bnQpIHsKICAgICAgICBjb252ZXJzaW9uQXBpLndyaXRlci5pbnNlcnRFbGVtZW50KCdwYXJhZ3JhcGgnLCBtb2RlbEN1cnNvcik7CiAgICAgIH0gLy8gU2V0IGNvbnZlcnNpb24gcmVzdWx0IHJhbmdlLgoKCiAgICAgIGRhdGEubW9kZWxSYW5nZSA9IGNvbnZlcnNpb25BcGkud3JpdGVyLmNyZWF0ZVJhbmdlKCAvLyBSYW5nZSBzaG91bGQgc3RhcnQgYmVmb3JlIGluc2VydGVkIGVsZW1lbnQKICAgICAgY29udmVyc2lvbkFwaS53cml0ZXIuY3JlYXRlUG9zaXRpb25CZWZvcmUodGFibGVDZWxsKSwgLy8gU2hvdWxkIGVuZCBhZnRlciBidXQgd2UgbmVlZCB0byB0YWtlIGludG8gY29uc2lkZXJhdGlvbiB0aGF0IGNoaWxkcmVuIGNvdWxkIHNwbGl0IG91cgogICAgICAvLyBlbGVtZW50LCBzbyB3ZSBuZWVkIHRvIG1vdmUgcmFuZ2UgYWZ0ZXIgcGFyZW50IG9mIHRoZSBsYXN0IGNvbnZlcnRlZCBjaGlsZC4KICAgICAgLy8gYmVmb3JlOiA8YWxsb3dlZD5bXTwvYWxsb3dlZD4KICAgICAgLy8gYWZ0ZXI6IDxhbGxvd2VkPls8Y29udmVydGVkPjxjaGlsZD48L2NoaWxkPjwvY29udmVydGVkPjxjaGlsZD48L2NoaWxkPjxjb252ZXJ0ZWQ+XTwvY29udmVydGVkPjwvYWxsb3dlZD4KICAgICAgY29udmVyc2lvbkFwaS53cml0ZXIuY3JlYXRlUG9zaXRpb25BZnRlcih0YWJsZUNlbGwpKTsgLy8gQ29udGludWUgYWZ0ZXIgaW5zZXJ0ZWQgZWxlbWVudC4KCiAgICAgIGRhdGEubW9kZWxDdXJzb3IgPSBkYXRhLm1vZGVsUmFuZ2UuZW5kOwogICAgfSk7CiAgfTsKfSAvLyBTY2FucyB0YWJsZSByb3dzIGFuZCBleHRyYWN0cyByZXF1aXJlZCBtZXRhZGF0YSBmcm9tIHRoZSB0YWJsZToKLy8KLy8gaGVhZGluZ1Jvd3MgICAgLSB0aGUgbnVtYmVyIG9mIHJvd3MgdGhhdCBnb2VzIGFzIHRhYmxlIGhlYWRlci4KLy8gaGVhZGluZ0NvbHVtbnMgLSBtYXggbnVtYmVyIG9mIHJvdyBoZWFkaW5ncy4KLy8gcm93cyAgICAgICAgICAgLSBzb3J0ZWQgYDx0cj5gcyBhcyB0aGV5IHNob3VsZCBnbyBpbnRvIHRoZSBtb2RlbCAtIGllLiBpZiBgPHRoZWFkPmAgaXMgaW5zZXJ0ZWQgYWZ0ZXIgYDx0Ym9keT5gIGluIHRoZSB2aWV3LgovLwovLyBAcGFyYW0ge21vZHVsZTplbmdpbmUvdmlldy9lbGVtZW50fkVsZW1lbnR9IHZpZXdUYWJsZQovLyBAcmV0dXJucyB7e2hlYWRpbmdSb3dzLCBoZWFkaW5nQ29sdW1ucywgcm93c319CgpmdW5jdGlvbiBzY2FuVGFibGUodmlld1RhYmxlKSB7CiAgY29uc3QgdGFibGVNZXRhID0gewogICAgaGVhZGluZ1Jvd3M6IDAsCiAgICBoZWFkaW5nQ29sdW1uczogMAogIH07IC8vIFRoZSBgPHRib2R5PmAgYW5kIDx0aGVhZD4gc2VjdGlvbnMgaW4gdGhlIERPTSBkbyBub3QgaGF2ZSB0byBiZSBpbiBvcmRlciBgPHRoZWFkPmAgLT4gYDx0Ym9keT5gIGFuZCB0aGVyZSBtaWdodCBiZSBtb3JlIHRoZW4gb25lIG9mCiAgLy8gdGhlbS4KICAvLyBBcyB0aGUgbW9kZWwgZG9lcyBub3QgaGF2ZSB0aG9zZSBzZWN0aW9ucywgcm93cyBmcm9tIGRpZmZlcmVudCBzZWN0aW9ucyBtdXN0IGJlIHNvcnRlZC4KICAvLyBGb3IgZXhhbXBsZSwgYmVsb3cgaXMgYSB2YWxpZCBIVE1MIHRhYmxlOgogIC8vCiAgLy8JCTx0YWJsZT4KICAvLwkJCTx0Ym9keT48dHI+PHRkPjI8L3RkPjwvdHI+PC90Ym9keT4KICAvLwkJCTx0aGVhZD48dHI+PHRkPjE8L3RkPjwvdHI+PC90aGVhZD4KICAvLwkJCTx0Ym9keT48dHI+PHRkPjM8L3RkPjwvdHI+PC90Ym9keT4KICAvLwkJPC90YWJsZT4KICAvLwogIC8vIEJ1dCBicm93c2VycyB3aWxsIHJlbmRlciByb3dzIGluIG9yZGVyIGFzOiAxIGFzIGhlYWRpbmcgYW5kIDIgYW5kIDMgYXMgKGJvZHkpLgoKICBjb25zdCBoZWFkUm93cyA9IFtdOwogIGNvbnN0IGJvZHlSb3dzID0gW107IC8vIEN1cnJlbnRseSB0aGUgZWRpdG9yIGRvZXMgbm90IHN1cHBvcnQgbW9yZSB0aGVuIG9uZSA8dGhlYWQ+IHNlY3Rpb24uCiAgLy8gT25seSB0aGUgZmlyc3QgPHRoZWFkPiBmcm9tIHRoZSB2aWV3IHdpbGwgYmUgdXNlZCBhcyBoZWFkaW5nIHJvd3MgYW5kIG90aGVycyB3aWxsIGJlIGNvbnZlcnRlZCB0byBib2R5IHJvd3MuCgogIGxldCBmaXJzdFRoZWFkRWxlbWVudDsKCiAgZm9yIChjb25zdCB0YWJsZUNoaWxkIG9mIEFycmF5LmZyb20odmlld1RhYmxlLmdldENoaWxkcmVuKCkpKSB7CiAgICAvLyBPbmx5IDx0aGVhZD4sIDx0Ym9keT4gJiA8dGZvb3Q+IGZyb20gYWxsb3dlZCB0YWJsZSBjaGlsZHJlbiBjYW4gaGF2ZSA8dHI+cy4KICAgIC8vIFRoZSBlbHNlIGlzIGZvciBmdXR1cmUgcHVycG9zZXMgKG1haW5seSA8Y2FwdGlvbj4pLgogICAgaWYgKHRhYmxlQ2hpbGQubmFtZSA9PT0gJ3Rib2R5JyB8fCB0YWJsZUNoaWxkLm5hbWUgPT09ICd0aGVhZCcgfHwgdGFibGVDaGlsZC5uYW1lID09PSAndGZvb3QnKSB7CiAgICAgIC8vIFNhdmUgdGhlIGZpcnN0IDx0aGVhZD4gaW4gdGhlIHRhYmxlIGFzIHRhYmxlIGhlYWRlciAtIGFsbCBvdGhlciBvbmVzIHdpbGwgYmUgY29udmVydGVkIHRvIHRhYmxlIGJvZHkgcm93cy4KICAgICAgaWYgKHRhYmxlQ2hpbGQubmFtZSA9PT0gJ3RoZWFkJyAmJiAhZmlyc3RUaGVhZEVsZW1lbnQpIHsKICAgICAgICBmaXJzdFRoZWFkRWxlbWVudCA9IHRhYmxlQ2hpbGQ7CiAgICAgIH0gLy8gVGhlcmUgbWlnaHQgYmUgc29tZSBleHRyYSBlbXB0eSB0ZXh0IG5vZGVzIGJldHdlZW4gdGhlIGB0cmBzLgogICAgICAvLyBNYWtlIHN1cmUgZnVydGhlciBjb2RlIG9wZXJhdGVzIG9uIGB0cmBzIG9ubHkuICgjMTQ1KQoKCiAgICAgIGNvbnN0IHRycyA9IEFycmF5LmZyb20odGFibGVDaGlsZC5nZXRDaGlsZHJlbigpKS5maWx0ZXIoZWwgPT4gZWwuaXMoJ2VsZW1lbnQnLCAndHInKSk7CgogICAgICBmb3IgKGNvbnN0IHRyIG9mIHRycykgewogICAgICAgIC8vIFRoaXMgPHRyPiBpcyBhIGNoaWxkIG9mIGEgZmlyc3QgPHRoZWFkPiBlbGVtZW50LgogICAgICAgIGlmICh0ci5wYXJlbnQubmFtZSA9PT0gJ3RoZWFkJyAmJiB0ci5wYXJlbnQgPT09IGZpcnN0VGhlYWRFbGVtZW50KSB7CiAgICAgICAgICB0YWJsZU1ldGEuaGVhZGluZ1Jvd3MrKzsKICAgICAgICAgIGhlYWRSb3dzLnB1c2godHIpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBib2R5Um93cy5wdXNoKHRyKTsgLy8gRm9yIG90aGVyIHJvd3MgY2hlY2sgaG93IG1hbnkgY29sdW1uIGhlYWRpbmdzIHRoaXMgcm93IGhhcy4KCiAgICAgICAgICBjb25zdCBoZWFkaW5nQ29scyA9IHNjYW5Sb3dGb3JIZWFkaW5nQ29sdW1ucyh0ciwgdGFibGVNZXRhLCBmaXJzdFRoZWFkRWxlbWVudCk7CgogICAgICAgICAgaWYgKGhlYWRpbmdDb2xzID4gdGFibGVNZXRhLmhlYWRpbmdDb2x1bW5zKSB7CiAgICAgICAgICAgIHRhYmxlTWV0YS5oZWFkaW5nQ29sdW1ucyA9IGhlYWRpbmdDb2xzOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfQogIH0KCiAgdGFibGVNZXRhLnJvd3MgPSBbLi4uaGVhZFJvd3MsIC4uLmJvZHlSb3dzXTsKICByZXR1cm4gdGFibGVNZXRhOwp9IC8vIFNjYW5zIGA8dHI+YCBhbmQgaXRzIGNoaWxkcmVuIGZvciBtZXRhZGF0YToKLy8gLSBGb3IgaGVhZGluZyByb3c6Ci8vICAgICAtIGVpdGhlciBhZGRzIHRoaXMgcm93IHRvIGhlYWRpbmcgb3IgYm9keSByb3dzLgovLyAgICAgLSB1cGRhdGVzIG51bWJlciBvZiBoZWFkaW5nIHJvd3MuCi8vIC0gRm9yIGJvZHkgcm93czoKLy8gICAgIC0gY2FsY3VsYXRlcyB0aGUgbnVtYmVyIG9mIGNvbHVtbiBoZWFkaW5ncy4KLy8KLy8gQHBhcmFtIHttb2R1bGU6ZW5naW5lL3ZpZXcvZWxlbWVudH5FbGVtZW50fSB0cgovLyBAcmV0dXJucyB7TnVtYmVyfQoKCmZ1bmN0aW9uIHNjYW5Sb3dGb3JIZWFkaW5nQ29sdW1ucyh0cikgewogIGxldCBoZWFkaW5nQ29sdW1ucyA9IDA7CiAgbGV0IGluZGV4ID0gMDsgLy8gRmlsdGVyIG91dCBlbXB0eSB0ZXh0IG5vZGVzIGZyb20gdHIgY2hpbGRyZW4uCgogIGNvbnN0IGNoaWxkcmVuID0gQXJyYXkuZnJvbSh0ci5nZXRDaGlsZHJlbigpKS5maWx0ZXIoY2hpbGQgPT4gY2hpbGQubmFtZSA9PT0gJ3RoJyB8fCBjaGlsZC5uYW1lID09PSAndGQnKTsgLy8gQ291bnQgc3RhcnRpbmcgYWRqYWNlbnQgPHRoPiBlbGVtZW50cyBvZiBhIDx0cj4uCgogIHdoaWxlIChpbmRleCA8IGNoaWxkcmVuLmxlbmd0aCAmJiBjaGlsZHJlbltpbmRleF0ubmFtZSA9PT0gJ3RoJykgewogICAgY29uc3QgdGggPSBjaGlsZHJlbltpbmRleF07IC8vIEFkanVzdCBjb2x1bW5zIGNhbGN1bGF0aW9uIGJ5IHRoZSBudW1iZXIgb2Ygc3Bhbm5lZCBjb2x1bW5zLgoKICAgIGNvbnN0IGNvbHNwYW4gPSBwYXJzZUludCh0aC5nZXRBdHRyaWJ1dGUoJ2NvbHNwYW4nKSB8fCAxKTsKICAgIGhlYWRpbmdDb2x1bW5zID0gaGVhZGluZ0NvbHVtbnMgKyBjb2xzcGFuOwogICAgaW5kZXgrKzsKICB9CgogIHJldHVybiBoZWFkaW5nQ29sdW1uczsKfQ=="},{"version":3,"sources":["/Users/antonyching/Desktop/project/new-builder-demo/node_modules/@ckeditor/ckeditor5-table/src/converters/upcasttable.js"],"names":["createEmptyTableCell","upcastTable","dispatcher","on","evt","data","conversionApi","viewTable","viewItem","consumable","test","name","rows","headingRows","headingColumns","scanTable","attributes","table","writer","createElement","splitResult","splitToAllowedParent","modelCursor","insert","position","consume","length","forEach","row","convertItem","createPositionAt","modelRange","createRange","createPositionBefore","createPositionAfter","cursorParent","end","upcastTableCell","elementName","viewTableCell","tableCell","convertChildren","childCount","insertElement","tableMeta","headRows","bodyRows","firstTheadElement","tableChild","Array","from","getChildren","trs","filter","el","is","tr","parent","push","headingCols","scanRowForHeadingColumns","index","children","child","th","colspan","parseInt","getAttribute"],"mappings":"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","sourcesContent":["/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module table/converters/upcasttable\n */\n\nimport { createEmptyTableCell } from '../commands/utils';\n\n/**\n * View table element to model table element conversion helper.\n *\n * This conversion helper converts the table element as well as table rows.\n *\n * @returns {Function} Conversion helper.\n */\nexport default function upcastTable() {\n\treturn dispatcher => {\n\t\tdispatcher.on( 'element:table', ( evt, data, conversionApi ) => {\n\t\t\tconst viewTable = data.viewItem;\n\n\t\t\t// When element was already consumed then skip it.\n\t\t\tif ( !conversionApi.consumable.test( viewTable, { name: true } ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst { rows, headingRows, headingColumns } = scanTable( viewTable );\n\n\t\t\t// Only set attributes if values is greater then 0.\n\t\t\tconst attributes = {};\n\n\t\t\tif ( headingColumns ) {\n\t\t\t\tattributes.headingColumns = headingColumns;\n\t\t\t}\n\n\t\t\tif ( headingRows ) {\n\t\t\t\tattributes.headingRows = headingRows;\n\t\t\t}\n\n\t\t\tconst table = conversionApi.writer.createElement( 'table', attributes );\n\n\t\t\t// Insert element on allowed position.\n\t\t\tconst splitResult = conversionApi.splitToAllowedParent( table, data.modelCursor );\n\n\t\t\t// When there is no split result it means that we can't insert element to model tree, so let's skip it.\n\t\t\tif ( !splitResult ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconversionApi.writer.insert( table, splitResult.position );\n\t\t\tconversionApi.consumable.consume( viewTable, { name: true } );\n\n\t\t\tif ( rows.length ) {\n\t\t\t\t// Upcast table rows in proper order (heading rows first).\n\t\t\t\trows.forEach( row => conversionApi.convertItem( row, conversionApi.writer.createPositionAt( table, 'end' ) ) );\n\t\t\t} else {\n\t\t\t\t// Create one row and one table cell for empty table.\n\t\t\t\tconst row = conversionApi.writer.createElement( 'tableRow' );\n\t\t\t\tconversionApi.writer.insert( row, conversionApi.writer.createPositionAt( table, 'end' ) );\n\n\t\t\t\tcreateEmptyTableCell( conversionApi.writer, conversionApi.writer.createPositionAt( row, 'end' ) );\n\t\t\t}\n\n\t\t\t// Set conversion result range.\n\t\t\tdata.modelRange = conversionApi.writer.createRange(\n\t\t\t\t// Range should start before inserted element\n\t\t\t\tconversionApi.writer.createPositionBefore( table ),\n\t\t\t\t// Should end after but we need to take into consideration that children could split our\n\t\t\t\t// element, so we need to move range after parent of the last converted child.\n\t\t\t\t// before: <allowed>[]</allowed>\n\t\t\t\t// after: <allowed>[<converted><child></child></converted><child></child><converted>]</converted></allowed>\n\t\t\t\tconversionApi.writer.createPositionAfter( table )\n\t\t\t);\n\n\t\t\t// Now we need to check where the modelCursor should be.\n\t\t\t// If we had to split parent to insert our element then we want to continue conversion inside split parent.\n\t\t\t//\n\t\t\t// before: <allowed><notAllowed>[]</notAllowed></allowed>\n\t\t\t// after:  <allowed><notAllowed></notAllowed><converted></converted><notAllowed>[]</notAllowed></allowed>\n\t\t\tif ( splitResult.cursorParent ) {\n\t\t\t\tdata.modelCursor = conversionApi.writer.createPositionAt( splitResult.cursorParent, 0 );\n\n\t\t\t\t// Otherwise just continue after inserted element.\n\t\t\t} else {\n\t\t\t\tdata.modelCursor = data.modelRange.end;\n\t\t\t}\n\t\t} );\n\t};\n}\n\nexport function upcastTableCell( elementName ) {\n\treturn dispatcher => {\n\t\tdispatcher.on( `element:${ elementName }`, ( evt, data, conversionApi ) => {\n\t\t\tconst viewTableCell = data.viewItem;\n\n\t\t\t// When element was already consumed then skip it.\n\t\t\tif ( !conversionApi.consumable.test( viewTableCell, { name: true } ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst tableCell = conversionApi.writer.createElement( 'tableCell' );\n\n\t\t\t// Insert element on allowed position.\n\t\t\tconst splitResult = conversionApi.splitToAllowedParent( tableCell, data.modelCursor );\n\n\t\t\t// When there is no split result it means that we can't insert element to model tree, so let's skip it.\n\t\t\tif ( !splitResult ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconversionApi.writer.insert( tableCell, splitResult.position );\n\t\t\tconversionApi.consumable.consume( viewTableCell, { name: true } );\n\n\t\t\tconst modelCursor = conversionApi.writer.createPositionAt( tableCell, 0 );\n\t\t\tconversionApi.convertChildren( viewTableCell, modelCursor );\n\n\t\t\t// Ensure a paragraph in the model for empty table cells.\n\t\t\tif ( !tableCell.childCount ) {\n\t\t\t\tconversionApi.writer.insertElement( 'paragraph', modelCursor );\n\t\t\t}\n\n\t\t\t// Set conversion result range.\n\t\t\tdata.modelRange = conversionApi.writer.createRange(\n\t\t\t\t// Range should start before inserted element\n\t\t\t\tconversionApi.writer.createPositionBefore( tableCell ),\n\t\t\t\t// Should end after but we need to take into consideration that children could split our\n\t\t\t\t// element, so we need to move range after parent of the last converted child.\n\t\t\t\t// before: <allowed>[]</allowed>\n\t\t\t\t// after: <allowed>[<converted><child></child></converted><child></child><converted>]</converted></allowed>\n\t\t\t\tconversionApi.writer.createPositionAfter( tableCell )\n\t\t\t);\n\n\t\t\t// Continue after inserted element.\n\t\t\tdata.modelCursor = data.modelRange.end;\n\t\t} );\n\t};\n}\n\n// Scans table rows and extracts required metadata from the table:\n//\n// headingRows    - the number of rows that goes as table header.\n// headingColumns - max number of row headings.\n// rows           - sorted `<tr>`s as they should go into the model - ie. if `<thead>` is inserted after `<tbody>` in the view.\n//\n// @param {module:engine/view/element~Element} viewTable\n// @returns {{headingRows, headingColumns, rows}}\nfunction scanTable( viewTable ) {\n\tconst tableMeta = {\n\t\theadingRows: 0,\n\t\theadingColumns: 0\n\t};\n\n\t// The `<tbody>` and <thead> sections in the DOM do not have to be in order `<thead>` -> `<tbody>` and there might be more then one of\n\t// them.\n\t// As the model does not have those sections, rows from different sections must be sorted.\n\t// For example, below is a valid HTML table:\n\t//\n\t//\t\t<table>\n\t//\t\t\t<tbody><tr><td>2</td></tr></tbody>\n\t//\t\t\t<thead><tr><td>1</td></tr></thead>\n\t//\t\t\t<tbody><tr><td>3</td></tr></tbody>\n\t//\t\t</table>\n\t//\n\t// But browsers will render rows in order as: 1 as heading and 2 and 3 as (body).\n\tconst headRows = [];\n\tconst bodyRows = [];\n\n\t// Currently the editor does not support more then one <thead> section.\n\t// Only the first <thead> from the view will be used as heading rows and others will be converted to body rows.\n\tlet firstTheadElement;\n\n\tfor ( const tableChild of Array.from( viewTable.getChildren() ) ) {\n\t\t// Only <thead>, <tbody> & <tfoot> from allowed table children can have <tr>s.\n\t\t// The else is for future purposes (mainly <caption>).\n\t\tif ( tableChild.name === 'tbody' || tableChild.name === 'thead' || tableChild.name === 'tfoot' ) {\n\t\t\t// Save the first <thead> in the table as table header - all other ones will be converted to table body rows.\n\t\t\tif ( tableChild.name === 'thead' && !firstTheadElement ) {\n\t\t\t\tfirstTheadElement = tableChild;\n\t\t\t}\n\n\t\t\t// There might be some extra empty text nodes between the `tr`s.\n\t\t\t// Make sure further code operates on `tr`s only. (#145)\n\t\t\tconst trs = Array.from( tableChild.getChildren() ).filter( el => el.is( 'element', 'tr' ) );\n\n\t\t\tfor ( const tr of trs ) {\n\t\t\t\t// This <tr> is a child of a first <thead> element.\n\t\t\t\tif ( tr.parent.name === 'thead' && tr.parent === firstTheadElement ) {\n\t\t\t\t\ttableMeta.headingRows++;\n\t\t\t\t\theadRows.push( tr );\n\t\t\t\t} else {\n\t\t\t\t\tbodyRows.push( tr );\n\t\t\t\t\t// For other rows check how many column headings this row has.\n\n\t\t\t\t\tconst headingCols = scanRowForHeadingColumns( tr, tableMeta, firstTheadElement );\n\n\t\t\t\t\tif ( headingCols > tableMeta.headingColumns ) {\n\t\t\t\t\t\ttableMeta.headingColumns = headingCols;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\ttableMeta.rows = [ ...headRows, ...bodyRows ];\n\n\treturn tableMeta;\n}\n\n// Scans `<tr>` and its children for metadata:\n// - For heading row:\n//     - either adds this row to heading or body rows.\n//     - updates number of heading rows.\n// - For body rows:\n//     - calculates the number of column headings.\n//\n// @param {module:engine/view/element~Element} tr\n// @returns {Number}\nfunction scanRowForHeadingColumns( tr ) {\n\tlet headingColumns = 0;\n\tlet index = 0;\n\n\t// Filter out empty text nodes from tr children.\n\tconst children = Array.from( tr.getChildren() )\n\t\t.filter( child => child.name === 'th' || child.name === 'td' );\n\n\t// Count starting adjacent <th> elements of a <tr>.\n\twhile ( index < children.length && children[ index ].name === 'th' ) {\n\t\tconst th = children[ index ];\n\n\t\t// Adjust columns calculation by the number of spanned columns.\n\t\tconst colspan = parseInt( th.getAttribute( 'colspan' ) || 1 );\n\n\t\theadingColumns = headingColumns + colspan;\n\t\tindex++;\n\t}\n\n\treturn headingColumns;\n}\n"]}]}