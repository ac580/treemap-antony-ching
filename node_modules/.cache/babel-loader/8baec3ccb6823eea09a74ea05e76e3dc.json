{"remainingRequest":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/babel-loader/lib/index.js!/Users/antonyching/Desktop/project/new-builder-demo/node_modules/@ckeditor/ckeditor5-basic-styles/src/attributecommand.js","dependencies":[{"path":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/@ckeditor/ckeditor5-basic-styles/src/attributecommand.js","mtime":499162500000},{"path":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/@ckeditor/ckeditor5-dev-webpack-plugin/lib/translatesourceloader.js","mtime":499162500000},{"path":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:LyoqCiAqIEBsaWNlbnNlIENvcHlyaWdodCAoYykgMjAwMy0yMDE5LCBDS1NvdXJjZSAtIEZyZWRlcmljbyBLbmFiYmVuLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKiBGb3IgbGljZW5zaW5nLCBzZWUgTElDRU5TRS5tZCBvciBodHRwczovL2NrZWRpdG9yLmNvbS9sZWdhbC9ja2VkaXRvci1vc3MtbGljZW5zZQogKi8KCi8qKgogKiBAbW9kdWxlIGJhc2ljLXN0eWxlcy9hdHRyaWJ1dGVjb21tYW5kCiAqLwppbXBvcnQgQ29tbWFuZCBmcm9tICdAY2tlZGl0b3IvY2tlZGl0b3I1LWNvcmUvc3JjL2NvbW1hbmQnOwovKioKICogQW4gZXh0ZW5zaW9uIG9mIHRoZSBiYXNlIHtAbGluayBtb2R1bGU6Y29yZS9jb21tYW5kfkNvbW1hbmR9IGNsYXNzLCB3aGljaCBwcm92aWRlcyB1dGlsaXRpZXMgZm9yIGEgY29tbWFuZAogKiB0aGF0IHRvZ2dsZXMgYSBzaW5nbGUgYXR0cmlidXRlIG9uIGEgdGV4dCBvciBhbiBlbGVtZW50LgogKgogKiBgQXR0cmlidXRlQ29tbWFuZGAgdXNlcyB7QGxpbmsgbW9kdWxlOmVuZ2luZS9tb2RlbC9kb2N1bWVudH5Eb2N1bWVudCNzZWxlY3Rpb259CiAqIHRvIGRlY2lkZSB3aGljaCBub2RlcyAoaWYgYW55KSBzaG91bGQgYmUgY2hhbmdlZCwgYW5kIGFwcGxpZXMgb3IgcmVtb3ZlcyB0aGUgYXR0cmlidXRlIGZyb20gdGhlbS4KICoKICogVGhlIGNvbW1hbmQgY2hlY2tzIHRoZSB7QGxpbmsgbW9kdWxlOmVuZ2luZS9tb2RlbC9tb2RlbH5Nb2RlbCNzY2hlbWF9IHRvIGRlY2lkZSBpZiBpdCBjYW4gYmUgZW5hYmxlZAogKiBmb3IgdGhlIGN1cnJlbnQgc2VsZWN0aW9uIGFuZCB0byB3aGljaCBub2RlcyB0aGUgYXR0cmlidXRlIGNhbiBiZSBhcHBsaWVkLgogKgogKiBAZXh0ZW5kcyBtb2R1bGU6Y29yZS9jb21tYW5kfkNvbW1hbmQKICovCgpleHBvcnQgZGVmYXVsdCBjbGFzcyBBdHRyaWJ1dGVDb21tYW5kIGV4dGVuZHMgQ29tbWFuZCB7CiAgLyoqCiAgICogQHBhcmFtIHttb2R1bGU6Y29yZS9lZGl0b3IvZWRpdG9yfkVkaXRvcn0gZWRpdG9yCiAgICogQHBhcmFtIHtTdHJpbmd9IGF0dHJpYnV0ZUtleSBBdHRyaWJ1dGUgdGhhdCB3aWxsIGJlIHNldCBieSB0aGUgY29tbWFuZC4KICAgKi8KICBjb25zdHJ1Y3RvcihlZGl0b3IsIGF0dHJpYnV0ZUtleSkgewogICAgc3VwZXIoZWRpdG9yKTsKICAgIC8qKgogICAgICogVGhlIGF0dHJpYnV0ZSB0aGF0IHdpbGwgYmUgc2V0IGJ5IHRoZSBjb21tYW5kLgogICAgICoKICAgICAqIEByZWFkb25seQogICAgICogQG1lbWJlciB7U3RyaW5nfQogICAgICovCgogICAgdGhpcy5hdHRyaWJ1dGVLZXkgPSBhdHRyaWJ1dGVLZXk7CiAgICAvKioKICAgICAqIEZsYWcgaW5kaWNhdGluZyB3aGV0aGVyIHRoZSBjb21tYW5kIGlzIGFjdGl2ZS4gVGhlIGNvbW1hbmQgaXMgYWN0aXZlIHdoZW4gdGhlCiAgICAgKiB7QGxpbmsgbW9kdWxlOmVuZ2luZS9tb2RlbC9zZWxlY3Rpb25+U2VsZWN0aW9uI2hhc0F0dHJpYnV0ZSBzZWxlY3Rpb24gaGFzIHRoZSBhdHRyaWJ1dGV9IHdoaWNoIG1lYW5zIHRoYXQ6CiAgICAgKgogICAgICogKiBJZiB0aGUgc2VsZWN0aW9uIGlzIG5vdCBlbXB0eSAmbmRhc2g7IFRoYXQgdGhlIGF0dHJpYnV0ZSBpcyBzZXQgb24gdGhlIGZpcnN0IG5vZGUgaW4gdGhlIHNlbGVjdGlvbiB0aGF0IGFsbG93cyB0aGlzIGF0dHJpYnV0ZS4KICAgICAqICogSWYgdGhlIHNlbGVjdGlvbiBpcyBlbXB0eSAmbmRhc2g7IFRoYXQgdGhlIHNlbGVjdGlvbiBoYXMgdGhlIGF0dHJpYnV0ZSBpdHNlbGYgKHdoaWNoIG1lYW5zIHRoYXQgbmV3bHkgdHlwZWQKICAgICAqIHRleHQgd2lsbCBoYXZlIHRoaXMgYXR0cmlidXRlLCB0b28pLgogICAgICoKICAgICAqIEBvYnNlcnZhYmxlCiAgICAgKiBAcmVhZG9ubHkKICAgICAqIEBtZW1iZXIge0Jvb2xlYW59ICN2YWx1ZQogICAgICovCiAgfQogIC8qKgogICAqIFVwZGF0ZXMgdGhlIGNvbW1hbmQncyB7QGxpbmsgI3ZhbHVlfSBhbmQge0BsaW5rICNpc0VuYWJsZWR9IGJhc2VkIG9uIHRoZSBjdXJyZW50IHNlbGVjdGlvbi4KICAgKi8KCgogIHJlZnJlc2goKSB7CiAgICBjb25zdCBtb2RlbCA9IHRoaXMuZWRpdG9yLm1vZGVsOwogICAgY29uc3QgZG9jID0gbW9kZWwuZG9jdW1lbnQ7CiAgICB0aGlzLnZhbHVlID0gdGhpcy5fZ2V0VmFsdWVGcm9tRmlyc3RBbGxvd2VkTm9kZSgpOwogICAgdGhpcy5pc0VuYWJsZWQgPSBtb2RlbC5zY2hlbWEuY2hlY2tBdHRyaWJ1dGVJblNlbGVjdGlvbihkb2Muc2VsZWN0aW9uLCB0aGlzLmF0dHJpYnV0ZUtleSk7CiAgfQogIC8qKgogICAqIEV4ZWN1dGVzIHRoZSBjb21tYW5kICZtZGFzaDsgYXBwbGllcyB0aGUgYXR0cmlidXRlIHRvIHRoZSBzZWxlY3Rpb24gb3IgcmVtb3ZlcyBpdCBmcm9tIHRoZSBzZWxlY3Rpb24uCiAgICoKICAgKiBJZiB0aGUgY29tbWFuZCBpcyBhY3RpdmUgKGB2YWx1ZSA9PSB0cnVlYCksIGl0IHdpbGwgcmVtb3ZlIGF0dHJpYnV0ZXMuIE90aGVyd2lzZSwgaXQgd2lsbCBzZXQgYXR0cmlidXRlcy4KICAgKgogICAqIFRoZSBleGVjdXRpb24gcmVzdWx0IGRpZmZlcnMsIGRlcGVuZGluZyBvbiB0aGUge0BsaW5rIG1vZHVsZTplbmdpbmUvbW9kZWwvZG9jdW1lbnR+RG9jdW1lbnQjc2VsZWN0aW9ufToKICAgKgogICAqICogSWYgdGhlIHNlbGVjdGlvbiBpcyBvbiBhIHJhbmdlLCB0aGUgY29tbWFuZCBhcHBsaWVzIHRoZSBhdHRyaWJ1dGUgdG8gYWxsIG5vZGVzIGluIHRoYXQgcmFuZ2UKICAgKiAoaWYgdGhleSBhcmUgYWxsb3dlZCB0byBoYXZlIHRoaXMgYXR0cmlidXRlIGJ5IHRoZSB7QGxpbmsgbW9kdWxlOmVuZ2luZS9tb2RlbC9zY2hlbWF+U2NoZW1hIHNjaGVtYX0pLgogICAqICogSWYgdGhlIHNlbGVjdGlvbiBpcyBjb2xsYXBzZWQgaW4gYSBub24tZW1wdHkgbm9kZSwgdGhlIGNvbW1hbmQgYXBwbGllcyB0aGUgYXR0cmlidXRlIHRvIHRoZQogICAqIHtAbGluayBtb2R1bGU6ZW5naW5lL21vZGVsL2RvY3VtZW50fkRvY3VtZW50I3NlbGVjdGlvbn0gaXRzZWxmIChub3RlIHRoYXQgdHlwZWQgY2hhcmFjdGVycyBjb3B5IGF0dHJpYnV0ZXMgZnJvbSB0aGUgc2VsZWN0aW9uKS4KICAgKiAqIElmIHRoZSBzZWxlY3Rpb24gaXMgY29sbGFwc2VkIGluIGFuIGVtcHR5IG5vZGUsIHRoZSBjb21tYW5kIGFwcGxpZXMgdGhlIGF0dHJpYnV0ZSB0byB0aGUgcGFyZW50IG5vZGUgb2YgdGhlIHNlbGVjdGlvbiAobm90ZQogICAqIHRoYXQgdGhlIHNlbGVjdGlvbiBpbmhlcml0cyBhbGwgYXR0cmlidXRlcyBmcm9tIGEgbm9kZSBpZiBpdCBpcyBpbiBhbiBlbXB0eSBub2RlKS4KICAgKgogICAqIEBmaXJlcyBleGVjdXRlCiAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSBDb21tYW5kIG9wdGlvbnMuCiAgICogQHBhcmFtIHtCb29sZWFufSBbb3B0aW9ucy5mb3JjZVZhbHVlXSBJZiBzZXQsIGl0IHdpbGwgZm9yY2UgdGhlIGNvbW1hbmQgYmVoYXZpb3IuIElmIGB0cnVlYCwgdGhlIGNvbW1hbmQgd2lsbCBhcHBseSB0aGUgYXR0cmlidXRlLAogICAqIG90aGVyd2lzZSB0aGUgY29tbWFuZCB3aWxsIHJlbW92ZSB0aGUgYXR0cmlidXRlLgogICAqIElmIG5vdCBzZXQsIHRoZSBjb21tYW5kIHdpbGwgbG9vayBmb3IgaXRzIGN1cnJlbnQgdmFsdWUgdG8gZGVjaWRlIHdoYXQgaXQgc2hvdWxkIGRvLgogICAqLwoKCiAgZXhlY3V0ZShvcHRpb25zID0ge30pIHsKICAgIGNvbnN0IG1vZGVsID0gdGhpcy5lZGl0b3IubW9kZWw7CiAgICBjb25zdCBkb2MgPSBtb2RlbC5kb2N1bWVudDsKICAgIGNvbnN0IHNlbGVjdGlvbiA9IGRvYy5zZWxlY3Rpb247CiAgICBjb25zdCB2YWx1ZSA9IG9wdGlvbnMuZm9yY2VWYWx1ZSA9PT0gdW5kZWZpbmVkID8gIXRoaXMudmFsdWUgOiBvcHRpb25zLmZvcmNlVmFsdWU7CiAgICBtb2RlbC5jaGFuZ2Uod3JpdGVyID0+IHsKICAgICAgaWYgKHNlbGVjdGlvbi5pc0NvbGxhcHNlZCkgewogICAgICAgIGlmICh2YWx1ZSkgewogICAgICAgICAgd3JpdGVyLnNldFNlbGVjdGlvbkF0dHJpYnV0ZSh0aGlzLmF0dHJpYnV0ZUtleSwgdHJ1ZSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHdyaXRlci5yZW1vdmVTZWxlY3Rpb25BdHRyaWJ1dGUodGhpcy5hdHRyaWJ1dGVLZXkpOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICBjb25zdCByYW5nZXMgPSBtb2RlbC5zY2hlbWEuZ2V0VmFsaWRSYW5nZXMoc2VsZWN0aW9uLmdldFJhbmdlcygpLCB0aGlzLmF0dHJpYnV0ZUtleSk7CgogICAgICAgIGZvciAoY29uc3QgcmFuZ2Ugb2YgcmFuZ2VzKSB7CiAgICAgICAgICBpZiAodmFsdWUpIHsKICAgICAgICAgICAgd3JpdGVyLnNldEF0dHJpYnV0ZSh0aGlzLmF0dHJpYnV0ZUtleSwgdmFsdWUsIHJhbmdlKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHdyaXRlci5yZW1vdmVBdHRyaWJ1dGUodGhpcy5hdHRyaWJ1dGVLZXksIHJhbmdlKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0pOwogIH0KICAvKioKICAgKiBDaGVja3MgdGhlIGF0dHJpYnV0ZSB2YWx1ZSBvZiB0aGUgZmlyc3Qgbm9kZSBpbiB0aGUgc2VsZWN0aW9uIHRoYXQgYWxsb3dzIHRoZSBhdHRyaWJ1dGUuCiAgICogRm9yIHRoZSBjb2xsYXBzZWQgc2VsZWN0aW9uIHJldHVybnMgdGhlIHNlbGVjdGlvbiBhdHRyaWJ1dGUuCiAgICoKICAgKiBAcHJpdmF0ZQogICAqIEByZXR1cm5zIHtCb29sZWFufSBUaGUgYXR0cmlidXRlIHZhbHVlLgogICAqLwoKCiAgX2dldFZhbHVlRnJvbUZpcnN0QWxsb3dlZE5vZGUoKSB7CiAgICBjb25zdCBtb2RlbCA9IHRoaXMuZWRpdG9yLm1vZGVsOwogICAgY29uc3Qgc2NoZW1hID0gbW9kZWwuc2NoZW1hOwogICAgY29uc3Qgc2VsZWN0aW9uID0gbW9kZWwuZG9jdW1lbnQuc2VsZWN0aW9uOwoKICAgIGlmIChzZWxlY3Rpb24uaXNDb2xsYXBzZWQpIHsKICAgICAgcmV0dXJuIHNlbGVjdGlvbi5oYXNBdHRyaWJ1dGUodGhpcy5hdHRyaWJ1dGVLZXkpOwogICAgfQoKICAgIGZvciAoY29uc3QgcmFuZ2Ugb2Ygc2VsZWN0aW9uLmdldFJhbmdlcygpKSB7CiAgICAgIGZvciAoY29uc3QgaXRlbSBvZiByYW5nZS5nZXRJdGVtcygpKSB7CiAgICAgICAgaWYgKHNjaGVtYS5jaGVja0F0dHJpYnV0ZShpdGVtLCB0aGlzLmF0dHJpYnV0ZUtleSkpIHsKICAgICAgICAgIHJldHVybiBpdGVtLmhhc0F0dHJpYnV0ZSh0aGlzLmF0dHJpYnV0ZUtleSk7CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgcmV0dXJuIGZhbHNlOwogIH0KCn0="},{"version":3,"sources":["/Users/antonyching/Desktop/project/new-builder-demo/node_modules/@ckeditor/ckeditor5-basic-styles/src/attributecommand.js"],"names":["Command","AttributeCommand","constructor","editor","attributeKey","refresh","model","doc","document","value","_getValueFromFirstAllowedNode","isEnabled","schema","checkAttributeInSelection","selection","execute","options","forceValue","undefined","change","writer","isCollapsed","setSelectionAttribute","removeSelectionAttribute","ranges","getValidRanges","getRanges","range","setAttribute","removeAttribute","hasAttribute","item","getItems","checkAttribute"],"mappings":"AAAA;;;;;AAKA;;;AAIA,OAAOA,OAAP,MAAoB,sCAApB;AAEA;;;;;;;;;;;;;AAYA,eAAe,MAAMC,gBAAN,SAA+BD,OAA/B,CAAuC;AACrD;;;;AAIAE,EAAAA,WAAW,CAAEC,MAAF,EAAUC,YAAV,EAAyB;AACnC,UAAOD,MAAP;AAEA;;;;;;;AAMA,SAAKC,YAAL,GAAoBA,YAApB;AAEA;;;;;;;;;;;;AAYA;AAED;;;;;AAGAC,EAAAA,OAAO,GAAG;AACT,UAAMC,KAAK,GAAG,KAAKH,MAAL,CAAYG,KAA1B;AACA,UAAMC,GAAG,GAAGD,KAAK,CAACE,QAAlB;AAEA,SAAKC,KAAL,GAAa,KAAKC,6BAAL,EAAb;AACA,SAAKC,SAAL,GAAiBL,KAAK,CAACM,MAAN,CAAaC,yBAAb,CAAwCN,GAAG,CAACO,SAA5C,EAAuD,KAAKV,YAA5D,CAAjB;AACA;AAED;;;;;;;;;;;;;;;;;;;;;;AAoBAW,EAAAA,OAAO,CAAEC,OAAO,GAAG,EAAZ,EAAiB;AACvB,UAAMV,KAAK,GAAG,KAAKH,MAAL,CAAYG,KAA1B;AACA,UAAMC,GAAG,GAAGD,KAAK,CAACE,QAAlB;AACA,UAAMM,SAAS,GAAGP,GAAG,CAACO,SAAtB;AACA,UAAML,KAAK,GAAKO,OAAO,CAACC,UAAR,KAAuBC,SAAzB,GAAuC,CAAC,KAAKT,KAA7C,GAAqDO,OAAO,CAACC,UAA3E;AAEAX,IAAAA,KAAK,CAACa,MAAN,CAAcC,MAAM,IAAI;AACvB,UAAKN,SAAS,CAACO,WAAf,EAA6B;AAC5B,YAAKZ,KAAL,EAAa;AACZW,UAAAA,MAAM,CAACE,qBAAP,CAA8B,KAAKlB,YAAnC,EAAiD,IAAjD;AACA,SAFD,MAEO;AACNgB,UAAAA,MAAM,CAACG,wBAAP,CAAiC,KAAKnB,YAAtC;AACA;AACD,OAND,MAMO;AACN,cAAMoB,MAAM,GAAGlB,KAAK,CAACM,MAAN,CAAaa,cAAb,CAA6BX,SAAS,CAACY,SAAV,EAA7B,EAAoD,KAAKtB,YAAzD,CAAf;;AAEA,aAAM,MAAMuB,KAAZ,IAAqBH,MAArB,EAA8B;AAC7B,cAAKf,KAAL,EAAa;AACZW,YAAAA,MAAM,CAACQ,YAAP,CAAqB,KAAKxB,YAA1B,EAAwCK,KAAxC,EAA+CkB,KAA/C;AACA,WAFD,MAEO;AACNP,YAAAA,MAAM,CAACS,eAAP,CAAwB,KAAKzB,YAA7B,EAA2CuB,KAA3C;AACA;AACD;AACD;AACD,KAlBD;AAmBA;AAED;;;;;;;;;AAOAjB,EAAAA,6BAA6B,GAAG;AAC/B,UAAMJ,KAAK,GAAG,KAAKH,MAAL,CAAYG,KAA1B;AACA,UAAMM,MAAM,GAAGN,KAAK,CAACM,MAArB;AACA,UAAME,SAAS,GAAGR,KAAK,CAACE,QAAN,CAAeM,SAAjC;;AAEA,QAAKA,SAAS,CAACO,WAAf,EAA6B;AAC5B,aAAOP,SAAS,CAACgB,YAAV,CAAwB,KAAK1B,YAA7B,CAAP;AACA;;AAED,SAAM,MAAMuB,KAAZ,IAAqBb,SAAS,CAACY,SAAV,EAArB,EAA6C;AAC5C,WAAM,MAAMK,IAAZ,IAAoBJ,KAAK,CAACK,QAAN,EAApB,EAAuC;AACtC,YAAKpB,MAAM,CAACqB,cAAP,CAAuBF,IAAvB,EAA6B,KAAK3B,YAAlC,CAAL,EAAwD;AACvD,iBAAO2B,IAAI,CAACD,YAAL,CAAmB,KAAK1B,YAAxB,CAAP;AACA;AACD;AACD;;AAED,WAAO,KAAP;AACA;;AAjHoD","sourcesContent":["/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module basic-styles/attributecommand\n */\n\nimport Command from '@ckeditor/ckeditor5-core/src/command';\n\n/**\n * An extension of the base {@link module:core/command~Command} class, which provides utilities for a command\n * that toggles a single attribute on a text or an element.\n *\n * `AttributeCommand` uses {@link module:engine/model/document~Document#selection}\n * to decide which nodes (if any) should be changed, and applies or removes the attribute from them.\n *\n * The command checks the {@link module:engine/model/model~Model#schema} to decide if it can be enabled\n * for the current selection and to which nodes the attribute can be applied.\n *\n * @extends module:core/command~Command\n */\nexport default class AttributeCommand extends Command {\n\t/**\n\t * @param {module:core/editor/editor~Editor} editor\n\t * @param {String} attributeKey Attribute that will be set by the command.\n\t */\n\tconstructor( editor, attributeKey ) {\n\t\tsuper( editor );\n\n\t\t/**\n\t\t * The attribute that will be set by the command.\n\t\t *\n\t\t * @readonly\n\t\t * @member {String}\n\t\t */\n\t\tthis.attributeKey = attributeKey;\n\n\t\t/**\n\t\t * Flag indicating whether the command is active. The command is active when the\n\t\t * {@link module:engine/model/selection~Selection#hasAttribute selection has the attribute} which means that:\n\t\t *\n\t\t * * If the selection is not empty &ndash; That the attribute is set on the first node in the selection that allows this attribute.\n\t\t * * If the selection is empty &ndash; That the selection has the attribute itself (which means that newly typed\n\t\t * text will have this attribute, too).\n\t\t *\n\t\t * @observable\n\t\t * @readonly\n\t\t * @member {Boolean} #value\n\t\t */\n\t}\n\n\t/**\n\t * Updates the command's {@link #value} and {@link #isEnabled} based on the current selection.\n\t */\n\trefresh() {\n\t\tconst model = this.editor.model;\n\t\tconst doc = model.document;\n\n\t\tthis.value = this._getValueFromFirstAllowedNode();\n\t\tthis.isEnabled = model.schema.checkAttributeInSelection( doc.selection, this.attributeKey );\n\t}\n\n\t/**\n\t * Executes the command &mdash; applies the attribute to the selection or removes it from the selection.\n\t *\n\t * If the command is active (`value == true`), it will remove attributes. Otherwise, it will set attributes.\n\t *\n\t * The execution result differs, depending on the {@link module:engine/model/document~Document#selection}:\n\t *\n\t * * If the selection is on a range, the command applies the attribute to all nodes in that range\n\t * (if they are allowed to have this attribute by the {@link module:engine/model/schema~Schema schema}).\n\t * * If the selection is collapsed in a non-empty node, the command applies the attribute to the\n\t * {@link module:engine/model/document~Document#selection} itself (note that typed characters copy attributes from the selection).\n\t * * If the selection is collapsed in an empty node, the command applies the attribute to the parent node of the selection (note\n\t * that the selection inherits all attributes from a node if it is in an empty node).\n\t *\n\t * @fires execute\n\t * @param {Object} [options] Command options.\n\t * @param {Boolean} [options.forceValue] If set, it will force the command behavior. If `true`, the command will apply the attribute,\n\t * otherwise the command will remove the attribute.\n\t * If not set, the command will look for its current value to decide what it should do.\n\t */\n\texecute( options = {} ) {\n\t\tconst model = this.editor.model;\n\t\tconst doc = model.document;\n\t\tconst selection = doc.selection;\n\t\tconst value = ( options.forceValue === undefined ) ? !this.value : options.forceValue;\n\n\t\tmodel.change( writer => {\n\t\t\tif ( selection.isCollapsed ) {\n\t\t\t\tif ( value ) {\n\t\t\t\t\twriter.setSelectionAttribute( this.attributeKey, true );\n\t\t\t\t} else {\n\t\t\t\t\twriter.removeSelectionAttribute( this.attributeKey );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconst ranges = model.schema.getValidRanges( selection.getRanges(), this.attributeKey );\n\n\t\t\t\tfor ( const range of ranges ) {\n\t\t\t\t\tif ( value ) {\n\t\t\t\t\t\twriter.setAttribute( this.attributeKey, value, range );\n\t\t\t\t\t} else {\n\t\t\t\t\t\twriter.removeAttribute( this.attributeKey, range );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t}\n\n\t/**\n\t * Checks the attribute value of the first node in the selection that allows the attribute.\n\t * For the collapsed selection returns the selection attribute.\n\t *\n\t * @private\n\t * @returns {Boolean} The attribute value.\n\t */\n\t_getValueFromFirstAllowedNode() {\n\t\tconst model = this.editor.model;\n\t\tconst schema = model.schema;\n\t\tconst selection = model.document.selection;\n\n\t\tif ( selection.isCollapsed ) {\n\t\t\treturn selection.hasAttribute( this.attributeKey );\n\t\t}\n\n\t\tfor ( const range of selection.getRanges() ) {\n\t\t\tfor ( const item of range.getItems() ) {\n\t\t\t\tif ( schema.checkAttribute( item, this.attributeKey ) ) {\n\t\t\t\t\treturn item.hasAttribute( this.attributeKey );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n}\n"]}]}