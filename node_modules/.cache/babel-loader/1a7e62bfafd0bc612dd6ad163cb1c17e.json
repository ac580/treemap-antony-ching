{"remainingRequest":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/babel-loader/lib/index.js!/Users/antonyching/Desktop/project/new-builder-demo/node_modules/@ckeditor/ckeditor5-ui/src/panel/balloon/balloonpanelview.js","dependencies":[{"path":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/@ckeditor/ckeditor5-ui/src/panel/balloon/balloonpanelview.js","mtime":499162500000},{"path":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/@ckeditor/ckeditor5-dev-webpack-plugin/lib/translatesourceloader.js","mtime":499162500000},{"path":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:LyoqCiAqIEBsaWNlbnNlIENvcHlyaWdodCAoYykgMjAwMy0yMDE5LCBDS1NvdXJjZSAtIEZyZWRlcmljbyBLbmFiYmVuLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKiBGb3IgbGljZW5zaW5nLCBzZWUgTElDRU5TRS5tZC4KICovCgovKioKICogQG1vZHVsZSB1aS9wYW5lbC9iYWxsb29uL2JhbGxvb25wYW5lbHZpZXcKICovCmltcG9ydCBWaWV3IGZyb20gJy4uLy4uL3ZpZXcnOwppbXBvcnQgeyBnZXRPcHRpbWFsUG9zaXRpb24gfSBmcm9tICdAY2tlZGl0b3IvY2tlZGl0b3I1LXV0aWxzL3NyYy9kb20vcG9zaXRpb24nOwppbXBvcnQgaXNSYW5nZSBmcm9tICdAY2tlZGl0b3IvY2tlZGl0b3I1LXV0aWxzL3NyYy9kb20vaXNyYW5nZSc7CmltcG9ydCB0b1VuaXQgZnJvbSAnQGNrZWRpdG9yL2NrZWRpdG9yNS11dGlscy9zcmMvZG9tL3RvdW5pdCc7CmltcG9ydCBnbG9iYWwgZnJvbSAnQGNrZWRpdG9yL2NrZWRpdG9yNS11dGlscy9zcmMvZG9tL2dsb2JhbCc7CmltcG9ydCB7IGlzRWxlbWVudCB9IGZyb20gJ2xvZGFzaC1lcyc7CmltcG9ydCAnLi4vLi4vLi4vdGhlbWUvY29tcG9uZW50cy9wYW5lbC9iYWxsb29ucGFuZWwuY3NzJzsKY29uc3QgdG9QeCA9IHRvVW5pdCgncHgnKTsKY29uc3QgZGVmYXVsdExpbWl0ZXJFbGVtZW50ID0gZ2xvYmFsLmRvY3VtZW50LmJvZHk7Ci8qKgogKiBUaGUgYmFsbG9vbiBwYW5lbCB2aWV3IGNsYXNzLgogKgogKiBBIGZsb2F0aW5nIGNvbnRhaW5lciB3aGljaCBjYW4KICoge0BsaW5rIG1vZHVsZTp1aS9wYW5lbC9iYWxsb29uL2JhbGxvb25wYW5lbHZpZXd+QmFsbG9vblBhbmVsVmlldyNwaW4gcGlufSB0byBhbnkKICoge0BsaW5rIG1vZHVsZTp1dGlscy9kb20vcG9zaXRpb25+T3B0aW9ucyN0YXJnZXQgdGFyZ2V0fSBpbiB0aGUgRE9NIGFuZCByZW1haW4gaW4gdGhhdCBwb3NpdGlvbgogKiBlLmcuIHdoZW4gdGhlIHdlYiBwYWdlIGlzIHNjcm9sbGVkLgogKgogKiBUaGUgYmFsbG9vbiBwYW5lbCBjYW4gYmUgdXNlZCB0byBkaXNwbGF5IGNvbnRleHR1YWwsIG5vbi1ibG9ja2luZyBVSSBsaWtlIGZvcm1zLCB0b29sYmFycyBhbmQKICogdGhlIGxpa2UgaW4gaXRzIHtAbGluayBtb2R1bGU6dWkvcGFuZWwvYmFsbG9vbi9iYWxsb29ucGFuZWx2aWV3fkJhbGxvb25QYW5lbFZpZXcjY29udGVudH0gdmlldwogKiBjb2xsZWN0aW9uLgogKgogKiBUaGVyZSBpcyBhIG51bWJlciBvZiB7QGxpbmsgbW9kdWxlOnVpL3BhbmVsL2JhbGxvb24vYmFsbG9vbnBhbmVsdmlld35CYWxsb29uUGFuZWxWaWV3LmRlZmF1bHRQb3NpdGlvbnN9CiAqIHRoYXQgdGhlIGJhbGxvb24gY2FuIHVzZSwgYXV0b21hdGljYWxseSBzd2l0Y2hpbmcgZnJvbSBvbmUgdG8gYW5vdGhlciB3aGVuIHRoZSB2aWV3cG9ydCBzcGFjZSBiZWNvbWVzCiAqIHNjYXJjZSB0byBrZWVwIHRoZSBiYWxsb29uIHZpc2libGUgdG8gdGhlIHVzZXIgYXMgbG9uZyBhcyBpdCBpcyBwb3NzaWJsZS4gVGhlIGJhbGxvb24gd2lsbCBhbHNvCiAqIGFjY2VwdCBhbnkgY3VzdG9tIHBvc2l0aW9uIHNldCBwcm92aWRlZCBieSB0aGUgdXNlciBjb21wYXRpYmxlIHdpdGggdGhlCiAqIHtAbGluayBtb2R1bGU6dXRpbHMvZG9tL3Bvc2l0aW9ufk9wdGlvbnMgb3B0aW9uc30uCiAqCiAqCQljb25zdCBwYW5lbCA9IG5ldyBCYWxsb29uUGFuZWxWaWV3KCBsb2NhbGUgKTsKICoJCWNvbnN0IGNoaWxkVmlldyA9IG5ldyBDaGlsZFZpZXcoKTsKICoJCWNvbnN0IHBvc2l0aW9ucyA9IEJhbGxvb25QYW5lbFZpZXcuZGVmYXVsdFBvc2l0aW9uczsKICoKICoJCXBhbmVsLnJlbmRlcigpOwogKgogKgkJLy8gQWRkIGEgY2hpbGQgdmlldyB0byB0aGUgcGFuZWwncyBjb250ZW50IGNvbGxlY3Rpb24uCiAqCQlwYW5lbC5jb250ZW50LmFkZCggY2hpbGRWaWV3ICk7CiAqCiAqCQkvLyBTdGFydCBwaW5uaW5nIHRoZSBwYW5lbCB0byBhbiBlbGVtZW50IHdpdGggdGhlICJ0YXJnZXQiIGlkIERPTS4KICoJCS8vIFRoZSBiYWxsb29uIHdpbGwgcmVtYWluIHBpbm5lZCB1bnRpbCB1bnBpbigpIGlzIGNhbGxlZC4KICoJCXBhbmVsLnBpbiggewogKgkJCXRhcmdldDogZG9jdW1lbnQucXVlcnlTZWxlY3RvciggJyN0YXJnZXQnICksCiAqCQkJcG9zaXRpb25zOiBbCiAqCQkJCXBvc2l0aW9ucy5ub3J0aEFycm93U291dGgsCiAqCQkJCXBvc2l0aW9ucy5zb3V0aEFycm93Tm9ydGgKICoJCQldCiAqCQl9ICk7CiAqCiAqIEBleHRlbmRzIG1vZHVsZTp1aS92aWV3flZpZXcKICovCgpleHBvcnQgZGVmYXVsdCBjbGFzcyBCYWxsb29uUGFuZWxWaWV3IGV4dGVuZHMgVmlldyB7CiAgLyoqCiAgICogQGluaGVyaXREb2MKICAgKi8KICBjb25zdHJ1Y3Rvcihsb2NhbGUpIHsKICAgIHN1cGVyKGxvY2FsZSk7CiAgICBjb25zdCBiaW5kID0gdGhpcy5iaW5kVGVtcGxhdGU7CiAgICAvKioKICAgICAqIFRoZSBhYnNvbHV0ZSB0b3AgcG9zaXRpb24gb2YgdGhlIGJhbGxvb24gcGFuZWwgaW4gcGl4ZWxzLgogICAgICoKICAgICAqIEBvYnNlcnZhYmxlCiAgICAgKiBAZGVmYXVsdCAwCiAgICAgKiBAbWVtYmVyIHtOdW1iZXJ9ICN0b3AKICAgICAqLwoKICAgIHRoaXMuc2V0KCd0b3AnLCAwKTsKICAgIC8qKgogICAgICogVGhlIGFic29sdXRlIGxlZnQgcG9zaXRpb24gb2YgdGhlIGJhbGxvb24gcGFuZWwgaW4gcGl4ZWxzLgogICAgICoKICAgICAqIEBvYnNlcnZhYmxlCiAgICAgKiBAZGVmYXVsdCAwCiAgICAgKiBAbWVtYmVyIHtOdW1iZXJ9ICNsZWZ0CiAgICAgKi8KCiAgICB0aGlzLnNldCgnbGVmdCcsIDApOwogICAgLyoqCiAgICAgKiBUaGUgYmFsbG9vbiBwYW5lbCdzIGN1cnJlbnQgcG9zaXRpb24uIFRoZSBwb3NpdGlvbiBuYW1lIGlzIHJlZmxlY3RlZCBpbiB0aGUgQ1NTIGNsYXNzIHNldAogICAgICogdG8gdGhlIGJhbGxvb24sIGkuZS4gYC5jay1iYWxsb29uLXBhbmVsX2Fycm93X253YCBmb3IgdGhlICJhcnJvd19udyIgcG9zaXRpb24uIFRoZSBjbGFzcwogICAgICogY29udHJvbHMgdGhlIG1pbm9yIGFzcGVjdHMgb2YgdGhlIGJhbGxvb24ncyB2aXN1YWwgYXBwZWFyYW5jZSBsaWtlIHRoZSBwbGFjZW1lbnQKICAgICAqIG9mIGFuIHtAbGluayAjd2l0aEFycm93IGFycm93fS4gVG8gc3VwcG9ydCBhIG5ldyBwb3NpdGlvbiwgYW4gYWRkaXRpb25hbCBDU1MgbXVzdCBiZSBjcmVhdGVkLgogICAgICoKICAgICAqIERlZmF1bHQgcG9zaXRpb24gbmFtZXMgY29ycmVzcG9uZCB3aXRoCiAgICAgKiB7QGxpbmsgbW9kdWxlOnVpL3BhbmVsL2JhbGxvb24vYmFsbG9vbnBhbmVsdmlld35CYWxsb29uUGFuZWxWaWV3LmRlZmF1bHRQb3NpdGlvbnN9LgogICAgICoKICAgICAqIFNlZSB0aGUge0BsaW5rICNhdHRhY2hUb30gYW5kIHtAbGluayAjcGlufSBtZXRob2RzIHRvIGxlYXJuIGFib3V0IGN1c3RvbSBiYWxsb29uIHBvc2l0aW9ucy4KICAgICAqCiAgICAgKiBAb2JzZXJ2YWJsZQogICAgICogQGRlZmF1bHQgJ2Fycm93X253JwogICAgICogQG1lbWJlciB7J2Fycm93X253J3wnYXJyb3dfbmUnfCdhcnJvd19zdyd8J2Fycm93X3NlJ30gI3Bvc2l0aW9uCiAgICAgKi8KCiAgICB0aGlzLnNldCgncG9zaXRpb24nLCAnYXJyb3dfbncnKTsKICAgIC8qKgogICAgICogQ29udHJvbHMgd2hldGhlciB0aGUgYmFsbG9vbiBwYW5lbCBpcyB2aXNpYmxlIG9yIG5vdC4KICAgICAqCiAgICAgKiBAb2JzZXJ2YWJsZQogICAgICogQGRlZmF1bHQgZmFsc2UKICAgICAqIEBtZW1iZXIge0Jvb2xlYW59ICNpc1Zpc2libGUKICAgICAqLwoKICAgIHRoaXMuc2V0KCdpc1Zpc2libGUnLCBmYWxzZSk7CiAgICAvKioKICAgICAqIENvbnRyb2xzIHdoZXRoZXIgdGhlIGJhbGxvb24gcGFuZWwgaGFzIGFuIGFycm93LiBUaGUgcHJlc2VuY2Ugb2YgdGhlIGFycm93CiAgICAgKiBpcyByZWZsZWN0ZWQgaW4gdGhlIGBjay1iYWxsb29uLXBhbmVsX3dpdGgtYXJyb3dgIENTUyBjbGFzcy4KICAgICAqCiAgICAgKiBAb2JzZXJ2YWJsZQogICAgICogQGRlZmF1bHQgdHJ1ZQogICAgICogQG1lbWJlciB7Qm9vbGVhbn0gI3dpdGhBcnJvdwogICAgICovCgogICAgdGhpcy5zZXQoJ3dpdGhBcnJvdycsIHRydWUpOwogICAgLyoqCiAgICAgKiBBbiBhZGRpdGlvbmFsIENTUyBjbGFzcyBhZGRlZCB0byB0aGUge0BsaW5rICNlbGVtZW50fS4KICAgICAqCiAgICAgKiBAb2JzZXJ2YWJsZQogICAgICogQG1lbWJlciB7U3RyaW5nfSAjY2xhc3MKICAgICAqLwoKICAgIHRoaXMuc2V0KCdjbGFzcycpOwogICAgLyoqCiAgICAgKiBBIGNhbGxiYWNrIHRoYXQgc3RhcnRzIHBpbm5pbmcgdGhlIHBhbmVsIHdoZW4ge0BsaW5rICNpc1Zpc2libGV9IGdldHMKICAgICAqIGB0cnVlYC4gVXNlZCBieSB7QGxpbmsgI3Bpbn0uCiAgICAgKgogICAgICogQHByaXZhdGUKICAgICAqIEBtZW1iZXIge0Z1bmN0aW9ufSAjX3BpbldoZW5Jc1Zpc2libGVDYWxsYmFjawogICAgICovCgogICAgLyoqCiAgICAgKiBBIGNvbGxlY3Rpb24gb2YgdGhlIGNoaWxkIHZpZXdzIHRoYXQgY3JlYXRlcyB0aGUgYmFsbG9vbiBwYW5lbCBjb250ZW50cy4KICAgICAqCiAgICAgKiBAcmVhZG9ubHkKICAgICAqIEBtZW1iZXIge21vZHVsZTp1aS92aWV3Y29sbGVjdGlvbn5WaWV3Q29sbGVjdGlvbn0KICAgICAqLwoKICAgIHRoaXMuY29udGVudCA9IHRoaXMuY3JlYXRlQ29sbGVjdGlvbigpOwogICAgdGhpcy5zZXRUZW1wbGF0ZSh7CiAgICAgIHRhZzogJ2RpdicsCiAgICAgIGF0dHJpYnV0ZXM6IHsKICAgICAgICBjbGFzczogWydjaycsICdjay1iYWxsb29uLXBhbmVsJywgYmluZC50bygncG9zaXRpb24nLCB2YWx1ZSA9PiBgY2stYmFsbG9vbi1wYW5lbF8ke3ZhbHVlfWApLCBiaW5kLmlmKCdpc1Zpc2libGUnLCAnY2stYmFsbG9vbi1wYW5lbF92aXNpYmxlJyksIGJpbmQuaWYoJ3dpdGhBcnJvdycsICdjay1iYWxsb29uLXBhbmVsX3dpdGgtYXJyb3cnKSwgYmluZC50bygnY2xhc3MnKV0sCiAgICAgICAgc3R5bGU6IHsKICAgICAgICAgIHRvcDogYmluZC50bygndG9wJywgdG9QeCksCiAgICAgICAgICBsZWZ0OiBiaW5kLnRvKCdsZWZ0JywgdG9QeCkKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGNoaWxkcmVuOiB0aGlzLmNvbnRlbnQKICAgIH0pOwogIH0KICAvKioKICAgKiBTaG93cyB0aGUgcGFuZWwuCiAgICoKICAgKiBTZWUge0BsaW5rICNpc1Zpc2libGV9LgogICAqLwoKCiAgc2hvdygpIHsKICAgIHRoaXMuaXNWaXNpYmxlID0gdHJ1ZTsKICB9CiAgLyoqCiAgICogSGlkZXMgdGhlIHBhbmVsLgogICAqCiAgICogU2VlIHtAbGluayAjaXNWaXNpYmxlfS4KICAgKi8KCgogIGhpZGUoKSB7CiAgICB0aGlzLmlzVmlzaWJsZSA9IGZhbHNlOwogIH0KICAvKioKICAgKiBBdHRhY2hlcyB0aGUgcGFuZWwgdG8gYSBzcGVjaWZpZWQge0BsaW5rIG1vZHVsZTp1dGlscy9kb20vcG9zaXRpb25+T3B0aW9ucyN0YXJnZXR9IHdpdGggYQogICAqIHNtYXJ0IHBvc2l0aW9uaW5nIGhldXJpc3RpY3MgdGhhdCBjaG9vc2VzIGZyb20gYXZhaWxhYmxlIHBvc2l0aW9ucyB0byBtYWtlIHN1cmUgdGhlIHBhbmVsCiAgICogaXMgdmlzaWJsZSB0byB0aGUgdXNlciBpLmUuIHdpdGhpbiB0aGUgbGltaXRzIG9mIHRoZSB2aWV3cG9ydC4KICAgKgogICAqIFRoaXMgbWV0aG9kIGFjY2VwdHMgY29uZmlndXJhdGlvbiB7QGxpbmsgbW9kdWxlOnV0aWxzL2RvbS9wb3NpdGlvbn5PcHRpb25zIG9wdGlvbnN9CiAgICogdG8gc2V0IHRoZSBgdGFyZ2V0YCwgb3B0aW9uYWwgYGxpbWl0ZXJgIGFuZCBgcG9zaXRpb25zYCB0aGUgYmFsbG9vbiBzaG91bGQgY2hvb3NlIGZyb20uCiAgICoKICAgKgkJY29uc3QgcGFuZWwgPSBuZXcgQmFsbG9vblBhbmVsVmlldyggbG9jYWxlICk7CiAgICoJCWNvbnN0IHBvc2l0aW9ucyA9IEJhbGxvb25QYW5lbFZpZXcuZGVmYXVsdFBvc2l0aW9uczsKICAgKgogICAqCQlwYW5lbC5yZW5kZXIoKTsKICAgKgogICAqCQkvLyBBdHRhY2ggdGhlIHBhbmVsIHRvIGFuIGVsZW1lbnQgd2l0aCB0aGUgInRhcmdldCIgaWQgRE9NLgogICAqCQlwYW5lbC5hdHRhY2hUbyggewogICAqCQkJdGFyZ2V0OiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCAnI3RhcmdldCcgKSwKICAgKgkJCXBvc2l0aW9uczogWwogICAqCQkJCXBvc2l0aW9ucy5ub3J0aEFycm93U291dGgsCiAgICoJCQkJcG9zaXRpb25zLnNvdXRoQXJyb3dOb3J0aAogICAqCQkJXQogICAqCQl9ICk7CiAgICoKICAgKiAqKk5vdGUqKjogQXR0YWNoaW5nIHRoZSBwYW5lbCB3aWxsIGFsc28gYXV0b21hdGljYWxseSB7QGxpbmsgI3Nob3d9IGl0LgogICAqCiAgICogKipOb3RlKio6IEFuIGF0dGFjaGVkIHBhbmVsIHdpbGwgbm90IGZvbGxvdyBpdHMgdGFyZ2V0IHdoZW4gdGhlIHdpbmRvdyBpcyBzY3JvbGxlZCBvciByZXNpemVkLgogICAqIFNlZSB0aGUge0BsaW5rICNwaW59IG1ldGhvZCBmb3IgYSBtb3JlIHBlcm1hbmVudCBwb3NpdGlvbmluZyBzdHJhdGVneS4KICAgKgogICAqIEBwYXJhbSB7bW9kdWxlOnV0aWxzL2RvbS9wb3NpdGlvbn5PcHRpb25zfSBvcHRpb25zIFBvc2l0aW9uaW5nIG9wdGlvbnMgY29tcGF0aWJsZSB3aXRoCiAgICoge0BsaW5rIG1vZHVsZTp1dGlscy9kb20vcG9zaXRpb25+Z2V0T3B0aW1hbFBvc2l0aW9ufS4gRGVmYXVsdCBgcG9zaXRpb25zYCBhcnJheSBpcwogICAqIHtAbGluayBtb2R1bGU6dWkvcGFuZWwvYmFsbG9vbi9iYWxsb29ucGFuZWx2aWV3fkJhbGxvb25QYW5lbFZpZXcuZGVmYXVsdFBvc2l0aW9uc30uCiAgICovCgoKICBhdHRhY2hUbyhvcHRpb25zKSB7CiAgICB0aGlzLnNob3coKTsKICAgIGNvbnN0IGRlZmF1bHRQb3NpdGlvbnMgPSBCYWxsb29uUGFuZWxWaWV3LmRlZmF1bHRQb3NpdGlvbnM7CiAgICBjb25zdCBwb3NpdGlvbk9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHt9LCB7CiAgICAgIGVsZW1lbnQ6IHRoaXMuZWxlbWVudCwKICAgICAgcG9zaXRpb25zOiBbZGVmYXVsdFBvc2l0aW9ucy5zb3V0aEFycm93Tm9ydGgsIGRlZmF1bHRQb3NpdGlvbnMuc291dGhBcnJvd05vcnRoV2VzdCwgZGVmYXVsdFBvc2l0aW9ucy5zb3V0aEFycm93Tm9ydGhFYXN0LCBkZWZhdWx0UG9zaXRpb25zLm5vcnRoQXJyb3dTb3V0aCwgZGVmYXVsdFBvc2l0aW9ucy5ub3J0aEFycm93U291dGhXZXN0LCBkZWZhdWx0UG9zaXRpb25zLm5vcnRoQXJyb3dTb3V0aEVhc3RdLAogICAgICBsaW1pdGVyOiBkZWZhdWx0TGltaXRlckVsZW1lbnQsCiAgICAgIGZpdEluVmlld3BvcnQ6IHRydWUKICAgIH0sIG9wdGlvbnMpOwoKICAgIGNvbnN0IG9wdGltYWxQb3NpdGlvbiA9IEJhbGxvb25QYW5lbFZpZXcuX2dldE9wdGltYWxQb3NpdGlvbihwb3NpdGlvbk9wdGlvbnMpOyAvLyBVc3VhbGx5IGJyb3dzZXJzIG1ha2Ugc29tZSBwcm9ibGVtcyB3aXRoIHN1cGVyIGFjY3VyYXRlIHZhbHVlcyBsaWtlIDEwNC4zNDVweAogICAgLy8gc28gaXQgaXMgYmV0dGVyIHRvIHVzZSBpbnQgdmFsdWVzLgoKCiAgICBjb25zdCBsZWZ0ID0gcGFyc2VJbnQob3B0aW1hbFBvc2l0aW9uLmxlZnQpOwogICAgY29uc3QgdG9wID0gcGFyc2VJbnQob3B0aW1hbFBvc2l0aW9uLnRvcCk7CiAgICBjb25zdCBwb3NpdGlvbiA9IG9wdGltYWxQb3NpdGlvbi5uYW1lOwogICAgT2JqZWN0LmFzc2lnbih0aGlzLCB7CiAgICAgIHRvcCwKICAgICAgbGVmdCwKICAgICAgcG9zaXRpb24KICAgIH0pOwogIH0KICAvKioKICAgKiBXb3JrcyB0aGUgc2FtZSB3YXkgYXMgdGhlIHtAbGluayAjYXR0YWNoVG99IG1ldGhvZCBleGNlcHQgdGhhdCB0aGUgcG9zaXRpb24gb2YgdGhlIHBhbmVsIGlzCiAgICogY29udGludW91c2x5IHVwZGF0ZWQgd2hlbjoKICAgKgogICAqICogYW55IGFuY2VzdG9yIG9mIHRoZSB7QGxpbmsgbW9kdWxlOnV0aWxzL2RvbS9wb3NpdGlvbn5PcHRpb25zI3RhcmdldH0KICAgKiBvciB7QGxpbmsgbW9kdWxlOnV0aWxzL2RvbS9wb3NpdGlvbn5PcHRpb25zI2xpbWl0ZXJ9IGlzIHNjcm9sbGVkLAogICAqICogdGhlIGJyb3dzZXIgd2luZG93IGdldHMgcmVzaXplZCBvciBzY3JvbGxlZC4KICAgKgogICAqIFRoYW5rcyB0byB0aGF0LCB0aGUgcGFuZWwgYWx3YXlzIHN0aWNrcyB0byB0aGUge0BsaW5rIG1vZHVsZTp1dGlscy9kb20vcG9zaXRpb25+T3B0aW9ucyN0YXJnZXR9CiAgICogYW5kIGlzIGltbXVuZSB0byB0aGUgY2hhbmdpbmcgZW52aXJvbm1lbnQuCiAgICoKICAgKgkJY29uc3QgcGFuZWwgPSBuZXcgQmFsbG9vblBhbmVsVmlldyggbG9jYWxlICk7CiAgICoJCWNvbnN0IHBvc2l0aW9ucyA9IEJhbGxvb25QYW5lbFZpZXcuZGVmYXVsdFBvc2l0aW9uczsKICAgKgogICAqCQlwYW5lbC5yZW5kZXIoKTsKICAgKgogICAqCQkvLyBQaW4gdGhlIHBhbmVsIHRvIGFuIGVsZW1lbnQgd2l0aCB0aGUgInRhcmdldCIgaWQgRE9NLgogICAqCQlwYW5lbC5waW4oIHsKICAgKgkJCXRhcmdldDogZG9jdW1lbnQucXVlcnlTZWxlY3RvciggJyN0YXJnZXQnICksCiAgICoJCQlwb3NpdGlvbnM6IFsKICAgKgkJCQlwb3NpdGlvbnMubm9ydGhBcnJvd1NvdXRoLAogICAqCQkJCXBvc2l0aW9ucy5zb3V0aEFycm93Tm9ydGgKICAgKgkJCV0KICAgKgkJfSApOwogICAqCiAgICogVG8gbGVhdmUgdGhlIHBpbm5lZCBzdGF0ZSwgdXNlIHRoZSB7QGxpbmsgI3VucGlufSBtZXRob2QuCiAgICoKICAgKiAqKk5vdGUqKjogUGlubmluZyB0aGUgcGFuZWwgd2lsbCBhbHNvIGF1dG9tYXRpY2FsbHkge0BsaW5rICNzaG93fSBpdC4KICAgKgogICAqIEBwYXJhbSB7bW9kdWxlOnV0aWxzL2RvbS9wb3NpdGlvbn5PcHRpb25zfSBvcHRpb25zIFBvc2l0aW9uaW5nIG9wdGlvbnMgY29tcGF0aWJsZSB3aXRoCiAgICoge0BsaW5rIG1vZHVsZTp1dGlscy9kb20vcG9zaXRpb25+Z2V0T3B0aW1hbFBvc2l0aW9ufS4gRGVmYXVsdCBgcG9zaXRpb25zYCBhcnJheSBpcwogICAqIHtAbGluayBtb2R1bGU6dWkvcGFuZWwvYmFsbG9vbi9iYWxsb29ucGFuZWx2aWV3fkJhbGxvb25QYW5lbFZpZXcuZGVmYXVsdFBvc2l0aW9uc30uCiAgICovCgoKICBwaW4ob3B0aW9ucykgewogICAgdGhpcy51bnBpbigpOwoKICAgIHRoaXMuX3BpbldoZW5Jc1Zpc2libGVDYWxsYmFjayA9ICgpID0+IHsKICAgICAgaWYgKHRoaXMuaXNWaXNpYmxlKSB7CiAgICAgICAgdGhpcy5fc3RhcnRQaW5uaW5nKG9wdGlvbnMpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuX3N0b3BQaW5uaW5nKCk7CiAgICAgIH0KICAgIH07CgogICAgdGhpcy5fc3RhcnRQaW5uaW5nKG9wdGlvbnMpOyAvLyBDb250cm9sIHRoZSBzdGF0ZSBvZiB0aGUgbGlzdGVuZXJzIGRlcGVuZGluZyBvbiB3aGV0aGVyIHRoZSBwYW5lbCBpcyB2aXNpYmxlCiAgICAvLyBvciBub3QuCiAgICAvLyBUT0RPOiBVc2Ugb24oKSAoaHR0cHM6Ly9naXRodWIuY29tL2NrZWRpdG9yL2NrZWRpdG9yNS11dGlscy9pc3N1ZXMvMTQ0KS4KCgogICAgdGhpcy5saXN0ZW5Ubyh0aGlzLCAnY2hhbmdlOmlzVmlzaWJsZScsIHRoaXMuX3BpbldoZW5Jc1Zpc2libGVDYWxsYmFjayk7CiAgfQogIC8qKgogICAqIFN0b3BzIHBpbm5pbmcgdGhlIHBhbmVsLCBhcyBzZXQgdXAgYnkge0BsaW5rICNwaW59LgogICAqLwoKCiAgdW5waW4oKSB7CiAgICBpZiAodGhpcy5fcGluV2hlbklzVmlzaWJsZUNhbGxiYWNrKSB7CiAgICAgIC8vIERlYWN0aXZhdGUgbGlzdGVuZXJzIGF0dGFjaGVkIGJ5IHBpbigpLgogICAgICB0aGlzLl9zdG9wUGlubmluZygpOyAvLyBEZWFjdGl2YXRlIHRoZSBwYW5lbCBwaW4oKSBjb250cm9sIGxvZ2ljLgogICAgICAvLyBUT0RPOiBVc2Ugb2ZmKCkgKGh0dHBzOi8vZ2l0aHViLmNvbS9ja2VkaXRvci9ja2VkaXRvcjUtdXRpbHMvaXNzdWVzLzE0NCkuCgoKICAgICAgdGhpcy5zdG9wTGlzdGVuaW5nKHRoaXMsICdjaGFuZ2U6aXNWaXNpYmxlJywgdGhpcy5fcGluV2hlbklzVmlzaWJsZUNhbGxiYWNrKTsKICAgICAgdGhpcy5fcGluV2hlbklzVmlzaWJsZUNhbGxiYWNrID0gbnVsbDsKICAgICAgdGhpcy5oaWRlKCk7CiAgICB9CiAgfQogIC8qKgogICAqIFN0YXJ0cyBtYW5hZ2luZyB0aGUgcGlubmVkIHN0YXRlIG9mIHRoZSBwYW5lbC4gU2VlIHtAbGluayAjcGlufS4KICAgKgogICAqIEBwcml2YXRlCiAgICogQHBhcmFtIHttb2R1bGU6dXRpbHMvZG9tL3Bvc2l0aW9ufk9wdGlvbnN9IG9wdGlvbnMgUG9zaXRpb25pbmcgb3B0aW9ucyBjb21wYXRpYmxlIHdpdGgKICAgKiB7QGxpbmsgbW9kdWxlOnV0aWxzL2RvbS9wb3NpdGlvbn5nZXRPcHRpbWFsUG9zaXRpb259LgogICAqLwoKCiAgX3N0YXJ0UGlubmluZyhvcHRpb25zKSB7CiAgICB0aGlzLmF0dGFjaFRvKG9wdGlvbnMpOwogICAgY29uc3QgdGFyZ2V0RWxlbWVudCA9IGdldERvbUVsZW1lbnQob3B0aW9ucy50YXJnZXQpOwogICAgY29uc3QgbGltaXRlckVsZW1lbnQgPSBvcHRpb25zLmxpbWl0ZXIgPyBnZXREb21FbGVtZW50KG9wdGlvbnMubGltaXRlcikgOiBkZWZhdWx0TGltaXRlckVsZW1lbnQ7IC8vIFRoZW4gd2UgbmVlZCB0byBsaXN0ZW4gb24gc2Nyb2xsIGV2ZW50IG9mIGVueSBlbGVtZW50IGluIHRoZSBkb2N1bWVudC4KCiAgICB0aGlzLmxpc3RlblRvKGdsb2JhbC5kb2N1bWVudCwgJ3Njcm9sbCcsIChldnQsIGRvbUV2dCkgPT4gewogICAgICBjb25zdCBzY3JvbGxUYXJnZXQgPSBkb21FdnQudGFyZ2V0OyAvLyBUaGUgcG9zaXRpb24gbmVlZHMgdG8gYmUgdXBkYXRlZCBpZiB0aGUgcG9zaXRpb25pbmcgdGFyZ2V0IGlzIHdpdGhpbiB0aGUgc2Nyb2xsZWQgZWxlbWVudC4KCiAgICAgIGNvbnN0IGlzV2l0aGluU2Nyb2xsVGFyZ2V0ID0gdGFyZ2V0RWxlbWVudCAmJiBzY3JvbGxUYXJnZXQuY29udGFpbnModGFyZ2V0RWxlbWVudCk7IC8vIFRoZSBwb3NpdGlvbiBuZWVkcyB0byBiZSB1cGRhdGVkIGlmIHRoZSBwb3NpdGlvbmluZyBsaW1pdGVyIGlzIHdpdGhpbiB0aGUgc2Nyb2xsZWQgZWxlbWVudC4KCiAgICAgIGNvbnN0IGlzTGltaXRlcldpdGhpblNjcm9sbFRhcmdldCA9IGxpbWl0ZXJFbGVtZW50ICYmIHNjcm9sbFRhcmdldC5jb250YWlucyhsaW1pdGVyRWxlbWVudCk7IC8vIFRoZSBwb3NpdGlvbmluZyB0YXJnZXQgYW5kL29yIGxpbWl0ZXIgY2FuIGJlIGEgUmVjdCwgb2JqZWN0IGV0Yy4uCiAgICAgIC8vIFRoZXJlJ3Mgbm8gd2F5IHRvIG9wdGltaXplIHRoZSBsaXN0ZW5lciB0aGVuLgoKICAgICAgaWYgKGlzV2l0aGluU2Nyb2xsVGFyZ2V0IHx8IGlzTGltaXRlcldpdGhpblNjcm9sbFRhcmdldCB8fCAhdGFyZ2V0RWxlbWVudCB8fCAhbGltaXRlckVsZW1lbnQpIHsKICAgICAgICB0aGlzLmF0dGFjaFRvKG9wdGlvbnMpOwogICAgICB9CiAgICB9LCB7CiAgICAgIHVzZUNhcHR1cmU6IHRydWUKICAgIH0pOyAvLyBXZSBuZWVkIHRvIGxpc3RlbiBvbiB3aW5kb3cgcmVzaXplIGV2ZW50IGFuZCB1cGRhdGUgcG9zaXRpb24uCgogICAgdGhpcy5saXN0ZW5UbyhnbG9iYWwud2luZG93LCAncmVzaXplJywgKCkgPT4gewogICAgICB0aGlzLmF0dGFjaFRvKG9wdGlvbnMpOwogICAgfSk7CiAgfQogIC8qKgogICAqIFN0b3BzIG1hbmFnaW5nIHRoZSBwaW5uZWQgc3RhdGUgb2YgdGhlIHBhbmVsLiBTZWUge0BsaW5rICNwaW59LgogICAqCiAgICogQHByaXZhdGUKICAgKi8KCgogIF9zdG9wUGlubmluZygpIHsKICAgIHRoaXMuc3RvcExpc3RlbmluZyhnbG9iYWwuZG9jdW1lbnQsICdzY3JvbGwnKTsKICAgIHRoaXMuc3RvcExpc3RlbmluZyhnbG9iYWwud2luZG93LCAncmVzaXplJyk7CiAgfQoKfSAvLyBSZXR1cm5zIHRoZSBET00gZWxlbWVudCBmb3IgZ2l2ZW4gb2JqZWN0IG9yIG51bGwsIGlmIHRoZXJlIGlzIG5vbmUsCi8vIGUuZy4gd2hlbiB0aGUgcGFzc2VkIG9iamVjdCBpcyBhIFJlY3QgaW5zdGFuY2Ugb3Igc28uCi8vCi8vIEBwcml2YXRlCi8vIEBwYXJhbSB7Kn0gb2JqZWN0Ci8vIEByZXR1cm5zIHtIVE1MRWxlbWVudHxudWxsfQoKZnVuY3Rpb24gZ2V0RG9tRWxlbWVudChvYmplY3QpIHsKICBpZiAoaXNFbGVtZW50KG9iamVjdCkpIHsKICAgIHJldHVybiBvYmplY3Q7CiAgfQoKICBpZiAoaXNSYW5nZShvYmplY3QpKSB7CiAgICByZXR1cm4gb2JqZWN0LmNvbW1vbkFuY2VzdG9yQ29udGFpbmVyOwogIH0KCiAgaWYgKHR5cGVvZiBvYmplY3QgPT0gJ2Z1bmN0aW9uJykgewogICAgcmV0dXJuIGdldERvbUVsZW1lbnQob2JqZWN0KCkpOwogIH0KCiAgcmV0dXJuIG51bGw7Cn0KLyoqCiAqIEEgaG9yaXpvbnRhbCBvZmZzZXQgb2YgdGhlIGFycm93IHRpcCBmcm9tIHRoZSBlZGdlIG9mIHRoZSBiYWxsb29uLiBDb250cm9sbGVkIGJ5IENTUy4KICoKICoJCSArLS0tLS18LS0tLS0tLS0tLi4uCiAqCQkgfCAgICAgfAogKgkJIHwgICAgIHwKICoJCSB8ICAgICB8CiAqCQkgfCAgICAgfAogKgkJICstLSsgIHwgICstLS0tLS0uLi4KICoJCSAgICAgXCB8IC8KICoJCSAgICAgIFx8LwogKgkgICAgPnwtLS0tLXw8LS0tLS0tLS0tLS0tLS0tLSBob3Jpem9udGFsIG9mZnNldAogKgogKiBAZGVmYXVsdCAzMAogKiBAbWVtYmVyIHtOdW1iZXJ9IG1vZHVsZTp1aS9wYW5lbC9iYWxsb29uL2JhbGxvb25wYW5lbHZpZXd+QmFsbG9vblBhbmVsVmlldy5hcnJvd0hvcml6b250YWxPZmZzZXQKICovCgoKQmFsbG9vblBhbmVsVmlldy5hcnJvd0hvcml6b250YWxPZmZzZXQgPSAyNTsKLyoqCiAqIEEgdmVydGljYWwgb2Zmc2V0IG9mIHRoZSBhcnJvdyBmcm9tIHRoZSBlZGdlIG9mIHRoZSBiYWxsb29uLiBDb250cm9sbGVkIGJ5IENTUy4KICoKICoJCSArLS0tLS0tLS0tLS0tLS4uLgogKgkJIHwKICoJCSB8CiAqCQkgfCAgICAgICAgICAgICAgICAgICAgICAvLS0gdmVydGljYWwgb2Zmc2V0CiAqCQkgfCAgICAgICAgICAgICAgICAgICAgIFYKICoJCSArLS0rICAgICstLS0tLS4uLiAgICAtLS0tLS0tLS0KICoJCSAgICAgXCAgLyAgICAgICAgICAgICAgfAogKgkJICAgICAgXC8gICAgICAgICAgICAgICB8CiAqCQktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAqCQkgICAgICAgICAgICAgICAgICAgICAgIF4KICoKICogQGRlZmF1bHQgMTUKICogQG1lbWJlciB7TnVtYmVyfSBtb2R1bGU6dWkvcGFuZWwvYmFsbG9vbi9iYWxsb29ucGFuZWx2aWV3fkJhbGxvb25QYW5lbFZpZXcuYXJyb3dWZXJ0aWNhbE9mZnNldAogKi8KCkJhbGxvb25QYW5lbFZpZXcuYXJyb3dWZXJ0aWNhbE9mZnNldCA9IDEwOwovKioKICogRnVuY3Rpb24gdXNlZCB0byBjYWxjdWxhdGUgdGhlIG9wdGltYWwgcG9zaXRpb24gZm9yIHRoZSBiYWxsb29uLgogKgogKiBAcHJvdGVjdGVkCiAqIEBtZW1iZXIge0Z1bmN0aW9ufSBtb2R1bGU6dWkvcGFuZWwvYmFsbG9vbi9iYWxsb29ucGFuZWx2aWV3fkJhbGxvb25QYW5lbFZpZXcuX2dldE9wdGltYWxQb3NpdGlvbgogKi8KCkJhbGxvb25QYW5lbFZpZXcuX2dldE9wdGltYWxQb3NpdGlvbiA9IGdldE9wdGltYWxQb3NpdGlvbjsKLyoqCiAqIEEgZGVmYXVsdCBzZXQgb2YgcG9zaXRpb25pbmcgZnVuY3Rpb25zIHVzZWQgYnkgdGhlIGJhbGxvb24gcGFuZWwgdmlldwogKiB3aGVuIGF0dGFjaGluZyB1c2luZyB0aGUge0BsaW5rIG1vZHVsZTp1aS9wYW5lbC9iYWxsb29uL2JhbGxvb25wYW5lbHZpZXd+QmFsbG9vblBhbmVsVmlldyNhdHRhY2hUb30gbWV0aG9kLgogKgogKiBUaGUgYXZhaWxhYmxlIHBvc2l0aW9uaW5nIGZ1bmN0aW9ucyBhcmUgYXMgZm9sbG93czoKICoKICogKipOb3J0aCoqCiAqCiAqICogYG5vcnRoQXJyb3dTb3V0aGAKICoKICogCQkrLS0tLS0tLS0tLS0tLS0tLS0rCiAqIAkJfCAgICAgQmFsbG9vbiAgICAgfAogKiAJCSstLS0tLS0tLS0tLS0tLS0tLSsKICogCQkgICAgICAgICBWCiAqIAkJICAgIFsgVGFyZ2V0IF0KICoKICogKiBgbm9ydGhBcnJvd1NvdXRoRWFzdGAKICoKICogCQkrLS0tLS0tLS0tLS0tLS0tLS0rCiAqIAkJfCAgICAgQmFsbG9vbiAgICAgfAogKiAJCSstLS0tLS0tLS0tLS0tLS0tLSsKICogCQkgICAgICAgICAgICAgICBWCiAqIAkJICAgICAgICAgIFsgVGFyZ2V0IF0KICoKICogKiBgbm9ydGhBcnJvd1NvdXRoV2VzdGAKICoKICogCQkgICstLS0tLS0tLS0tLS0tLS0tLSsKICogCQkgIHwgICAgIEJhbGxvb24gICAgIHwKICogCQkgICstLS0tLS0tLS0tLS0tLS0tLSsKICogCQkgICAgIFYKICogCQlbIFRhcmdldCBdCiAqCiAqICoqTm9ydGggd2VzdCoqCiAqCiAqICogYG5vcnRoV2VzdEFycm93U291dGhgCiAqCiAqIAkJKy0tLS0tLS0tLS0tLS0tLS0tKwogKiAJCXwgICAgIEJhbGxvb24gICAgIHwKICogCQkrLS0tLS0tLS0tLS0tLS0tLS0rCiAqIAkJICAgICAgICAgVgogKiAJCSAgICAgICAgIFsgVGFyZ2V0IF0KICoKICogKiBgbm9ydGhXZXN0QXJyb3dTb3V0aFdlc3RgCiAqCiAqIAkJKy0tLS0tLS0tLS0tLS0tLS0tKwogKiAJCXwgICAgIEJhbGxvb24gICAgIHwKICogCQkrLS0tLS0tLS0tLS0tLS0tLS0rCiAqIAkJICAgVgogKiAJCSAgIFsgVGFyZ2V0IF0KICoKICogKiBgbm9ydGhXZXN0QXJyb3dTb3V0aEVhc3RgCiAqCiAqIAkJKy0tLS0tLS0tLS0tLS0tLS0tKwogKiAJCXwgICAgIEJhbGxvb24gICAgIHwKICogCQkrLS0tLS0tLS0tLS0tLS0tLS0rCiAqIAkJICAgICAgICAgICAgICAgVgogKiAJCSAgICAgICAgICAgICAgIFsgVGFyZ2V0IF0KICoKICogKipOb3J0aCBlYXN0KioKICoKICogKiBgbm9ydGhFYXN0QXJyb3dTb3V0aGAKICoKICogCQkrLS0tLS0tLS0tLS0tLS0tLS0rCiAqIAkJfCAgICAgQmFsbG9vbiAgICAgfAogKiAJCSstLS0tLS0tLS0tLS0tLS0tLSsKICogCQkgICAgICAgICBWCiAqIAkJWyBUYXJnZXQgXQogKgogKiAqIGBub3J0aEVhc3RBcnJvd1NvdXRoRWFzdGAKICoKICogCQkrLS0tLS0tLS0tLS0tLS0tLS0rCiAqIAkJfCAgICAgQmFsbG9vbiAgICAgfAogKiAJCSstLS0tLS0tLS0tLS0tLS0tLSsKICogCQkgICAgICAgICAgICAgICBWCiAqIAkJICAgICAgWyBUYXJnZXQgXQogKgogKiAqIGBub3J0aEVhc3RBcnJvd1NvdXRoV2VzdGAKICoKICogCQkgICAgICArLS0tLS0tLS0tLS0tLS0tLS0rCiAqIAkJICAgICAgfCAgICAgQmFsbG9vbiAgICAgfAogKiAJCSAgICAgICstLS0tLS0tLS0tLS0tLS0tLSsKICogCQkgICAgICAgICBWCiAqIAkJWyBUYXJnZXQgXQogKgogKiAqKlNvdXRoKioKICoKICogKiBgc291dGhBcnJvd05vcnRoYAogKgogKgkJICAgIFsgVGFyZ2V0IF0KICoJCSAgICAgICAgIF4KICoJCSstLS0tLS0tLS0tLS0tLS0tLSsKICoJCXwgICAgIEJhbGxvb24gICAgIHwKICoJCSstLS0tLS0tLS0tLS0tLS0tLSsKICoKICogKiBgc291dGhBcnJvd05vcnRoRWFzdGAKICoKICoJCSAgICAgICAgICBbIFRhcmdldCBdCiAqCQkgICAgICAgICAgICAgICBeCiAqCQkrLS0tLS0tLS0tLS0tLS0tLS0rCiAqCQl8ICAgICBCYWxsb29uICAgICB8CiAqCQkrLS0tLS0tLS0tLS0tLS0tLS0rCiAqCiAqICogYHNvdXRoQXJyb3dOb3J0aFdlc3RgCiAqCiAqCQlbIFRhcmdldCBdCiAqCQkgICAgIF4KICoJCSAgICstLS0tLS0tLS0tLS0tLS0tLSsKICoJCSAgIHwgICAgIEJhbGxvb24gICAgIHwKICoJCSAgICstLS0tLS0tLS0tLS0tLS0tLSsKICoKICogKipTb3V0aCB3ZXN0KioKICoKICogKiBgc291dGhXZXN0QXJyb3dOb3J0aGAKICoKICoJCSAgICAgICAgIFsgVGFyZ2V0IF0KICoJCSAgICAgICAgIF4KICoJCSstLS0tLS0tLS0tLS0tLS0tLSsKICoJCXwgICAgIEJhbGxvb24gICAgIHwKICoJCSstLS0tLS0tLS0tLS0tLS0tLSsKICoKICogKiBgc291dGhXZXN0QXJyb3dOb3J0aFdlc3RgCiAqCiAqCQkgIFsgVGFyZ2V0IF0KICoJCSAgXgogKgkJKy0tLS0tLS0tLS0tLS0tLS0tKwogKgkJfCAgICAgQmFsbG9vbiAgICAgfAogKgkJKy0tLS0tLS0tLS0tLS0tLS0tKwogKgogKiAqIGBzb3V0aFdlc3RBcnJvd05vcnRoRWFzdGAKICoKICoJCSAgICAgICAgICAgICAgIFsgVGFyZ2V0IF0KICoJCSAgICAgICAgICAgICAgIF4KICoJCSstLS0tLS0tLS0tLS0tLS0tLSsKICoJCXwgICAgIEJhbGxvb24gICAgIHwKICoJCSstLS0tLS0tLS0tLS0tLS0tLSsKICoKICogKipTb3V0aCBlYXN0KioKICoKICogKiBgc291dGhFYXN0QXJyb3dOb3J0aGAKICoKICoJCVsgVGFyZ2V0IF0KICoJCSAgICAgICAgIF4KICoJCSstLS0tLS0tLS0tLS0tLS0tLSsKICoJCXwgICAgIEJhbGxvb24gICAgIHwKICoJCSstLS0tLS0tLS0tLS0tLS0tLSsKICoKICogKiBgc291dGhFYXN0QXJyb3dOb3J0aEVhc3RgCiAqCiAqCQkgICAgICAgWyBUYXJnZXQgXQogKgkJICAgICAgICAgICAgICAgIF4KICoJCSstLS0tLS0tLS0tLS0tLS0tLSsKICoJCXwgICAgIEJhbGxvb24gICAgIHwKICoJCSstLS0tLS0tLS0tLS0tLS0tLSsKICoKICogKiBgc291dGhFYXN0QXJyb3dOb3J0aFdlc3RgCiAqCiAqCQlbIFRhcmdldCBdCiAqCQkgICAgICAgICBeCiAqCQkgICAgICAgKy0tLS0tLS0tLS0tLS0tLS0tKwogKgkJICAgICAgIHwgICAgIEJhbGxvb24gICAgIHwKICoJCSAgICAgICArLS0tLS0tLS0tLS0tLS0tLS0rCiAqCiAqIFNlZSB7QGxpbmsgbW9kdWxlOnVpL3BhbmVsL2JhbGxvb24vYmFsbG9vbnBhbmVsdmlld35CYWxsb29uUGFuZWxWaWV3I2F0dGFjaFRvfS4KICoKICogUG9zaXRpb25pbmcgZnVuY3Rpb25zIG11c3QgYmUgY29tcGF0aWJsZSB3aXRoIHtAbGluayBtb2R1bGU6dXRpbHMvZG9tL3Bvc2l0aW9uflBvc2l0aW9ufS4KICoKICogVGhlIG5hbWUgdGhhdCB0aGUgcG9zaXRpb24gZnVuY3Rpb24gcmV0dXJucyB3aWxsIGJlIHJlZmxlY3RlZCBpbiB0aGUgYmFsbG9vbiBwYW5lbCdzIGNsYXNzIHRoYXQKICogY29udHJvbHMgdGhlIHBsYWNlbWVudCBvZiB0aGUgImFycm93Ii4gU2VlIHtAbGluayAjcG9zaXRpb259IHRvIGxlYXJuIG1vcmUuCiAqCiAqIEBtZW1iZXIge09iamVjdH0gbW9kdWxlOnVpL3BhbmVsL2JhbGxvb24vYmFsbG9vbnBhbmVsdmlld35CYWxsb29uUGFuZWxWaWV3LmRlZmF1bHRQb3NpdGlvbnMKICovCgpCYWxsb29uUGFuZWxWaWV3LmRlZmF1bHRQb3NpdGlvbnMgPSB7CiAgLy8gLS0tLS0tLSBOb3J0aAogIG5vcnRoQXJyb3dTb3V0aDogKHRhcmdldFJlY3QsIGJhbGxvb25SZWN0KSA9PiAoewogICAgdG9wOiBnZXROb3J0aFRvcCh0YXJnZXRSZWN0LCBiYWxsb29uUmVjdCksCiAgICBsZWZ0OiB0YXJnZXRSZWN0LmxlZnQgKyB0YXJnZXRSZWN0LndpZHRoIC8gMiAtIGJhbGxvb25SZWN0LndpZHRoIC8gMiwKICAgIG5hbWU6ICdhcnJvd19zJwogIH0pLAogIG5vcnRoQXJyb3dTb3V0aEVhc3Q6ICh0YXJnZXRSZWN0LCBiYWxsb29uUmVjdCkgPT4gKHsKICAgIHRvcDogZ2V0Tm9ydGhUb3AodGFyZ2V0UmVjdCwgYmFsbG9vblJlY3QpLAogICAgbGVmdDogdGFyZ2V0UmVjdC5sZWZ0ICsgdGFyZ2V0UmVjdC53aWR0aCAvIDIgLSBiYWxsb29uUmVjdC53aWR0aCArIEJhbGxvb25QYW5lbFZpZXcuYXJyb3dIb3Jpem9udGFsT2Zmc2V0LAogICAgbmFtZTogJ2Fycm93X3NlJwogIH0pLAogIG5vcnRoQXJyb3dTb3V0aFdlc3Q6ICh0YXJnZXRSZWN0LCBiYWxsb29uUmVjdCkgPT4gKHsKICAgIHRvcDogZ2V0Tm9ydGhUb3AodGFyZ2V0UmVjdCwgYmFsbG9vblJlY3QpLAogICAgbGVmdDogdGFyZ2V0UmVjdC5sZWZ0ICsgdGFyZ2V0UmVjdC53aWR0aCAvIDIgLSBCYWxsb29uUGFuZWxWaWV3LmFycm93SG9yaXpvbnRhbE9mZnNldCwKICAgIG5hbWU6ICdhcnJvd19zdycKICB9KSwKICAvLyAtLS0tLS0tIE5vcnRoIHdlc3QKICBub3J0aFdlc3RBcnJvd1NvdXRoOiAodGFyZ2V0UmVjdCwgYmFsbG9vblJlY3QpID0+ICh7CiAgICB0b3A6IGdldE5vcnRoVG9wKHRhcmdldFJlY3QsIGJhbGxvb25SZWN0KSwKICAgIGxlZnQ6IHRhcmdldFJlY3QubGVmdCAtIGJhbGxvb25SZWN0LndpZHRoIC8gMiwKICAgIG5hbWU6ICdhcnJvd19zJwogIH0pLAogIG5vcnRoV2VzdEFycm93U291dGhXZXN0OiAodGFyZ2V0UmVjdCwgYmFsbG9vblJlY3QpID0+ICh7CiAgICB0b3A6IGdldE5vcnRoVG9wKHRhcmdldFJlY3QsIGJhbGxvb25SZWN0KSwKICAgIGxlZnQ6IHRhcmdldFJlY3QubGVmdCAtIEJhbGxvb25QYW5lbFZpZXcuYXJyb3dIb3Jpem9udGFsT2Zmc2V0LAogICAgbmFtZTogJ2Fycm93X3N3JwogIH0pLAogIG5vcnRoV2VzdEFycm93U291dGhFYXN0OiAodGFyZ2V0UmVjdCwgYmFsbG9vblJlY3QpID0+ICh7CiAgICB0b3A6IGdldE5vcnRoVG9wKHRhcmdldFJlY3QsIGJhbGxvb25SZWN0KSwKICAgIGxlZnQ6IHRhcmdldFJlY3QubGVmdCAtIGJhbGxvb25SZWN0LndpZHRoICsgQmFsbG9vblBhbmVsVmlldy5hcnJvd0hvcml6b250YWxPZmZzZXQsCiAgICBuYW1lOiAnYXJyb3dfc2UnCiAgfSksCiAgLy8gLS0tLS0tLSBOb3J0aCBlYXN0CiAgbm9ydGhFYXN0QXJyb3dTb3V0aDogKHRhcmdldFJlY3QsIGJhbGxvb25SZWN0KSA9PiAoewogICAgdG9wOiBnZXROb3J0aFRvcCh0YXJnZXRSZWN0LCBiYWxsb29uUmVjdCksCiAgICBsZWZ0OiB0YXJnZXRSZWN0LnJpZ2h0IC0gYmFsbG9vblJlY3Qud2lkdGggLyAyLAogICAgbmFtZTogJ2Fycm93X3MnCiAgfSksCiAgbm9ydGhFYXN0QXJyb3dTb3V0aEVhc3Q6ICh0YXJnZXRSZWN0LCBiYWxsb29uUmVjdCkgPT4gKHsKICAgIHRvcDogZ2V0Tm9ydGhUb3AodGFyZ2V0UmVjdCwgYmFsbG9vblJlY3QpLAogICAgbGVmdDogdGFyZ2V0UmVjdC5yaWdodCAtIGJhbGxvb25SZWN0LndpZHRoICsgQmFsbG9vblBhbmVsVmlldy5hcnJvd0hvcml6b250YWxPZmZzZXQsCiAgICBuYW1lOiAnYXJyb3dfc2UnCiAgfSksCiAgbm9ydGhFYXN0QXJyb3dTb3V0aFdlc3Q6ICh0YXJnZXRSZWN0LCBiYWxsb29uUmVjdCkgPT4gKHsKICAgIHRvcDogZ2V0Tm9ydGhUb3AodGFyZ2V0UmVjdCwgYmFsbG9vblJlY3QpLAogICAgbGVmdDogdGFyZ2V0UmVjdC5yaWdodCAtIEJhbGxvb25QYW5lbFZpZXcuYXJyb3dIb3Jpem9udGFsT2Zmc2V0LAogICAgbmFtZTogJ2Fycm93X3N3JwogIH0pLAogIC8vIC0tLS0tLS0gU291dGgKICBzb3V0aEFycm93Tm9ydGg6ICh0YXJnZXRSZWN0LCBiYWxsb29uUmVjdCkgPT4gKHsKICAgIHRvcDogZ2V0U291dGhUb3AodGFyZ2V0UmVjdCwgYmFsbG9vblJlY3QpLAogICAgbGVmdDogdGFyZ2V0UmVjdC5sZWZ0ICsgdGFyZ2V0UmVjdC53aWR0aCAvIDIgLSBiYWxsb29uUmVjdC53aWR0aCAvIDIsCiAgICBuYW1lOiAnYXJyb3dfbicKICB9KSwKICBzb3V0aEFycm93Tm9ydGhFYXN0OiAodGFyZ2V0UmVjdCwgYmFsbG9vblJlY3QpID0+ICh7CiAgICB0b3A6IGdldFNvdXRoVG9wKHRhcmdldFJlY3QsIGJhbGxvb25SZWN0KSwKICAgIGxlZnQ6IHRhcmdldFJlY3QubGVmdCArIHRhcmdldFJlY3Qud2lkdGggLyAyIC0gYmFsbG9vblJlY3Qud2lkdGggKyBCYWxsb29uUGFuZWxWaWV3LmFycm93SG9yaXpvbnRhbE9mZnNldCwKICAgIG5hbWU6ICdhcnJvd19uZScKICB9KSwKICBzb3V0aEFycm93Tm9ydGhXZXN0OiAodGFyZ2V0UmVjdCwgYmFsbG9vblJlY3QpID0+ICh7CiAgICB0b3A6IGdldFNvdXRoVG9wKHRhcmdldFJlY3QsIGJhbGxvb25SZWN0KSwKICAgIGxlZnQ6IHRhcmdldFJlY3QubGVmdCArIHRhcmdldFJlY3Qud2lkdGggLyAyIC0gQmFsbG9vblBhbmVsVmlldy5hcnJvd0hvcml6b250YWxPZmZzZXQsCiAgICBuYW1lOiAnYXJyb3dfbncnCiAgfSksCiAgLy8gLS0tLS0tLSBTb3V0aCB3ZXN0CiAgc291dGhXZXN0QXJyb3dOb3J0aDogKHRhcmdldFJlY3QsIGJhbGxvb25SZWN0KSA9PiAoewogICAgdG9wOiBnZXRTb3V0aFRvcCh0YXJnZXRSZWN0LCBiYWxsb29uUmVjdCksCiAgICBsZWZ0OiB0YXJnZXRSZWN0LmxlZnQgLSBiYWxsb29uUmVjdC53aWR0aCAvIDIsCiAgICBuYW1lOiAnYXJyb3dfbicKICB9KSwKICBzb3V0aFdlc3RBcnJvd05vcnRoV2VzdDogKHRhcmdldFJlY3QsIGJhbGxvb25SZWN0KSA9PiAoewogICAgdG9wOiBnZXRTb3V0aFRvcCh0YXJnZXRSZWN0LCBiYWxsb29uUmVjdCksCiAgICBsZWZ0OiB0YXJnZXRSZWN0LmxlZnQgLSBCYWxsb29uUGFuZWxWaWV3LmFycm93SG9yaXpvbnRhbE9mZnNldCwKICAgIG5hbWU6ICdhcnJvd19udycKICB9KSwKICBzb3V0aFdlc3RBcnJvd05vcnRoRWFzdDogKHRhcmdldFJlY3QsIGJhbGxvb25SZWN0KSA9PiAoewogICAgdG9wOiBnZXRTb3V0aFRvcCh0YXJnZXRSZWN0LCBiYWxsb29uUmVjdCksCiAgICBsZWZ0OiB0YXJnZXRSZWN0LmxlZnQgLSBiYWxsb29uUmVjdC53aWR0aCArIEJhbGxvb25QYW5lbFZpZXcuYXJyb3dIb3Jpem9udGFsT2Zmc2V0LAogICAgbmFtZTogJ2Fycm93X25lJwogIH0pLAogIC8vIC0tLS0tLS0gU291dGggZWFzdAogIHNvdXRoRWFzdEFycm93Tm9ydGg6ICh0YXJnZXRSZWN0LCBiYWxsb29uUmVjdCkgPT4gKHsKICAgIHRvcDogZ2V0U291dGhUb3AodGFyZ2V0UmVjdCwgYmFsbG9vblJlY3QpLAogICAgbGVmdDogdGFyZ2V0UmVjdC5yaWdodCAtIGJhbGxvb25SZWN0LndpZHRoIC8gMiwKICAgIG5hbWU6ICdhcnJvd19uJwogIH0pLAogIHNvdXRoRWFzdEFycm93Tm9ydGhFYXN0OiAodGFyZ2V0UmVjdCwgYmFsbG9vblJlY3QpID0+ICh7CiAgICB0b3A6IGdldFNvdXRoVG9wKHRhcmdldFJlY3QsIGJhbGxvb25SZWN0KSwKICAgIGxlZnQ6IHRhcmdldFJlY3QucmlnaHQgLSBiYWxsb29uUmVjdC53aWR0aCArIEJhbGxvb25QYW5lbFZpZXcuYXJyb3dIb3Jpem9udGFsT2Zmc2V0LAogICAgbmFtZTogJ2Fycm93X25lJwogIH0pLAogIHNvdXRoRWFzdEFycm93Tm9ydGhXZXN0OiAodGFyZ2V0UmVjdCwgYmFsbG9vblJlY3QpID0+ICh7CiAgICB0b3A6IGdldFNvdXRoVG9wKHRhcmdldFJlY3QsIGJhbGxvb25SZWN0KSwKICAgIGxlZnQ6IHRhcmdldFJlY3QucmlnaHQgLSBCYWxsb29uUGFuZWxWaWV3LmFycm93SG9yaXpvbnRhbE9mZnNldCwKICAgIG5hbWU6ICdhcnJvd19udycKICB9KQp9OyAvLyBSZXR1cm5zIHRoZSB0b3AgY29vcmRpbmF0ZSBmb3IgcG9zaXRpb25zIHN0YXJ0aW5nIHdpdGggYG5vcnRoKmAuCi8vCi8vIEBwcml2YXRlCi8vIEBwYXJhbSB7dXRpbHMvZG9tL3JlY3R+UmVjdH0gdGFyZ2V0UmVjdCBBIHJlY3Qgb2YgdGhlIHRhcmdldC4KLy8gQHBhcmFtIHt1dGlscy9kb20vcmVjdH5SZWN0fSBlbGVtZW50UmVjdCBBIHJlY3Qgb2YgdGhlIGJhbGxvb24uCi8vIEByZXR1cm5zIHtOdW1iZXJ9CgpmdW5jdGlvbiBnZXROb3J0aFRvcCh0YXJnZXRSZWN0LCBiYWxsb29uUmVjdCkgewogIHJldHVybiB0YXJnZXRSZWN0LnRvcCAtIGJhbGxvb25SZWN0LmhlaWdodCAtIEJhbGxvb25QYW5lbFZpZXcuYXJyb3dWZXJ0aWNhbE9mZnNldDsKfSAvLyBSZXR1cm5zIHRoZSB0b3AgY29vcmRpbmF0ZSBmb3IgcG9zaXRpb25zIHN0YXJ0aW5nIHdpdGggYHNvdXRoKmAuCi8vCi8vIEBwcml2YXRlCi8vIEBwYXJhbSB7dXRpbHMvZG9tL3JlY3R+UmVjdH0gdGFyZ2V0UmVjdCBBIHJlY3Qgb2YgdGhlIHRhcmdldC4KLy8gQHBhcmFtIHt1dGlscy9kb20vcmVjdH5SZWN0fSBlbGVtZW50UmVjdCBBIHJlY3Qgb2YgdGhlIGJhbGxvb24uCi8vIEByZXR1cm5zIHtOdW1iZXJ9CgoKZnVuY3Rpb24gZ2V0U291dGhUb3AodGFyZ2V0UmVjdCkgewogIHJldHVybiB0YXJnZXRSZWN0LmJvdHRvbSArIEJhbGxvb25QYW5lbFZpZXcuYXJyb3dWZXJ0aWNhbE9mZnNldDsKfQ=="},{"version":3,"sources":["/Users/antonyching/Desktop/project/new-builder-demo/node_modules/@ckeditor/ckeditor5-ui/src/panel/balloon/balloonpanelview.js"],"names":["View","getOptimalPosition","isRange","toUnit","global","isElement","toPx","defaultLimiterElement","document","body","BalloonPanelView","constructor","locale","bind","bindTemplate","set","content","createCollection","setTemplate","tag","attributes","class","to","value","if","style","top","left","children","show","isVisible","hide","attachTo","options","defaultPositions","positionOptions","Object","assign","element","positions","southArrowNorth","southArrowNorthWest","southArrowNorthEast","northArrowSouth","northArrowSouthWest","northArrowSouthEast","limiter","fitInViewport","optimalPosition","_getOptimalPosition","parseInt","position","name","pin","unpin","_pinWhenIsVisibleCallback","_startPinning","_stopPinning","listenTo","stopListening","targetElement","getDomElement","target","limiterElement","evt","domEvt","scrollTarget","isWithinScrollTarget","contains","isLimiterWithinScrollTarget","useCapture","window","object","commonAncestorContainer","arrowHorizontalOffset","arrowVerticalOffset","targetRect","balloonRect","getNorthTop","width","northWestArrowSouth","northWestArrowSouthWest","northWestArrowSouthEast","northEastArrowSouth","right","northEastArrowSouthEast","northEastArrowSouthWest","getSouthTop","southWestArrowNorth","southWestArrowNorthWest","southWestArrowNorthEast","southEastArrowNorth","southEastArrowNorthEast","southEastArrowNorthWest","height","bottom"],"mappings":"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","sourcesContent":["/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md.\n */\n\n/**\n * @module ui/panel/balloon/balloonpanelview\n */\n\nimport View from '../../view';\nimport { getOptimalPosition } from '@ckeditor/ckeditor5-utils/src/dom/position';\nimport isRange from '@ckeditor/ckeditor5-utils/src/dom/isrange';\nimport toUnit from '@ckeditor/ckeditor5-utils/src/dom/tounit';\nimport global from '@ckeditor/ckeditor5-utils/src/dom/global';\nimport { isElement } from 'lodash-es';\n\nimport '../../../theme/components/panel/balloonpanel.css';\n\nconst toPx = toUnit( 'px' );\nconst defaultLimiterElement = global.document.body;\n\n/**\n * The balloon panel view class.\n *\n * A floating container which can\n * {@link module:ui/panel/balloon/balloonpanelview~BalloonPanelView#pin pin} to any\n * {@link module:utils/dom/position~Options#target target} in the DOM and remain in that position\n * e.g. when the web page is scrolled.\n *\n * The balloon panel can be used to display contextual, non-blocking UI like forms, toolbars and\n * the like in its {@link module:ui/panel/balloon/balloonpanelview~BalloonPanelView#content} view\n * collection.\n *\n * There is a number of {@link module:ui/panel/balloon/balloonpanelview~BalloonPanelView.defaultPositions}\n * that the balloon can use, automatically switching from one to another when the viewport space becomes\n * scarce to keep the balloon visible to the user as long as it is possible. The balloon will also\n * accept any custom position set provided by the user compatible with the\n * {@link module:utils/dom/position~Options options}.\n *\n *\t\tconst panel = new BalloonPanelView( locale );\n *\t\tconst childView = new ChildView();\n *\t\tconst positions = BalloonPanelView.defaultPositions;\n *\n *\t\tpanel.render();\n *\n *\t\t// Add a child view to the panel's content collection.\n *\t\tpanel.content.add( childView );\n *\n *\t\t// Start pinning the panel to an element with the \"target\" id DOM.\n *\t\t// The balloon will remain pinned until unpin() is called.\n *\t\tpanel.pin( {\n *\t\t\ttarget: document.querySelector( '#target' ),\n *\t\t\tpositions: [\n *\t\t\t\tpositions.northArrowSouth,\n *\t\t\t\tpositions.southArrowNorth\n *\t\t\t]\n *\t\t} );\n *\n * @extends module:ui/view~View\n */\nexport default class BalloonPanelView extends View {\n\t/**\n\t * @inheritDoc\n\t */\n\tconstructor( locale ) {\n\t\tsuper( locale );\n\n\t\tconst bind = this.bindTemplate;\n\n\t\t/**\n\t\t * The absolute top position of the balloon panel in pixels.\n\t\t *\n\t\t * @observable\n\t\t * @default 0\n\t\t * @member {Number} #top\n\t\t */\n\t\tthis.set( 'top', 0 );\n\n\t\t/**\n\t\t * The absolute left position of the balloon panel in pixels.\n\t\t *\n\t\t * @observable\n\t\t * @default 0\n\t\t * @member {Number} #left\n\t\t */\n\t\tthis.set( 'left', 0 );\n\n\t\t/**\n\t\t * The balloon panel's current position. The position name is reflected in the CSS class set\n\t\t * to the balloon, i.e. `.ck-balloon-panel_arrow_nw` for the \"arrow_nw\" position. The class\n\t\t * controls the minor aspects of the balloon's visual appearance like the placement\n\t\t * of an {@link #withArrow arrow}. To support a new position, an additional CSS must be created.\n\t\t *\n\t\t * Default position names correspond with\n\t\t * {@link module:ui/panel/balloon/balloonpanelview~BalloonPanelView.defaultPositions}.\n\t\t *\n\t\t * See the {@link #attachTo} and {@link #pin} methods to learn about custom balloon positions.\n\t\t *\n\t\t * @observable\n\t\t * @default 'arrow_nw'\n\t\t * @member {'arrow_nw'|'arrow_ne'|'arrow_sw'|'arrow_se'} #position\n\t\t */\n\t\tthis.set( 'position', 'arrow_nw' );\n\n\t\t/**\n\t\t * Controls whether the balloon panel is visible or not.\n\t\t *\n\t\t * @observable\n\t\t * @default false\n\t\t * @member {Boolean} #isVisible\n\t\t */\n\t\tthis.set( 'isVisible', false );\n\n\t\t/**\n\t\t * Controls whether the balloon panel has an arrow. The presence of the arrow\n\t\t * is reflected in the `ck-balloon-panel_with-arrow` CSS class.\n\t\t *\n\t\t * @observable\n\t\t * @default true\n\t\t * @member {Boolean} #withArrow\n\t\t */\n\t\tthis.set( 'withArrow', true );\n\n\t\t/**\n\t\t * An additional CSS class added to the {@link #element}.\n\t\t *\n\t\t * @observable\n\t\t * @member {String} #class\n\t\t */\n\t\tthis.set( 'class' );\n\n\t\t/**\n\t\t * A callback that starts pinning the panel when {@link #isVisible} gets\n\t\t * `true`. Used by {@link #pin}.\n\t\t *\n\t\t * @private\n\t\t * @member {Function} #_pinWhenIsVisibleCallback\n\t\t */\n\n\t\t/**\n\t\t * A collection of the child views that creates the balloon panel contents.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:ui/viewcollection~ViewCollection}\n\t\t */\n\t\tthis.content = this.createCollection();\n\n\t\tthis.setTemplate( {\n\t\t\ttag: 'div',\n\t\t\tattributes: {\n\t\t\t\tclass: [\n\t\t\t\t\t'ck',\n\t\t\t\t\t'ck-balloon-panel',\n\t\t\t\t\tbind.to( 'position', value => `ck-balloon-panel_${ value }` ),\n\t\t\t\t\tbind.if( 'isVisible', 'ck-balloon-panel_visible' ),\n\t\t\t\t\tbind.if( 'withArrow', 'ck-balloon-panel_with-arrow' ),\n\t\t\t\t\tbind.to( 'class' )\n\t\t\t\t],\n\n\t\t\t\tstyle: {\n\t\t\t\t\ttop: bind.to( 'top', toPx ),\n\t\t\t\t\tleft: bind.to( 'left', toPx )\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tchildren: this.content\n\t\t} );\n\t}\n\n\t/**\n\t * Shows the panel.\n\t *\n\t * See {@link #isVisible}.\n\t */\n\tshow() {\n\t\tthis.isVisible = true;\n\t}\n\n\t/**\n\t * Hides the panel.\n\t *\n\t * See {@link #isVisible}.\n\t */\n\thide() {\n\t\tthis.isVisible = false;\n\t}\n\n\t/**\n\t * Attaches the panel to a specified {@link module:utils/dom/position~Options#target} with a\n\t * smart positioning heuristics that chooses from available positions to make sure the panel\n\t * is visible to the user i.e. within the limits of the viewport.\n\t *\n\t * This method accepts configuration {@link module:utils/dom/position~Options options}\n\t * to set the `target`, optional `limiter` and `positions` the balloon should choose from.\n\t *\n\t *\t\tconst panel = new BalloonPanelView( locale );\n\t *\t\tconst positions = BalloonPanelView.defaultPositions;\n\t *\n\t *\t\tpanel.render();\n\t *\n\t *\t\t// Attach the panel to an element with the \"target\" id DOM.\n\t *\t\tpanel.attachTo( {\n\t *\t\t\ttarget: document.querySelector( '#target' ),\n\t *\t\t\tpositions: [\n\t *\t\t\t\tpositions.northArrowSouth,\n\t *\t\t\t\tpositions.southArrowNorth\n\t *\t\t\t]\n\t *\t\t} );\n\t *\n\t * **Note**: Attaching the panel will also automatically {@link #show} it.\n\t *\n\t * **Note**: An attached panel will not follow its target when the window is scrolled or resized.\n\t * See the {@link #pin} method for a more permanent positioning strategy.\n\t *\n\t * @param {module:utils/dom/position~Options} options Positioning options compatible with\n\t * {@link module:utils/dom/position~getOptimalPosition}. Default `positions` array is\n\t * {@link module:ui/panel/balloon/balloonpanelview~BalloonPanelView.defaultPositions}.\n\t */\n\tattachTo( options ) {\n\t\tthis.show();\n\n\t\tconst defaultPositions = BalloonPanelView.defaultPositions;\n\t\tconst positionOptions = Object.assign( {}, {\n\t\t\telement: this.element,\n\t\t\tpositions: [\n\t\t\t\tdefaultPositions.southArrowNorth,\n\t\t\t\tdefaultPositions.southArrowNorthWest,\n\t\t\t\tdefaultPositions.southArrowNorthEast,\n\t\t\t\tdefaultPositions.northArrowSouth,\n\t\t\t\tdefaultPositions.northArrowSouthWest,\n\t\t\t\tdefaultPositions.northArrowSouthEast\n\t\t\t],\n\t\t\tlimiter: defaultLimiterElement,\n\t\t\tfitInViewport: true\n\t\t}, options );\n\n\t\tconst optimalPosition = BalloonPanelView._getOptimalPosition( positionOptions );\n\n\t\t// Usually browsers make some problems with super accurate values like 104.345px\n\t\t// so it is better to use int values.\n\t\tconst left = parseInt( optimalPosition.left );\n\t\tconst top = parseInt( optimalPosition.top );\n\t\tconst position = optimalPosition.name;\n\n\t\tObject.assign( this, { top, left, position } );\n\t}\n\n\t/**\n\t * Works the same way as the {@link #attachTo} method except that the position of the panel is\n\t * continuously updated when:\n\t *\n\t * * any ancestor of the {@link module:utils/dom/position~Options#target}\n\t * or {@link module:utils/dom/position~Options#limiter} is scrolled,\n\t * * the browser window gets resized or scrolled.\n\t *\n\t * Thanks to that, the panel always sticks to the {@link module:utils/dom/position~Options#target}\n\t * and is immune to the changing environment.\n\t *\n\t *\t\tconst panel = new BalloonPanelView( locale );\n\t *\t\tconst positions = BalloonPanelView.defaultPositions;\n\t *\n\t *\t\tpanel.render();\n\t *\n\t *\t\t// Pin the panel to an element with the \"target\" id DOM.\n\t *\t\tpanel.pin( {\n\t *\t\t\ttarget: document.querySelector( '#target' ),\n\t *\t\t\tpositions: [\n\t *\t\t\t\tpositions.northArrowSouth,\n\t *\t\t\t\tpositions.southArrowNorth\n\t *\t\t\t]\n\t *\t\t} );\n\t *\n\t * To leave the pinned state, use the {@link #unpin} method.\n\t *\n\t * **Note**: Pinning the panel will also automatically {@link #show} it.\n\t *\n\t * @param {module:utils/dom/position~Options} options Positioning options compatible with\n\t * {@link module:utils/dom/position~getOptimalPosition}. Default `positions` array is\n\t * {@link module:ui/panel/balloon/balloonpanelview~BalloonPanelView.defaultPositions}.\n\t */\n\tpin( options ) {\n\t\tthis.unpin();\n\n\t\tthis._pinWhenIsVisibleCallback = () => {\n\t\t\tif ( this.isVisible ) {\n\t\t\t\tthis._startPinning( options );\n\t\t\t} else {\n\t\t\t\tthis._stopPinning();\n\t\t\t}\n\t\t};\n\n\t\tthis._startPinning( options );\n\n\t\t// Control the state of the listeners depending on whether the panel is visible\n\t\t// or not.\n\t\t// TODO: Use on() (https://github.com/ckeditor/ckeditor5-utils/issues/144).\n\t\tthis.listenTo( this, 'change:isVisible', this._pinWhenIsVisibleCallback );\n\t}\n\n\t/**\n\t * Stops pinning the panel, as set up by {@link #pin}.\n\t */\n\tunpin() {\n\t\tif ( this._pinWhenIsVisibleCallback ) {\n\t\t\t// Deactivate listeners attached by pin().\n\t\t\tthis._stopPinning();\n\n\t\t\t// Deactivate the panel pin() control logic.\n\t\t\t// TODO: Use off() (https://github.com/ckeditor/ckeditor5-utils/issues/144).\n\t\t\tthis.stopListening( this, 'change:isVisible', this._pinWhenIsVisibleCallback );\n\n\t\t\tthis._pinWhenIsVisibleCallback = null;\n\n\t\t\tthis.hide();\n\t\t}\n\t}\n\n\t/**\n\t * Starts managing the pinned state of the panel. See {@link #pin}.\n\t *\n\t * @private\n\t * @param {module:utils/dom/position~Options} options Positioning options compatible with\n\t * {@link module:utils/dom/position~getOptimalPosition}.\n\t */\n\t_startPinning( options ) {\n\t\tthis.attachTo( options );\n\n\t\tconst targetElement = getDomElement( options.target );\n\t\tconst limiterElement = options.limiter ? getDomElement( options.limiter ) : defaultLimiterElement;\n\n\t\t// Then we need to listen on scroll event of eny element in the document.\n\t\tthis.listenTo( global.document, 'scroll', ( evt, domEvt ) => {\n\t\t\tconst scrollTarget = domEvt.target;\n\n\t\t\t// The position needs to be updated if the positioning target is within the scrolled element.\n\t\t\tconst isWithinScrollTarget = targetElement && scrollTarget.contains( targetElement );\n\n\t\t\t// The position needs to be updated if the positioning limiter is within the scrolled element.\n\t\t\tconst isLimiterWithinScrollTarget = limiterElement && scrollTarget.contains( limiterElement );\n\n\t\t\t// The positioning target and/or limiter can be a Rect, object etc..\n\t\t\t// There's no way to optimize the listener then.\n\t\t\tif ( isWithinScrollTarget || isLimiterWithinScrollTarget || !targetElement || !limiterElement ) {\n\t\t\t\tthis.attachTo( options );\n\t\t\t}\n\t\t}, { useCapture: true } );\n\n\t\t// We need to listen on window resize event and update position.\n\t\tthis.listenTo( global.window, 'resize', () => {\n\t\t\tthis.attachTo( options );\n\t\t} );\n\t}\n\n\t/**\n\t * Stops managing the pinned state of the panel. See {@link #pin}.\n\t *\n\t * @private\n\t */\n\t_stopPinning() {\n\t\tthis.stopListening( global.document, 'scroll' );\n\t\tthis.stopListening( global.window, 'resize' );\n\t}\n}\n\n// Returns the DOM element for given object or null, if there is none,\n// e.g. when the passed object is a Rect instance or so.\n//\n// @private\n// @param {*} object\n// @returns {HTMLElement|null}\nfunction getDomElement( object ) {\n\tif ( isElement( object ) ) {\n\t\treturn object;\n\t}\n\n\tif ( isRange( object ) ) {\n\t\treturn object.commonAncestorContainer;\n\t}\n\n\tif ( typeof object == 'function' ) {\n\t\treturn getDomElement( object() );\n\t}\n\n\treturn null;\n}\n\n/**\n * A horizontal offset of the arrow tip from the edge of the balloon. Controlled by CSS.\n *\n *\t\t +-----|---------...\n *\t\t |     |\n *\t\t |     |\n *\t\t |     |\n *\t\t |     |\n *\t\t +--+  |  +------...\n *\t\t     \\ | /\n *\t\t      \\|/\n *\t    >|-----|<---------------- horizontal offset\n *\n * @default 30\n * @member {Number} module:ui/panel/balloon/balloonpanelview~BalloonPanelView.arrowHorizontalOffset\n */\nBalloonPanelView.arrowHorizontalOffset = 25;\n\n/**\n * A vertical offset of the arrow from the edge of the balloon. Controlled by CSS.\n *\n *\t\t +-------------...\n *\t\t |\n *\t\t |\n *\t\t |                      /-- vertical offset\n *\t\t |                     V\n *\t\t +--+    +-----...    ---------\n *\t\t     \\  /              |\n *\t\t      \\/               |\n *\t\t-------------------------------\n *\t\t                       ^\n *\n * @default 15\n * @member {Number} module:ui/panel/balloon/balloonpanelview~BalloonPanelView.arrowVerticalOffset\n */\nBalloonPanelView.arrowVerticalOffset = 10;\n\n/**\n * Function used to calculate the optimal position for the balloon.\n *\n * @protected\n * @member {Function} module:ui/panel/balloon/balloonpanelview~BalloonPanelView._getOptimalPosition\n */\nBalloonPanelView._getOptimalPosition = getOptimalPosition;\n\n/**\n * A default set of positioning functions used by the balloon panel view\n * when attaching using the {@link module:ui/panel/balloon/balloonpanelview~BalloonPanelView#attachTo} method.\n *\n * The available positioning functions are as follows:\n *\n * **North**\n *\n * * `northArrowSouth`\n *\n * \t\t+-----------------+\n * \t\t|     Balloon     |\n * \t\t+-----------------+\n * \t\t         V\n * \t\t    [ Target ]\n *\n * * `northArrowSouthEast`\n *\n * \t\t+-----------------+\n * \t\t|     Balloon     |\n * \t\t+-----------------+\n * \t\t               V\n * \t\t          [ Target ]\n *\n * * `northArrowSouthWest`\n *\n * \t\t  +-----------------+\n * \t\t  |     Balloon     |\n * \t\t  +-----------------+\n * \t\t     V\n * \t\t[ Target ]\n *\n * **North west**\n *\n * * `northWestArrowSouth`\n *\n * \t\t+-----------------+\n * \t\t|     Balloon     |\n * \t\t+-----------------+\n * \t\t         V\n * \t\t         [ Target ]\n *\n * * `northWestArrowSouthWest`\n *\n * \t\t+-----------------+\n * \t\t|     Balloon     |\n * \t\t+-----------------+\n * \t\t   V\n * \t\t   [ Target ]\n *\n * * `northWestArrowSouthEast`\n *\n * \t\t+-----------------+\n * \t\t|     Balloon     |\n * \t\t+-----------------+\n * \t\t               V\n * \t\t               [ Target ]\n *\n * **North east**\n *\n * * `northEastArrowSouth`\n *\n * \t\t+-----------------+\n * \t\t|     Balloon     |\n * \t\t+-----------------+\n * \t\t         V\n * \t\t[ Target ]\n *\n * * `northEastArrowSouthEast`\n *\n * \t\t+-----------------+\n * \t\t|     Balloon     |\n * \t\t+-----------------+\n * \t\t               V\n * \t\t      [ Target ]\n *\n * * `northEastArrowSouthWest`\n *\n * \t\t      +-----------------+\n * \t\t      |     Balloon     |\n * \t\t      +-----------------+\n * \t\t         V\n * \t\t[ Target ]\n *\n * **South**\n *\n * * `southArrowNorth`\n *\n *\t\t    [ Target ]\n *\t\t         ^\n *\t\t+-----------------+\n *\t\t|     Balloon     |\n *\t\t+-----------------+\n *\n * * `southArrowNorthEast`\n *\n *\t\t          [ Target ]\n *\t\t               ^\n *\t\t+-----------------+\n *\t\t|     Balloon     |\n *\t\t+-----------------+\n *\n * * `southArrowNorthWest`\n *\n *\t\t[ Target ]\n *\t\t     ^\n *\t\t   +-----------------+\n *\t\t   |     Balloon     |\n *\t\t   +-----------------+\n *\n * **South west**\n *\n * * `southWestArrowNorth`\n *\n *\t\t         [ Target ]\n *\t\t         ^\n *\t\t+-----------------+\n *\t\t|     Balloon     |\n *\t\t+-----------------+\n *\n * * `southWestArrowNorthWest`\n *\n *\t\t  [ Target ]\n *\t\t  ^\n *\t\t+-----------------+\n *\t\t|     Balloon     |\n *\t\t+-----------------+\n *\n * * `southWestArrowNorthEast`\n *\n *\t\t               [ Target ]\n *\t\t               ^\n *\t\t+-----------------+\n *\t\t|     Balloon     |\n *\t\t+-----------------+\n *\n * **South east**\n *\n * * `southEastArrowNorth`\n *\n *\t\t[ Target ]\n *\t\t         ^\n *\t\t+-----------------+\n *\t\t|     Balloon     |\n *\t\t+-----------------+\n *\n * * `southEastArrowNorthEast`\n *\n *\t\t       [ Target ]\n *\t\t                ^\n *\t\t+-----------------+\n *\t\t|     Balloon     |\n *\t\t+-----------------+\n *\n * * `southEastArrowNorthWest`\n *\n *\t\t[ Target ]\n *\t\t         ^\n *\t\t       +-----------------+\n *\t\t       |     Balloon     |\n *\t\t       +-----------------+\n *\n * See {@link module:ui/panel/balloon/balloonpanelview~BalloonPanelView#attachTo}.\n *\n * Positioning functions must be compatible with {@link module:utils/dom/position~Position}.\n *\n * The name that the position function returns will be reflected in the balloon panel's class that\n * controls the placement of the \"arrow\". See {@link #position} to learn more.\n *\n * @member {Object} module:ui/panel/balloon/balloonpanelview~BalloonPanelView.defaultPositions\n */\nBalloonPanelView.defaultPositions = {\n\t// ------- North\n\n\tnorthArrowSouth: ( targetRect, balloonRect ) => ( {\n\t\ttop: getNorthTop( targetRect, balloonRect ),\n\t\tleft: targetRect.left + targetRect.width / 2 - balloonRect.width / 2,\n\t\tname: 'arrow_s'\n\t} ),\n\n\tnorthArrowSouthEast: ( targetRect, balloonRect ) => ( {\n\t\ttop: getNorthTop( targetRect, balloonRect ),\n\t\tleft: targetRect.left + targetRect.width / 2 - balloonRect.width + BalloonPanelView.arrowHorizontalOffset,\n\t\tname: 'arrow_se'\n\t} ),\n\n\tnorthArrowSouthWest: ( targetRect, balloonRect ) => ( {\n\t\ttop: getNorthTop( targetRect, balloonRect ),\n\t\tleft: targetRect.left + targetRect.width / 2 - BalloonPanelView.arrowHorizontalOffset,\n\t\tname: 'arrow_sw'\n\t} ),\n\n\t// ------- North west\n\n\tnorthWestArrowSouth: ( targetRect, balloonRect ) => ( {\n\t\ttop: getNorthTop( targetRect, balloonRect ),\n\t\tleft: targetRect.left - balloonRect.width / 2,\n\t\tname: 'arrow_s'\n\t} ),\n\n\tnorthWestArrowSouthWest: ( targetRect, balloonRect ) => ( {\n\t\ttop: getNorthTop( targetRect, balloonRect ),\n\t\tleft: targetRect.left - BalloonPanelView.arrowHorizontalOffset,\n\t\tname: 'arrow_sw'\n\t} ),\n\n\tnorthWestArrowSouthEast: ( targetRect, balloonRect ) => ( {\n\t\ttop: getNorthTop( targetRect, balloonRect ),\n\t\tleft: targetRect.left - balloonRect.width + BalloonPanelView.arrowHorizontalOffset,\n\t\tname: 'arrow_se'\n\t} ),\n\n\t// ------- North east\n\n\tnorthEastArrowSouth: ( targetRect, balloonRect ) => ( {\n\t\ttop: getNorthTop( targetRect, balloonRect ),\n\t\tleft: targetRect.right - balloonRect.width / 2,\n\t\tname: 'arrow_s'\n\t} ),\n\n\tnorthEastArrowSouthEast: ( targetRect, balloonRect ) => ( {\n\t\ttop: getNorthTop( targetRect, balloonRect ),\n\t\tleft: targetRect.right - balloonRect.width + BalloonPanelView.arrowHorizontalOffset,\n\t\tname: 'arrow_se'\n\t} ),\n\n\tnorthEastArrowSouthWest: ( targetRect, balloonRect ) => ( {\n\t\ttop: getNorthTop( targetRect, balloonRect ),\n\t\tleft: targetRect.right - BalloonPanelView.arrowHorizontalOffset,\n\t\tname: 'arrow_sw'\n\t} ),\n\n\t// ------- South\n\n\tsouthArrowNorth: ( targetRect, balloonRect ) => ( {\n\t\ttop: getSouthTop( targetRect, balloonRect ),\n\t\tleft: targetRect.left + targetRect.width / 2 - balloonRect.width / 2,\n\t\tname: 'arrow_n'\n\t} ),\n\n\tsouthArrowNorthEast: ( targetRect, balloonRect ) => ( {\n\t\ttop: getSouthTop( targetRect, balloonRect ),\n\t\tleft: targetRect.left + targetRect.width / 2 - balloonRect.width + BalloonPanelView.arrowHorizontalOffset,\n\t\tname: 'arrow_ne'\n\t} ),\n\n\tsouthArrowNorthWest: ( targetRect, balloonRect ) => ( {\n\t\ttop: getSouthTop( targetRect, balloonRect ),\n\t\tleft: targetRect.left + targetRect.width / 2 - BalloonPanelView.arrowHorizontalOffset,\n\t\tname: 'arrow_nw'\n\t} ),\n\n\t// ------- South west\n\n\tsouthWestArrowNorth: ( targetRect, balloonRect ) => ( {\n\t\ttop: getSouthTop( targetRect, balloonRect ),\n\t\tleft: targetRect.left - balloonRect.width / 2,\n\t\tname: 'arrow_n'\n\t} ),\n\n\tsouthWestArrowNorthWest: ( targetRect, balloonRect ) => ( {\n\t\ttop: getSouthTop( targetRect, balloonRect ),\n\t\tleft: targetRect.left - BalloonPanelView.arrowHorizontalOffset,\n\t\tname: 'arrow_nw'\n\t} ),\n\n\tsouthWestArrowNorthEast: ( targetRect, balloonRect ) => ( {\n\t\ttop: getSouthTop( targetRect, balloonRect ),\n\t\tleft: targetRect.left - balloonRect.width + BalloonPanelView.arrowHorizontalOffset,\n\t\tname: 'arrow_ne'\n\t} ),\n\n\t// ------- South east\n\n\tsouthEastArrowNorth: ( targetRect, balloonRect ) => ( {\n\t\ttop: getSouthTop( targetRect, balloonRect ),\n\t\tleft: targetRect.right - balloonRect.width / 2,\n\t\tname: 'arrow_n'\n\t} ),\n\n\tsouthEastArrowNorthEast: ( targetRect, balloonRect ) => ( {\n\t\ttop: getSouthTop( targetRect, balloonRect ),\n\t\tleft: targetRect.right - balloonRect.width + BalloonPanelView.arrowHorizontalOffset,\n\t\tname: 'arrow_ne'\n\t} ),\n\n\tsouthEastArrowNorthWest: ( targetRect, balloonRect ) => ( {\n\t\ttop: getSouthTop( targetRect, balloonRect ),\n\t\tleft: targetRect.right - BalloonPanelView.arrowHorizontalOffset,\n\t\tname: 'arrow_nw'\n\t} ),\n};\n\n// Returns the top coordinate for positions starting with `north*`.\n//\n// @private\n// @param {utils/dom/rect~Rect} targetRect A rect of the target.\n// @param {utils/dom/rect~Rect} elementRect A rect of the balloon.\n// @returns {Number}\nfunction getNorthTop( targetRect, balloonRect ) {\n\treturn targetRect.top - balloonRect.height - BalloonPanelView.arrowVerticalOffset;\n}\n\n// Returns the top coordinate for positions starting with `south*`.\n//\n// @private\n// @param {utils/dom/rect~Rect} targetRect A rect of the target.\n// @param {utils/dom/rect~Rect} elementRect A rect of the balloon.\n// @returns {Number}\nfunction getSouthTop( targetRect ) {\n\treturn targetRect.bottom + BalloonPanelView.arrowVerticalOffset;\n}\n"]}]}