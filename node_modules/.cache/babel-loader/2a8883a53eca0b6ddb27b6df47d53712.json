{"remainingRequest":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/babel-loader/lib/index.js!/Users/antonyching/Desktop/project/new-builder-demo/node_modules/@ckeditor/ckeditor5-engine/src/model/liveposition.js","dependencies":[{"path":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/@ckeditor/ckeditor5-engine/src/model/liveposition.js","mtime":499162500000},{"path":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/@ckeditor/ckeditor5-dev-webpack-plugin/lib/translatesourceloader.js","mtime":499162500000},{"path":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:LyoqCiAqIEBsaWNlbnNlIENvcHlyaWdodCAoYykgMjAwMy0yMDE5LCBDS1NvdXJjZSAtIEZyZWRlcmljbyBLbmFiYmVuLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKiBGb3IgbGljZW5zaW5nLCBzZWUgTElDRU5TRS5tZCBvciBodHRwczovL2NrZWRpdG9yLmNvbS9sZWdhbC9ja2VkaXRvci1vc3MtbGljZW5zZQogKi8KCi8qKgogKiBAbW9kdWxlIGVuZ2luZS9tb2RlbC9saXZlcG9zaXRpb24KICovCmltcG9ydCBQb3NpdGlvbiBmcm9tICcuL3Bvc2l0aW9uJzsKaW1wb3J0IEVtaXR0ZXJNaXhpbiBmcm9tICdAY2tlZGl0b3IvY2tlZGl0b3I1LXV0aWxzL3NyYy9lbWl0dGVybWl4aW4nOwppbXBvcnQgbWl4IGZyb20gJ0Bja2VkaXRvci9ja2VkaXRvcjUtdXRpbHMvc3JjL21peCc7CmltcG9ydCBDS0VkaXRvckVycm9yIGZyb20gJ0Bja2VkaXRvci9ja2VkaXRvcjUtdXRpbHMvc3JjL2NrZWRpdG9yZXJyb3InOwovKioKICogYExpdmVQb3NpdGlvbmAgaXMgYSB0eXBlIG9mIHtAbGluayBtb2R1bGU6ZW5naW5lL21vZGVsL3Bvc2l0aW9uflBvc2l0aW9uIFBvc2l0aW9ufQogKiB0aGF0IHVwZGF0ZXMgaXRzZWxmIGFzIHtAbGluayBtb2R1bGU6ZW5naW5lL21vZGVsL2RvY3VtZW50fkRvY3VtZW50IGRvY3VtZW50fQogKiBpcyBjaGFuZ2VkIHRocm91Z2ggb3BlcmF0aW9ucy4gSXQgbWF5IGJlIHVzZWQgYXMgYSBib29rbWFyay4KICoKICogKipOb3RlOioqIENvbnRyYXJ5IHRvIHtAbGluayBtb2R1bGU6ZW5naW5lL21vZGVsL3Bvc2l0aW9uflBvc2l0aW9ufSwgYExpdmVQb3NpdGlvbmAgd29ya3Mgb25seSBpbiByb290cyB0aGF0IGFyZQogKiB7QGxpbmsgbW9kdWxlOmVuZ2luZS9tb2RlbC9yb290ZWxlbWVudH5Sb290RWxlbWVudH0uCiAqIElmIHtAbGluayBtb2R1bGU6ZW5naW5lL21vZGVsL2RvY3VtZW50ZnJhZ21lbnR+RG9jdW1lbnRGcmFnbWVudH0gaXMgcGFzc2VkLCBlcnJvciB3aWxsIGJlIHRocm93bi4KICoKICogKipOb3RlOioqIEJlIHZlcnkgY2FyZWZ1bCB3aGVuIGRlYWxpbmcgd2l0aCBgTGl2ZVBvc2l0aW9uYC4gRWFjaCBgTGl2ZVBvc2l0aW9uYCBpbnN0YW5jZSBiaW5kIGV2ZW50cyB0aGF0IG1pZ2h0CiAqIGhhdmUgdG8gYmUgdW5ib3VuZC4KICogVXNlIHtAbGluayBtb2R1bGU6ZW5naW5lL21vZGVsL2xpdmVwb3NpdGlvbn5MaXZlUG9zaXRpb24jZGV0YWNofSB3aGVuZXZlciB5b3UgZG9uJ3QgbmVlZCBgTGl2ZVBvc2l0aW9uYCBhbnltb3JlLgogKgogKiBAZXh0ZW5kcyBtb2R1bGU6ZW5naW5lL21vZGVsL3Bvc2l0aW9uflBvc2l0aW9uCiAqLwoKZXhwb3J0IGRlZmF1bHQgY2xhc3MgTGl2ZVBvc2l0aW9uIGV4dGVuZHMgUG9zaXRpb24gewogIC8qKgogICAqIENyZWF0ZXMgYSBsaXZlIHBvc2l0aW9uLgogICAqCiAgICogQHNlZSBtb2R1bGU6ZW5naW5lL21vZGVsL3Bvc2l0aW9uflBvc2l0aW9uCiAgICogQHBhcmFtIHttb2R1bGU6ZW5naW5lL21vZGVsL3Jvb3RlbGVtZW50flJvb3RFbGVtZW50fSByb290CiAgICogQHBhcmFtIHtBcnJheS48TnVtYmVyPn0gcGF0aAogICAqIEBwYXJhbSB7bW9kdWxlOmVuZ2luZS9tb2RlbC9wb3NpdGlvbn5Qb3NpdGlvblN0aWNraW5lc3N9IFtzdGlja2luZXNzXQogICAqLwogIGNvbnN0cnVjdG9yKHJvb3QsIHBhdGgsIHN0aWNraW5lc3MgPSAndG9Ob25lJykgewogICAgc3VwZXIocm9vdCwgcGF0aCwgc3RpY2tpbmVzcyk7CgogICAgaWYgKCF0aGlzLnJvb3QuaXMoJ3Jvb3RFbGVtZW50JykpIHsKICAgICAgLyoqCiAgICAgICAqIExpdmVQb3NpdGlvbidzIHJvb3QgaGFzIHRvIGJlIGFuIGluc3RhbmNlIG9mIFJvb3RFbGVtZW50LgogICAgICAgKgogICAgICAgKiBAZXJyb3IgbGl2ZXBvc2l0aW9uLXJvb3Qtbm90LXJvb3RlbGVtZW50CiAgICAgICAqLwogICAgICB0aHJvdyBuZXcgQ0tFZGl0b3JFcnJvcignbW9kZWwtbGl2ZXBvc2l0aW9uLXJvb3Qtbm90LXJvb3RlbGVtZW50OiBMaXZlUG9zaXRpb25cJ3Mgcm9vdCBoYXMgdG8gYmUgYW4gaW5zdGFuY2Ugb2YgUm9vdEVsZW1lbnQuJywgcm9vdCk7CiAgICB9CgogICAgYmluZFdpdGhEb2N1bWVudC5jYWxsKHRoaXMpOwogIH0KICAvKioKICAgKiBVbmJpbmRzIGFsbCBldmVudHMgcHJldmlvdXNseSBib3VuZCBieSBgTGl2ZVBvc2l0aW9uYC4gVXNlIGl0IHdoZW5ldmVyIHlvdSBkb24ndCBuZWVkIGBMaXZlUG9zaXRpb25gIGluc3RhbmNlCiAgICogYW55bW9yZSAoaS5lLiB3aGVuIGxlYXZpbmcgc2NvcGUgaW4gd2hpY2ggaXQgd2FzIGRlY2xhcmVkIG9yIGJlZm9yZSByZS1hc3NpZ25pbmcgdmFyaWFibGUgdGhhdCB3YXMKICAgKiByZWZlcnJpbmcgdG8gaXQpLgogICAqLwoKCiAgZGV0YWNoKCkgewogICAgdGhpcy5zdG9wTGlzdGVuaW5nKCk7CiAgfQogIC8qKgogICAqIENoZWNrcyB3aGV0aGVyIHRoaXMgb2JqZWN0IGlzIG9mIHRoZSBnaXZlbi4KICAgKgogICAqCQlsaXZlUG9zaXRpb24uaXMoICdwb3NpdGlvbicgKTsgLy8gLT4gdHJ1ZQogICAqCQlsaXZlUG9zaXRpb24uaXMoICdtb2RlbDpwb3NpdGlvbicgKTsgLy8gLT4gdHJ1ZQogICAqCQlsaXZlUG9zaXRpb24uaXMoICdsaXZlcG9zaXRpb24nICk7IC8vIC0+IHRydWUKICAgKgkJbGl2ZVBvc2l0aW9uLmlzKCAnbW9kZWw6bGl2ZVBvc2l0aW9uJyApOyAvLyAtPiB0cnVlCiAgICoKICAgKgkJbGl2ZVBvc2l0aW9uLmlzKCAndmlldzpwb3NpdGlvbicgKTsgLy8gLT4gZmFsc2UKICAgKgkJbGl2ZVBvc2l0aW9uLmlzKCAnZG9jdW1lbnRTZWxlY3Rpb24nICk7IC8vIC0+IGZhbHNlCiAgICoKICAgKiB7QGxpbmsgbW9kdWxlOmVuZ2luZS9tb2RlbC9ub2Rlfk5vZGUjaXMgQ2hlY2sgdGhlIGVudGlyZSBsaXN0IG9mIG1vZGVsIG9iamVjdHN9IHdoaWNoIGltcGxlbWVudCB0aGUgYGlzKClgIG1ldGhvZC4KICAgKgogICAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlCiAgICogQHJldHVybnMge0Jvb2xlYW59CiAgICovCgoKICBpcyh0eXBlKSB7CiAgICByZXR1cm4gdHlwZSA9PSAnbGl2ZVBvc2l0aW9uJyB8fCB0eXBlID09ICdtb2RlbDpsaXZlUG9zaXRpb24nIHx8IHN1cGVyLmlzKHR5cGUpOwogIH0KICAvKioKICAgKiBDcmVhdGVzIGEge0BsaW5rIG1vZHVsZTplbmdpbmUvbW9kZWwvcG9zaXRpb25+UG9zaXRpb24gcG9zaXRpb24gaW5zdGFuY2V9LCB3aGljaCBpcyBlcXVhbCB0byB0aGlzIGxpdmUgcG9zaXRpb24uCiAgICoKICAgKiBAcmV0dXJucyB7bW9kdWxlOmVuZ2luZS9tb2RlbC9wb3NpdGlvbn5Qb3NpdGlvbn0KICAgKi8KCgogIHRvUG9zaXRpb24oKSB7CiAgICByZXR1cm4gbmV3IFBvc2l0aW9uKHRoaXMucm9vdCwgdGhpcy5wYXRoLnNsaWNlKCksIHRoaXMuc3RpY2tpbmVzcyk7CiAgfQogIC8qKgogICAqIENyZWF0ZXMgYSBgTGl2ZVBvc2l0aW9uYCBpbnN0YW5jZSB0aGF0IGlzIGVxdWFsIHRvIHBvc2l0aW9uLgogICAqCiAgICogQHBhcmFtIHttb2R1bGU6ZW5naW5lL21vZGVsL3Bvc2l0aW9uflBvc2l0aW9ufSBwb3NpdGlvbgogICAqIEBwYXJhbSB7bW9kdWxlOmVuZ2luZS9tb2RlbC9wb3NpdGlvbn5Qb3NpdGlvblN0aWNraW5lc3N9IFtzdGlja2luZXNzXQogICAqIEByZXR1cm5zIHttb2R1bGU6ZW5naW5lL21vZGVsL3Bvc2l0aW9uflBvc2l0aW9ufQogICAqLwoKCiAgc3RhdGljIGZyb21Qb3NpdGlvbihwb3NpdGlvbiwgc3RpY2tpbmVzcykgewogICAgcmV0dXJuIG5ldyB0aGlzKHBvc2l0aW9uLnJvb3QsIHBvc2l0aW9uLnBhdGguc2xpY2UoKSwgc3RpY2tpbmVzcyA/IHN0aWNraW5lc3MgOiBwb3NpdGlvbi5zdGlja2luZXNzKTsKICB9CiAgLyoqCiAgICogQHN0YXRpYwogICAqIEBwcm90ZWN0ZWQKICAgKiBAbWV0aG9kIG1vZHVsZTplbmdpbmUvbW9kZWwvbGl2ZXBvc2l0aW9ufkxpdmVQb3NpdGlvbi5fY3JlYXRlQWZ0ZXIKICAgKiBAc2VlIG1vZHVsZTplbmdpbmUvbW9kZWwvcG9zaXRpb25+UG9zaXRpb24uX2NyZWF0ZUFmdGVyCiAgICogQHBhcmFtIHttb2R1bGU6ZW5naW5lL21vZGVsL25vZGV+Tm9kZX0gbm9kZQogICAqIEBwYXJhbSB7bW9kdWxlOmVuZ2luZS9tb2RlbC9wb3NpdGlvbn5Qb3NpdGlvblN0aWNraW5lc3N9IFtzdGlja2luZXNzPSd0b05vbmUnXQogICAqIEByZXR1cm5zIHttb2R1bGU6ZW5naW5lL21vZGVsL2xpdmVwb3NpdGlvbn5MaXZlUG9zaXRpb259CiAgICovCgogIC8qKgogICAqIEBzdGF0aWMKICAgKiBAcHJvdGVjdGVkCiAgICogQG1ldGhvZCBtb2R1bGU6ZW5naW5lL21vZGVsL2xpdmVwb3NpdGlvbn5MaXZlUG9zaXRpb24uX2NyZWF0ZUJlZm9yZQogICAqIEBzZWUgbW9kdWxlOmVuZ2luZS9tb2RlbC9wb3NpdGlvbn5Qb3NpdGlvbi5fY3JlYXRlQmVmb3JlCiAgICogQHBhcmFtIHttb2R1bGU6ZW5naW5lL21vZGVsL25vZGV+Tm9kZX0gbm9kZQogICAqIEBwYXJhbSB7bW9kdWxlOmVuZ2luZS9tb2RlbC9wb3NpdGlvbn5Qb3NpdGlvblN0aWNraW5lc3N9IFtzdGlja2luZXNzPSd0b05vbmUnXQogICAqIEByZXR1cm5zIHttb2R1bGU6ZW5naW5lL21vZGVsL2xpdmVwb3NpdGlvbn5MaXZlUG9zaXRpb259CiAgICovCgogIC8qKgogICAqIEBzdGF0aWMKICAgKiBAcHJvdGVjdGVkCiAgICogQG1ldGhvZCBtb2R1bGU6ZW5naW5lL21vZGVsL2xpdmVwb3NpdGlvbn5MaXZlUG9zaXRpb24uX2NyZWF0ZUF0CiAgICogQHNlZSBtb2R1bGU6ZW5naW5lL21vZGVsL3Bvc2l0aW9uflBvc2l0aW9uLl9jcmVhdGVBdAogICAqIEBwYXJhbSB7bW9kdWxlOmVuZ2luZS9tb2RlbC9pdGVtfkl0ZW18bW9kdWxlOmVuZ2luZS9tb2RlbC9wb3NpdGlvbn5Qb3NpdGlvbn0gaXRlbU9yUG9zaXRpb24KICAgKiBAcGFyYW0ge051bWJlcnwnZW5kJ3wnYmVmb3JlJ3wnYWZ0ZXInfSBbb2Zmc2V0XQogICAqIEBwYXJhbSB7bW9kdWxlOmVuZ2luZS9tb2RlbC9wb3NpdGlvbn5Qb3NpdGlvblN0aWNraW5lc3N9IFtzdGlja2luZXNzPSd0b05vbmUnXQogICAqIEByZXR1cm5zIHttb2R1bGU6ZW5naW5lL21vZGVsL2xpdmVwb3NpdGlvbn5MaXZlUG9zaXRpb259CiAgICovCgogIC8qKgogICAqIEZpcmVkIHdoZW4gYExpdmVQb3NpdGlvbmAgaW5zdGFuY2UgaXMgY2hhbmdlZCBkdWUgdG8gY2hhbmdlcyBvbiB7QGxpbmsgbW9kdWxlOmVuZ2luZS9tb2RlbC9kb2N1bWVudH5Eb2N1bWVudH0uCiAgICoKICAgKiBAZXZlbnQgbW9kdWxlOmVuZ2luZS9tb2RlbC9saXZlcG9zaXRpb25+TGl2ZVBvc2l0aW9uI2NoYW5nZQogICAqIEBwYXJhbSB7bW9kdWxlOmVuZ2luZS9tb2RlbC9wb3NpdGlvbn5Qb3NpdGlvbn0gb2xkUG9zaXRpb24gUG9zaXRpb24gZXF1YWwgdG8gdGhpcyBsaXZlIHBvc2l0aW9uIGJlZm9yZSBpdCBnb3QgY2hhbmdlZC4KICAgKi8KCgp9IC8vIEJpbmRzIHRoaXMgYExpdmVQb3NpdGlvbmAgdG8gdGhlIHtAbGluayBtb2R1bGU6ZW5naW5lL21vZGVsL2RvY3VtZW50fkRvY3VtZW50IGRvY3VtZW50fSB0aGF0IG93bnMKLy8gdGhpcyBwb3NpdGlvbidzIHtAbGluayBtb2R1bGU6ZW5naW5lL21vZGVsL3Bvc2l0aW9uflBvc2l0aW9uI3Jvb3Qgcm9vdH0uCi8vCi8vIEBwcml2YXRlCgpmdW5jdGlvbiBiaW5kV2l0aERvY3VtZW50KCkgewogIHRoaXMubGlzdGVuVG8odGhpcy5yb290LmRvY3VtZW50Lm1vZGVsLCAnYXBwbHlPcGVyYXRpb24nLCAoZXZlbnQsIGFyZ3MpID0+IHsKICAgIGNvbnN0IG9wZXJhdGlvbiA9IGFyZ3NbMF07CgogICAgaWYgKCFvcGVyYXRpb24uaXNEb2N1bWVudE9wZXJhdGlvbikgewogICAgICByZXR1cm47CiAgICB9CgogICAgdHJhbnNmb3JtLmNhbGwodGhpcywgb3BlcmF0aW9uKTsKICB9LCB7CiAgICBwcmlvcml0eTogJ2xvdycKICB9KTsKfSAvLyBVcGRhdGVzIHRoaXMgcG9zaXRpb24gYWNjb3JkaW5nbHkgdG8gdGhlIHVwZGF0ZXMgYXBwbGllZCB0byB0aGUgbW9kZWwuIEJhc2VzIG9uIGNoYW5nZSBldmVudHMuCi8vCi8vIEBwcml2YXRlCi8vIEBwYXJhbSB7bW9kdWxlOmVuZ2luZS9tb2RlbC9vcGVyYXRpb24vb3BlcmF0aW9ufk9wZXJhdGlvbn0gb3BlcmF0aW9uIEV4ZWN1dGVkIG9wZXJhdGlvbi4KCgpmdW5jdGlvbiB0cmFuc2Zvcm0ob3BlcmF0aW9uKSB7CiAgY29uc3QgcmVzdWx0ID0gdGhpcy5nZXRUcmFuc2Zvcm1lZEJ5T3BlcmF0aW9uKG9wZXJhdGlvbik7CgogIGlmICghdGhpcy5pc0VxdWFsKHJlc3VsdCkpIHsKICAgIGNvbnN0IG9sZFBvc2l0aW9uID0gdGhpcy50b1Bvc2l0aW9uKCk7CiAgICB0aGlzLnBhdGggPSByZXN1bHQucGF0aDsKICAgIHRoaXMucm9vdCA9IHJlc3VsdC5yb290OwogICAgdGhpcy5maXJlKCdjaGFuZ2UnLCBvbGRQb3NpdGlvbik7CiAgfQp9CgptaXgoTGl2ZVBvc2l0aW9uLCBFbWl0dGVyTWl4aW4pOw=="},{"version":3,"sources":["/Users/antonyching/Desktop/project/new-builder-demo/node_modules/@ckeditor/ckeditor5-engine/src/model/liveposition.js"],"names":["Position","EmitterMixin","mix","CKEditorError","LivePosition","constructor","root","path","stickiness","is","bindWithDocument","call","detach","stopListening","type","toPosition","slice","fromPosition","position","listenTo","document","model","event","args","operation","isDocumentOperation","transform","priority","result","getTransformedByOperation","isEqual","oldPosition","fire"],"mappings":"AAAA;;;;;AAKA;;;AAIA,OAAOA,QAAP,MAAqB,YAArB;AACA,OAAOC,YAAP,MAAyB,4CAAzB;AACA,OAAOC,GAAP,MAAgB,mCAAhB;AACA,OAAOC,aAAP,MAA0B,6CAA1B;AAEA;;;;;;;;;;;;;;;;AAeA,eAAe,MAAMC,YAAN,SAA2BJ,QAA3B,CAAoC;AAClD;;;;;;;;AAQAK,EAAAA,WAAW,CAAEC,IAAF,EAAQC,IAAR,EAAcC,UAAU,GAAG,QAA3B,EAAsC;AAChD,UAAOF,IAAP,EAAaC,IAAb,EAAmBC,UAAnB;;AAEA,QAAK,CAAC,KAAKF,IAAL,CAAUG,EAAV,CAAc,aAAd,CAAN,EAAsC;AACrC;;;;;AAKA,YAAM,IAAIN,aAAJ,CACL,qGADK,EAELG,IAFK,CAAN;AAIA;;AAEDI,IAAAA,gBAAgB,CAACC,IAAjB,CAAuB,IAAvB;AACA;AAED;;;;;;;AAKAC,EAAAA,MAAM,GAAG;AACR,SAAKC,aAAL;AACA;AAED;;;;;;;;;;;;;;;;;;AAgBAJ,EAAAA,EAAE,CAAEK,IAAF,EAAS;AACV,WAAOA,IAAI,IAAI,cAAR,IAA0BA,IAAI,IAAI,oBAAlC,IAA0D,MAAML,EAAN,CAAUK,IAAV,CAAjE;AACA;AAED;;;;;;;AAKAC,EAAAA,UAAU,GAAG;AACZ,WAAO,IAAIf,QAAJ,CAAc,KAAKM,IAAnB,EAAyB,KAAKC,IAAL,CAAUS,KAAV,EAAzB,EAA4C,KAAKR,UAAjD,CAAP;AACA;AAED;;;;;;;;;AAOA,SAAOS,YAAP,CAAqBC,QAArB,EAA+BV,UAA/B,EAA4C;AAC3C,WAAO,IAAI,IAAJ,CAAUU,QAAQ,CAACZ,IAAnB,EAAyBY,QAAQ,CAACX,IAAT,CAAcS,KAAd,EAAzB,EAAgDR,UAAU,GAAGA,UAAH,GAAgBU,QAAQ,CAACV,UAAnF,CAAP;AACA;AAED;;;;;;;;;;AAUA;;;;;;;;;;AAUA;;;;;;;;;;;AAWA;;;;;;;;AA3GkD,C,CAmHnD;AACA;AACA;AACA;;AACA,SAASE,gBAAT,GAA4B;AAC3B,OAAKS,QAAL,CACC,KAAKb,IAAL,CAAUc,QAAV,CAAmBC,KADpB,EAEC,gBAFD,EAGC,CAAEC,KAAF,EAASC,IAAT,KAAmB;AAClB,UAAMC,SAAS,GAAGD,IAAI,CAAE,CAAF,CAAtB;;AAEA,QAAK,CAACC,SAAS,CAACC,mBAAhB,EAAsC;AACrC;AACA;;AAEDC,IAAAA,SAAS,CAACf,IAAV,CAAgB,IAAhB,EAAsBa,SAAtB;AACA,GAXF,EAYC;AAAEG,IAAAA,QAAQ,EAAE;AAAZ,GAZD;AAcA,C,CAED;AACA;AACA;AACA;;;AACA,SAASD,SAAT,CAAoBF,SAApB,EAAgC;AAC/B,QAAMI,MAAM,GAAG,KAAKC,yBAAL,CAAgCL,SAAhC,CAAf;;AAEA,MAAK,CAAC,KAAKM,OAAL,CAAcF,MAAd,CAAN,EAA+B;AAC9B,UAAMG,WAAW,GAAG,KAAKhB,UAAL,EAApB;AAEA,SAAKR,IAAL,GAAYqB,MAAM,CAACrB,IAAnB;AACA,SAAKD,IAAL,GAAYsB,MAAM,CAACtB,IAAnB;AAEA,SAAK0B,IAAL,CAAW,QAAX,EAAqBD,WAArB;AACA;AACD;;AAED7B,GAAG,CAAEE,YAAF,EAAgBH,YAAhB,CAAH","sourcesContent":["/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/model/liveposition\n */\n\nimport Position from './position';\nimport EmitterMixin from '@ckeditor/ckeditor5-utils/src/emittermixin';\nimport mix from '@ckeditor/ckeditor5-utils/src/mix';\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\n\n/**\n * `LivePosition` is a type of {@link module:engine/model/position~Position Position}\n * that updates itself as {@link module:engine/model/document~Document document}\n * is changed through operations. It may be used as a bookmark.\n *\n * **Note:** Contrary to {@link module:engine/model/position~Position}, `LivePosition` works only in roots that are\n * {@link module:engine/model/rootelement~RootElement}.\n * If {@link module:engine/model/documentfragment~DocumentFragment} is passed, error will be thrown.\n *\n * **Note:** Be very careful when dealing with `LivePosition`. Each `LivePosition` instance bind events that might\n * have to be unbound.\n * Use {@link module:engine/model/liveposition~LivePosition#detach} whenever you don't need `LivePosition` anymore.\n *\n * @extends module:engine/model/position~Position\n */\nexport default class LivePosition extends Position {\n\t/**\n\t * Creates a live position.\n\t *\n\t * @see module:engine/model/position~Position\n\t * @param {module:engine/model/rootelement~RootElement} root\n\t * @param {Array.<Number>} path\n\t * @param {module:engine/model/position~PositionStickiness} [stickiness]\n\t */\n\tconstructor( root, path, stickiness = 'toNone' ) {\n\t\tsuper( root, path, stickiness );\n\n\t\tif ( !this.root.is( 'rootElement' ) ) {\n\t\t\t/**\n\t\t\t * LivePosition's root has to be an instance of RootElement.\n\t\t\t *\n\t\t\t * @error liveposition-root-not-rootelement\n\t\t\t */\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'model-liveposition-root-not-rootelement: LivePosition\\'s root has to be an instance of RootElement.',\n\t\t\t\troot\n\t\t\t);\n\t\t}\n\n\t\tbindWithDocument.call( this );\n\t}\n\n\t/**\n\t * Unbinds all events previously bound by `LivePosition`. Use it whenever you don't need `LivePosition` instance\n\t * anymore (i.e. when leaving scope in which it was declared or before re-assigning variable that was\n\t * referring to it).\n\t */\n\tdetach() {\n\t\tthis.stopListening();\n\t}\n\n\t/**\n\t * Checks whether this object is of the given.\n\t *\n\t *\t\tlivePosition.is( 'position' ); // -> true\n\t *\t\tlivePosition.is( 'model:position' ); // -> true\n\t *\t\tlivePosition.is( 'liveposition' ); // -> true\n\t *\t\tlivePosition.is( 'model:livePosition' ); // -> true\n\t *\n\t *\t\tlivePosition.is( 'view:position' ); // -> false\n\t *\t\tlivePosition.is( 'documentSelection' ); // -> false\n\t *\n\t * {@link module:engine/model/node~Node#is Check the entire list of model objects} which implement the `is()` method.\n\t *\n\t * @param {String} type\n\t * @returns {Boolean}\n\t */\n\tis( type ) {\n\t\treturn type == 'livePosition' || type == 'model:livePosition' || super.is( type );\n\t}\n\n\t/**\n\t * Creates a {@link module:engine/model/position~Position position instance}, which is equal to this live position.\n\t *\n\t * @returns {module:engine/model/position~Position}\n\t */\n\ttoPosition() {\n\t\treturn new Position( this.root, this.path.slice(), this.stickiness );\n\t}\n\n\t/**\n\t * Creates a `LivePosition` instance that is equal to position.\n\t *\n\t * @param {module:engine/model/position~Position} position\n\t * @param {module:engine/model/position~PositionStickiness} [stickiness]\n\t * @returns {module:engine/model/position~Position}\n\t */\n\tstatic fromPosition( position, stickiness ) {\n\t\treturn new this( position.root, position.path.slice(), stickiness ? stickiness : position.stickiness );\n\t}\n\n\t/**\n\t * @static\n\t * @protected\n\t * @method module:engine/model/liveposition~LivePosition._createAfter\n\t * @see module:engine/model/position~Position._createAfter\n\t * @param {module:engine/model/node~Node} node\n\t * @param {module:engine/model/position~PositionStickiness} [stickiness='toNone']\n\t * @returns {module:engine/model/liveposition~LivePosition}\n\t */\n\n\t/**\n\t * @static\n\t * @protected\n\t * @method module:engine/model/liveposition~LivePosition._createBefore\n\t * @see module:engine/model/position~Position._createBefore\n\t * @param {module:engine/model/node~Node} node\n\t * @param {module:engine/model/position~PositionStickiness} [stickiness='toNone']\n\t * @returns {module:engine/model/liveposition~LivePosition}\n\t */\n\n\t/**\n\t * @static\n\t * @protected\n\t * @method module:engine/model/liveposition~LivePosition._createAt\n\t * @see module:engine/model/position~Position._createAt\n\t * @param {module:engine/model/item~Item|module:engine/model/position~Position} itemOrPosition\n\t * @param {Number|'end'|'before'|'after'} [offset]\n\t * @param {module:engine/model/position~PositionStickiness} [stickiness='toNone']\n\t * @returns {module:engine/model/liveposition~LivePosition}\n\t */\n\n\t/**\n\t * Fired when `LivePosition` instance is changed due to changes on {@link module:engine/model/document~Document}.\n\t *\n\t * @event module:engine/model/liveposition~LivePosition#change\n\t * @param {module:engine/model/position~Position} oldPosition Position equal to this live position before it got changed.\n\t */\n}\n\n// Binds this `LivePosition` to the {@link module:engine/model/document~Document document} that owns\n// this position's {@link module:engine/model/position~Position#root root}.\n//\n// @private\nfunction bindWithDocument() {\n\tthis.listenTo(\n\t\tthis.root.document.model,\n\t\t'applyOperation',\n\t\t( event, args ) => {\n\t\t\tconst operation = args[ 0 ];\n\n\t\t\tif ( !operation.isDocumentOperation ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\ttransform.call( this, operation );\n\t\t},\n\t\t{ priority: 'low' }\n\t);\n}\n\n// Updates this position accordingly to the updates applied to the model. Bases on change events.\n//\n// @private\n// @param {module:engine/model/operation/operation~Operation} operation Executed operation.\nfunction transform( operation ) {\n\tconst result = this.getTransformedByOperation( operation );\n\n\tif ( !this.isEqual( result ) ) {\n\t\tconst oldPosition = this.toPosition();\n\n\t\tthis.path = result.path;\n\t\tthis.root = result.root;\n\n\t\tthis.fire( 'change', oldPosition );\n\t}\n}\n\nmix( LivePosition, EmitterMixin );\n"]}]}