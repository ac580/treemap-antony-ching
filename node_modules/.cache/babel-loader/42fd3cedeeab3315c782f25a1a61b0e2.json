{"remainingRequest":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/babel-loader/lib/index.js!/Users/antonyching/Desktop/project/new-builder-demo/node_modules/@ckeditor/ckeditor5-engine/src/model/operation/moveoperation.js","dependencies":[{"path":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/@ckeditor/ckeditor5-engine/src/model/operation/moveoperation.js","mtime":499162500000},{"path":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/@ckeditor/ckeditor5-dev-webpack-plugin/lib/translatesourceloader.js","mtime":499162500000},{"path":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:LyoqCiAqIEBsaWNlbnNlIENvcHlyaWdodCAoYykgMjAwMy0yMDE5LCBDS1NvdXJjZSAtIEZyZWRlcmljbyBLbmFiYmVuLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKiBGb3IgbGljZW5zaW5nLCBzZWUgTElDRU5TRS5tZCBvciBodHRwczovL2NrZWRpdG9yLmNvbS9sZWdhbC9ja2VkaXRvci1vc3MtbGljZW5zZQogKi8KCi8qKgogKiBAbW9kdWxlIGVuZ2luZS9tb2RlbC9vcGVyYXRpb24vbW92ZW9wZXJhdGlvbgogKi8KaW1wb3J0IE9wZXJhdGlvbiBmcm9tICcuL29wZXJhdGlvbic7CmltcG9ydCBQb3NpdGlvbiBmcm9tICcuLi9wb3NpdGlvbic7CmltcG9ydCBSYW5nZSBmcm9tICcuLi9yYW5nZSc7CmltcG9ydCBDS0VkaXRvckVycm9yIGZyb20gJ0Bja2VkaXRvci9ja2VkaXRvcjUtdXRpbHMvc3JjL2NrZWRpdG9yZXJyb3InOwppbXBvcnQgY29tcGFyZUFycmF5cyBmcm9tICdAY2tlZGl0b3IvY2tlZGl0b3I1LXV0aWxzL3NyYy9jb21wYXJlYXJyYXlzJzsKaW1wb3J0IHsgX21vdmUgfSBmcm9tICcuL3V0aWxzJzsgLy8gQGlmIENLX0RFQlVHX0VOR0lORSAvLyBjb25zdCBNb2RlbFJhbmdlID0gcmVxdWlyZSggJy4uL3JhbmdlJyApLmRlZmF1bHQ7CgovKioKICogT3BlcmF0aW9uIHRvIG1vdmUgYSByYW5nZSBvZiB7QGxpbmsgbW9kdWxlOmVuZ2luZS9tb2RlbC9pdGVtfkl0ZW0gbW9kZWwgaXRlbXN9CiAqIHRvIGdpdmVuIHtAbGluayBtb2R1bGU6ZW5naW5lL21vZGVsL3Bvc2l0aW9uflBvc2l0aW9uIHRhcmdldCBwb3NpdGlvbn0uCiAqCiAqIEBleHRlbmRzIG1vZHVsZTplbmdpbmUvbW9kZWwvb3BlcmF0aW9uL29wZXJhdGlvbn5PcGVyYXRpb24KICovCgpleHBvcnQgZGVmYXVsdCBjbGFzcyBNb3ZlT3BlcmF0aW9uIGV4dGVuZHMgT3BlcmF0aW9uIHsKICAvKioKICAgKiBDcmVhdGVzIGEgbW92ZSBvcGVyYXRpb24uCiAgICoKICAgKiBAcGFyYW0ge21vZHVsZTplbmdpbmUvbW9kZWwvcG9zaXRpb25+UG9zaXRpb259IHNvdXJjZVBvc2l0aW9uCiAgICogUG9zaXRpb24gYmVmb3JlIHRoZSBmaXJzdCB7QGxpbmsgbW9kdWxlOmVuZ2luZS9tb2RlbC9pdGVtfkl0ZW0gbW9kZWwgaXRlbX0gdG8gbW92ZS4KICAgKiBAcGFyYW0ge051bWJlcn0gaG93TWFueSBPZmZzZXQgc2l6ZSBvZiBtb3ZlZCByYW5nZS4gTW92ZWQgcmFuZ2Ugd2lsbCBzdGFydCBmcm9tIGBzb3VyY2VQb3NpdGlvbmAgYW5kIGVuZCBhdAogICAqIGBzb3VyY2VQb3NpdGlvbmAgd2l0aCBvZmZzZXQgc2hpZnRlZCBieSBgaG93TWFueWAuCiAgICogQHBhcmFtIHttb2R1bGU6ZW5naW5lL21vZGVsL3Bvc2l0aW9uflBvc2l0aW9ufSB0YXJnZXRQb3NpdGlvbiBQb3NpdGlvbiBhdCB3aGljaCBtb3ZlZCBub2RlcyB3aWxsIGJlIGluc2VydGVkLgogICAqIEBwYXJhbSB7TnVtYmVyfG51bGx9IGJhc2VWZXJzaW9uIERvY3VtZW50IHtAbGluayBtb2R1bGU6ZW5naW5lL21vZGVsL2RvY3VtZW50fkRvY3VtZW50I3ZlcnNpb259IG9uIHdoaWNoIG9wZXJhdGlvbgogICAqIGNhbiBiZSBhcHBsaWVkIG9yIGBudWxsYCBpZiB0aGUgb3BlcmF0aW9uIG9wZXJhdGVzIG9uIGRldGFjaGVkIChub24tZG9jdW1lbnQpIHRyZWUuCiAgICovCiAgY29uc3RydWN0b3Ioc291cmNlUG9zaXRpb24sIGhvd01hbnksIHRhcmdldFBvc2l0aW9uLCBiYXNlVmVyc2lvbikgewogICAgc3VwZXIoYmFzZVZlcnNpb24pOwogICAgLyoqCiAgICAgKiBQb3NpdGlvbiBiZWZvcmUgdGhlIGZpcnN0IHtAbGluayBtb2R1bGU6ZW5naW5lL21vZGVsL2l0ZW1+SXRlbSBtb2RlbCBpdGVtfSB0byBtb3ZlLgogICAgICoKICAgICAqIEBtZW1iZXIge21vZHVsZTplbmdpbmUvbW9kZWwvcG9zaXRpb25+UG9zaXRpb259IG1vZHVsZTplbmdpbmUvbW9kZWwvb3BlcmF0aW9uL21vdmVvcGVyYXRpb25+TW92ZU9wZXJhdGlvbiNzb3VyY2VQb3NpdGlvbgogICAgICovCgogICAgdGhpcy5zb3VyY2VQb3NpdGlvbiA9IHNvdXJjZVBvc2l0aW9uLmNsb25lKCk7IC8vIGAndG9OZXh0J2AgYmVjYXVzZSBgc291cmNlUG9zaXRpb25gIGlzIGEgYml0IGxpa2UgYSBzdGFydCBvZiB0aGUgbW92ZWQgcmFuZ2UuCgogICAgdGhpcy5zb3VyY2VQb3NpdGlvbi5zdGlja2luZXNzID0gJ3RvTmV4dCc7CiAgICAvKioKICAgICAqIE9mZnNldCBzaXplIG9mIG1vdmVkIHJhbmdlLgogICAgICoKICAgICAqIEBtZW1iZXIge051bWJlcn0gbW9kdWxlOmVuZ2luZS9tb2RlbC9vcGVyYXRpb24vbW92ZW9wZXJhdGlvbn5Nb3ZlT3BlcmF0aW9uI2hvd01hbnkKICAgICAqLwoKICAgIHRoaXMuaG93TWFueSA9IGhvd01hbnk7CiAgICAvKioKICAgICAqIFBvc2l0aW9uIGF0IHdoaWNoIG1vdmVkIG5vZGVzIHdpbGwgYmUgaW5zZXJ0ZWQuCiAgICAgKgogICAgICogQG1lbWJlciB7bW9kdWxlOmVuZ2luZS9tb2RlbC9wb3NpdGlvbn5Qb3NpdGlvbn0gbW9kdWxlOmVuZ2luZS9tb2RlbC9vcGVyYXRpb24vbW92ZW9wZXJhdGlvbn5Nb3ZlT3BlcmF0aW9uI3RhcmdldFBvc2l0aW9uCiAgICAgKi8KCiAgICB0aGlzLnRhcmdldFBvc2l0aW9uID0gdGFyZ2V0UG9zaXRpb24uY2xvbmUoKTsKICAgIHRoaXMudGFyZ2V0UG9zaXRpb24uc3RpY2tpbmVzcyA9ICd0b05vbmUnOwogIH0KICAvKioKICAgKiBAaW5oZXJpdERvYwogICAqLwoKCiAgZ2V0IHR5cGUoKSB7CiAgICBpZiAodGhpcy50YXJnZXRQb3NpdGlvbi5yb290LnJvb3ROYW1lID09ICckZ3JhdmV5YXJkJykgewogICAgICByZXR1cm4gJ3JlbW92ZSc7CiAgICB9IGVsc2UgaWYgKHRoaXMuc291cmNlUG9zaXRpb24ucm9vdC5yb290TmFtZSA9PSAnJGdyYXZleWFyZCcpIHsKICAgICAgcmV0dXJuICdyZWluc2VydCc7CiAgICB9CgogICAgcmV0dXJuICdtb3ZlJzsKICB9CiAgLyoqCiAgICogQ3JlYXRlcyBhbmQgcmV0dXJucyBhbiBvcGVyYXRpb24gdGhhdCBoYXMgdGhlIHNhbWUgcGFyYW1ldGVycyBhcyB0aGlzIG9wZXJhdGlvbi4KICAgKgogICAqIEByZXR1cm5zIHttb2R1bGU6ZW5naW5lL21vZGVsL29wZXJhdGlvbi9tb3Zlb3BlcmF0aW9ufk1vdmVPcGVyYXRpb259IENsb25lIG9mIHRoaXMgb3BlcmF0aW9uLgogICAqLwoKCiAgY2xvbmUoKSB7CiAgICByZXR1cm4gbmV3IHRoaXMuY29uc3RydWN0b3IodGhpcy5zb3VyY2VQb3NpdGlvbiwgdGhpcy5ob3dNYW55LCB0aGlzLnRhcmdldFBvc2l0aW9uLCB0aGlzLmJhc2VWZXJzaW9uKTsKICB9CiAgLyoqCiAgICogUmV0dXJucyB0aGUgc3RhcnQgcG9zaXRpb24gb2YgdGhlIG1vdmVkIHJhbmdlIGFmdGVyIGl0IGdvdCBtb3ZlZC4gVGhpcyBtYXkgYmUgZGlmZmVyZW50IHRoYW4KICAgKiB7QGxpbmsgbW9kdWxlOmVuZ2luZS9tb2RlbC9vcGVyYXRpb24vbW92ZW9wZXJhdGlvbn5Nb3ZlT3BlcmF0aW9uI3RhcmdldFBvc2l0aW9ufSBpbiBzb21lIGNhc2VzLCBpLmUuIHdoZW4gYSByYW5nZSBpcyBtb3ZlZAogICAqIGluc2lkZSB0aGUgc2FtZSBwYXJlbnQgYnV0IHtAbGluayBtb2R1bGU6ZW5naW5lL21vZGVsL29wZXJhdGlvbi9tb3Zlb3BlcmF0aW9ufk1vdmVPcGVyYXRpb24jdGFyZ2V0UG9zaXRpb24gdGFyZ2V0UG9zaXRpb259CiAgICogaXMgYWZ0ZXIge0BsaW5rIG1vZHVsZTplbmdpbmUvbW9kZWwvb3BlcmF0aW9uL21vdmVvcGVyYXRpb25+TW92ZU9wZXJhdGlvbiNzb3VyY2VQb3NpdGlvbiBzb3VyY2VQb3NpdGlvbn0uCiAgICoKICAgKgkJIHZ2ICAgICAgICAgICAgICB2dgogICAqCQlhYmNkZWZnID09PT4gYWRlZmJjZwogICAqCQkgICAgIF4gICAgICAgICAgXgogICAqCQkgICAgIHRhcmdldFBvcwltb3ZlZFJhbmdlU3RhcnQKICAgKgkJICAgICBvZmZzZXQgNglvZmZzZXQgNAogICAqCiAgICogQHJldHVybnMge21vZHVsZTplbmdpbmUvbW9kZWwvcG9zaXRpb25+UG9zaXRpb259CiAgICovCgoKICBnZXRNb3ZlZFJhbmdlU3RhcnQoKSB7CiAgICByZXR1cm4gdGhpcy50YXJnZXRQb3NpdGlvbi5fZ2V0VHJhbnNmb3JtZWRCeURlbGV0aW9uKHRoaXMuc291cmNlUG9zaXRpb24sIHRoaXMuaG93TWFueSk7CiAgfQogIC8qKgogICAqIFNlZSB7QGxpbmsgbW9kdWxlOmVuZ2luZS9tb2RlbC9vcGVyYXRpb24vb3BlcmF0aW9ufk9wZXJhdGlvbiNnZXRSZXZlcnNlZCBgT3BlcmF0aW9uI2dldFJldmVyc2VkKClgfS4KICAgKgogICAqIEByZXR1cm5zIHttb2R1bGU6ZW5naW5lL21vZGVsL29wZXJhdGlvbi9tb3Zlb3BlcmF0aW9ufk1vdmVPcGVyYXRpb259CiAgICovCgoKICBnZXRSZXZlcnNlZCgpIHsKICAgIGNvbnN0IG5ld1RhcmdldFBvc2l0aW9uID0gdGhpcy5zb3VyY2VQb3NpdGlvbi5fZ2V0VHJhbnNmb3JtZWRCeUluc2VydGlvbih0aGlzLnRhcmdldFBvc2l0aW9uLCB0aGlzLmhvd01hbnkpOwoKICAgIHJldHVybiBuZXcgdGhpcy5jb25zdHJ1Y3Rvcih0aGlzLmdldE1vdmVkUmFuZ2VTdGFydCgpLCB0aGlzLmhvd01hbnksIG5ld1RhcmdldFBvc2l0aW9uLCB0aGlzLmJhc2VWZXJzaW9uICsgMSk7CiAgfQogIC8qKgogICAqIEBpbmhlcml0RG9jCiAgICovCgoKICBfdmFsaWRhdGUoKSB7CiAgICBjb25zdCBzb3VyY2VFbGVtZW50ID0gdGhpcy5zb3VyY2VQb3NpdGlvbi5wYXJlbnQ7CiAgICBjb25zdCB0YXJnZXRFbGVtZW50ID0gdGhpcy50YXJnZXRQb3NpdGlvbi5wYXJlbnQ7CiAgICBjb25zdCBzb3VyY2VPZmZzZXQgPSB0aGlzLnNvdXJjZVBvc2l0aW9uLm9mZnNldDsKICAgIGNvbnN0IHRhcmdldE9mZnNldCA9IHRoaXMudGFyZ2V0UG9zaXRpb24ub2Zmc2V0OyAvLyBWYWxpZGF0ZSB3aGV0aGVyIG1vdmUgb3BlcmF0aW9uIGhhcyBjb3JyZWN0IHBhcmFtZXRlcnMuCiAgICAvLyBWYWxpZGF0aW9uIGlzIHByZXR0eSBjb21wbGV4IGJ1dCBtb3ZlIG9wZXJhdGlvbiBpcyBvbmUgb2YgdGhlIGNvcmUgd2F5cyB0byBtYW5pcHVsYXRlIHRoZSBkb2N1bWVudCBzdGF0ZS4KICAgIC8vIFdlIGV4cGVjdCB0aGF0IG1hbnkgZXJyb3JzIG1pZ2h0IGJlIGNvbm5lY3RlZCB3aXRoIG9uZSBvZiBzY2VuYXJpb3MgZGVzY3JpYmVkIGJlbG93LgoKICAgIGlmIChzb3VyY2VPZmZzZXQgKyB0aGlzLmhvd01hbnkgPiBzb3VyY2VFbGVtZW50Lm1heE9mZnNldCkgewogICAgICAvKioKICAgICAgICogVGhlIG5vZGVzIHdoaWNoIHNob3VsZCBiZSBtb3ZlZCBkbyBub3QgZXhpc3QuCiAgICAgICAqCiAgICAgICAqIEBlcnJvciBtb3ZlLW9wZXJhdGlvbi1ub2Rlcy1kby1ub3QtZXhpc3QKICAgICAgICovCiAgICAgIHRocm93IG5ldyBDS0VkaXRvckVycm9yKCdtb3ZlLW9wZXJhdGlvbi1ub2Rlcy1kby1ub3QtZXhpc3Q6IFRoZSBub2RlcyB3aGljaCBzaG91bGQgYmUgbW92ZWQgZG8gbm90IGV4aXN0LicsIHRoaXMpOwogICAgfSBlbHNlIGlmIChzb3VyY2VFbGVtZW50ID09PSB0YXJnZXRFbGVtZW50ICYmIHNvdXJjZU9mZnNldCA8IHRhcmdldE9mZnNldCAmJiB0YXJnZXRPZmZzZXQgPCBzb3VyY2VPZmZzZXQgKyB0aGlzLmhvd01hbnkpIHsKICAgICAgLyoqCiAgICAgICAqIFRyeWluZyB0byBtb3ZlIGEgcmFuZ2Ugb2Ygbm9kZXMgaW50byB0aGUgbWlkZGxlIG9mIHRoYXQgcmFuZ2UuCiAgICAgICAqCiAgICAgICAqIEBlcnJvciBtb3ZlLW9wZXJhdGlvbi1yYW5nZS1pbnRvLWl0c2VsZgogICAgICAgKi8KICAgICAgdGhyb3cgbmV3IENLRWRpdG9yRXJyb3IoJ21vdmUtb3BlcmF0aW9uLXJhbmdlLWludG8taXRzZWxmOiBUcnlpbmcgdG8gbW92ZSBhIHJhbmdlIG9mIG5vZGVzIHRvIHRoZSBpbnNpZGUgb2YgdGhhdCByYW5nZS4nLCB0aGlzKTsKICAgIH0gZWxzZSBpZiAodGhpcy5zb3VyY2VQb3NpdGlvbi5yb290ID09IHRoaXMudGFyZ2V0UG9zaXRpb24ucm9vdCkgewogICAgICBpZiAoY29tcGFyZUFycmF5cyh0aGlzLnNvdXJjZVBvc2l0aW9uLmdldFBhcmVudFBhdGgoKSwgdGhpcy50YXJnZXRQb3NpdGlvbi5nZXRQYXJlbnRQYXRoKCkpID09ICdwcmVmaXgnKSB7CiAgICAgICAgY29uc3QgaSA9IHRoaXMuc291cmNlUG9zaXRpb24ucGF0aC5sZW5ndGggLSAxOwoKICAgICAgICBpZiAodGhpcy50YXJnZXRQb3NpdGlvbi5wYXRoW2ldID49IHNvdXJjZU9mZnNldCAmJiB0aGlzLnRhcmdldFBvc2l0aW9uLnBhdGhbaV0gPCBzb3VyY2VPZmZzZXQgKyB0aGlzLmhvd01hbnkpIHsKICAgICAgICAgIC8qKgogICAgICAgICAgICogVHJ5aW5nIHRvIG1vdmUgYSByYW5nZSBvZiBub2RlcyBpbnRvIG9uZSBvZiBub2RlcyBmcm9tIHRoYXQgcmFuZ2UuCiAgICAgICAgICAgKgogICAgICAgICAgICogQGVycm9yIG1vdmUtb3BlcmF0aW9uLW5vZGUtaW50by1pdHNlbGYKICAgICAgICAgICAqLwogICAgICAgICAgdGhyb3cgbmV3IENLRWRpdG9yRXJyb3IoJ21vdmUtb3BlcmF0aW9uLW5vZGUtaW50by1pdHNlbGY6IFRyeWluZyB0byBtb3ZlIGEgcmFuZ2Ugb2Ygbm9kZXMgaW50byBvbmUgb2Ygbm9kZXMgZnJvbSB0aGF0IHJhbmdlLicsIHRoaXMpOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH0KICAvKioKICAgKiBAaW5oZXJpdERvYwogICAqLwoKCiAgX2V4ZWN1dGUoKSB7CiAgICBfbW92ZShSYW5nZS5fY3JlYXRlRnJvbVBvc2l0aW9uQW5kU2hpZnQodGhpcy5zb3VyY2VQb3NpdGlvbiwgdGhpcy5ob3dNYW55KSwgdGhpcy50YXJnZXRQb3NpdGlvbik7CiAgfQogIC8qKgogICAqIEBpbmhlcml0RG9jCiAgICovCgoKICB0b0pTT04oKSB7CiAgICBjb25zdCBqc29uID0gc3VwZXIudG9KU09OKCk7CiAgICBqc29uLnNvdXJjZVBvc2l0aW9uID0gdGhpcy5zb3VyY2VQb3NpdGlvbi50b0pTT04oKTsKICAgIGpzb24udGFyZ2V0UG9zaXRpb24gPSB0aGlzLnRhcmdldFBvc2l0aW9uLnRvSlNPTigpOwogICAgcmV0dXJuIGpzb247CiAgfQogIC8qKgogICAqIEBpbmhlcml0RG9jCiAgICovCgoKICBzdGF0aWMgZ2V0IGNsYXNzTmFtZSgpIHsKICAgIHJldHVybiAnTW92ZU9wZXJhdGlvbic7CiAgfQogIC8qKgogICAqIENyZWF0ZXMgYE1vdmVPcGVyYXRpb25gIG9iamVjdCBmcm9tIGRlc2VyaWxpemVkIG9iamVjdCwgaS5lLiBmcm9tIHBhcnNlZCBKU09OIHN0cmluZy4KICAgKgogICAqIEBwYXJhbSB7T2JqZWN0fSBqc29uIERlc2VyaWFsaXplZCBKU09OIG9iamVjdC4KICAgKiBAcGFyYW0ge21vZHVsZTplbmdpbmUvbW9kZWwvZG9jdW1lbnR+RG9jdW1lbnR9IGRvY3VtZW50IERvY3VtZW50IG9uIHdoaWNoIHRoaXMgb3BlcmF0aW9uIHdpbGwgYmUgYXBwbGllZC4KICAgKiBAcmV0dXJucyB7bW9kdWxlOmVuZ2luZS9tb2RlbC9vcGVyYXRpb24vbW92ZW9wZXJhdGlvbn5Nb3ZlT3BlcmF0aW9ufQogICAqLwoKCiAgc3RhdGljIGZyb21KU09OKGpzb24sIGRvY3VtZW50KSB7CiAgICBjb25zdCBzb3VyY2VQb3NpdGlvbiA9IFBvc2l0aW9uLmZyb21KU09OKGpzb24uc291cmNlUG9zaXRpb24sIGRvY3VtZW50KTsKICAgIGNvbnN0IHRhcmdldFBvc2l0aW9uID0gUG9zaXRpb24uZnJvbUpTT04oanNvbi50YXJnZXRQb3NpdGlvbiwgZG9jdW1lbnQpOwogICAgcmV0dXJuIG5ldyB0aGlzKHNvdXJjZVBvc2l0aW9uLCBqc29uLmhvd01hbnksIHRhcmdldFBvc2l0aW9uLCBqc29uLmJhc2VWZXJzaW9uKTsKICB9IC8vIEBpZiBDS19ERUJVR19FTkdJTkUgLy8gdG9TdHJpbmcoKSB7CiAgLy8gQGlmIENLX0RFQlVHX0VOR0lORSAvLyAJY29uc3QgcmFuZ2UgPSBNb2RlbFJhbmdlLl9jcmVhdGVGcm9tUG9zaXRpb25BbmRTaGlmdCggdGhpcy5zb3VyY2VQb3NpdGlvbiwgdGhpcy5ob3dNYW55ICk7CiAgLy8gQGlmIENLX0RFQlVHX0VOR0lORSAvLwlyZXR1cm4gYE1vdmVPcGVyYXRpb24oICR7IHRoaXMuYmFzZVZlcnNpb24gfSApOiAkeyByYW5nZSB9IC0+ICR7IHRoaXMudGFyZ2V0UG9zaXRpb24gfWA7CiAgLy8gQGlmIENLX0RFQlVHX0VOR0lORSAvLyB9CgoKfQ=="},{"version":3,"sources":["/Users/antonyching/Desktop/project/new-builder-demo/node_modules/@ckeditor/ckeditor5-engine/src/model/operation/moveoperation.js"],"names":["Operation","Position","Range","CKEditorError","compareArrays","_move","MoveOperation","constructor","sourcePosition","howMany","targetPosition","baseVersion","clone","stickiness","type","root","rootName","getMovedRangeStart","_getTransformedByDeletion","getReversed","newTargetPosition","_getTransformedByInsertion","_validate","sourceElement","parent","targetElement","sourceOffset","offset","targetOffset","maxOffset","getParentPath","i","path","length","_execute","_createFromPositionAndShift","toJSON","json","className","fromJSON","document"],"mappings":"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","sourcesContent":["/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/model/operation/moveoperation\n */\n\nimport Operation from './operation';\nimport Position from '../position';\nimport Range from '../range';\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\nimport compareArrays from '@ckeditor/ckeditor5-utils/src/comparearrays';\nimport { _move } from './utils';\n\n// @if CK_DEBUG_ENGINE // const ModelRange = require( '../range' ).default;\n\n/**\n * Operation to move a range of {@link module:engine/model/item~Item model items}\n * to given {@link module:engine/model/position~Position target position}.\n *\n * @extends module:engine/model/operation/operation~Operation\n */\nexport default class MoveOperation extends Operation {\n\t/**\n\t * Creates a move operation.\n\t *\n\t * @param {module:engine/model/position~Position} sourcePosition\n\t * Position before the first {@link module:engine/model/item~Item model item} to move.\n\t * @param {Number} howMany Offset size of moved range. Moved range will start from `sourcePosition` and end at\n\t * `sourcePosition` with offset shifted by `howMany`.\n\t * @param {module:engine/model/position~Position} targetPosition Position at which moved nodes will be inserted.\n\t * @param {Number|null} baseVersion Document {@link module:engine/model/document~Document#version} on which operation\n\t * can be applied or `null` if the operation operates on detached (non-document) tree.\n\t */\n\tconstructor( sourcePosition, howMany, targetPosition, baseVersion ) {\n\t\tsuper( baseVersion );\n\n\t\t/**\n\t\t * Position before the first {@link module:engine/model/item~Item model item} to move.\n\t\t *\n\t\t * @member {module:engine/model/position~Position} module:engine/model/operation/moveoperation~MoveOperation#sourcePosition\n\t\t */\n\t\tthis.sourcePosition = sourcePosition.clone();\n\t\t// `'toNext'` because `sourcePosition` is a bit like a start of the moved range.\n\t\tthis.sourcePosition.stickiness = 'toNext';\n\n\t\t/**\n\t\t * Offset size of moved range.\n\t\t *\n\t\t * @member {Number} module:engine/model/operation/moveoperation~MoveOperation#howMany\n\t\t */\n\t\tthis.howMany = howMany;\n\n\t\t/**\n\t\t * Position at which moved nodes will be inserted.\n\t\t *\n\t\t * @member {module:engine/model/position~Position} module:engine/model/operation/moveoperation~MoveOperation#targetPosition\n\t\t */\n\t\tthis.targetPosition = targetPosition.clone();\n\t\tthis.targetPosition.stickiness = 'toNone';\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tget type() {\n\t\tif ( this.targetPosition.root.rootName == '$graveyard' ) {\n\t\t\treturn 'remove';\n\t\t} else if ( this.sourcePosition.root.rootName == '$graveyard' ) {\n\t\t\treturn 'reinsert';\n\t\t}\n\n\t\treturn 'move';\n\t}\n\n\t/**\n\t * Creates and returns an operation that has the same parameters as this operation.\n\t *\n\t * @returns {module:engine/model/operation/moveoperation~MoveOperation} Clone of this operation.\n\t */\n\tclone() {\n\t\treturn new this.constructor( this.sourcePosition, this.howMany, this.targetPosition, this.baseVersion );\n\t}\n\n\t/**\n\t * Returns the start position of the moved range after it got moved. This may be different than\n\t * {@link module:engine/model/operation/moveoperation~MoveOperation#targetPosition} in some cases, i.e. when a range is moved\n\t * inside the same parent but {@link module:engine/model/operation/moveoperation~MoveOperation#targetPosition targetPosition}\n\t * is after {@link module:engine/model/operation/moveoperation~MoveOperation#sourcePosition sourcePosition}.\n\t *\n\t *\t\t vv              vv\n\t *\t\tabcdefg ===> adefbcg\n\t *\t\t     ^          ^\n\t *\t\t     targetPos\tmovedRangeStart\n\t *\t\t     offset 6\toffset 4\n\t *\n\t * @returns {module:engine/model/position~Position}\n\t */\n\tgetMovedRangeStart() {\n\t\treturn this.targetPosition._getTransformedByDeletion( this.sourcePosition, this.howMany );\n\t}\n\n\t/**\n\t * See {@link module:engine/model/operation/operation~Operation#getReversed `Operation#getReversed()`}.\n\t *\n\t * @returns {module:engine/model/operation/moveoperation~MoveOperation}\n\t */\n\tgetReversed() {\n\t\tconst newTargetPosition = this.sourcePosition._getTransformedByInsertion( this.targetPosition, this.howMany );\n\n\t\treturn new this.constructor( this.getMovedRangeStart(), this.howMany, newTargetPosition, this.baseVersion + 1 );\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\t_validate() {\n\t\tconst sourceElement = this.sourcePosition.parent;\n\t\tconst targetElement = this.targetPosition.parent;\n\t\tconst sourceOffset = this.sourcePosition.offset;\n\t\tconst targetOffset = this.targetPosition.offset;\n\n\t\t// Validate whether move operation has correct parameters.\n\t\t// Validation is pretty complex but move operation is one of the core ways to manipulate the document state.\n\t\t// We expect that many errors might be connected with one of scenarios described below.\n\t\tif ( sourceOffset + this.howMany > sourceElement.maxOffset ) {\n\t\t\t/**\n\t\t\t * The nodes which should be moved do not exist.\n\t\t\t *\n\t\t\t * @error move-operation-nodes-do-not-exist\n\t\t\t */\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'move-operation-nodes-do-not-exist: The nodes which should be moved do not exist.', this\n\t\t\t);\n\t\t} else if ( sourceElement === targetElement && sourceOffset < targetOffset && targetOffset < sourceOffset + this.howMany ) {\n\t\t\t/**\n\t\t\t * Trying to move a range of nodes into the middle of that range.\n\t\t\t *\n\t\t\t * @error move-operation-range-into-itself\n\t\t\t */\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'move-operation-range-into-itself: Trying to move a range of nodes to the inside of that range.', this\n\t\t\t);\n\t\t} else if ( this.sourcePosition.root == this.targetPosition.root ) {\n\t\t\tif ( compareArrays( this.sourcePosition.getParentPath(), this.targetPosition.getParentPath() ) == 'prefix' ) {\n\t\t\t\tconst i = this.sourcePosition.path.length - 1;\n\n\t\t\t\tif ( this.targetPosition.path[ i ] >= sourceOffset && this.targetPosition.path[ i ] < sourceOffset + this.howMany ) {\n\t\t\t\t\t/**\n\t\t\t\t\t * Trying to move a range of nodes into one of nodes from that range.\n\t\t\t\t\t *\n\t\t\t\t\t * @error move-operation-node-into-itself\n\t\t\t\t\t */\n\t\t\t\t\tthrow new CKEditorError(\n\t\t\t\t\t\t'move-operation-node-into-itself: Trying to move a range of nodes into one of nodes from that range.', this\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\t_execute() {\n\t\t_move( Range._createFromPositionAndShift( this.sourcePosition, this.howMany ), this.targetPosition );\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\ttoJSON() {\n\t\tconst json = super.toJSON();\n\n\t\tjson.sourcePosition = this.sourcePosition.toJSON();\n\t\tjson.targetPosition = this.targetPosition.toJSON();\n\n\t\treturn json;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tstatic get className() {\n\t\treturn 'MoveOperation';\n\t}\n\n\t/**\n\t * Creates `MoveOperation` object from deserilized object, i.e. from parsed JSON string.\n\t *\n\t * @param {Object} json Deserialized JSON object.\n\t * @param {module:engine/model/document~Document} document Document on which this operation will be applied.\n\t * @returns {module:engine/model/operation/moveoperation~MoveOperation}\n\t */\n\tstatic fromJSON( json, document ) {\n\t\tconst sourcePosition = Position.fromJSON( json.sourcePosition, document );\n\t\tconst targetPosition = Position.fromJSON( json.targetPosition, document );\n\n\t\treturn new this( sourcePosition, json.howMany, targetPosition, json.baseVersion );\n\t}\n\n\t// @if CK_DEBUG_ENGINE // toString() {\n\t// @if CK_DEBUG_ENGINE // \tconst range = ModelRange._createFromPositionAndShift( this.sourcePosition, this.howMany );\n\n\t// @if CK_DEBUG_ENGINE //\treturn `MoveOperation( ${ this.baseVersion } ): ${ range } -> ${ this.targetPosition }`;\n\t// @if CK_DEBUG_ENGINE // }\n}\n"]}]}