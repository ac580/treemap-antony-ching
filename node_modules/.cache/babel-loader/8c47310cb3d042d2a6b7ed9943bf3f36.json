{"remainingRequest":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/babel-loader/lib/index.js!/Users/antonyching/Desktop/project/new-builder-demo/node_modules/@ckeditor/ckeditor5-table/src/commands/mergecellcommand.js","dependencies":[{"path":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/@ckeditor/ckeditor5-table/src/commands/mergecellcommand.js","mtime":499162500000},{"path":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/@ckeditor/ckeditor5-dev-webpack-plugin/lib/translatesourceloader.js","mtime":499162500000},{"path":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:LyoqCiAqIEBsaWNlbnNlIENvcHlyaWdodCAoYykgMjAwMy0yMDE5LCBDS1NvdXJjZSAtIEZyZWRlcmljbyBLbmFiYmVuLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKiBGb3IgbGljZW5zaW5nLCBzZWUgTElDRU5TRS5tZCBvciBodHRwczovL2NrZWRpdG9yLmNvbS9sZWdhbC9ja2VkaXRvci1vc3MtbGljZW5zZQogKi8KCi8qKgogKiBAbW9kdWxlIHRhYmxlL2NvbW1hbmRzL21lcmdlY2VsbGNvbW1hbmQKICovCmltcG9ydCBDb21tYW5kIGZyb20gJ0Bja2VkaXRvci9ja2VkaXRvcjUtY29yZS9zcmMvY29tbWFuZCc7CmltcG9ydCBUYWJsZVdhbGtlciBmcm9tICcuLi90YWJsZXdhbGtlcic7CmltcG9ydCB7IGZpbmRBbmNlc3RvciwgdXBkYXRlTnVtZXJpY0F0dHJpYnV0ZSB9IGZyb20gJy4vdXRpbHMnOwovKioKICogVGhlIG1lcmdlIGNlbGwgY29tbWFuZC4KICoKICogVGhlIGNvbW1hbmQgaXMgcmVnaXN0ZXJlZCBieSB7QGxpbmsgbW9kdWxlOnRhYmxlL3RhYmxlZWRpdGluZ35UYWJsZUVkaXRpbmd9IGFzIGAnbWVyZ2VUYWJsZUNlbGxSaWdodCdgLCBgJ21lcmdlVGFibGVDZWxsTGVmdCdgLAogKiBgJ21lcmdlVGFibGVDZWxsVXAnYCBhbmQgYCdtZXJnZVRhYmxlQ2VsbERvd24nYCBlZGl0b3IgY29tbWFuZHMuCiAqCiAqIFRvIG1lcmdlIGEgdGFibGUgY2VsbCBhdCB0aGUgY3VycmVudCBzZWxlY3Rpb24gd2l0aCBhbm90aGVyIGNlbGwsIGV4ZWN1dGUgdGhlIGNvbW1hbmQgY29ycmVzcG9uZGluZyB3aXRoIHRoZSBwcmVmZXJyZWQgZGlyZWN0aW9uLgogKgogKiBGb3IgZXhhbXBsZSwgdG8gbWVyZ2Ugd2l0aCBhIGNlbGwgdG8gdGhlIHJpZ2h0OgogKgogKgkJZWRpdG9yLmV4ZWN1dGUoICdtZXJnZVRhYmxlQ2VsbFJpZ2h0JyApOwogKgogKiAqKk5vdGUqKjogSWYgYSB0YWJsZSBjZWxsIGhhcyBhIGRpZmZlcmVudCBbYHJvd3NwYW5gXShodHRwczovL3d3dy53My5vcmcvVFIvaHRtbDUwL3RhYnVsYXItZGF0YS5odG1sI2F0dHItdGR0aC1yb3dzcGFuKQogKiAoZm9yIGAnbWVyZ2VUYWJsZUNlbGxSaWdodCdgIGFuZCBgJ21lcmdlVGFibGVDZWxsTGVmdCdgKSBvciBbYGNvbHNwYW5gXShodHRwczovL3d3dy53My5vcmcvVFIvaHRtbDUwL3RhYnVsYXItZGF0YS5odG1sI2F0dHItdGR0aC1jb2xzcGFuKQogKiAoZm9yIGAnbWVyZ2VUYWJsZUNlbGxVcCdgIGFuZCBgJ21lcmdlVGFibGVDZWxsRG93bidgKSwgdGhlIGNvbW1hbmQgd2lsbCBiZSBkaXNhYmxlZC4KICoKICogQGV4dGVuZHMgbW9kdWxlOmNvcmUvY29tbWFuZH5Db21tYW5kCiAqLwoKZXhwb3J0IGRlZmF1bHQgY2xhc3MgTWVyZ2VDZWxsQ29tbWFuZCBleHRlbmRzIENvbW1hbmQgewogIC8qKgogICAqIENyZWF0ZXMgYSBuZXcgYE1lcmdlQ2VsbENvbW1hbmRgIGluc3RhbmNlLgogICAqCiAgICogQHBhcmFtIHttb2R1bGU6Y29yZS9lZGl0b3IvZWRpdG9yfkVkaXRvcn0gZWRpdG9yIFRoZSBlZGl0b3Igb24gd2hpY2ggdGhpcyBjb21tYW5kIHdpbGwgYmUgdXNlZC4KICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucwogICAqIEBwYXJhbSB7U3RyaW5nfSBvcHRpb25zLmRpcmVjdGlvbiBJbmRpY2F0ZXMgd2hpY2ggY2VsbCB0byBtZXJnZSB3aXRoIHRoZSBjdXJyZW50bHkgc2VsZWN0ZWQgb25lLgogICAqIFBvc3NpYmxlIHZhbHVlcyBhcmU6IGAnbGVmdCdgLCBgJ3JpZ2h0J2AsIGAndXAnYCBhbmQgYCdkb3duJ2AuCiAgICovCiAgY29uc3RydWN0b3IoZWRpdG9yLCBvcHRpb25zKSB7CiAgICBzdXBlcihlZGl0b3IpOwogICAgLyoqCiAgICAgKiBUaGUgZGlyZWN0aW9uIHRoYXQgaW5kaWNhdGVzIHdoaWNoIGNlbGwgd2lsbCBiZSBtZXJnZWQgd2l0aCB0aGUgY3VycmVudGx5IHNlbGVjdGVkIG9uZS4KICAgICAqCiAgICAgKiBAcmVhZG9ubHkKICAgICAqIEBtZW1iZXIge1N0cmluZ30gI2RpcmVjdGlvbgogICAgICovCgogICAgdGhpcy5kaXJlY3Rpb24gPSBvcHRpb25zLmRpcmVjdGlvbjsKICAgIC8qKgogICAgICogV2hldGhlciB0aGUgbWVyZ2UgaXMgaG9yaXpvbnRhbCAobGVmdC9yaWdodCkgb3IgdmVydGljYWwgKHVwL2Rvd24pLgogICAgICoKICAgICAqIEByZWFkb25seQogICAgICogQG1lbWJlciB7Qm9vbGVhbn0gI2lzSG9yaXpvbnRhbAogICAgICovCgogICAgdGhpcy5pc0hvcml6b250YWwgPSB0aGlzLmRpcmVjdGlvbiA9PSAncmlnaHQnIHx8IHRoaXMuZGlyZWN0aW9uID09ICdsZWZ0JzsKICB9CiAgLyoqCiAgICogQGluaGVyaXREb2MKICAgKi8KCgogIHJlZnJlc2goKSB7CiAgICBjb25zdCBjZWxsVG9NZXJnZSA9IHRoaXMuX2dldE1lcmdlYWJsZUNlbGwoKTsKCiAgICB0aGlzLnZhbHVlID0gY2VsbFRvTWVyZ2U7CiAgICB0aGlzLmlzRW5hYmxlZCA9ICEhY2VsbFRvTWVyZ2U7CiAgfQogIC8qKgogICAqIEV4ZWN1dGVzIHRoZSBjb21tYW5kLgogICAqCiAgICogRGVwZW5kaW5nIG9uIHRoZSBjb21tYW5kJ3Mge0BsaW5rICNkaXJlY3Rpb259IHZhbHVlLCBpdCB3aWxsIG1lcmdlIHRoZSBjZWxsIHRoYXQgaXMgdG8gdGhlIGAnbGVmdCdgLCBgJ3JpZ2h0J2AsIGAndXAnYCBvciBgJ2Rvd24nYC4KICAgKgogICAqIEBmaXJlcyBleGVjdXRlCiAgICovCgoKICBleGVjdXRlKCkgewogICAgY29uc3QgbW9kZWwgPSB0aGlzLmVkaXRvci5tb2RlbDsKICAgIGNvbnN0IGRvYyA9IG1vZGVsLmRvY3VtZW50OwogICAgY29uc3QgdGFibGVDZWxsID0gZmluZEFuY2VzdG9yKCd0YWJsZUNlbGwnLCBkb2Muc2VsZWN0aW9uLmdldEZpcnN0UG9zaXRpb24oKSk7CiAgICBjb25zdCBjZWxsVG9NZXJnZSA9IHRoaXMudmFsdWU7CiAgICBjb25zdCBkaXJlY3Rpb24gPSB0aGlzLmRpcmVjdGlvbjsKICAgIG1vZGVsLmNoYW5nZSh3cml0ZXIgPT4gewogICAgICBjb25zdCBpc01lcmdlTmV4dCA9IGRpcmVjdGlvbiA9PSAncmlnaHQnIHx8IGRpcmVjdGlvbiA9PSAnZG93bic7IC8vIFRoZSBtZXJnZSBtZWNoYW5pc20gaXMgYWx3YXlzIHRoZSBzYW1lIHNvIHNvcnQgY2VsbHMgdG8gYmUgbWVyZ2VkLgoKICAgICAgY29uc3QgY2VsbFRvRXhwYW5kID0gaXNNZXJnZU5leHQgPyB0YWJsZUNlbGwgOiBjZWxsVG9NZXJnZTsKICAgICAgY29uc3QgY2VsbFRvUmVtb3ZlID0gaXNNZXJnZU5leHQgPyBjZWxsVG9NZXJnZSA6IHRhYmxlQ2VsbDsgLy8gQ2FjaGUgdGhlIHBhcmVudCBvZiBjZWxsIHRvIHJlbW92ZSBmb3IgbGF0ZXIgY2hlY2suCgogICAgICBjb25zdCByZW1vdmVkVGFibGVDZWxsUm93ID0gY2VsbFRvUmVtb3ZlLnBhcmVudDsKICAgICAgbWVyZ2VUYWJsZUNlbGxzKGNlbGxUb1JlbW92ZSwgY2VsbFRvRXhwYW5kLCB3cml0ZXIpOwogICAgICBjb25zdCBzcGFuQXR0cmlidXRlID0gdGhpcy5pc0hvcml6b250YWwgPyAnY29sc3BhbicgOiAncm93c3Bhbic7CiAgICAgIGNvbnN0IGNlbGxTcGFuID0gcGFyc2VJbnQodGFibGVDZWxsLmdldEF0dHJpYnV0ZShzcGFuQXR0cmlidXRlKSB8fCAxKTsKICAgICAgY29uc3QgY2VsbFRvTWVyZ2VTcGFuID0gcGFyc2VJbnQoY2VsbFRvTWVyZ2UuZ2V0QXR0cmlidXRlKHNwYW5BdHRyaWJ1dGUpIHx8IDEpOyAvLyBVcGRhdGUgdGFibGUgY2VsbCBzcGFuIGF0dHJpYnV0ZSBhbmQgbWVyZ2Ugc2V0IHNlbGVjdGlvbiBvbiBtZXJnZWQgY29udGVudHMuCgogICAgICB3cml0ZXIuc2V0QXR0cmlidXRlKHNwYW5BdHRyaWJ1dGUsIGNlbGxTcGFuICsgY2VsbFRvTWVyZ2VTcGFuLCBjZWxsVG9FeHBhbmQpOwogICAgICB3cml0ZXIuc2V0U2VsZWN0aW9uKHdyaXRlci5jcmVhdGVSYW5nZUluKGNlbGxUb0V4cGFuZCkpOyAvLyBSZW1vdmUgZW1wdHkgcm93IGFmdGVyIG1lcmdpbmcuCgogICAgICBpZiAoIXJlbW92ZWRUYWJsZUNlbGxSb3cuY2hpbGRDb3VudCkgewogICAgICAgIHJlbW92ZUVtcHR5Um93KHJlbW92ZWRUYWJsZUNlbGxSb3csIHdyaXRlcik7CiAgICAgIH0KICAgIH0pOwogIH0KICAvKioKICAgKiBSZXR1cm5zIGEgY2VsbCB0aGF0IGNhbiBiZSBtZXJnZWQgd2l0aCB0aGUgY3VycmVudCBjZWxsIGRlcGVuZGluZyBvbiB0aGUgY29tbWFuZCdzIGRpcmVjdGlvbi4KICAgKgogICAqIEByZXR1cm5zIHttb2R1bGU6ZW5naW5lL21vZGVsL2VsZW1lbnR+RWxlbWVudHx1bmRlZmluZWR9CiAgICogQHByaXZhdGUKICAgKi8KCgogIF9nZXRNZXJnZWFibGVDZWxsKCkgewogICAgY29uc3QgbW9kZWwgPSB0aGlzLmVkaXRvci5tb2RlbDsKICAgIGNvbnN0IGRvYyA9IG1vZGVsLmRvY3VtZW50OwogICAgY29uc3QgdGFibGVDZWxsID0gZmluZEFuY2VzdG9yKCd0YWJsZUNlbGwnLCBkb2Muc2VsZWN0aW9uLmdldEZpcnN0UG9zaXRpb24oKSk7CgogICAgaWYgKCF0YWJsZUNlbGwpIHsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIGNvbnN0IHRhYmxlVXRpbHMgPSB0aGlzLmVkaXRvci5wbHVnaW5zLmdldCgnVGFibGVVdGlscycpOyAvLyBGaXJzdCBnZXQgdGhlIGNlbGwgb24gcHJvcGVyIGRpcmVjdGlvbi4KCiAgICBjb25zdCBjZWxsVG9NZXJnZSA9IHRoaXMuaXNIb3Jpem9udGFsID8gZ2V0SG9yaXpvbnRhbENlbGwodGFibGVDZWxsLCB0aGlzLmRpcmVjdGlvbiwgdGFibGVVdGlscykgOiBnZXRWZXJ0aWNhbENlbGwodGFibGVDZWxsLCB0aGlzLmRpcmVjdGlvbik7CgogICAgaWYgKCFjZWxsVG9NZXJnZSkgewogICAgICByZXR1cm47CiAgICB9IC8vIElmIGZvdW5kIGNoZWNrIGlmIHRoZSBzcGFuIHBlcnBlbmRpY3VsYXIgdG8gbWVyZ2UgZGlyZWN0aW9uIGlzIGVxdWFsIG9uIGJvdGggY2VsbHMuCgoKICAgIGNvbnN0IHNwYW5BdHRyaWJ1dGUgPSB0aGlzLmlzSG9yaXpvbnRhbCA/ICdyb3dzcGFuJyA6ICdjb2xzcGFuJzsKICAgIGNvbnN0IHNwYW4gPSBwYXJzZUludCh0YWJsZUNlbGwuZ2V0QXR0cmlidXRlKHNwYW5BdHRyaWJ1dGUpIHx8IDEpOwogICAgY29uc3QgY2VsbFRvTWVyZ2VTcGFuID0gcGFyc2VJbnQoY2VsbFRvTWVyZ2UuZ2V0QXR0cmlidXRlKHNwYW5BdHRyaWJ1dGUpIHx8IDEpOwoKICAgIGlmIChjZWxsVG9NZXJnZVNwYW4gPT09IHNwYW4pIHsKICAgICAgcmV0dXJuIGNlbGxUb01lcmdlOwogICAgfQogIH0KCn0gLy8gUmV0dXJucyB0aGUgY2VsbCB0aGF0IGNhbiBiZSBtZXJnZWQgaG9yaXpvbnRhbGx5LgovLwovLyBAcGFyYW0ge21vZHVsZTplbmdpbmUvbW9kZWwvZWxlbWVudH5FbGVtZW50fSB0YWJsZUNlbGwKLy8gQHBhcmFtIHtTdHJpbmd9IGRpcmVjdGlvbgovLyBAcmV0dXJucyB7bW9kdWxlOmVuZ2luZS9tb2RlbC9ub2Rlfk5vZGV8bnVsbH0KCmZ1bmN0aW9uIGdldEhvcml6b250YWxDZWxsKHRhYmxlQ2VsbCwgZGlyZWN0aW9uLCB0YWJsZVV0aWxzKSB7CiAgY29uc3QgdGFibGVSb3cgPSB0YWJsZUNlbGwucGFyZW50OwogIGNvbnN0IHRhYmxlID0gdGFibGVSb3cucGFyZW50OwogIGNvbnN0IGhvcml6b250YWxDZWxsID0gZGlyZWN0aW9uID09ICdyaWdodCcgPyB0YWJsZUNlbGwubmV4dFNpYmxpbmcgOiB0YWJsZUNlbGwucHJldmlvdXNTaWJsaW5nOwogIGNvbnN0IGhlYWRpbmdDb2x1bW5zID0gdGFibGUuZ2V0QXR0cmlidXRlKCdoZWFkaW5nQ29sdW1ucycpIHx8IDA7CgogIGlmICghaG9yaXpvbnRhbENlbGwpIHsKICAgIHJldHVybjsKICB9IC8vIFNvcnQgY2VsbHM6CgoKICBjb25zdCBjZWxsT25MZWZ0ID0gZGlyZWN0aW9uID09ICdyaWdodCcgPyB0YWJsZUNlbGwgOiBob3Jpem9udGFsQ2VsbDsKICBjb25zdCBjZWxsT25SaWdodCA9IGRpcmVjdGlvbiA9PSAncmlnaHQnID8gaG9yaXpvbnRhbENlbGwgOiB0YWJsZUNlbGw7IC8vIEdldCB0aGVpciBjb2x1bW4gaW5kZXhlczoKCiAgY29uc3QgewogICAgY29sdW1uOiBsZWZ0Q2VsbENvbHVtbgogIH0gPSB0YWJsZVV0aWxzLmdldENlbGxMb2NhdGlvbihjZWxsT25MZWZ0KTsKICBjb25zdCB7CiAgICBjb2x1bW46IHJpZ2h0Q2VsbENvbHVtbgogIH0gPSB0YWJsZVV0aWxzLmdldENlbGxMb2NhdGlvbihjZWxsT25SaWdodCk7CiAgY29uc3QgbGVmdENlbGxTcGFuID0gcGFyc2VJbnQoY2VsbE9uTGVmdC5nZXRBdHRyaWJ1dGUoJ2NvbHNwYW4nKSB8fCAxKTsKICBjb25zdCByaWdodENlbGxTcGFuID0gcGFyc2VJbnQoY2VsbE9uUmlnaHQuZ2V0QXR0cmlidXRlKCdjb2xzcGFuJykgfHwgMSk7IC8vIFdlIGNhbm5vdCBtZXJnZSBjZWxscyBpZiB0aGUgcmVzdWx0IHdpbGwgZXh0ZW5kIG92ZXIgaGVhZGluZyBzZWN0aW9uLgoKICBjb25zdCBpc01lcmdlV2l0aEJvZHlDZWxsID0gZGlyZWN0aW9uID09ICdyaWdodCcgJiYgcmlnaHRDZWxsQ29sdW1uICsgcmlnaHRDZWxsU3BhbiA+IGhlYWRpbmdDb2x1bW5zOwogIGNvbnN0IGlzTWVyZ2VXaXRoSGVhZENlbGwgPSBkaXJlY3Rpb24gPT0gJ2xlZnQnICYmIGxlZnRDZWxsQ29sdW1uICsgbGVmdENlbGxTcGFuID4gaGVhZGluZ0NvbHVtbnMgLSAxOwoKICBpZiAoaGVhZGluZ0NvbHVtbnMgJiYgKGlzTWVyZ2VXaXRoQm9keUNlbGwgfHwgaXNNZXJnZVdpdGhIZWFkQ2VsbCkpIHsKICAgIHJldHVybjsKICB9IC8vIFRoZSBjZWxsIG9uIHRoZSByaWdodCBtdXN0IGhhdmUgaW5kZXggdGhhdCBpcyBkaXN0YW50IHRvIHRoZSBjZWxsIG9uIHRoZSBsZWZ0IGJ5IHRoZSBsZWZ0IGNlbGwncyB3aWR0aCAoY29sc3BhbikuCgoKICBjb25zdCBjZWxsc0FyZVRvdWNoaW5nID0gbGVmdENlbGxDb2x1bW4gKyBsZWZ0Q2VsbFNwYW4gPT09IHJpZ2h0Q2VsbENvbHVtbjsgLy8gSWYgdGhlIHJpZ2h0IGNlbGwncyBjb2x1bW4gaW5kZXggaXMgZGlmZmVyZW50IGl0IG1lYW5zIHRoYXQgdGhlcmUgYXJlIHJvd3NwYW5uZWQgY2VsbHMgYmV0d2VlbiB0aGVtLgoKICByZXR1cm4gY2VsbHNBcmVUb3VjaGluZyA/IGhvcml6b250YWxDZWxsIDogdW5kZWZpbmVkOwp9IC8vIFJldHVybnMgdGhlIGNlbGwgdGhhdCBjYW4gYmUgbWVyZ2VkIHZlcnRpY2FsbHkuCi8vCi8vIEBwYXJhbSB7bW9kdWxlOmVuZ2luZS9tb2RlbC9lbGVtZW50fkVsZW1lbnR9IHRhYmxlQ2VsbAovLyBAcGFyYW0ge1N0cmluZ30gZGlyZWN0aW9uCi8vIEByZXR1cm5zIHttb2R1bGU6ZW5naW5lL21vZGVsL25vZGV+Tm9kZXxudWxsfQoKCmZ1bmN0aW9uIGdldFZlcnRpY2FsQ2VsbCh0YWJsZUNlbGwsIGRpcmVjdGlvbikgewogIGNvbnN0IHRhYmxlUm93ID0gdGFibGVDZWxsLnBhcmVudDsKICBjb25zdCB0YWJsZSA9IHRhYmxlUm93LnBhcmVudDsKICBjb25zdCByb3dJbmRleCA9IHRhYmxlLmdldENoaWxkSW5kZXgodGFibGVSb3cpOyAvLyBEb24ndCBzZWFyY2ggZm9yIG1lcmdlYWJsZSBjZWxsIGlmIGRpcmVjdGlvbiBwb2ludHMgb3V0IG9mIHRoZSB0YWJsZS4KCiAgaWYgKGRpcmVjdGlvbiA9PSAnZG93bicgJiYgcm93SW5kZXggPT09IHRhYmxlLmNoaWxkQ291bnQgLSAxIHx8IGRpcmVjdGlvbiA9PSAndXAnICYmIHJvd0luZGV4ID09PSAwKSB7CiAgICByZXR1cm47CiAgfQoKICBjb25zdCByb3dzcGFuID0gcGFyc2VJbnQodGFibGVDZWxsLmdldEF0dHJpYnV0ZSgncm93c3BhbicpIHx8IDEpOwogIGNvbnN0IGhlYWRpbmdSb3dzID0gdGFibGUuZ2V0QXR0cmlidXRlKCdoZWFkaW5nUm93cycpIHx8IDA7CiAgY29uc3QgaXNNZXJnZVdpdGhCb2R5Q2VsbCA9IGRpcmVjdGlvbiA9PSAnZG93bicgJiYgcm93SW5kZXggKyByb3dzcGFuID09PSBoZWFkaW5nUm93czsKICBjb25zdCBpc01lcmdlV2l0aEhlYWRDZWxsID0gZGlyZWN0aW9uID09ICd1cCcgJiYgcm93SW5kZXggPT09IGhlYWRpbmdSb3dzOyAvLyBEb24ndCBzZWFyY2ggZm9yIG1lcmdlYWJsZSBjZWxsIGlmIGRpcmVjdGlvbiBwb2ludHMgb3V0IG9mIHRoZSBjdXJyZW50IHRhYmxlIHNlY3Rpb24uCgogIGlmIChoZWFkaW5nUm93cyAmJiAoaXNNZXJnZVdpdGhCb2R5Q2VsbCB8fCBpc01lcmdlV2l0aEhlYWRDZWxsKSkgewogICAgcmV0dXJuOwogIH0KCiAgY29uc3QgY3VycmVudENlbGxSb3dTcGFuID0gcGFyc2VJbnQodGFibGVDZWxsLmdldEF0dHJpYnV0ZSgncm93c3BhbicpIHx8IDEpOwogIGNvbnN0IHJvd09mQ2VsbFRvTWVyZ2UgPSBkaXJlY3Rpb24gPT0gJ2Rvd24nID8gcm93SW5kZXggKyBjdXJyZW50Q2VsbFJvd1NwYW4gOiByb3dJbmRleDsKICBjb25zdCB0YWJsZU1hcCA9IFsuLi5uZXcgVGFibGVXYWxrZXIodGFibGUsIHsKICAgIGVuZFJvdzogcm93T2ZDZWxsVG9NZXJnZQogIH0pXTsKICBjb25zdCBjdXJyZW50Q2VsbERhdGEgPSB0YWJsZU1hcC5maW5kKHZhbHVlID0+IHZhbHVlLmNlbGwgPT09IHRhYmxlQ2VsbCk7CiAgY29uc3QgbWVyZ2VDb2x1bW4gPSBjdXJyZW50Q2VsbERhdGEuY29sdW1uOwogIGNvbnN0IGNlbGxUb01lcmdlRGF0YSA9IHRhYmxlTWFwLmZpbmQoKHsKICAgIHJvdywKICAgIHJvd3NwYW4sCiAgICBjb2x1bW4KICB9KSA9PiB7CiAgICBpZiAoY29sdW1uICE9PSBtZXJnZUNvbHVtbikgewogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgaWYgKGRpcmVjdGlvbiA9PSAnZG93bicpIHsKICAgICAgLy8gSWYgbWVyZ2luZyBhIGNlbGwgYmVsb3cgdGhlIG1lcmdlUm93IGlzIGFscmVhZHkgY2FsY3VsYXRlZC4KICAgICAgcmV0dXJuIHJvdyA9PT0gcm93T2ZDZWxsVG9NZXJnZTsKICAgIH0gZWxzZSB7CiAgICAgIC8vIElmIG1lcmdpbmcgYSBjZWxsIGFib3ZlIGNhbGN1bGF0ZSBpZiBpdCBzcGFucyB0byBtZXJnZVJvdy4KICAgICAgcmV0dXJuIHJvd09mQ2VsbFRvTWVyZ2UgPT09IHJvdyArIHJvd3NwYW47CiAgICB9CiAgfSk7CiAgcmV0dXJuIGNlbGxUb01lcmdlRGF0YSAmJiBjZWxsVG9NZXJnZURhdGEuY2VsbDsKfSAvLyBQcm9wZXJseSByZW1vdmVzIGVtcHR5IHJvdyBmcm9tIGEgdGFibGUuIFdpbGwgdXBkYXRlIGByb3dzcGFuYCBhdHRyaWJ1dGUgb2YgY2VsbHMgdGhhdCBvdmVybGFwcyByZW1vdmVkIHJvdy4KLy8KLy8gQHBhcmFtIHttb2R1bGU6ZW5naW5lL21vZGVsL2VsZW1lbnR+RWxlbWVudH0gcmVtb3ZlZFRhYmxlQ2VsbFJvdwovLyBAcGFyYW0ge21vZHVsZTplbmdpbmUvbW9kZWwvd3JpdGVyfldyaXRlcn0gd3JpdGVyCgoKZnVuY3Rpb24gcmVtb3ZlRW1wdHlSb3cocmVtb3ZlZFRhYmxlQ2VsbFJvdywgd3JpdGVyKSB7CiAgY29uc3QgdGFibGUgPSByZW1vdmVkVGFibGVDZWxsUm93LnBhcmVudDsKICBjb25zdCByZW1vdmVkUm93SW5kZXggPSB0YWJsZS5nZXRDaGlsZEluZGV4KHJlbW92ZWRUYWJsZUNlbGxSb3cpOwoKICBmb3IgKGNvbnN0IHsKICAgIGNlbGwsCiAgICByb3csCiAgICByb3dzcGFuCiAgfSBvZiBuZXcgVGFibGVXYWxrZXIodGFibGUsIHsKICAgIGVuZFJvdzogcmVtb3ZlZFJvd0luZGV4CiAgfSkpIHsKICAgIGNvbnN0IG92ZXJsYXBzUmVtb3ZlZFJvdyA9IHJvdyArIHJvd3NwYW4gLSAxID49IHJlbW92ZWRSb3dJbmRleDsKCiAgICBpZiAob3ZlcmxhcHNSZW1vdmVkUm93KSB7CiAgICAgIHVwZGF0ZU51bWVyaWNBdHRyaWJ1dGUoJ3Jvd3NwYW4nLCByb3dzcGFuIC0gMSwgY2VsbCwgd3JpdGVyKTsKICAgIH0KICB9CgogIHdyaXRlci5yZW1vdmUocmVtb3ZlZFRhYmxlQ2VsbFJvdyk7Cn0gLy8gTWVyZ2VzIHR3byB0YWJsZSBjZWxscyAtIHdpbGwgZW5zdXJlIHRoYXQgYWZ0ZXIgbWVyZ2luZyBjZWxscyB3aXRoIGVtcHR5IHBhcmFncmFwaCB0aGUgcmVzdWx0IHRhYmxlIGNlbGwgd2lsbCBvbmx5IGhhdmUgb25lIHBhcmFncmFwaC4KLy8gSWYgb25lIG9mIHRoZSBtZXJnZWQgdGFibGUgY2VsbCBpcyBlbXB0eSB0aGUgbWVyZ2VkIHRhYmxlIGNlbGwgd2lsbCBoYXZlIGNvbnRlbnRzIG9mIHRoZSBub24tZW1wdHkgdGFibGUgY2VsbC4KLy8gSWYgYm90aCBhcmUgZW1wdHkgdGhlIG1lcmdlZCB0YWJsZSBjZWxsIHdpbGwgaGF2ZSBvbmx5IG9uZSBlbXB0eSBwYXJhZ3JhcGguCi8vCi8vIEBwYXJhbSB7bW9kdWxlOmVuZ2luZS9tb2RlbC9lbGVtZW50fkVsZW1lbnR9IGNlbGxUb1JlbW92ZQovLyBAcGFyYW0ge21vZHVsZTplbmdpbmUvbW9kZWwvZWxlbWVudH5FbGVtZW50fSBjZWxsVG9FeHBhbmQKLy8gQHBhcmFtIHttb2R1bGU6ZW5naW5lL21vZGVsL3dyaXRlcn5Xcml0ZXJ9IHdyaXRlcgoKCmZ1bmN0aW9uIG1lcmdlVGFibGVDZWxscyhjZWxsVG9SZW1vdmUsIGNlbGxUb0V4cGFuZCwgd3JpdGVyKSB7CiAgaWYgKCFpc0VtcHR5KGNlbGxUb1JlbW92ZSkpIHsKICAgIGlmIChpc0VtcHR5KGNlbGxUb0V4cGFuZCkpIHsKICAgICAgd3JpdGVyLnJlbW92ZSh3cml0ZXIuY3JlYXRlUmFuZ2VJbihjZWxsVG9FeHBhbmQpKTsKICAgIH0KCiAgICB3cml0ZXIubW92ZSh3cml0ZXIuY3JlYXRlUmFuZ2VJbihjZWxsVG9SZW1vdmUpLCB3cml0ZXIuY3JlYXRlUG9zaXRpb25BdChjZWxsVG9FeHBhbmQsICdlbmQnKSk7CiAgfSAvLyBSZW1vdmUgbWVyZ2VkIHRhYmxlIGNlbGwuCgoKICB3cml0ZXIucmVtb3ZlKGNlbGxUb1JlbW92ZSk7Cn0gLy8gQ2hlY2tzIGlmIHBhc3NlZCB0YWJsZSBjZWxsIGNvbnRhaW5zIGVtcHR5IHBhcmFncmFwaC4KLy8KLy8gQHBhcmFtIHttb2R1bGU6ZW5naW5lL21vZGVsL2VsZW1lbnR+RWxlbWVudH0gdGFibGVDZWxsCi8vIEByZXR1cm5zIHtCb29sZWFufQoKCmZ1bmN0aW9uIGlzRW1wdHkodGFibGVDZWxsKSB7CiAgcmV0dXJuIHRhYmxlQ2VsbC5jaGlsZENvdW50ID09IDEgJiYgdGFibGVDZWxsLmdldENoaWxkKDApLmlzKCdwYXJhZ3JhcGgnKSAmJiB0YWJsZUNlbGwuZ2V0Q2hpbGQoMCkuaXNFbXB0eTsKfQ=="},{"version":3,"sources":["/Users/antonyching/Desktop/project/new-builder-demo/node_modules/@ckeditor/ckeditor5-table/src/commands/mergecellcommand.js"],"names":["Command","TableWalker","findAncestor","updateNumericAttribute","MergeCellCommand","constructor","editor","options","direction","isHorizontal","refresh","cellToMerge","_getMergeableCell","value","isEnabled","execute","model","doc","document","tableCell","selection","getFirstPosition","change","writer","isMergeNext","cellToExpand","cellToRemove","removedTableCellRow","parent","mergeTableCells","spanAttribute","cellSpan","parseInt","getAttribute","cellToMergeSpan","setAttribute","setSelection","createRangeIn","childCount","removeEmptyRow","tableUtils","plugins","get","getHorizontalCell","getVerticalCell","span","tableRow","table","horizontalCell","nextSibling","previousSibling","headingColumns","cellOnLeft","cellOnRight","column","leftCellColumn","getCellLocation","rightCellColumn","leftCellSpan","rightCellSpan","isMergeWithBodyCell","isMergeWithHeadCell","cellsAreTouching","undefined","rowIndex","getChildIndex","rowspan","headingRows","currentCellRowSpan","rowOfCellToMerge","tableMap","endRow","currentCellData","find","cell","mergeColumn","cellToMergeData","row","removedRowIndex","overlapsRemovedRow","remove","isEmpty","move","createPositionAt","getChild","is"],"mappings":"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","sourcesContent":["/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module table/commands/mergecellcommand\n */\n\nimport Command from '@ckeditor/ckeditor5-core/src/command';\nimport TableWalker from '../tablewalker';\nimport { findAncestor, updateNumericAttribute } from './utils';\n\n/**\n * The merge cell command.\n *\n * The command is registered by {@link module:table/tableediting~TableEditing} as `'mergeTableCellRight'`, `'mergeTableCellLeft'`,\n * `'mergeTableCellUp'` and `'mergeTableCellDown'` editor commands.\n *\n * To merge a table cell at the current selection with another cell, execute the command corresponding with the preferred direction.\n *\n * For example, to merge with a cell to the right:\n *\n *\t\teditor.execute( 'mergeTableCellRight' );\n *\n * **Note**: If a table cell has a different [`rowspan`](https://www.w3.org/TR/html50/tabular-data.html#attr-tdth-rowspan)\n * (for `'mergeTableCellRight'` and `'mergeTableCellLeft'`) or [`colspan`](https://www.w3.org/TR/html50/tabular-data.html#attr-tdth-colspan)\n * (for `'mergeTableCellUp'` and `'mergeTableCellDown'`), the command will be disabled.\n *\n * @extends module:core/command~Command\n */\nexport default class MergeCellCommand extends Command {\n\t/**\n\t * Creates a new `MergeCellCommand` instance.\n\t *\n\t * @param {module:core/editor/editor~Editor} editor The editor on which this command will be used.\n\t * @param {Object} options\n\t * @param {String} options.direction Indicates which cell to merge with the currently selected one.\n\t * Possible values are: `'left'`, `'right'`, `'up'` and `'down'`.\n\t */\n\tconstructor( editor, options ) {\n\t\tsuper( editor );\n\n\t\t/**\n\t\t * The direction that indicates which cell will be merged with the currently selected one.\n\t\t *\n\t\t * @readonly\n\t\t * @member {String} #direction\n\t\t */\n\t\tthis.direction = options.direction;\n\n\t\t/**\n\t\t * Whether the merge is horizontal (left/right) or vertical (up/down).\n\t\t *\n\t\t * @readonly\n\t\t * @member {Boolean} #isHorizontal\n\t\t */\n\t\tthis.isHorizontal = this.direction == 'right' || this.direction == 'left';\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\trefresh() {\n\t\tconst cellToMerge = this._getMergeableCell();\n\n\t\tthis.value = cellToMerge;\n\t\tthis.isEnabled = !!cellToMerge;\n\t}\n\n\t/**\n\t * Executes the command.\n\t *\n\t * Depending on the command's {@link #direction} value, it will merge the cell that is to the `'left'`, `'right'`, `'up'` or `'down'`.\n\t *\n\t * @fires execute\n\t */\n\texecute() {\n\t\tconst model = this.editor.model;\n\t\tconst doc = model.document;\n\t\tconst tableCell = findAncestor( 'tableCell', doc.selection.getFirstPosition() );\n\t\tconst cellToMerge = this.value;\n\t\tconst direction = this.direction;\n\n\t\tmodel.change( writer => {\n\t\t\tconst isMergeNext = direction == 'right' || direction == 'down';\n\n\t\t\t// The merge mechanism is always the same so sort cells to be merged.\n\t\t\tconst cellToExpand = isMergeNext ? tableCell : cellToMerge;\n\t\t\tconst cellToRemove = isMergeNext ? cellToMerge : tableCell;\n\n\t\t\t// Cache the parent of cell to remove for later check.\n\t\t\tconst removedTableCellRow = cellToRemove.parent;\n\n\t\t\tmergeTableCells( cellToRemove, cellToExpand, writer );\n\n\t\t\tconst spanAttribute = this.isHorizontal ? 'colspan' : 'rowspan';\n\t\t\tconst cellSpan = parseInt( tableCell.getAttribute( spanAttribute ) || 1 );\n\t\t\tconst cellToMergeSpan = parseInt( cellToMerge.getAttribute( spanAttribute ) || 1 );\n\n\t\t\t// Update table cell span attribute and merge set selection on merged contents.\n\t\t\twriter.setAttribute( spanAttribute, cellSpan + cellToMergeSpan, cellToExpand );\n\t\t\twriter.setSelection( writer.createRangeIn( cellToExpand ) );\n\n\t\t\t// Remove empty row after merging.\n\t\t\tif ( !removedTableCellRow.childCount ) {\n\t\t\t\tremoveEmptyRow( removedTableCellRow, writer );\n\t\t\t}\n\t\t} );\n\t}\n\n\t/**\n\t * Returns a cell that can be merged with the current cell depending on the command's direction.\n\t *\n\t * @returns {module:engine/model/element~Element|undefined}\n\t * @private\n\t */\n\t_getMergeableCell() {\n\t\tconst model = this.editor.model;\n\t\tconst doc = model.document;\n\t\tconst tableCell = findAncestor( 'tableCell', doc.selection.getFirstPosition() );\n\n\t\tif ( !tableCell ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst tableUtils = this.editor.plugins.get( 'TableUtils' );\n\n\t\t// First get the cell on proper direction.\n\t\tconst cellToMerge = this.isHorizontal ?\n\t\t\tgetHorizontalCell( tableCell, this.direction, tableUtils ) :\n\t\t\tgetVerticalCell( tableCell, this.direction );\n\n\t\tif ( !cellToMerge ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// If found check if the span perpendicular to merge direction is equal on both cells.\n\t\tconst spanAttribute = this.isHorizontal ? 'rowspan' : 'colspan';\n\t\tconst span = parseInt( tableCell.getAttribute( spanAttribute ) || 1 );\n\n\t\tconst cellToMergeSpan = parseInt( cellToMerge.getAttribute( spanAttribute ) || 1 );\n\n\t\tif ( cellToMergeSpan === span ) {\n\t\t\treturn cellToMerge;\n\t\t}\n\t}\n}\n\n// Returns the cell that can be merged horizontally.\n//\n// @param {module:engine/model/element~Element} tableCell\n// @param {String} direction\n// @returns {module:engine/model/node~Node|null}\nfunction getHorizontalCell( tableCell, direction, tableUtils ) {\n\tconst tableRow = tableCell.parent;\n\tconst table = tableRow.parent;\n\tconst horizontalCell = direction == 'right' ? tableCell.nextSibling : tableCell.previousSibling;\n\tconst headingColumns = table.getAttribute( 'headingColumns' ) || 0;\n\n\tif ( !horizontalCell ) {\n\t\treturn;\n\t}\n\n\t// Sort cells:\n\tconst cellOnLeft = direction == 'right' ? tableCell : horizontalCell;\n\tconst cellOnRight = direction == 'right' ? horizontalCell : tableCell;\n\n\t// Get their column indexes:\n\tconst { column: leftCellColumn } = tableUtils.getCellLocation( cellOnLeft );\n\tconst { column: rightCellColumn } = tableUtils.getCellLocation( cellOnRight );\n\n\tconst leftCellSpan = parseInt( cellOnLeft.getAttribute( 'colspan' ) || 1 );\n\tconst rightCellSpan = parseInt( cellOnRight.getAttribute( 'colspan' ) || 1 );\n\n\t// We cannot merge cells if the result will extend over heading section.\n\tconst isMergeWithBodyCell = direction == 'right' && ( rightCellColumn + rightCellSpan > headingColumns );\n\tconst isMergeWithHeadCell = direction == 'left' && ( leftCellColumn + leftCellSpan > headingColumns - 1 );\n\n\tif ( headingColumns && ( isMergeWithBodyCell || isMergeWithHeadCell ) ) {\n\t\treturn;\n\t}\n\n\t// The cell on the right must have index that is distant to the cell on the left by the left cell's width (colspan).\n\tconst cellsAreTouching = leftCellColumn + leftCellSpan === rightCellColumn;\n\n\t// If the right cell's column index is different it means that there are rowspanned cells between them.\n\treturn cellsAreTouching ? horizontalCell : undefined;\n}\n\n// Returns the cell that can be merged vertically.\n//\n// @param {module:engine/model/element~Element} tableCell\n// @param {String} direction\n// @returns {module:engine/model/node~Node|null}\nfunction getVerticalCell( tableCell, direction ) {\n\tconst tableRow = tableCell.parent;\n\tconst table = tableRow.parent;\n\n\tconst rowIndex = table.getChildIndex( tableRow );\n\n\t// Don't search for mergeable cell if direction points out of the table.\n\tif ( ( direction == 'down' && rowIndex === table.childCount - 1 ) || ( direction == 'up' && rowIndex === 0 ) ) {\n\t\treturn;\n\t}\n\n\tconst rowspan = parseInt( tableCell.getAttribute( 'rowspan' ) || 1 );\n\tconst headingRows = table.getAttribute( 'headingRows' ) || 0;\n\n\tconst isMergeWithBodyCell = direction == 'down' && ( rowIndex + rowspan ) === headingRows;\n\tconst isMergeWithHeadCell = direction == 'up' && rowIndex === headingRows;\n\n\t// Don't search for mergeable cell if direction points out of the current table section.\n\tif ( headingRows && ( isMergeWithBodyCell || isMergeWithHeadCell ) ) {\n\t\treturn;\n\t}\n\n\tconst currentCellRowSpan = parseInt( tableCell.getAttribute( 'rowspan' ) || 1 );\n\tconst rowOfCellToMerge = direction == 'down' ? rowIndex + currentCellRowSpan : rowIndex;\n\n\tconst tableMap = [ ...new TableWalker( table, { endRow: rowOfCellToMerge } ) ];\n\n\tconst currentCellData = tableMap.find( value => value.cell === tableCell );\n\tconst mergeColumn = currentCellData.column;\n\n\tconst cellToMergeData = tableMap.find( ( { row, rowspan, column } ) => {\n\t\tif ( column !== mergeColumn ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif ( direction == 'down' ) {\n\t\t\t// If merging a cell below the mergeRow is already calculated.\n\t\t\treturn row === rowOfCellToMerge;\n\t\t} else {\n\t\t\t// If merging a cell above calculate if it spans to mergeRow.\n\t\t\treturn rowOfCellToMerge === row + rowspan;\n\t\t}\n\t} );\n\n\treturn cellToMergeData && cellToMergeData.cell;\n}\n\n// Properly removes empty row from a table. Will update `rowspan` attribute of cells that overlaps removed row.\n//\n// @param {module:engine/model/element~Element} removedTableCellRow\n// @param {module:engine/model/writer~Writer} writer\nfunction removeEmptyRow( removedTableCellRow, writer ) {\n\tconst table = removedTableCellRow.parent;\n\n\tconst removedRowIndex = table.getChildIndex( removedTableCellRow );\n\n\tfor ( const { cell, row, rowspan } of new TableWalker( table, { endRow: removedRowIndex } ) ) {\n\t\tconst overlapsRemovedRow = row + rowspan - 1 >= removedRowIndex;\n\n\t\tif ( overlapsRemovedRow ) {\n\t\t\tupdateNumericAttribute( 'rowspan', rowspan - 1, cell, writer );\n\t\t}\n\t}\n\n\twriter.remove( removedTableCellRow );\n}\n\n// Merges two table cells - will ensure that after merging cells with empty paragraph the result table cell will only have one paragraph.\n// If one of the merged table cell is empty the merged table cell will have contents of the non-empty table cell.\n// If both are empty the merged table cell will have only one empty paragraph.\n//\n// @param {module:engine/model/element~Element} cellToRemove\n// @param {module:engine/model/element~Element} cellToExpand\n// @param {module:engine/model/writer~Writer} writer\nfunction mergeTableCells( cellToRemove, cellToExpand, writer ) {\n\tif ( !isEmpty( cellToRemove ) ) {\n\t\tif ( isEmpty( cellToExpand ) ) {\n\t\t\twriter.remove( writer.createRangeIn( cellToExpand ) );\n\t\t}\n\n\t\twriter.move( writer.createRangeIn( cellToRemove ), writer.createPositionAt( cellToExpand, 'end' ) );\n\t}\n\n\t// Remove merged table cell.\n\twriter.remove( cellToRemove );\n}\n\n// Checks if passed table cell contains empty paragraph.\n//\n// @param {module:engine/model/element~Element} tableCell\n// @returns {Boolean}\nfunction isEmpty( tableCell ) {\n\treturn tableCell.childCount == 1 && tableCell.getChild( 0 ).is( 'paragraph' ) && tableCell.getChild( 0 ).isEmpty;\n}\n"]}]}