{"remainingRequest":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/babel-loader/lib/index.js!/Users/antonyching/Desktop/project/new-builder-demo/node_modules/@ckeditor/ckeditor5-engine/src/model/operation/attributeoperation.js","dependencies":[{"path":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/@ckeditor/ckeditor5-engine/src/model/operation/attributeoperation.js","mtime":499162500000},{"path":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/@ckeditor/ckeditor5-dev-webpack-plugin/lib/translatesourceloader.js","mtime":499162500000},{"path":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:LyoqCiAqIEBsaWNlbnNlIENvcHlyaWdodCAoYykgMjAwMy0yMDE5LCBDS1NvdXJjZSAtIEZyZWRlcmljbyBLbmFiYmVuLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKiBGb3IgbGljZW5zaW5nLCBzZWUgTElDRU5TRS5tZCBvciBodHRwczovL2NrZWRpdG9yLmNvbS9sZWdhbC9ja2VkaXRvci1vc3MtbGljZW5zZQogKi8KCi8qKgogKiBAbW9kdWxlIGVuZ2luZS9tb2RlbC9vcGVyYXRpb24vYXR0cmlidXRlb3BlcmF0aW9uCiAqLwppbXBvcnQgT3BlcmF0aW9uIGZyb20gJy4vb3BlcmF0aW9uJzsKaW1wb3J0IFJhbmdlIGZyb20gJy4uL3JhbmdlJzsKaW1wb3J0IENLRWRpdG9yRXJyb3IgZnJvbSAnQGNrZWRpdG9yL2NrZWRpdG9yNS11dGlscy9zcmMvY2tlZGl0b3JlcnJvcic7CmltcG9ydCB7IF9zZXRBdHRyaWJ1dGUgfSBmcm9tICcuL3V0aWxzJzsKaW1wb3J0IHsgaXNFcXVhbCB9IGZyb20gJ2xvZGFzaC1lcyc7Ci8qKgogKiBPcGVyYXRpb24gdG8gY2hhbmdlIG5vZGVzJyBhdHRyaWJ1dGUuCiAqCiAqIFVzaW5nIHRoaXMgY2xhc3MgeW91IGNhbiBhZGQsIHJlbW92ZSBvciBjaGFuZ2UgdmFsdWUgb2YgdGhlIGF0dHJpYnV0ZS4KICoKICogQGV4dGVuZHMgbW9kdWxlOmVuZ2luZS9tb2RlbC9vcGVyYXRpb24vb3BlcmF0aW9ufk9wZXJhdGlvbgogKi8KCmV4cG9ydCBkZWZhdWx0IGNsYXNzIEF0dHJpYnV0ZU9wZXJhdGlvbiBleHRlbmRzIE9wZXJhdGlvbiB7CiAgLyoqCiAgICogQ3JlYXRlcyBhbiBvcGVyYXRpb24gdGhhdCBjaGFuZ2VzLCByZW1vdmVzIG9yIGFkZHMgYXR0cmlidXRlcy4KICAgKgogICAqIElmIG9ubHkgYG5ld1ZhbHVlYCBpcyBzZXQsIGF0dHJpYnV0ZSB3aWxsIGJlIGFkZGVkIG9uIGEgbm9kZS4gTm90ZSB0aGF0IGFsbCBub2RlcyBpbiBvcGVyYXRpb24ncyByYW5nZSBtdXN0IG5vdAogICAqIGhhdmUgYW4gYXR0cmlidXRlIHdpdGggdGhlIHNhbWUga2V5IGFzIHRoZSBhZGRlZCBhdHRyaWJ1dGUuCiAgICoKICAgKiBJZiBvbmx5IGBvbGRWYWx1ZWAgaXMgc2V0LCB0aGVuIGF0dHJpYnV0ZSB3aXRoIGdpdmVuIGtleSB3aWxsIGJlIHJlbW92ZWQuIE5vdGUgdGhhdCBhbGwgbm9kZXMgaW4gb3BlcmF0aW9uJ3MgcmFuZ2UKICAgKiBtdXN0IGhhdmUgYW4gYXR0cmlidXRlIHdpdGggdGhhdCBrZXkgYWRkZWQuCiAgICoKICAgKiBJZiBib3RoIGBuZXdWYWx1ZWAgYW5kIGBvbGRWYWx1ZWAgYXJlIHNldCwgdGhlbiB0aGUgb3BlcmF0aW9uIHdpbGwgY2hhbmdlIHRoZSBhdHRyaWJ1dGUgdmFsdWUuIE5vdGUgdGhhdCBhbGwgbm9kZXMgaW4KICAgKiBvcGVyYXRpb24ncyByYW5nZXMgbXVzdCBhbHJlYWR5IGhhdmUgYW4gYXR0cmlidXRlIHdpdGggZ2l2ZW4ga2V5IGFuZCBgb2xkVmFsdWVgIGFzIHZhbHVlCiAgICoKICAgKiBAcGFyYW0ge21vZHVsZTplbmdpbmUvbW9kZWwvcmFuZ2V+UmFuZ2V9IHJhbmdlIFJhbmdlIG9uIHdoaWNoIHRoZSBvcGVyYXRpb24gc2hvdWxkIGJlIGFwcGxpZWQuIE11c3QgYmUgYSBmbGF0IHJhbmdlLgogICAqIEBwYXJhbSB7U3RyaW5nfSBrZXkgS2V5IG9mIGFuIGF0dHJpYnV0ZSB0byBjaGFuZ2Ugb3IgcmVtb3ZlLgogICAqIEBwYXJhbSB7Kn0gb2xkVmFsdWUgT2xkIHZhbHVlIG9mIHRoZSBhdHRyaWJ1dGUgd2l0aCBnaXZlbiBrZXkgb3IgYG51bGxgLCBpZiBhdHRyaWJ1dGUgd2FzIG5vdCBzZXQgYmVmb3JlLgogICAqIEBwYXJhbSB7Kn0gbmV3VmFsdWUgTmV3IHZhbHVlIG9mIHRoZSBhdHRyaWJ1dGUgd2l0aCBnaXZlbiBrZXkgb3IgYG51bGxgLCBpZiBvcGVyYXRpb24gc2hvdWxkIHJlbW92ZSBhdHRyaWJ1dGUuCiAgICogQHBhcmFtIHtOdW1iZXJ8bnVsbH0gYmFzZVZlcnNpb24gRG9jdW1lbnQge0BsaW5rIG1vZHVsZTplbmdpbmUvbW9kZWwvZG9jdW1lbnR+RG9jdW1lbnQjdmVyc2lvbn0gb24gd2hpY2ggb3BlcmF0aW9uCiAgICogY2FuIGJlIGFwcGxpZWQgb3IgYG51bGxgIGlmIHRoZSBvcGVyYXRpb24gb3BlcmF0ZXMgb24gZGV0YWNoZWQgKG5vbi1kb2N1bWVudCkgdHJlZS4KICAgKi8KICBjb25zdHJ1Y3RvcihyYW5nZSwga2V5LCBvbGRWYWx1ZSwgbmV3VmFsdWUsIGJhc2VWZXJzaW9uKSB7CiAgICBzdXBlcihiYXNlVmVyc2lvbik7CiAgICAvKioKICAgICAqIFJhbmdlIG9uIHdoaWNoIG9wZXJhdGlvbiBzaG91bGQgYmUgYXBwbGllZC4KICAgICAqCiAgICAgKiBAcmVhZG9ubHkKICAgICAqIEBtZW1iZXIge21vZHVsZTplbmdpbmUvbW9kZWwvcmFuZ2V+UmFuZ2V9CiAgICAgKi8KCiAgICB0aGlzLnJhbmdlID0gcmFuZ2UuY2xvbmUoKTsKICAgIC8qKgogICAgICogS2V5IG9mIGFuIGF0dHJpYnV0ZSB0byBjaGFuZ2Ugb3IgcmVtb3ZlLgogICAgICoKICAgICAqIEByZWFkb25seQogICAgICogQG1lbWJlciB7U3RyaW5nfQogICAgICovCgogICAgdGhpcy5rZXkgPSBrZXk7CiAgICAvKioKICAgICAqIE9sZCB2YWx1ZSBvZiB0aGUgYXR0cmlidXRlIHdpdGggZ2l2ZW4ga2V5IG9yIGBudWxsYCwgaWYgYXR0cmlidXRlIHdhcyBub3Qgc2V0IGJlZm9yZS4KICAgICAqCiAgICAgKiBAcmVhZG9ubHkKICAgICAqIEBtZW1iZXIgeyp9CiAgICAgKi8KCiAgICB0aGlzLm9sZFZhbHVlID0gb2xkVmFsdWUgPT09IHVuZGVmaW5lZCA/IG51bGwgOiBvbGRWYWx1ZTsKICAgIC8qKgogICAgICogTmV3IHZhbHVlIG9mIHRoZSBhdHRyaWJ1dGUgd2l0aCBnaXZlbiBrZXkgb3IgYG51bGxgLCBpZiBvcGVyYXRpb24gc2hvdWxkIHJlbW92ZSBhdHRyaWJ1dGUuCiAgICAgKgogICAgICogQHJlYWRvbmx5CiAgICAgKiBAbWVtYmVyIHsqfQogICAgICovCgogICAgdGhpcy5uZXdWYWx1ZSA9IG5ld1ZhbHVlID09PSB1bmRlZmluZWQgPyBudWxsIDogbmV3VmFsdWU7CiAgfQogIC8qKgogICAqIEBpbmhlcml0RG9jCiAgICovCgoKICBnZXQgdHlwZSgpIHsKICAgIGlmICh0aGlzLm9sZFZhbHVlID09PSBudWxsKSB7CiAgICAgIHJldHVybiAnYWRkQXR0cmlidXRlJzsKICAgIH0gZWxzZSBpZiAodGhpcy5uZXdWYWx1ZSA9PT0gbnVsbCkgewogICAgICByZXR1cm4gJ3JlbW92ZUF0dHJpYnV0ZSc7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gJ2NoYW5nZUF0dHJpYnV0ZSc7CiAgICB9CiAgfQogIC8qKgogICAqIENyZWF0ZXMgYW5kIHJldHVybnMgYW4gb3BlcmF0aW9uIHRoYXQgaGFzIHRoZSBzYW1lIHBhcmFtZXRlcnMgYXMgdGhpcyBvcGVyYXRpb24uCiAgICoKICAgKiBAcmV0dXJucyB7bW9kdWxlOmVuZ2luZS9tb2RlbC9vcGVyYXRpb24vYXR0cmlidXRlb3BlcmF0aW9ufkF0dHJpYnV0ZU9wZXJhdGlvbn0gQ2xvbmUgb2YgdGhpcyBvcGVyYXRpb24uCiAgICovCgoKICBjbG9uZSgpIHsKICAgIHJldHVybiBuZXcgQXR0cmlidXRlT3BlcmF0aW9uKHRoaXMucmFuZ2UsIHRoaXMua2V5LCB0aGlzLm9sZFZhbHVlLCB0aGlzLm5ld1ZhbHVlLCB0aGlzLmJhc2VWZXJzaW9uKTsKICB9CiAgLyoqCiAgICogU2VlIHtAbGluayBtb2R1bGU6ZW5naW5lL21vZGVsL29wZXJhdGlvbi9vcGVyYXRpb25+T3BlcmF0aW9uI2dldFJldmVyc2VkIGBPcGVyYXRpb24jZ2V0UmV2ZXJzZWQoKWB9LgogICAqCiAgICogQHJldHVybnMge21vZHVsZTplbmdpbmUvbW9kZWwvb3BlcmF0aW9uL2F0dHJpYnV0ZW9wZXJhdGlvbn5BdHRyaWJ1dGVPcGVyYXRpb259CiAgICovCgoKICBnZXRSZXZlcnNlZCgpIHsKICAgIHJldHVybiBuZXcgQXR0cmlidXRlT3BlcmF0aW9uKHRoaXMucmFuZ2UsIHRoaXMua2V5LCB0aGlzLm5ld1ZhbHVlLCB0aGlzLm9sZFZhbHVlLCB0aGlzLmJhc2VWZXJzaW9uICsgMSk7CiAgfQogIC8qKgogICAqIEBpbmhlcml0RG9jCiAgICovCgoKICB0b0pTT04oKSB7CiAgICBjb25zdCBqc29uID0gc3VwZXIudG9KU09OKCk7CiAgICBqc29uLnJhbmdlID0gdGhpcy5yYW5nZS50b0pTT04oKTsKICAgIHJldHVybiBqc29uOwogIH0KICAvKioKICAgKiBAaW5oZXJpdERvYwogICAqLwoKCiAgX3ZhbGlkYXRlKCkgewogICAgaWYgKCF0aGlzLnJhbmdlLmlzRmxhdCkgewogICAgICAvKioKICAgICAgICogVGhlIHJhbmdlIHRvIGNoYW5nZSBpcyBub3QgZmxhdC4KICAgICAgICoKICAgICAgICogQGVycm9yIGF0dHJpYnV0ZS1vcGVyYXRpb24tcmFuZ2Utbm90LWZsYXQKICAgICAgICovCiAgICAgIHRocm93IG5ldyBDS0VkaXRvckVycm9yKCdhdHRyaWJ1dGUtb3BlcmF0aW9uLXJhbmdlLW5vdC1mbGF0OiBUaGUgcmFuZ2UgdG8gY2hhbmdlIGlzIG5vdCBmbGF0LicsIHRoaXMpOwogICAgfQoKICAgIGZvciAoY29uc3QgaXRlbSBvZiB0aGlzLnJhbmdlLmdldEl0ZW1zKHsKICAgICAgc2hhbGxvdzogdHJ1ZQogICAgfSkpIHsKICAgICAgaWYgKHRoaXMub2xkVmFsdWUgIT09IG51bGwgJiYgIWlzRXF1YWwoaXRlbS5nZXRBdHRyaWJ1dGUodGhpcy5rZXkpLCB0aGlzLm9sZFZhbHVlKSkgewogICAgICAgIC8qKgogICAgICAgICAqIENoYW5nZWQgbm9kZSBoYXMgZGlmZmVyZW50IGF0dHJpYnV0ZSB2YWx1ZSB0aGFuIG9wZXJhdGlvbidzIG9sZCBhdHRyaWJ1dGUgdmFsdWUuCiAgICAgICAgICoKICAgICAgICAgKiBAZXJyb3IgYXR0cmlidXRlLW9wZXJhdGlvbi13cm9uZy1vbGQtdmFsdWUKICAgICAgICAgKiBAcGFyYW0ge21vZHVsZTplbmdpbmUvbW9kZWwvaXRlbX5JdGVtfSBpdGVtCiAgICAgICAgICogQHBhcmFtIHtTdHJpbmd9IGtleQogICAgICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUKICAgICAgICAgKi8KICAgICAgICB0aHJvdyBuZXcgQ0tFZGl0b3JFcnJvcignYXR0cmlidXRlLW9wZXJhdGlvbi13cm9uZy1vbGQtdmFsdWU6IENoYW5nZWQgbm9kZSBoYXMgZGlmZmVyZW50IGF0dHJpYnV0ZSB2YWx1ZSB0aGFuIG9wZXJhdGlvblwncyAnICsgJ29sZCBhdHRyaWJ1dGUgdmFsdWUuJywgdGhpcywgewogICAgICAgICAgaXRlbSwKICAgICAgICAgIGtleTogdGhpcy5rZXksCiAgICAgICAgICB2YWx1ZTogdGhpcy5vbGRWYWx1ZQogICAgICAgIH0pOwogICAgICB9CgogICAgICBpZiAodGhpcy5vbGRWYWx1ZSA9PT0gbnVsbCAmJiB0aGlzLm5ld1ZhbHVlICE9PSBudWxsICYmIGl0ZW0uaGFzQXR0cmlidXRlKHRoaXMua2V5KSkgewogICAgICAgIC8qKgogICAgICAgICAqIFRoZSBhdHRyaWJ1dGUgd2l0aCBnaXZlbiBrZXkgYWxyZWFkeSBleGlzdHMgZm9yIHRoZSBnaXZlbiBub2RlLgogICAgICAgICAqCiAgICAgICAgICogQGVycm9yIGF0dHJpYnV0ZS1vcGVyYXRpb24tYXR0cmlidXRlLWV4aXN0cwogICAgICAgICAqIEBwYXJhbSB7bW9kdWxlOmVuZ2luZS9tb2RlbC9ub2Rlfk5vZGV9IG5vZGUKICAgICAgICAgKiBAcGFyYW0ge1N0cmluZ30ga2V5CiAgICAgICAgICovCiAgICAgICAgdGhyb3cgbmV3IENLRWRpdG9yRXJyb3IoJ2F0dHJpYnV0ZS1vcGVyYXRpb24tYXR0cmlidXRlLWV4aXN0czogVGhlIGF0dHJpYnV0ZSB3aXRoIGdpdmVuIGtleSBhbHJlYWR5IGV4aXN0cy4nLCB0aGlzLCB7CiAgICAgICAgICBub2RlOiBpdGVtLAogICAgICAgICAga2V5OiB0aGlzLmtleQogICAgICAgIH0pOwogICAgICB9CiAgICB9CiAgfQogIC8qKgogICAqIEBpbmhlcml0RG9jCiAgICovCgoKICBfZXhlY3V0ZSgpIHsKICAgIC8vIElmIHZhbHVlIHRvIHNldCBpcyBzYW1lIGFzIG9sZCB2YWx1ZSwgZG9uJ3QgZG8gYW55dGhpbmcuCiAgICBpZiAoIWlzRXF1YWwodGhpcy5vbGRWYWx1ZSwgdGhpcy5uZXdWYWx1ZSkpIHsKICAgICAgLy8gRXhlY3V0aW9uLgogICAgICBfc2V0QXR0cmlidXRlKHRoaXMucmFuZ2UsIHRoaXMua2V5LCB0aGlzLm5ld1ZhbHVlKTsKICAgIH0KICB9CiAgLyoqCiAgICogQGluaGVyaXREb2MKICAgKi8KCgogIHN0YXRpYyBnZXQgY2xhc3NOYW1lKCkgewogICAgcmV0dXJuICdBdHRyaWJ1dGVPcGVyYXRpb24nOwogIH0KICAvKioKICAgKiBDcmVhdGVzIGBBdHRyaWJ1dGVPcGVyYXRpb25gIG9iamVjdCBmcm9tIGRlc2VyaWxpemVkIG9iamVjdCwgaS5lLiBmcm9tIHBhcnNlZCBKU09OIHN0cmluZy4KICAgKgogICAqIEBwYXJhbSB7T2JqZWN0fSBqc29uIERlc2VyaWFsaXplZCBKU09OIG9iamVjdC4KICAgKiBAcGFyYW0ge21vZHVsZTplbmdpbmUvbW9kZWwvZG9jdW1lbnR+RG9jdW1lbnR9IGRvY3VtZW50IERvY3VtZW50IG9uIHdoaWNoIHRoaXMgb3BlcmF0aW9uIHdpbGwgYmUgYXBwbGllZC4KICAgKiBAcmV0dXJucyB7bW9kdWxlOmVuZ2luZS9tb2RlbC9vcGVyYXRpb24vYXR0cmlidXRlb3BlcmF0aW9ufkF0dHJpYnV0ZU9wZXJhdGlvbn0KICAgKi8KCgogIHN0YXRpYyBmcm9tSlNPTihqc29uLCBkb2N1bWVudCkgewogICAgcmV0dXJuIG5ldyBBdHRyaWJ1dGVPcGVyYXRpb24oUmFuZ2UuZnJvbUpTT04oanNvbi5yYW5nZSwgZG9jdW1lbnQpLCBqc29uLmtleSwganNvbi5vbGRWYWx1ZSwganNvbi5uZXdWYWx1ZSwganNvbi5iYXNlVmVyc2lvbik7CiAgfSAvLyBAaWYgQ0tfREVCVUdfRU5HSU5FIC8vIHRvU3RyaW5nKCkgewogIC8vIEBpZiBDS19ERUJVR19FTkdJTkUgLy8gCXJldHVybiBgQXR0cmlidXRlT3BlcmF0aW9uKCAkeyB0aGlzLmJhc2VWZXJzaW9uIH0gKTogYCArCiAgLy8gQGlmIENLX0RFQlVHX0VOR0lORSAvLwkJYCIkeyB0aGlzLmtleSB9IjogJHsgSlNPTi5zdHJpbmdpZnkoIHRoaXMub2xkVmFsdWUgKSB9YCArCiAgLy8gQGlmIENLX0RFQlVHX0VOR0lORSAvLwkJYCAtPiAkeyBKU09OLnN0cmluZ2lmeSggdGhpcy5uZXdWYWx1ZSApIH0sICR7IHRoaXMucmFuZ2UgfWA7CiAgLy8gQGlmIENLX0RFQlVHX0VOR0lORSAvLyB9CgoKfQ=="},{"version":3,"sources":["/Users/antonyching/Desktop/project/new-builder-demo/node_modules/@ckeditor/ckeditor5-engine/src/model/operation/attributeoperation.js"],"names":["Operation","Range","CKEditorError","_setAttribute","isEqual","AttributeOperation","constructor","range","key","oldValue","newValue","baseVersion","clone","undefined","type","getReversed","toJSON","json","_validate","isFlat","item","getItems","shallow","getAttribute","value","hasAttribute","node","_execute","className","fromJSON","document"],"mappings":"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","sourcesContent":["/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/model/operation/attributeoperation\n */\n\nimport Operation from './operation';\nimport Range from '../range';\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\nimport { _setAttribute } from './utils';\nimport { isEqual } from 'lodash-es';\n\n/**\n * Operation to change nodes' attribute.\n *\n * Using this class you can add, remove or change value of the attribute.\n *\n * @extends module:engine/model/operation/operation~Operation\n */\nexport default class AttributeOperation extends Operation {\n\t/**\n\t * Creates an operation that changes, removes or adds attributes.\n\t *\n\t * If only `newValue` is set, attribute will be added on a node. Note that all nodes in operation's range must not\n\t * have an attribute with the same key as the added attribute.\n\t *\n\t * If only `oldValue` is set, then attribute with given key will be removed. Note that all nodes in operation's range\n\t * must have an attribute with that key added.\n\t *\n\t * If both `newValue` and `oldValue` are set, then the operation will change the attribute value. Note that all nodes in\n\t * operation's ranges must already have an attribute with given key and `oldValue` as value\n\t *\n\t * @param {module:engine/model/range~Range} range Range on which the operation should be applied. Must be a flat range.\n\t * @param {String} key Key of an attribute to change or remove.\n\t * @param {*} oldValue Old value of the attribute with given key or `null`, if attribute was not set before.\n\t * @param {*} newValue New value of the attribute with given key or `null`, if operation should remove attribute.\n\t * @param {Number|null} baseVersion Document {@link module:engine/model/document~Document#version} on which operation\n\t * can be applied or `null` if the operation operates on detached (non-document) tree.\n\t */\n\tconstructor( range, key, oldValue, newValue, baseVersion ) {\n\t\tsuper( baseVersion );\n\n\t\t/**\n\t\t * Range on which operation should be applied.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/model/range~Range}\n\t\t */\n\t\tthis.range = range.clone();\n\n\t\t/**\n\t\t * Key of an attribute to change or remove.\n\t\t *\n\t\t * @readonly\n\t\t * @member {String}\n\t\t */\n\t\tthis.key = key;\n\n\t\t/**\n\t\t * Old value of the attribute with given key or `null`, if attribute was not set before.\n\t\t *\n\t\t * @readonly\n\t\t * @member {*}\n\t\t */\n\t\tthis.oldValue = oldValue === undefined ? null : oldValue;\n\n\t\t/**\n\t\t * New value of the attribute with given key or `null`, if operation should remove attribute.\n\t\t *\n\t\t * @readonly\n\t\t * @member {*}\n\t\t */\n\t\tthis.newValue = newValue === undefined ? null : newValue;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tget type() {\n\t\tif ( this.oldValue === null ) {\n\t\t\treturn 'addAttribute';\n\t\t} else if ( this.newValue === null ) {\n\t\t\treturn 'removeAttribute';\n\t\t} else {\n\t\t\treturn 'changeAttribute';\n\t\t}\n\t}\n\n\t/**\n\t * Creates and returns an operation that has the same parameters as this operation.\n\t *\n\t * @returns {module:engine/model/operation/attributeoperation~AttributeOperation} Clone of this operation.\n\t */\n\tclone() {\n\t\treturn new AttributeOperation( this.range, this.key, this.oldValue, this.newValue, this.baseVersion );\n\t}\n\n\t/**\n\t * See {@link module:engine/model/operation/operation~Operation#getReversed `Operation#getReversed()`}.\n\t *\n\t * @returns {module:engine/model/operation/attributeoperation~AttributeOperation}\n\t */\n\tgetReversed() {\n\t\treturn new AttributeOperation( this.range, this.key, this.newValue, this.oldValue, this.baseVersion + 1 );\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\ttoJSON() {\n\t\tconst json = super.toJSON();\n\n\t\tjson.range = this.range.toJSON();\n\n\t\treturn json;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\t_validate() {\n\t\tif ( !this.range.isFlat ) {\n\t\t\t/**\n\t\t\t * The range to change is not flat.\n\t\t\t *\n\t\t\t * @error attribute-operation-range-not-flat\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'attribute-operation-range-not-flat: The range to change is not flat.', this );\n\t\t}\n\n\t\tfor ( const item of this.range.getItems( { shallow: true } ) ) {\n\t\t\tif ( this.oldValue !== null && !isEqual( item.getAttribute( this.key ), this.oldValue ) ) {\n\t\t\t\t/**\n\t\t\t\t * Changed node has different attribute value than operation's old attribute value.\n\t\t\t\t *\n\t\t\t\t * @error attribute-operation-wrong-old-value\n\t\t\t\t * @param {module:engine/model/item~Item} item\n\t\t\t\t * @param {String} key\n\t\t\t\t * @param {*} value\n\t\t\t\t */\n\t\t\t\tthrow new CKEditorError(\n\t\t\t\t\t'attribute-operation-wrong-old-value: Changed node has different attribute value than operation\\'s ' +\n\t\t\t\t\t'old attribute value.',\n\t\t\t\t\tthis,\n\t\t\t\t\t{ item, key: this.key, value: this.oldValue }\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif ( this.oldValue === null && this.newValue !== null && item.hasAttribute( this.key ) ) {\n\t\t\t\t/**\n\t\t\t\t * The attribute with given key already exists for the given node.\n\t\t\t\t *\n\t\t\t\t * @error attribute-operation-attribute-exists\n\t\t\t\t * @param {module:engine/model/node~Node} node\n\t\t\t\t * @param {String} key\n\t\t\t\t */\n\t\t\t\tthrow new CKEditorError(\n\t\t\t\t\t'attribute-operation-attribute-exists: The attribute with given key already exists.',\n\t\t\t\t\tthis,\n\t\t\t\t\t{ node: item, key: this.key }\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\t_execute() {\n\t\t// If value to set is same as old value, don't do anything.\n\t\tif ( !isEqual( this.oldValue, this.newValue ) ) {\n\t\t\t// Execution.\n\t\t\t_setAttribute( this.range, this.key, this.newValue );\n\t\t}\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tstatic get className() {\n\t\treturn 'AttributeOperation';\n\t}\n\n\t/**\n\t * Creates `AttributeOperation` object from deserilized object, i.e. from parsed JSON string.\n\t *\n\t * @param {Object} json Deserialized JSON object.\n\t * @param {module:engine/model/document~Document} document Document on which this operation will be applied.\n\t * @returns {module:engine/model/operation/attributeoperation~AttributeOperation}\n\t */\n\tstatic fromJSON( json, document ) {\n\t\treturn new AttributeOperation( Range.fromJSON( json.range, document ), json.key, json.oldValue, json.newValue, json.baseVersion );\n\t}\n\n\t// @if CK_DEBUG_ENGINE // toString() {\n\t// @if CK_DEBUG_ENGINE // \treturn `AttributeOperation( ${ this.baseVersion } ): ` +\n\t// @if CK_DEBUG_ENGINE //\t\t`\"${ this.key }\": ${ JSON.stringify( this.oldValue ) }` +\n\t// @if CK_DEBUG_ENGINE //\t\t` -> ${ JSON.stringify( this.newValue ) }, ${ this.range }`;\n\t// @if CK_DEBUG_ENGINE // }\n}\n"]}]}