{"remainingRequest":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/babel-loader/lib/index.js!/Users/antonyching/Desktop/project/new-builder-demo/node_modules/@ckeditor/ckeditor5-image/src/image/utils.js","dependencies":[{"path":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/@ckeditor/ckeditor5-image/src/image/utils.js","mtime":499162500000},{"path":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/@ckeditor/ckeditor5-dev-webpack-plugin/lib/translatesourceloader.js","mtime":499162500000},{"path":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:LyoqCiAqIEBsaWNlbnNlIENvcHlyaWdodCAoYykgMjAwMy0yMDE5LCBDS1NvdXJjZSAtIEZyZWRlcmljbyBLbmFiYmVuLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKiBGb3IgbGljZW5zaW5nLCBzZWUgTElDRU5TRS5tZCBvciBodHRwczovL2NrZWRpdG9yLmNvbS9sZWdhbC9ja2VkaXRvci1vc3MtbGljZW5zZQogKi8KCi8qKgogKiBAbW9kdWxlIGltYWdlL2ltYWdlL3V0aWxzCiAqLwppbXBvcnQgeyBmaW5kT3B0aW1hbEluc2VydGlvblBvc2l0aW9uLCBpc1dpZGdldCwgdG9XaWRnZXQgfSBmcm9tICdAY2tlZGl0b3IvY2tlZGl0b3I1LXdpZGdldC9zcmMvdXRpbHMnOwovKioKICogQ29udmVydHMgYSBnaXZlbiB7QGxpbmsgbW9kdWxlOmVuZ2luZS92aWV3L2VsZW1lbnR+RWxlbWVudH0gdG8gYW4gaW1hZ2Ugd2lkZ2V0OgogKiAqIEFkZHMgYSB7QGxpbmsgbW9kdWxlOmVuZ2luZS92aWV3L2VsZW1lbnR+RWxlbWVudCNfc2V0Q3VzdG9tUHJvcGVydHkgY3VzdG9tIHByb3BlcnR5fSBhbGxvd2luZyB0byByZWNvZ25pemUgdGhlIGltYWdlIHdpZGdldCBlbGVtZW50LgogKiAqIENhbGxzIHRoZSB7QGxpbmsgbW9kdWxlOndpZGdldC91dGlsc350b1dpZGdldH0gZnVuY3Rpb24gd2l0aCB0aGUgcHJvcGVyIGVsZW1lbnQncyBsYWJlbCBjcmVhdG9yLgogKgogKiBAcGFyYW0ge21vZHVsZTplbmdpbmUvdmlldy9lbGVtZW50fkVsZW1lbnR9IHZpZXdFbGVtZW50CiAqIEBwYXJhbSB7bW9kdWxlOmVuZ2luZS92aWV3L2Rvd25jYXN0d3JpdGVyfkRvd25jYXN0V3JpdGVyfSB3cml0ZXIgQW4gaW5zdGFuY2Ugb2YgdGhlIHZpZXcgd3JpdGVyLgogKiBAcGFyYW0ge1N0cmluZ30gbGFiZWwgVGhlIGVsZW1lbnQncyBsYWJlbC4gSXQgd2lsbCBiZSBjb25jYXRlbmF0ZWQgd2l0aCB0aGUgaW1hZ2UgYGFsdGAgYXR0cmlidXRlIGlmIG9uZSBpcyBwcmVzZW50LgogKiBAcmV0dXJucyB7bW9kdWxlOmVuZ2luZS92aWV3L2VsZW1lbnR+RWxlbWVudH0KICovCgpleHBvcnQgZnVuY3Rpb24gdG9JbWFnZVdpZGdldCh2aWV3RWxlbWVudCwgd3JpdGVyLCBsYWJlbCkgewogIHdyaXRlci5zZXRDdXN0b21Qcm9wZXJ0eSgnaW1hZ2UnLCB0cnVlLCB2aWV3RWxlbWVudCk7CiAgcmV0dXJuIHRvV2lkZ2V0KHZpZXdFbGVtZW50LCB3cml0ZXIsIHsKICAgIGxhYmVsOiBsYWJlbENyZWF0b3IKICB9KTsKCiAgZnVuY3Rpb24gbGFiZWxDcmVhdG9yKCkgewogICAgY29uc3QgaW1nRWxlbWVudCA9IHZpZXdFbGVtZW50LmdldENoaWxkKDApOwogICAgY29uc3QgYWx0VGV4dCA9IGltZ0VsZW1lbnQuZ2V0QXR0cmlidXRlKCdhbHQnKTsKICAgIHJldHVybiBhbHRUZXh0ID8gYCR7YWx0VGV4dH0gJHtsYWJlbH1gIDogbGFiZWw7CiAgfQp9Ci8qKgogKiBDaGVja3MgaWYgYSBnaXZlbiB2aWV3IGVsZW1lbnQgaXMgYW4gaW1hZ2Ugd2lkZ2V0LgogKgogKiBAcGFyYW0ge21vZHVsZTplbmdpbmUvdmlldy9lbGVtZW50fkVsZW1lbnR9IHZpZXdFbGVtZW50CiAqIEByZXR1cm5zIHtCb29sZWFufQogKi8KCmV4cG9ydCBmdW5jdGlvbiBpc0ltYWdlV2lkZ2V0KHZpZXdFbGVtZW50KSB7CiAgcmV0dXJuICEhdmlld0VsZW1lbnQuZ2V0Q3VzdG9tUHJvcGVydHkoJ2ltYWdlJykgJiYgaXNXaWRnZXQodmlld0VsZW1lbnQpOwp9Ci8qKgogKiBSZXR1cm5zIGFuIGltYWdlIHdpZGdldCBlZGl0aW5nIHZpZXcgZWxlbWVudCBpZiBvbmUgaXMgc2VsZWN0ZWQuCiAqCiAqIEBwYXJhbSB7bW9kdWxlOmVuZ2luZS92aWV3L3NlbGVjdGlvbn5TZWxlY3Rpb258bW9kdWxlOmVuZ2luZS92aWV3L2RvY3VtZW50c2VsZWN0aW9ufkRvY3VtZW50U2VsZWN0aW9ufSBzZWxlY3Rpb24KICogQHJldHVybnMge21vZHVsZTplbmdpbmUvdmlldy9lbGVtZW50fkVsZW1lbnR8bnVsbH0KICovCgpleHBvcnQgZnVuY3Rpb24gZ2V0U2VsZWN0ZWRJbWFnZVdpZGdldChzZWxlY3Rpb24pIHsKICBjb25zdCB2aWV3RWxlbWVudCA9IHNlbGVjdGlvbi5nZXRTZWxlY3RlZEVsZW1lbnQoKTsKCiAgaWYgKHZpZXdFbGVtZW50ICYmIGlzSW1hZ2VXaWRnZXQodmlld0VsZW1lbnQpKSB7CiAgICByZXR1cm4gdmlld0VsZW1lbnQ7CiAgfQoKICByZXR1cm4gbnVsbDsKfQovKioKICogQ2hlY2tzIGlmIHRoZSBwcm92aWRlZCBtb2RlbCBlbGVtZW50IGlzIGFuIGBpbWFnZWAuCiAqCiAqIEBwYXJhbSB7bW9kdWxlOmVuZ2luZS9tb2RlbC9lbGVtZW50fkVsZW1lbnR9IG1vZGVsRWxlbWVudAogKiBAcmV0dXJucyB7Qm9vbGVhbn0KICovCgpleHBvcnQgZnVuY3Rpb24gaXNJbWFnZShtb2RlbEVsZW1lbnQpIHsKICByZXR1cm4gISFtb2RlbEVsZW1lbnQgJiYgbW9kZWxFbGVtZW50LmlzKCdpbWFnZScpOwp9Ci8qKgogKiBIYW5kbGVzIGluc2VydGluZyBzaW5nbGUgZmlsZS4gVGhpcyBtZXRob2QgdW5pZmllcyBpbWFnZSBpbnNlcnRpb24gdXNpbmcge0BsaW5rIG1vZHVsZTp3aWRnZXQvdXRpbHN+ZmluZE9wdGltYWxJbnNlcnRpb25Qb3NpdGlvbn0gbWV0aG9kLgogKgogKgkJbW9kZWwuY2hhbmdlKCB3cml0ZXIgPT4gewogKgkJCWluc2VydEltYWdlKCB3cml0ZXIsIG1vZGVsLCB7IHNyYzogJ3BhdGgvdG8vaW1hZ2UuanBnJyB9ICk7CiAqCQl9ICk7CiAqCiAqIEBwYXJhbSB7bW9kdWxlOmVuZ2luZS9tb2RlbC93cml0ZXJ+V3JpdGVyfSB3cml0ZXIKICogQHBhcmFtIHttb2R1bGU6ZW5naW5lL21vZGVsL21vZGVsfk1vZGVsfSBtb2RlbAogKiBAcGFyYW0ge09iamVjdH0gW2F0dHJpYnV0ZXM9e31dIEF0dHJpYnV0ZXMgb2YgaW5zZXJ0ZWQgaW1hZ2UKICovCgpleHBvcnQgZnVuY3Rpb24gaW5zZXJ0SW1hZ2Uod3JpdGVyLCBtb2RlbCwgYXR0cmlidXRlcyA9IHt9KSB7CiAgY29uc3QgaW1hZ2VFbGVtZW50ID0gd3JpdGVyLmNyZWF0ZUVsZW1lbnQoJ2ltYWdlJywgYXR0cmlidXRlcyk7CiAgY29uc3QgaW5zZXJ0QXRTZWxlY3Rpb24gPSBmaW5kT3B0aW1hbEluc2VydGlvblBvc2l0aW9uKG1vZGVsLmRvY3VtZW50LnNlbGVjdGlvbiwgbW9kZWwpOwogIG1vZGVsLmluc2VydENvbnRlbnQoaW1hZ2VFbGVtZW50LCBpbnNlcnRBdFNlbGVjdGlvbik7IC8vIEluc2VydGluZyBhbiBpbWFnZSBtaWdodCd2ZSBmYWlsZWQgZHVlIHRvIHNjaGVtYSByZWd1bGF0aW9ucy4KCiAgaWYgKGltYWdlRWxlbWVudC5wYXJlbnQpIHsKICAgIHdyaXRlci5zZXRTZWxlY3Rpb24oaW1hZ2VFbGVtZW50LCAnb24nKTsKICB9Cn0KLyoqCiAqIENoZWNrcyBpZiBpbWFnZSBjYW4gYmUgaW5zZXJ0ZWQgYXQgY3VycmVudCBtb2RlbCBzZWxlY3Rpb24uCiAqCiAqIEBwYXJhbSB7bW9kdWxlOmVuZ2luZS9tb2RlbC9tb2RlbH5Nb2RlbH0gbW9kZWwKICogQHJldHVybnMge0Jvb2xlYW59CiAqLwoKZXhwb3J0IGZ1bmN0aW9uIGlzSW1hZ2VBbGxvd2VkKG1vZGVsKSB7CiAgY29uc3Qgc2NoZW1hID0gbW9kZWwuc2NoZW1hOwogIGNvbnN0IHNlbGVjdGlvbiA9IG1vZGVsLmRvY3VtZW50LnNlbGVjdGlvbjsKICByZXR1cm4gaXNJbWFnZUFsbG93ZWRJblBhcmVudChzZWxlY3Rpb24sIHNjaGVtYSwgbW9kZWwpICYmICFjaGVja1NlbGVjdGlvbk9uT2JqZWN0KHNlbGVjdGlvbiwgc2NoZW1hKSAmJiBpc0luT3RoZXJJbWFnZShzZWxlY3Rpb24pOwp9IC8vIENoZWNrcyBpZiBpbWFnZSBpcyBhbGxvd2VkIGJ5IHNjaGVtYSBpbiBvcHRpbWFsIGluc2VydGlvbiBwYXJlbnQuCi8vCi8vIEByZXR1cm5zIHtCb29sZWFufQoKZnVuY3Rpb24gaXNJbWFnZUFsbG93ZWRJblBhcmVudChzZWxlY3Rpb24sIHNjaGVtYSwgbW9kZWwpIHsKICBjb25zdCBwYXJlbnQgPSBnZXRJbnNlcnRJbWFnZVBhcmVudChzZWxlY3Rpb24sIG1vZGVsKTsKICByZXR1cm4gc2NoZW1hLmNoZWNrQ2hpbGQocGFyZW50LCAnaW1hZ2UnKTsKfSAvLyBDaGVjayBpZiBzZWxlY3Rpb24gaXMgb24gb2JqZWN0LgovLwovLyBAcmV0dXJucyB7Qm9vbGVhbn0KCgpmdW5jdGlvbiBjaGVja1NlbGVjdGlvbk9uT2JqZWN0KHNlbGVjdGlvbiwgc2NoZW1hKSB7CiAgY29uc3Qgc2VsZWN0ZWRFbGVtZW50ID0gc2VsZWN0aW9uLmdldFNlbGVjdGVkRWxlbWVudCgpOwogIHJldHVybiBzZWxlY3RlZEVsZW1lbnQgJiYgc2NoZW1hLmlzT2JqZWN0KHNlbGVjdGVkRWxlbWVudCk7Cn0gLy8gQ2hlY2tzIGlmIHNlbGVjdGlvbiBpcyBwbGFjZWQgaW4gb3RoZXIgaW1hZ2UgKGllLiBpbiBjYXB0aW9uKS4KCgpmdW5jdGlvbiBpc0luT3RoZXJJbWFnZShzZWxlY3Rpb24pIHsKICByZXR1cm4gWy4uLnNlbGVjdGlvbi5mb2N1cy5nZXRBbmNlc3RvcnMoKV0uZXZlcnkoYW5jZXN0b3IgPT4gIWFuY2VzdG9yLmlzKCdpbWFnZScpKTsKfSAvLyBSZXR1cm5zIGEgbm9kZSB0aGF0IHdpbGwgYmUgdXNlZCB0byBpbnNlcnQgaW1hZ2Ugd2l0aCBgbW9kZWwuaW5zZXJ0Q29udGVudGAgdG8gY2hlY2sgaWYgaW1hZ2UgY2FuIGJlIHBsYWNlZCB0aGVyZS4KCgpmdW5jdGlvbiBnZXRJbnNlcnRJbWFnZVBhcmVudChzZWxlY3Rpb24sIG1vZGVsKSB7CiAgY29uc3QgaW5zZXJ0QXQgPSBmaW5kT3B0aW1hbEluc2VydGlvblBvc2l0aW9uKHNlbGVjdGlvbiwgbW9kZWwpOwogIGNvbnN0IHBhcmVudCA9IGluc2VydEF0LnBhcmVudDsKCiAgaWYgKHBhcmVudC5pc0VtcHR5ICYmICFwYXJlbnQuaXMoJyRyb290JykpIHsKICAgIHJldHVybiBwYXJlbnQucGFyZW50OwogIH0KCiAgcmV0dXJuIHBhcmVudDsKfQ=="},{"version":3,"sources":["/Users/antonyching/Desktop/project/new-builder-demo/node_modules/@ckeditor/ckeditor5-image/src/image/utils.js"],"names":["findOptimalInsertionPosition","isWidget","toWidget","toImageWidget","viewElement","writer","label","setCustomProperty","labelCreator","imgElement","getChild","altText","getAttribute","isImageWidget","getCustomProperty","getSelectedImageWidget","selection","getSelectedElement","isImage","modelElement","is","insertImage","model","attributes","imageElement","createElement","insertAtSelection","document","insertContent","parent","setSelection","isImageAllowed","schema","isImageAllowedInParent","checkSelectionOnObject","isInOtherImage","getInsertImageParent","checkChild","selectedElement","isObject","focus","getAncestors","every","ancestor","insertAt","isEmpty"],"mappings":"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","sourcesContent":["/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module image/image/utils\n */\n\nimport { findOptimalInsertionPosition, isWidget, toWidget } from '@ckeditor/ckeditor5-widget/src/utils';\n\n/**\n * Converts a given {@link module:engine/view/element~Element} to an image widget:\n * * Adds a {@link module:engine/view/element~Element#_setCustomProperty custom property} allowing to recognize the image widget element.\n * * Calls the {@link module:widget/utils~toWidget} function with the proper element's label creator.\n *\n * @param {module:engine/view/element~Element} viewElement\n * @param {module:engine/view/downcastwriter~DowncastWriter} writer An instance of the view writer.\n * @param {String} label The element's label. It will be concatenated with the image `alt` attribute if one is present.\n * @returns {module:engine/view/element~Element}\n */\nexport function toImageWidget( viewElement, writer, label ) {\n\twriter.setCustomProperty( 'image', true, viewElement );\n\n\treturn toWidget( viewElement, writer, { label: labelCreator } );\n\n\tfunction labelCreator() {\n\t\tconst imgElement = viewElement.getChild( 0 );\n\t\tconst altText = imgElement.getAttribute( 'alt' );\n\n\t\treturn altText ? `${ altText } ${ label }` : label;\n\t}\n}\n\n/**\n * Checks if a given view element is an image widget.\n *\n * @param {module:engine/view/element~Element} viewElement\n * @returns {Boolean}\n */\nexport function isImageWidget( viewElement ) {\n\treturn !!viewElement.getCustomProperty( 'image' ) && isWidget( viewElement );\n}\n\n/**\n * Returns an image widget editing view element if one is selected.\n *\n * @param {module:engine/view/selection~Selection|module:engine/view/documentselection~DocumentSelection} selection\n * @returns {module:engine/view/element~Element|null}\n */\nexport function getSelectedImageWidget( selection ) {\n\tconst viewElement = selection.getSelectedElement();\n\n\tif ( viewElement && isImageWidget( viewElement ) ) {\n\t\treturn viewElement;\n\t}\n\n\treturn null;\n}\n\n/**\n * Checks if the provided model element is an `image`.\n *\n * @param {module:engine/model/element~Element} modelElement\n * @returns {Boolean}\n */\nexport function isImage( modelElement ) {\n\treturn !!modelElement && modelElement.is( 'image' );\n}\n\n/**\n * Handles inserting single file. This method unifies image insertion using {@link module:widget/utils~findOptimalInsertionPosition} method.\n *\n *\t\tmodel.change( writer => {\n *\t\t\tinsertImage( writer, model, { src: 'path/to/image.jpg' } );\n *\t\t} );\n *\n * @param {module:engine/model/writer~Writer} writer\n * @param {module:engine/model/model~Model} model\n * @param {Object} [attributes={}] Attributes of inserted image\n */\nexport function insertImage( writer, model, attributes = {} ) {\n\tconst imageElement = writer.createElement( 'image', attributes );\n\n\tconst insertAtSelection = findOptimalInsertionPosition( model.document.selection, model );\n\n\tmodel.insertContent( imageElement, insertAtSelection );\n\n\t// Inserting an image might've failed due to schema regulations.\n\tif ( imageElement.parent ) {\n\t\twriter.setSelection( imageElement, 'on' );\n\t}\n}\n\n/**\n * Checks if image can be inserted at current model selection.\n *\n * @param {module:engine/model/model~Model} model\n * @returns {Boolean}\n */\nexport function isImageAllowed( model ) {\n\tconst schema = model.schema;\n\tconst selection = model.document.selection;\n\n\treturn isImageAllowedInParent( selection, schema, model ) &&\n\t\t!checkSelectionOnObject( selection, schema ) &&\n\t\tisInOtherImage( selection );\n}\n\n// Checks if image is allowed by schema in optimal insertion parent.\n//\n// @returns {Boolean}\nfunction isImageAllowedInParent( selection, schema, model ) {\n\tconst parent = getInsertImageParent( selection, model );\n\n\treturn schema.checkChild( parent, 'image' );\n}\n\n// Check if selection is on object.\n//\n// @returns {Boolean}\nfunction checkSelectionOnObject( selection, schema ) {\n\tconst selectedElement = selection.getSelectedElement();\n\n\treturn selectedElement && schema.isObject( selectedElement );\n}\n\n// Checks if selection is placed in other image (ie. in caption).\nfunction isInOtherImage( selection ) {\n\treturn [ ...selection.focus.getAncestors() ].every( ancestor => !ancestor.is( 'image' ) );\n}\n\n// Returns a node that will be used to insert image with `model.insertContent` to check if image can be placed there.\nfunction getInsertImageParent( selection, model ) {\n\tconst insertAt = findOptimalInsertionPosition( selection, model );\n\n\tconst parent = insertAt.parent;\n\n\tif ( parent.isEmpty && !parent.is( '$root' ) ) {\n\t\treturn parent.parent;\n\t}\n\n\treturn parent;\n}\n"]}]}