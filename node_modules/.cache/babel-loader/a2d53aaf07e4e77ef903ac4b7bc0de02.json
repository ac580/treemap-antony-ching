{"remainingRequest":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/babel-loader/lib/index.js!/Users/antonyching/Desktop/project/new-builder-demo/node_modules/@ckeditor/ckeditor5-utils/src/dom/rect.js","dependencies":[{"path":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/@ckeditor/ckeditor5-utils/src/dom/rect.js","mtime":499162500000},{"path":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/@ckeditor/ckeditor5-dev-webpack-plugin/lib/translatesourceloader.js","mtime":499162500000},{"path":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:LyoqCiAqIEBsaWNlbnNlIENvcHlyaWdodCAoYykgMjAwMy0yMDE5LCBDS1NvdXJjZSAtIEZyZWRlcmljbyBLbmFiYmVuLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKiBGb3IgbGljZW5zaW5nLCBzZWUgTElDRU5TRS5tZCBvciBodHRwczovL2NrZWRpdG9yLmNvbS9sZWdhbC9ja2VkaXRvci1vc3MtbGljZW5zZQogKi8KCi8qKgogKiBAbW9kdWxlIHV0aWxzL2RvbS9yZWN0CiAqLwppbXBvcnQgaXNSYW5nZSBmcm9tICcuL2lzcmFuZ2UnOwppbXBvcnQgaXNXaW5kb3cgZnJvbSAnLi9pc3dpbmRvdyc7CmltcG9ydCBnZXRCb3JkZXJXaWR0aHMgZnJvbSAnLi9nZXRib3JkZXJ3aWR0aHMnOwppbXBvcnQgaXNUZXh0IGZyb20gJy4vaXN0ZXh0JzsKaW1wb3J0IHsgaXNFbGVtZW50IH0gZnJvbSAnbG9kYXNoLWVzJzsKY29uc3QgcmVjdFByb3BlcnRpZXMgPSBbJ3RvcCcsICdyaWdodCcsICdib3R0b20nLCAnbGVmdCcsICd3aWR0aCcsICdoZWlnaHQnXTsKLyoqCiAqIEEgaGVscGVyIGNsYXNzIHJlcHJlc2VudGluZyBhIGBDbGllbnRSZWN0YCBvYmplY3QsIGUuZy4gdmFsdWUgcmV0dXJuZWQgYnkKICogdGhlIG5hdGl2ZSBgb2JqZWN0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpYCBtZXRob2QuIFByb3ZpZGVzIGEgc2V0IG9mIG1ldGhvZHMKICogdG8gbWFuaXB1bGF0ZSB0aGUgcmVjdCBhbmQgY29tcGFyZSBpdCBhZ2FpbnN0IG90aGVyIHJlY3QgaW5zdGFuY2VzLgogKi8KCmV4cG9ydCBkZWZhdWx0IGNsYXNzIFJlY3QgewogIC8qKgogICAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgcmVjdC4KICAgKgogICAqCQkvLyBSZWN0IG9mIGFuIEhUTUxFbGVtZW50LgogICAqCQljb25zdCByZWN0QSA9IG5ldyBSZWN0KCBkb2N1bWVudC5ib2R5ICk7CiAgICoKICAgKgkJLy8gUmVjdCBvZiBhIERPTSBSYW5nZS4KICAgKgkJY29uc3QgcmVjdEIgPSBuZXcgUmVjdCggZG9jdW1lbnQuZ2V0U2VsZWN0aW9uKCkuZ2V0UmFuZ2VBdCggMCApICk7CiAgICoKICAgKgkJLy8gUmVjdCBvZiBhIHdpbmRvdyAod2ViIGJyb3dzZXIgdmlld3BvcnQpLgogICAqCQljb25zdCByZWN0QyA9IG5ldyBSZWN0KCB3aW5kb3cgKTsKICAgKgogICAqCQkvLyBSZWN0IG91dCBvZiBhbiBvYmplY3QuCiAgICoJCWNvbnN0IHJlY3REID0gbmV3IFJlY3QoIHsgdG9wOiAwLCByaWdodDogMTAsIGJvdHRvbTogMTAsIGxlZnQ6IDAsIHdpZHRoOiAxMCwgaGVpZ2h0OiAxMCB9ICk7CiAgICoKICAgKgkJLy8gUmVjdCBvdXQgb2YgYW5vdGhlciBSZWN0IGluc3RhbmNlLgogICAqCQljb25zdCByZWN0RSA9IG5ldyBSZWN0KCByZWN0RCApOwogICAqCiAgICoJCS8vIFJlY3Qgb3V0IG9mIGEgQ2xpZW50UmVjdC4KICAgKgkJY29uc3QgcmVjdEYgPSBuZXcgUmVjdCggZG9jdW1lbnQuYm9keS5nZXRDbGllbnRSZWN0cygpLml0ZW0oIDAgKSApOwogICAqCiAgICogKipOb3RlKio6IEJ5IGRlZmF1bHQgYSByZWN0IG9mIGFuIEhUTUwgZWxlbWVudCBpbmNsdWRlcyBpdHMgQ1NTIGJvcmRlcnMgYW5kIHNjcm9sbGJhcnMgKGlmIGFueSkKICAgKiBhbnQgdGhlIHJlY3Qgb2YgYSBgd2luZG93YCBpbmNsdWRlcyBzY3JvbGxiYXJzIHRvby4gVXNlIHtAbGluayAjZXhjbHVkZVNjcm9sbGJhcnNBbmRCb3JkZXJzfQogICAqIHRvIGdldCB0aGUgaW5uZXIgcGFydCBvZiB0aGUgcmVjdC4KICAgKgogICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR8UmFuZ2V8V2luZG93fENsaWVudFJlY3R8bW9kdWxlOnV0aWxzL2RvbS9yZWN0flJlY3R8T2JqZWN0fSBzb3VyY2UgQSBzb3VyY2Ugb2JqZWN0IHRvIGNyZWF0ZSB0aGUgcmVjdC4KICAgKi8KICBjb25zdHJ1Y3Rvcihzb3VyY2UpIHsKICAgIGNvbnN0IGlzU291cmNlUmFuZ2UgPSBpc1JhbmdlKHNvdXJjZSk7CiAgICAvKioKICAgICAqIFRoZSBvYmplY3QgdGhpcyByZWN0IGlzIGZvci4KICAgICAqCiAgICAgKiBAcHJvdGVjdGVkCiAgICAgKiBAcmVhZG9ubHkKICAgICAqIEBtZW1iZXIge0hUTUxFbGVtZW50fFJhbmdlfENsaWVudFJlY3R8bW9kdWxlOnV0aWxzL2RvbS9yZWN0flJlY3R8T2JqZWN0fSAjX3NvdXJjZQogICAgICovCgogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsICdfc291cmNlJywgewogICAgICAvLyBJZiB0aGUgc291cmNlIGlzIGEgUmVjdCBpbnN0YW5jZSwgY29weSBpdCdzICNfc291cmNlLgogICAgICB2YWx1ZTogc291cmNlLl9zb3VyY2UgfHwgc291cmNlLAogICAgICB3cml0YWJsZTogdHJ1ZSwKICAgICAgZW51bWVyYWJsZTogZmFsc2UKICAgIH0pOwoKICAgIGlmIChpc0VsZW1lbnQoc291cmNlKSB8fCBpc1NvdXJjZVJhbmdlKSB7CiAgICAgIC8vIFRoZSBgUmVjdGAgY2xhc3MgZGVwZW5kcyBvbiBgZ2V0Qm91bmRpbmdDbGllbnRSZWN0YCBhbmQgYGdldENsaWVudFJlY3RzYCBET00gbWV0aG9kcy4gSWYgdGhlIHNvdXJjZQogICAgICAvLyBvZiBhIHJlY3QgaW4gYW4gSFRNTCBlbGVtZW50IG9yIGEgRE9NIHJhbmdlIGJ1dCBpdCBkb2VzIG5vdCBiZWxvbmcgdG8gYW55IHJlbmRlcmVkIERPTSB0cmVlLCB0aGVzZSBtZXRob2RzCiAgICAgIC8vIHdpbGwgZmFpbCB0byBvYnRhaW4gdGhlIGdlb21ldHJ5IGFuZCB0aGUgcmVjdCBpbnN0YW5jZSBtYWtlcyBsaXR0bGUgc2Vuc2UgdG8gdGhlIGZlYXR1cmVzIHVzaW5nIGl0LgogICAgICAvLyBUbyBnZXQgcmlkIG9mIHRoaXMgd2FybmluZyBtYWtlIHN1cmUgdGhlIHNvdXJjZSBwYXNzZWQgdG8gdGhlIGNvbnN0cnVjdG9yIGlzIGEgZGVzY2VuZGFudCBvZiBgd2luZG93LmRvY3VtZW50LmJvZHlgLgogICAgICAvLyBAaWYgQ0tfREVCVUcgLy8gY29uc3Qgc291cmNlTm9kZSA9IGlzU291cmNlUmFuZ2UgPyBzb3VyY2Uuc3RhcnRDb250YWluZXIgOiBzb3VyY2U7CiAgICAgIC8vIEBpZiBDS19ERUJVRyAvLyBpZiAoICFzb3VyY2VOb2RlLm93bmVyRG9jdW1lbnQgfHwgIXNvdXJjZU5vZGUub3duZXJEb2N1bWVudC5ib2R5LmNvbnRhaW5zKCBzb3VyY2VOb2RlICkgKSB7CiAgICAgIC8vIEBpZiBDS19ERUJVRyAvLyAJY29uc29sZS53YXJuKAogICAgICAvLyBAaWYgQ0tfREVCVUcgLy8gCQkncmVjdC1zb3VyY2Utbm90LWluLWRvbTogVGhlIHNvdXJjZSBvZiB0aGlzIHJlY3QgZG9lcyBub3QgYmVsb25nIHRvIGFueSByZW5kZXJlZCBET00gdHJlZS4nLAogICAgICAvLyBAaWYgQ0tfREVCVUcgLy8gCQl7IHNvdXJjZSB9ICk7CiAgICAgIC8vIEBpZiBDS19ERUJVRyAvLyB9CiAgICAgIGlmIChpc1NvdXJjZVJhbmdlKSB7CiAgICAgICAgY29weVJlY3RQcm9wZXJ0aWVzKHRoaXMsIFJlY3QuZ2V0RG9tUmFuZ2VSZWN0cyhzb3VyY2UpWzBdKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjb3B5UmVjdFByb3BlcnRpZXModGhpcywgc291cmNlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpKTsKICAgICAgfQogICAgfSBlbHNlIGlmIChpc1dpbmRvdyhzb3VyY2UpKSB7CiAgICAgIGNvbnN0IHsKICAgICAgICBpbm5lcldpZHRoLAogICAgICAgIGlubmVySGVpZ2h0CiAgICAgIH0gPSBzb3VyY2U7CiAgICAgIGNvcHlSZWN0UHJvcGVydGllcyh0aGlzLCB7CiAgICAgICAgdG9wOiAwLAogICAgICAgIHJpZ2h0OiBpbm5lcldpZHRoLAogICAgICAgIGJvdHRvbTogaW5uZXJIZWlnaHQsCiAgICAgICAgbGVmdDogMCwKICAgICAgICB3aWR0aDogaW5uZXJXaWR0aCwKICAgICAgICBoZWlnaHQ6IGlubmVySGVpZ2h0CiAgICAgIH0pOwogICAgfSBlbHNlIHsKICAgICAgY29weVJlY3RQcm9wZXJ0aWVzKHRoaXMsIHNvdXJjZSk7CiAgICB9CiAgICAvKioKICAgICAqIFRoZSAidG9wIiB2YWx1ZSBvZiB0aGUgcmVjdC4KICAgICAqCiAgICAgKiBAcmVhZG9ubHkKICAgICAqIEBtZW1iZXIge051bWJlcn0gI3RvcAogICAgICovCgogICAgLyoqCiAgICAgKiBUaGUgInJpZ2h0IiB2YWx1ZSBvZiB0aGUgcmVjdC4KICAgICAqCiAgICAgKiBAcmVhZG9ubHkKICAgICAqIEBtZW1iZXIge051bWJlcn0gI3JpZ2h0CiAgICAgKi8KCiAgICAvKioKICAgICAqIFRoZSAiYm90dG9tIiB2YWx1ZSBvZiB0aGUgcmVjdC4KICAgICAqCiAgICAgKiBAcmVhZG9ubHkKICAgICAqIEBtZW1iZXIge051bWJlcn0gI2JvdHRvbQogICAgICovCgogICAgLyoqCiAgICAgKiBUaGUgImxlZnQiIHZhbHVlIG9mIHRoZSByZWN0LgogICAgICoKICAgICAqIEByZWFkb25seQogICAgICogQG1lbWJlciB7TnVtYmVyfSAjbGVmdAogICAgICovCgogICAgLyoqCiAgICAgKiBUaGUgIndpZHRoIiB2YWx1ZSBvZiB0aGUgcmVjdC4KICAgICAqCiAgICAgKiBAcmVhZG9ubHkKICAgICAqIEBtZW1iZXIge051bWJlcn0gI3dpZHRoCiAgICAgKi8KCiAgICAvKioKICAgICAqIFRoZSAiaGVpZ2h0IiB2YWx1ZSBvZiB0aGUgcmVjdC4KICAgICAqCiAgICAgKiBAcmVhZG9ubHkKICAgICAqIEBtZW1iZXIge051bWJlcn0gI2hlaWdodAogICAgICovCgogIH0KICAvKioKICAgKiBSZXR1cm5zIGEgY2xvbmUgb2YgdGhlIHJlY3QuCiAgICoKICAgKiBAcmV0dXJucyB7bW9kdWxlOnV0aWxzL2RvbS9yZWN0flJlY3R9IEEgY2xvbmVkIHJlY3QuCiAgICovCgoKICBjbG9uZSgpIHsKICAgIHJldHVybiBuZXcgUmVjdCh0aGlzKTsKICB9CiAgLyoqCiAgICogTW92ZXMgdGhlIHJlY3Qgc28gdGhhdCBpdHMgdXBwZXLigJNsZWZ0IGNvcm5lciBsYW5kcyBpbiBkZXNpcmVkIGBbIHgsIHkgXWAgbG9jYXRpb24uCiAgICoKICAgKiBAcGFyYW0ge051bWJlcn0geCBEZXNpcmVkIGhvcml6b250YWwgbG9jYXRpb24uCiAgICogQHBhcmFtIHtOdW1iZXJ9IHkgRGVzaXJlZCB2ZXJ0aWNhbCBsb2NhdGlvbi4KICAgKiBAcmV0dXJucyB7bW9kdWxlOnV0aWxzL2RvbS9yZWN0flJlY3R9IEEgcmVjdCB3aGljaCBoYXMgYmVlbiBtb3ZlZC4KICAgKi8KCgogIG1vdmVUbyh4LCB5KSB7CiAgICB0aGlzLnRvcCA9IHk7CiAgICB0aGlzLnJpZ2h0ID0geCArIHRoaXMud2lkdGg7CiAgICB0aGlzLmJvdHRvbSA9IHkgKyB0aGlzLmhlaWdodDsKICAgIHRoaXMubGVmdCA9IHg7CiAgICByZXR1cm4gdGhpczsKICB9CiAgLyoqCiAgICogTW92ZXMgdGhlIHJlY3QgaW7igJNwbGFjZSBieSBhIGRlZGljYXRlZCBvZmZzZXQuCiAgICoKICAgKiBAcGFyYW0ge051bWJlcn0geCBBIGhvcml6b250YWwgb2Zmc2V0LgogICAqIEBwYXJhbSB7TnVtYmVyfSB5IEEgdmVydGljYWwgb2Zmc2V0CiAgICogQHJldHVybnMge21vZHVsZTp1dGlscy9kb20vcmVjdH5SZWN0fSBBIHJlY3Qgd2hpY2ggaGFzIGJlZW4gbW92ZWQuCiAgICovCgoKICBtb3ZlQnkoeCwgeSkgewogICAgdGhpcy50b3AgKz0geTsKICAgIHRoaXMucmlnaHQgKz0geDsKICAgIHRoaXMubGVmdCArPSB4OwogICAgdGhpcy5ib3R0b20gKz0geTsKICAgIHJldHVybiB0aGlzOwogIH0KICAvKioKICAgKiBSZXR1cm5zIGEgbmV3IHJlY3QgYSBhIHJlc3VsdCBvZiBpbnRlcnNlY3Rpb24gd2l0aCBhbm90aGVyIHJlY3QuCiAgICoKICAgKiBAcGFyYW0ge21vZHVsZTp1dGlscy9kb20vcmVjdH5SZWN0fSBhbm90aGVyUmVjdAogICAqIEByZXR1cm5zIHttb2R1bGU6dXRpbHMvZG9tL3JlY3R+UmVjdH0KICAgKi8KCgogIGdldEludGVyc2VjdGlvbihhbm90aGVyUmVjdCkgewogICAgY29uc3QgcmVjdCA9IHsKICAgICAgdG9wOiBNYXRoLm1heCh0aGlzLnRvcCwgYW5vdGhlclJlY3QudG9wKSwKICAgICAgcmlnaHQ6IE1hdGgubWluKHRoaXMucmlnaHQsIGFub3RoZXJSZWN0LnJpZ2h0KSwKICAgICAgYm90dG9tOiBNYXRoLm1pbih0aGlzLmJvdHRvbSwgYW5vdGhlclJlY3QuYm90dG9tKSwKICAgICAgbGVmdDogTWF0aC5tYXgodGhpcy5sZWZ0LCBhbm90aGVyUmVjdC5sZWZ0KQogICAgfTsKICAgIHJlY3Qud2lkdGggPSByZWN0LnJpZ2h0IC0gcmVjdC5sZWZ0OwogICAgcmVjdC5oZWlnaHQgPSByZWN0LmJvdHRvbSAtIHJlY3QudG9wOwoKICAgIGlmIChyZWN0LndpZHRoIDwgMCB8fCByZWN0LmhlaWdodCA8IDApIHsKICAgICAgcmV0dXJuIG51bGw7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gbmV3IFJlY3QocmVjdCk7CiAgICB9CiAgfQogIC8qKgogICAqIFJldHVybnMgdGhlIGFyZWEgb2YgaW50ZXJzZWN0aW9uIHdpdGggYW5vdGhlciByZWN0LgogICAqCiAgICogQHBhcmFtIHttb2R1bGU6dXRpbHMvZG9tL3JlY3R+UmVjdH0gYW5vdGhlclJlY3QgW2Rlc2NyaXB0aW9uXQogICAqIEByZXR1cm5zIHtOdW1iZXJ9IEFyZWEgb2YgaW50ZXJzZWN0aW9uLgogICAqLwoKCiAgZ2V0SW50ZXJzZWN0aW9uQXJlYShhbm90aGVyUmVjdCkgewogICAgY29uc3QgcmVjdCA9IHRoaXMuZ2V0SW50ZXJzZWN0aW9uKGFub3RoZXJSZWN0KTsKCiAgICBpZiAocmVjdCkgewogICAgICByZXR1cm4gcmVjdC5nZXRBcmVhKCk7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gMDsKICAgIH0KICB9CiAgLyoqCiAgICogUmV0dXJucyB0aGUgYXJlYSBvZiB0aGUgcmVjdC4KICAgKgogICAqIEByZXR1cm5zIHtOdW1iZXJ9CiAgICovCgoKICBnZXRBcmVhKCkgewogICAgcmV0dXJuIHRoaXMud2lkdGggKiB0aGlzLmhlaWdodDsKICB9CiAgLyoqCiAgICogUmV0dXJucyBhIG5ldyByZWN0LCBhIHBhcnQgb2YgdGhlIG9yaWdpbmFsIHJlY3QsIHdoaWNoIGlzIGFjdHVhbGx5IHZpc2libGUgdG8gdGhlIHVzZXIsCiAgICogZS5nLiBhbiBvcmlnaW5hbCByZWN0IGNyb3BwZWQgYnkgcGFyZW50IGVsZW1lbnQgcmVjdHMgd2hpY2ggaGF2ZSBgb3ZlcmZsb3dgIHNldCBpbiBDU1MKICAgKiBvdGhlciB0aGFuIGAidmlzaWJsZSJgLgogICAqCiAgICogSWYgdGhlcmUncyBubyBzdWNoIHZpc2libGUgcmVjdCwgd2hpY2ggaXMgd2hlbiB0aGUgcmVjdCBpcyBsaW1pdGVkIGJ5IG9uZSBvciBtYW55IG9mCiAgICogdGhlIGFuY2VzdG9ycywgYG51bGxgIGlzIHJldHVybmVkLgogICAqCiAgICogQHJldHVybnMge21vZHVsZTp1dGlscy9kb20vcmVjdH5SZWN0fG51bGx9IEEgdmlzaWJsZSByZWN0IGluc3RhbmNlIG9yIGBudWxsYCwgaWYgdGhlcmUncyBub25lLgogICAqLwoKCiAgZ2V0VmlzaWJsZSgpIHsKICAgIGNvbnN0IHNvdXJjZSA9IHRoaXMuX3NvdXJjZTsKICAgIGxldCB2aXNpYmxlUmVjdCA9IHRoaXMuY2xvbmUoKTsgLy8gVGhlcmUncyBubyBhbmNlc3RvciB0byBjcm9wIDxib2R5PiB3aXRoIHRoZSBvdmVyZmxvdy4KCiAgICBpZiAoIWlzQm9keShzb3VyY2UpKSB7CiAgICAgIGxldCBwYXJlbnQgPSBzb3VyY2UucGFyZW50Tm9kZSB8fCBzb3VyY2UuY29tbW9uQW5jZXN0b3JDb250YWluZXI7IC8vIENoZWNrIHRoZSBhbmNlc3RvcnMgYWxsIHRoZSB3YXkgdXAgdG8gdGhlIDxib2R5Pi4KCiAgICAgIHdoaWxlIChwYXJlbnQgJiYgIWlzQm9keShwYXJlbnQpKSB7CiAgICAgICAgY29uc3QgcGFyZW50UmVjdCA9IG5ldyBSZWN0KHBhcmVudCk7CiAgICAgICAgY29uc3QgaW50ZXJzZWN0aW9uUmVjdCA9IHZpc2libGVSZWN0LmdldEludGVyc2VjdGlvbihwYXJlbnRSZWN0KTsKCiAgICAgICAgaWYgKGludGVyc2VjdGlvblJlY3QpIHsKICAgICAgICAgIGlmIChpbnRlcnNlY3Rpb25SZWN0LmdldEFyZWEoKSA8IHZpc2libGVSZWN0LmdldEFyZWEoKSkgewogICAgICAgICAgICAvLyBSZWR1Y2UgdGhlIHZpc2libGUgcmVjdCB0byB0aGUgaW50ZXJzZWN0aW9uLgogICAgICAgICAgICB2aXNpYmxlUmVjdCA9IGludGVyc2VjdGlvblJlY3Q7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIC8vIFRoZXJlJ3Mgbm8gaW50ZXJzZWN0aW9uLCB0aGUgcmVjdCBpcyBjb21wbGV0ZWx5IGludmlzaWJsZS4KICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIH0KCiAgICAgICAgcGFyZW50ID0gcGFyZW50LnBhcmVudE5vZGU7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gdmlzaWJsZVJlY3Q7CiAgfQogIC8qKgogICAqIENoZWNrcyBpZiBhbGwgcHJvcGVydHkgdmFsdWVzICh7QGxpbmsgI3RvcH0sIHtAbGluayAjbGVmdH0sIHtAbGluayAjcmlnaHR9LAogICAqIHtAbGluayAjYm90dG9tfSwge0BsaW5rICN3aWR0aH0gYW5kIHtAbGluayAjaGVpZ2h0fSkgYXJlIHRoZSBlcXVhbCBpbiBib3RoIHJlY3QKICAgKiBpbnN0YW5jZXMuCiAgICoKICAgKiBAcGFyYW0ge21vZHVsZTp1dGlscy9kb20vcmVjdH5SZWN0fSByZWN0IEEgcmVjdCBpbnN0YW5jZSB0byBjb21wYXJlIHdpdGguCiAgICogQHJldHVybnMge0Jvb2xlYW59IGB0cnVlYCB3aGVuIFJlY3RzIGFyZSBlcXVhbC4gYGZhbHNlYCBvdGhlcndpc2UuCiAgICovCgoKICBpc0VxdWFsKGFub3RoZXJSZWN0KSB7CiAgICBmb3IgKGNvbnN0IHByb3Agb2YgcmVjdFByb3BlcnRpZXMpIHsKICAgICAgaWYgKHRoaXNbcHJvcF0gIT09IGFub3RoZXJSZWN0W3Byb3BdKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIHRydWU7CiAgfQogIC8qKgogICAqIENoZWNrcyB3aGV0aGVyIGEgcmVjdCBmdWxseSBjb250YWlucyBhbm90aGVyIHJlY3QgaW5zdGFuY2UuCiAgICoKICAgKiBAcGFyYW0ge21vZHVsZTp1dGlscy9kb20vcmVjdH5SZWN0fSBhbm90aGVyUmVjdAogICAqIEByZXR1cm5zIHtCb29sZWFufSBgdHJ1ZWAgaWYgY29udGFpbnMsIGBmYWxzZWAgb3RoZXJ3aXNlLgogICAqLwoKCiAgY29udGFpbnMoYW5vdGhlclJlY3QpIHsKICAgIGNvbnN0IGludGVyc2VjdFJlY3QgPSB0aGlzLmdldEludGVyc2VjdGlvbihhbm90aGVyUmVjdCk7CiAgICByZXR1cm4gISEoaW50ZXJzZWN0UmVjdCAmJiBpbnRlcnNlY3RSZWN0LmlzRXF1YWwoYW5vdGhlclJlY3QpKTsKICB9CiAgLyoqCiAgICogRXhjbHVkZXMgc2Nyb2xsYmFycyBhbmQgQ1NTIGJvcmRlcnMgZnJvbSB0aGUgcmVjdC4KICAgKgogICAqICogQm9yZGVycyBhcmUgcmVtb3ZlZCB3aGVuIHtAbGluayAjX3NvdXJjZX0gaXMgYW4gSFRNTCBlbGVtZW50LgogICAqICogU2Nyb2xsYmFycyBhcmUgZXhjbHVkZWQgZnJvbSBIVE1MIGVsZW1lbnRzIGFuZCB0aGUgYHdpbmRvd2AuCiAgICoKICAgKiBAcmV0dXJucyB7bW9kdWxlOnV0aWxzL2RvbS9yZWN0flJlY3R9IEEgcmVjdCB3aGljaCBoYXMgYmVlbiB1cGRhdGVkLgogICAqLwoKCiAgZXhjbHVkZVNjcm9sbGJhcnNBbmRCb3JkZXJzKCkgewogICAgY29uc3Qgc291cmNlID0gdGhpcy5fc291cmNlOwogICAgbGV0IHNjcm9sbEJhcldpZHRoLCBzY3JvbGxCYXJIZWlnaHQsIGRpcmVjdGlvbjsKCiAgICBpZiAoaXNXaW5kb3coc291cmNlKSkgewogICAgICBzY3JvbGxCYXJXaWR0aCA9IHNvdXJjZS5pbm5lcldpZHRoIC0gc291cmNlLmRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aDsKICAgICAgc2Nyb2xsQmFySGVpZ2h0ID0gc291cmNlLmlubmVySGVpZ2h0IC0gc291cmNlLmRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQ7CiAgICAgIGRpcmVjdGlvbiA9IHNvdXJjZS5nZXRDb21wdXRlZFN0eWxlKHNvdXJjZS5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpLmRpcmVjdGlvbjsKICAgIH0gZWxzZSB7CiAgICAgIGNvbnN0IGJvcmRlcldpZHRocyA9IGdldEJvcmRlcldpZHRocyh0aGlzLl9zb3VyY2UpOwogICAgICBzY3JvbGxCYXJXaWR0aCA9IHNvdXJjZS5vZmZzZXRXaWR0aCAtIHNvdXJjZS5jbGllbnRXaWR0aCAtIGJvcmRlcldpZHRocy5sZWZ0IC0gYm9yZGVyV2lkdGhzLnJpZ2h0OwogICAgICBzY3JvbGxCYXJIZWlnaHQgPSBzb3VyY2Uub2Zmc2V0SGVpZ2h0IC0gc291cmNlLmNsaWVudEhlaWdodCAtIGJvcmRlcldpZHRocy50b3AgLSBib3JkZXJXaWR0aHMuYm90dG9tOwogICAgICBkaXJlY3Rpb24gPSBzb3VyY2Uub3duZXJEb2N1bWVudC5kZWZhdWx0Vmlldy5nZXRDb21wdXRlZFN0eWxlKHNvdXJjZSkuZGlyZWN0aW9uOwogICAgICB0aGlzLmxlZnQgKz0gYm9yZGVyV2lkdGhzLmxlZnQ7CiAgICAgIHRoaXMudG9wICs9IGJvcmRlcldpZHRocy50b3A7CiAgICAgIHRoaXMucmlnaHQgLT0gYm9yZGVyV2lkdGhzLnJpZ2h0OwogICAgICB0aGlzLmJvdHRvbSAtPSBib3JkZXJXaWR0aHMuYm90dG9tOwogICAgICB0aGlzLndpZHRoID0gdGhpcy5yaWdodCAtIHRoaXMubGVmdDsKICAgICAgdGhpcy5oZWlnaHQgPSB0aGlzLmJvdHRvbSAtIHRoaXMudG9wOwogICAgfQoKICAgIHRoaXMud2lkdGggLT0gc2Nyb2xsQmFyV2lkdGg7CgogICAgaWYgKGRpcmVjdGlvbiA9PT0gJ2x0cicpIHsKICAgICAgdGhpcy5yaWdodCAtPSBzY3JvbGxCYXJXaWR0aDsKICAgIH0gZWxzZSB7CiAgICAgIHRoaXMubGVmdCArPSBzY3JvbGxCYXJXaWR0aDsKICAgIH0KCiAgICB0aGlzLmhlaWdodCAtPSBzY3JvbGxCYXJIZWlnaHQ7CiAgICB0aGlzLmJvdHRvbSAtPSBzY3JvbGxCYXJIZWlnaHQ7CiAgICByZXR1cm4gdGhpczsKICB9CiAgLyoqCiAgICogUmV0dXJucyBhbiBhcnJheSBvZiByZWN0cyBvZiB0aGUgZ2l2ZW4gbmF0aXZlIERPTSBSYW5nZS4KICAgKgogICAqIEBwYXJhbSB7UmFuZ2V9IHJhbmdlIEEgbmF0aXZlIERPTSByYW5nZS4KICAgKiBAcmV0dXJucyB7QXJyYXkuPG1vZHVsZTp1dGlscy9kb20vcmVjdH5SZWN0Pn0gRE9NIFJhbmdlIHJlY3RzLgogICAqLwoKCiAgc3RhdGljIGdldERvbVJhbmdlUmVjdHMocmFuZ2UpIHsKICAgIGNvbnN0IHJlY3RzID0gW107IC8vIFNhZmFyaSBkb2VzIG5vdCBpdGVyYXRlIG92ZXIgQ2xpZW50UmVjdExpc3QgdXNpbmcgZm9yLi4ub2YgbG9vcC4KCiAgICBjb25zdCBjbGllbnRSZWN0cyA9IEFycmF5LmZyb20ocmFuZ2UuZ2V0Q2xpZW50UmVjdHMoKSk7CgogICAgaWYgKGNsaWVudFJlY3RzLmxlbmd0aCkgewogICAgICBmb3IgKGNvbnN0IHJlY3Qgb2YgY2xpZW50UmVjdHMpIHsKICAgICAgICByZWN0cy5wdXNoKG5ldyBSZWN0KHJlY3QpKTsKICAgICAgfQogICAgfSAvLyBJZiB0aGVyZSdzIG5vIGNsaWVudCByZWN0cyBmb3IgdGhlIFJhbmdlLCB1c2UgcGFyZW50IGNvbnRhaW5lcidzIGJvdW5kaW5nIHJlY3QKICAgIC8vIGluc3RlYWQgYW5kIGFkanVzdCByZWN0J3Mgd2lkdGggdG8gc2ltdWxhdGUgdGhlIGFjdHVhbCBnZW9tZXRyeSBvZiBzdWNoIHJhbmdlLgogICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2NrZWRpdG9yL2NrZWRpdG9yNS11dGlscy9pc3N1ZXMvMTUzCiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vY2tlZGl0b3IvY2tlZGl0b3I1LXVpL2lzc3Vlcy8zMTcKICAgIGVsc2UgewogICAgICAgIGxldCBzdGFydENvbnRhaW5lciA9IHJhbmdlLnN0YXJ0Q29udGFpbmVyOwoKICAgICAgICBpZiAoaXNUZXh0KHN0YXJ0Q29udGFpbmVyKSkgewogICAgICAgICAgc3RhcnRDb250YWluZXIgPSBzdGFydENvbnRhaW5lci5wYXJlbnROb2RlOwogICAgICAgIH0KCiAgICAgICAgY29uc3QgcmVjdCA9IG5ldyBSZWN0KHN0YXJ0Q29udGFpbmVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpKTsKICAgICAgICByZWN0LnJpZ2h0ID0gcmVjdC5sZWZ0OwogICAgICAgIHJlY3Qud2lkdGggPSAwOwogICAgICAgIHJlY3RzLnB1c2gocmVjdCk7CiAgICAgIH0KCiAgICByZXR1cm4gcmVjdHM7CiAgfQoKfSAvLyBBY3F1aXJlcyBhbGwgdGhlIHJlY3QgcHJvcGVydGllcyBmcm9tIHRoZSBwYXNzZWQgc291cmNlLgovLwovLyBAcHJpdmF0ZQovLyBAcGFyYW0ge21vZHVsZTp1dGlscy9kb20vcmVjdH5SZWN0fSByZWN0Ci8vIEBwYXJhbSB7Q2xpZW50UmVjdHxtb2R1bGU6dXRpbHMvZG9tL3JlY3R+UmVjdHxPYmplY3R9IHNvdXJjZQoKZnVuY3Rpb24gY29weVJlY3RQcm9wZXJ0aWVzKHJlY3QsIHNvdXJjZSkgewogIGZvciAoY29uc3QgcCBvZiByZWN0UHJvcGVydGllcykgewogICAgcmVjdFtwXSA9IHNvdXJjZVtwXTsKICB9Cn0gLy8gQ2hlY2tzIGlmIHByb3ZpZGVkIG9iamVjdCBpcyBhIDxib2R5PiBIVE1MIGVsZW1lbnQuCi8vCi8vIEBwcml2YXRlCi8vIEBwYXJhbSB7SFRNTEVsZW1lbnR8UmFuZ2V9IGVsZW1lbnRPclJhbmdlCi8vIEByZXR1cm5zIHtCb29sZWFufQoKCmZ1bmN0aW9uIGlzQm9keShlbGVtZW50T3JSYW5nZSkgewogIGlmICghaXNFbGVtZW50KGVsZW1lbnRPclJhbmdlKSkgewogICAgcmV0dXJuIGZhbHNlOwogIH0KCiAgcmV0dXJuIGVsZW1lbnRPclJhbmdlID09PSBlbGVtZW50T3JSYW5nZS5vd25lckRvY3VtZW50LmJvZHk7Cn0="},{"version":3,"sources":["/Users/antonyching/Desktop/project/new-builder-demo/node_modules/@ckeditor/ckeditor5-utils/src/dom/rect.js"],"names":["isRange","isWindow","getBorderWidths","isText","isElement","rectProperties","Rect","constructor","source","isSourceRange","Object","defineProperty","value","_source","writable","enumerable","copyRectProperties","getDomRangeRects","getBoundingClientRect","innerWidth","innerHeight","top","right","bottom","left","width","height","clone","moveTo","x","y","moveBy","getIntersection","anotherRect","rect","Math","max","min","getIntersectionArea","getArea","getVisible","visibleRect","isBody","parent","parentNode","commonAncestorContainer","parentRect","intersectionRect","isEqual","prop","contains","intersectRect","excludeScrollbarsAndBorders","scrollBarWidth","scrollBarHeight","direction","document","documentElement","clientWidth","clientHeight","getComputedStyle","borderWidths","offsetWidth","offsetHeight","ownerDocument","defaultView","range","rects","clientRects","Array","from","getClientRects","length","push","startContainer","p","elementOrRange","body"],"mappings":"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","sourcesContent":["/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/dom/rect\n */\n\nimport isRange from './isrange';\nimport isWindow from './iswindow';\nimport getBorderWidths from './getborderwidths';\nimport isText from './istext';\nimport { isElement } from 'lodash-es';\n\nconst rectProperties = [ 'top', 'right', 'bottom', 'left', 'width', 'height' ];\n\n/**\n * A helper class representing a `ClientRect` object, e.g. value returned by\n * the native `object.getBoundingClientRect()` method. Provides a set of methods\n * to manipulate the rect and compare it against other rect instances.\n */\nexport default class Rect {\n\t/**\n\t * Creates an instance of rect.\n\t *\n\t *\t\t// Rect of an HTMLElement.\n\t *\t\tconst rectA = new Rect( document.body );\n\t *\n\t *\t\t// Rect of a DOM Range.\n\t *\t\tconst rectB = new Rect( document.getSelection().getRangeAt( 0 ) );\n\t *\n\t *\t\t// Rect of a window (web browser viewport).\n\t *\t\tconst rectC = new Rect( window );\n\t *\n\t *\t\t// Rect out of an object.\n\t *\t\tconst rectD = new Rect( { top: 0, right: 10, bottom: 10, left: 0, width: 10, height: 10 } );\n\t *\n\t *\t\t// Rect out of another Rect instance.\n\t *\t\tconst rectE = new Rect( rectD );\n\t *\n\t *\t\t// Rect out of a ClientRect.\n\t *\t\tconst rectF = new Rect( document.body.getClientRects().item( 0 ) );\n\t *\n\t * **Note**: By default a rect of an HTML element includes its CSS borders and scrollbars (if any)\n\t * ant the rect of a `window` includes scrollbars too. Use {@link #excludeScrollbarsAndBorders}\n\t * to get the inner part of the rect.\n\t *\n\t * @param {HTMLElement|Range|Window|ClientRect|module:utils/dom/rect~Rect|Object} source A source object to create the rect.\n\t */\n\tconstructor( source ) {\n\t\tconst isSourceRange = isRange( source );\n\n\t\t/**\n\t\t * The object this rect is for.\n\t\t *\n\t\t * @protected\n\t\t * @readonly\n\t\t * @member {HTMLElement|Range|ClientRect|module:utils/dom/rect~Rect|Object} #_source\n\t\t */\n\t\tObject.defineProperty( this, '_source', {\n\t\t\t// If the source is a Rect instance, copy it's #_source.\n\t\t\tvalue: source._source || source,\n\t\t\twritable: true,\n\t\t\tenumerable: false\n\t\t} );\n\n\t\tif ( isElement( source ) || isSourceRange ) {\n\t\t\t// The `Rect` class depends on `getBoundingClientRect` and `getClientRects` DOM methods. If the source\n\t\t\t// of a rect in an HTML element or a DOM range but it does not belong to any rendered DOM tree, these methods\n\t\t\t// will fail to obtain the geometry and the rect instance makes little sense to the features using it.\n\t\t\t// To get rid of this warning make sure the source passed to the constructor is a descendant of `window.document.body`.\n\t\t\t// @if CK_DEBUG // const sourceNode = isSourceRange ? source.startContainer : source;\n\t\t\t// @if CK_DEBUG // if ( !sourceNode.ownerDocument || !sourceNode.ownerDocument.body.contains( sourceNode ) ) {\n\t\t\t// @if CK_DEBUG // \tconsole.warn(\n\t\t\t// @if CK_DEBUG // \t\t'rect-source-not-in-dom: The source of this rect does not belong to any rendered DOM tree.',\n\t\t\t// @if CK_DEBUG // \t\t{ source } );\n\t\t\t// @if CK_DEBUG // }\n\n\t\t\tif ( isSourceRange ) {\n\t\t\t\tcopyRectProperties( this, Rect.getDomRangeRects( source )[ 0 ] );\n\t\t\t} else {\n\t\t\t\tcopyRectProperties( this, source.getBoundingClientRect() );\n\t\t\t}\n\t\t} else if ( isWindow( source ) ) {\n\t\t\tconst { innerWidth, innerHeight } = source;\n\n\t\t\tcopyRectProperties( this, {\n\t\t\t\ttop: 0,\n\t\t\t\tright: innerWidth,\n\t\t\t\tbottom: innerHeight,\n\t\t\t\tleft: 0,\n\t\t\t\twidth: innerWidth,\n\t\t\t\theight: innerHeight\n\t\t\t} );\n\t\t} else {\n\t\t\tcopyRectProperties( this, source );\n\t\t}\n\n\t\t/**\n\t\t * The \"top\" value of the rect.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Number} #top\n\t\t */\n\n\t\t/**\n\t\t * The \"right\" value of the rect.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Number} #right\n\t\t */\n\n\t\t/**\n\t\t * The \"bottom\" value of the rect.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Number} #bottom\n\t\t */\n\n\t\t/**\n\t\t * The \"left\" value of the rect.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Number} #left\n\t\t */\n\n\t\t/**\n\t\t * The \"width\" value of the rect.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Number} #width\n\t\t */\n\n\t\t/**\n\t\t * The \"height\" value of the rect.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Number} #height\n\t\t */\n\t}\n\n\t/**\n\t * Returns a clone of the rect.\n\t *\n\t * @returns {module:utils/dom/rect~Rect} A cloned rect.\n\t */\n\tclone() {\n\t\treturn new Rect( this );\n\t}\n\n\t/**\n\t * Moves the rect so that its upper–left corner lands in desired `[ x, y ]` location.\n\t *\n\t * @param {Number} x Desired horizontal location.\n\t * @param {Number} y Desired vertical location.\n\t * @returns {module:utils/dom/rect~Rect} A rect which has been moved.\n\t */\n\tmoveTo( x, y ) {\n\t\tthis.top = y;\n\t\tthis.right = x + this.width;\n\t\tthis.bottom = y + this.height;\n\t\tthis.left = x;\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Moves the rect in–place by a dedicated offset.\n\t *\n\t * @param {Number} x A horizontal offset.\n\t * @param {Number} y A vertical offset\n\t * @returns {module:utils/dom/rect~Rect} A rect which has been moved.\n\t */\n\tmoveBy( x, y ) {\n\t\tthis.top += y;\n\t\tthis.right += x;\n\t\tthis.left += x;\n\t\tthis.bottom += y;\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Returns a new rect a a result of intersection with another rect.\n\t *\n\t * @param {module:utils/dom/rect~Rect} anotherRect\n\t * @returns {module:utils/dom/rect~Rect}\n\t */\n\tgetIntersection( anotherRect ) {\n\t\tconst rect = {\n\t\t\ttop: Math.max( this.top, anotherRect.top ),\n\t\t\tright: Math.min( this.right, anotherRect.right ),\n\t\t\tbottom: Math.min( this.bottom, anotherRect.bottom ),\n\t\t\tleft: Math.max( this.left, anotherRect.left )\n\t\t};\n\n\t\trect.width = rect.right - rect.left;\n\t\trect.height = rect.bottom - rect.top;\n\n\t\tif ( rect.width < 0 || rect.height < 0 ) {\n\t\t\treturn null;\n\t\t} else {\n\t\t\treturn new Rect( rect );\n\t\t}\n\t}\n\n\t/**\n\t * Returns the area of intersection with another rect.\n\t *\n\t * @param {module:utils/dom/rect~Rect} anotherRect [description]\n\t * @returns {Number} Area of intersection.\n\t */\n\tgetIntersectionArea( anotherRect ) {\n\t\tconst rect = this.getIntersection( anotherRect );\n\n\t\tif ( rect ) {\n\t\t\treturn rect.getArea();\n\t\t} else {\n\t\t\treturn 0;\n\t\t}\n\t}\n\n\t/**\n\t * Returns the area of the rect.\n\t *\n\t * @returns {Number}\n\t */\n\tgetArea() {\n\t\treturn this.width * this.height;\n\t}\n\n\t/**\n\t * Returns a new rect, a part of the original rect, which is actually visible to the user,\n\t * e.g. an original rect cropped by parent element rects which have `overflow` set in CSS\n\t * other than `\"visible\"`.\n\t *\n\t * If there's no such visible rect, which is when the rect is limited by one or many of\n\t * the ancestors, `null` is returned.\n\t *\n\t * @returns {module:utils/dom/rect~Rect|null} A visible rect instance or `null`, if there's none.\n\t */\n\tgetVisible() {\n\t\tconst source = this._source;\n\t\tlet visibleRect = this.clone();\n\n\t\t// There's no ancestor to crop <body> with the overflow.\n\t\tif ( !isBody( source ) ) {\n\t\t\tlet parent = source.parentNode || source.commonAncestorContainer;\n\n\t\t\t// Check the ancestors all the way up to the <body>.\n\t\t\twhile ( parent && !isBody( parent ) ) {\n\t\t\t\tconst parentRect = new Rect( parent );\n\t\t\t\tconst intersectionRect = visibleRect.getIntersection( parentRect );\n\n\t\t\t\tif ( intersectionRect ) {\n\t\t\t\t\tif ( intersectionRect.getArea() < visibleRect.getArea() ) {\n\t\t\t\t\t\t// Reduce the visible rect to the intersection.\n\t\t\t\t\t\tvisibleRect = intersectionRect;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// There's no intersection, the rect is completely invisible.\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\tparent = parent.parentNode;\n\t\t\t}\n\t\t}\n\n\t\treturn visibleRect;\n\t}\n\n\t/**\n\t * Checks if all property values ({@link #top}, {@link #left}, {@link #right},\n\t * {@link #bottom}, {@link #width} and {@link #height}) are the equal in both rect\n\t * instances.\n\t *\n\t * @param {module:utils/dom/rect~Rect} rect A rect instance to compare with.\n\t * @returns {Boolean} `true` when Rects are equal. `false` otherwise.\n\t */\n\tisEqual( anotherRect ) {\n\t\tfor ( const prop of rectProperties ) {\n\t\t\tif ( this[ prop ] !== anotherRect[ prop ] ) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t}\n\n\t/**\n\t * Checks whether a rect fully contains another rect instance.\n\t *\n\t * @param {module:utils/dom/rect~Rect} anotherRect\n\t * @returns {Boolean} `true` if contains, `false` otherwise.\n\t */\n\tcontains( anotherRect ) {\n\t\tconst intersectRect = this.getIntersection( anotherRect );\n\n\t\treturn !!( intersectRect && intersectRect.isEqual( anotherRect ) );\n\t}\n\n\t/**\n\t * Excludes scrollbars and CSS borders from the rect.\n\t *\n\t * * Borders are removed when {@link #_source} is an HTML element.\n\t * * Scrollbars are excluded from HTML elements and the `window`.\n\t *\n\t * @returns {module:utils/dom/rect~Rect} A rect which has been updated.\n\t */\n\texcludeScrollbarsAndBorders() {\n\t\tconst source = this._source;\n\t\tlet scrollBarWidth, scrollBarHeight, direction;\n\n\t\tif ( isWindow( source ) ) {\n\t\t\tscrollBarWidth = source.innerWidth - source.document.documentElement.clientWidth;\n\t\t\tscrollBarHeight = source.innerHeight - source.document.documentElement.clientHeight;\n\t\t\tdirection = source.getComputedStyle( source.document.documentElement ).direction;\n\t\t} else {\n\t\t\tconst borderWidths = getBorderWidths( this._source );\n\n\t\t\tscrollBarWidth = source.offsetWidth - source.clientWidth - borderWidths.left - borderWidths.right;\n\t\t\tscrollBarHeight = source.offsetHeight - source.clientHeight - borderWidths.top - borderWidths.bottom;\n\t\t\tdirection = source.ownerDocument.defaultView.getComputedStyle( source ).direction;\n\n\t\t\tthis.left += borderWidths.left;\n\t\t\tthis.top += borderWidths.top;\n\t\t\tthis.right -= borderWidths.right;\n\t\t\tthis.bottom -= borderWidths.bottom;\n\t\t\tthis.width = this.right - this.left;\n\t\t\tthis.height = this.bottom - this.top;\n\t\t}\n\n\t\tthis.width -= scrollBarWidth;\n\n\t\tif ( direction === 'ltr' ) {\n\t\t\tthis.right -= scrollBarWidth;\n\t\t} else {\n\t\t\tthis.left += scrollBarWidth;\n\t\t}\n\n\t\tthis.height -= scrollBarHeight;\n\t\tthis.bottom -= scrollBarHeight;\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Returns an array of rects of the given native DOM Range.\n\t *\n\t * @param {Range} range A native DOM range.\n\t * @returns {Array.<module:utils/dom/rect~Rect>} DOM Range rects.\n\t */\n\tstatic getDomRangeRects( range ) {\n\t\tconst rects = [];\n\t\t// Safari does not iterate over ClientRectList using for...of loop.\n\t\tconst clientRects = Array.from( range.getClientRects() );\n\n\t\tif ( clientRects.length ) {\n\t\t\tfor ( const rect of clientRects ) {\n\t\t\t\trects.push( new Rect( rect ) );\n\t\t\t}\n\t\t}\n\t\t// If there's no client rects for the Range, use parent container's bounding rect\n\t\t// instead and adjust rect's width to simulate the actual geometry of such range.\n\t\t// https://github.com/ckeditor/ckeditor5-utils/issues/153\n\t\t// https://github.com/ckeditor/ckeditor5-ui/issues/317\n\t\telse {\n\t\t\tlet startContainer = range.startContainer;\n\n\t\t\tif ( isText( startContainer ) ) {\n\t\t\t\tstartContainer = startContainer.parentNode;\n\t\t\t}\n\n\t\t\tconst rect = new Rect( startContainer.getBoundingClientRect() );\n\t\t\trect.right = rect.left;\n\t\t\trect.width = 0;\n\n\t\t\trects.push( rect );\n\t\t}\n\n\t\treturn rects;\n\t}\n}\n\n// Acquires all the rect properties from the passed source.\n//\n// @private\n// @param {module:utils/dom/rect~Rect} rect\n// @param {ClientRect|module:utils/dom/rect~Rect|Object} source\nfunction copyRectProperties( rect, source ) {\n\tfor ( const p of rectProperties ) {\n\t\trect[ p ] = source[ p ];\n\t}\n}\n\n// Checks if provided object is a <body> HTML element.\n//\n// @private\n// @param {HTMLElement|Range} elementOrRange\n// @returns {Boolean}\nfunction isBody( elementOrRange ) {\n\tif ( !isElement( elementOrRange ) ) {\n\t\treturn false;\n\t}\n\n\treturn elementOrRange === elementOrRange.ownerDocument.body;\n}\n"]}]}