{"remainingRequest":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/babel-loader/lib/index.js!/Users/antonyching/Desktop/project/new-builder-demo/node_modules/@ckeditor/ckeditor5-link/src/linkediting.js","dependencies":[{"path":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/@ckeditor/ckeditor5-link/src/linkediting.js","mtime":499162500000},{"path":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/@ckeditor/ckeditor5-dev-webpack-plugin/lib/translatesourceloader.js","mtime":499162500000},{"path":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:LyoqCiAqIEBsaWNlbnNlIENvcHlyaWdodCAoYykgMjAwMy0yMDE5LCBDS1NvdXJjZSAtIEZyZWRlcmljbyBLbmFiYmVuLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKiBGb3IgbGljZW5zaW5nLCBzZWUgTElDRU5TRS5tZCBvciBodHRwczovL2NrZWRpdG9yLmNvbS9sZWdhbC9ja2VkaXRvci1vc3MtbGljZW5zZQogKi8KCi8qKgogKiBAbW9kdWxlIGxpbmsvbGlua2VkaXRpbmcKICovCmltcG9ydCBQbHVnaW4gZnJvbSAnQGNrZWRpdG9yL2NrZWRpdG9yNS1jb3JlL3NyYy9wbHVnaW4nOwppbXBvcnQgTGlua0NvbW1hbmQgZnJvbSAnLi9saW5rY29tbWFuZCc7CmltcG9ydCBVbmxpbmtDb21tYW5kIGZyb20gJy4vdW5saW5rY29tbWFuZCc7CmltcG9ydCB7IGNyZWF0ZUxpbmtFbGVtZW50LCBlbnN1cmVTYWZlVXJsLCBnZXRMb2NhbGl6ZWREZWNvcmF0b3JzLCBub3JtYWxpemVEZWNvcmF0b3JzIH0gZnJvbSAnLi91dGlscyc7CmltcG9ydCBBdXRvbWF0aWNEZWNvcmF0b3JzIGZyb20gJy4vdXRpbHMvYXV0b21hdGljZGVjb3JhdG9ycyc7CmltcG9ydCBNYW51YWxEZWNvcmF0b3IgZnJvbSAnLi91dGlscy9tYW51YWxkZWNvcmF0b3InOwppbXBvcnQgYmluZFR3b1N0ZXBDYXJldFRvQXR0cmlidXRlIGZyb20gJ0Bja2VkaXRvci9ja2VkaXRvcjUtZW5naW5lL3NyYy91dGlscy9iaW5kdHdvc3RlcGNhcmV0dG9hdHRyaWJ1dGUnOwppbXBvcnQgZmluZExpbmtSYW5nZSBmcm9tICcuL2ZpbmRsaW5rcmFuZ2UnOwppbXBvcnQgJy4uL3RoZW1lL2xpbmsuY3NzJzsKY29uc3QgSElHSExJR0hUX0NMQVNTID0gJ2NrLWxpbmtfc2VsZWN0ZWQnOwpjb25zdCBERUNPUkFUT1JfQVVUT01BVElDID0gJ2F1dG9tYXRpYyc7CmNvbnN0IERFQ09SQVRPUl9NQU5VQUwgPSAnbWFudWFsJzsKY29uc3QgRVhURVJOQUxfTElOS1NfUkVHRVhQID0gL14oaHR0cHM/Oik/XC9cLy87Ci8qKgogKiBUaGUgbGluayBlbmdpbmUgZmVhdHVyZS4KICoKICogSXQgaW50cm9kdWNlcyB0aGUgYGxpbmtIcmVmPSJ1cmwiYCBhdHRyaWJ1dGUgaW4gdGhlIG1vZGVsIHdoaWNoIHJlbmRlcnMgdG8gdGhlIHZpZXcgYXMgYSBgPGEgaHJlZj0idXJsIj5gIGVsZW1lbnQKICogYXMgd2VsbCBhcyBgJ2xpbmsnYCBhbmQgYCd1bmxpbmsnYCBjb21tYW5kcy4KICoKICogQGV4dGVuZHMgbW9kdWxlOmNvcmUvcGx1Z2luflBsdWdpbgogKi8KCmV4cG9ydCBkZWZhdWx0IGNsYXNzIExpbmtFZGl0aW5nIGV4dGVuZHMgUGx1Z2luIHsKICAvKioKICAgKiBAaW5oZXJpdERvYwogICAqLwogIHN0YXRpYyBnZXQgcGx1Z2luTmFtZSgpIHsKICAgIHJldHVybiAnTGlua0VkaXRpbmcnOwogIH0KICAvKioKICAgKiBAaW5oZXJpdERvYwogICAqLwoKCiAgY29uc3RydWN0b3IoZWRpdG9yKSB7CiAgICBzdXBlcihlZGl0b3IpOwogICAgZWRpdG9yLmNvbmZpZy5kZWZpbmUoJ2xpbmsnLCB7CiAgICAgIGFkZFRhcmdldFRvRXh0ZXJuYWxMaW5rczogZmFsc2UKICAgIH0pOwogIH0KICAvKioKICAgKiBAaW5oZXJpdERvYwogICAqLwoKCiAgaW5pdCgpIHsKICAgIGNvbnN0IGVkaXRvciA9IHRoaXMuZWRpdG9yOwogICAgY29uc3QgbG9jYWxlID0gZWRpdG9yLmxvY2FsZTsgLy8gQWxsb3cgbGluayBhdHRyaWJ1dGUgb24gYWxsIGlubGluZSBub2Rlcy4KCiAgICBlZGl0b3IubW9kZWwuc2NoZW1hLmV4dGVuZCgnJHRleHQnLCB7CiAgICAgIGFsbG93QXR0cmlidXRlczogJ2xpbmtIcmVmJwogICAgfSk7CiAgICBlZGl0b3IuY29udmVyc2lvbi5mb3IoJ2RhdGFEb3duY2FzdCcpLmF0dHJpYnV0ZVRvRWxlbWVudCh7CiAgICAgIG1vZGVsOiAnbGlua0hyZWYnLAogICAgICB2aWV3OiBjcmVhdGVMaW5rRWxlbWVudAogICAgfSk7CiAgICBlZGl0b3IuY29udmVyc2lvbi5mb3IoJ2VkaXRpbmdEb3duY2FzdCcpLmF0dHJpYnV0ZVRvRWxlbWVudCh7CiAgICAgIG1vZGVsOiAnbGlua0hyZWYnLAogICAgICB2aWV3OiAoaHJlZiwgd3JpdGVyKSA9PiB7CiAgICAgICAgcmV0dXJuIGNyZWF0ZUxpbmtFbGVtZW50KGVuc3VyZVNhZmVVcmwoaHJlZiksIHdyaXRlcik7CiAgICAgIH0KICAgIH0pOwogICAgZWRpdG9yLmNvbnZlcnNpb24uZm9yKCd1cGNhc3QnKS5lbGVtZW50VG9BdHRyaWJ1dGUoewogICAgICB2aWV3OiB7CiAgICAgICAgbmFtZTogJ2EnLAogICAgICAgIGF0dHJpYnV0ZXM6IHsKICAgICAgICAgIGhyZWY6IHRydWUKICAgICAgICB9CiAgICAgIH0sCiAgICAgIG1vZGVsOiB7CiAgICAgICAga2V5OiAnbGlua0hyZWYnLAogICAgICAgIHZhbHVlOiB2aWV3RWxlbWVudCA9PiB2aWV3RWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2hyZWYnKQogICAgICB9CiAgICB9KTsgLy8gQ3JlYXRlIGxpbmtpbmcgY29tbWFuZHMuCgogICAgZWRpdG9yLmNvbW1hbmRzLmFkZCgnbGluaycsIG5ldyBMaW5rQ29tbWFuZChlZGl0b3IpKTsKICAgIGVkaXRvci5jb21tYW5kcy5hZGQoJ3VubGluaycsIG5ldyBVbmxpbmtDb21tYW5kKGVkaXRvcikpOwogICAgY29uc3QgbGlua0RlY29yYXRvcnMgPSBnZXRMb2NhbGl6ZWREZWNvcmF0b3JzKGVkaXRvci50LCBub3JtYWxpemVEZWNvcmF0b3JzKGVkaXRvci5jb25maWcuZ2V0KCdsaW5rLmRlY29yYXRvcnMnKSkpOwoKICAgIHRoaXMuX2VuYWJsZUF1dG9tYXRpY0RlY29yYXRvcnMobGlua0RlY29yYXRvcnMuZmlsdGVyKGl0ZW0gPT4gaXRlbS5tb2RlID09PSBERUNPUkFUT1JfQVVUT01BVElDKSk7CgogICAgdGhpcy5fZW5hYmxlTWFudWFsRGVjb3JhdG9ycyhsaW5rRGVjb3JhdG9ycy5maWx0ZXIoaXRlbSA9PiBpdGVtLm1vZGUgPT09IERFQ09SQVRPUl9NQU5VQUwpKTsgLy8gRW5hYmxlIHR3by1zdGVwIGNhcmV0IG1vdmVtZW50IGZvciBgbGlua0hyZWZgIGF0dHJpYnV0ZS4KCgogICAgYmluZFR3b1N0ZXBDYXJldFRvQXR0cmlidXRlKHsKICAgICAgdmlldzogZWRpdG9yLmVkaXRpbmcudmlldywKICAgICAgbW9kZWw6IGVkaXRvci5tb2RlbCwKICAgICAgZW1pdHRlcjogdGhpcywKICAgICAgYXR0cmlidXRlOiAnbGlua0hyZWYnLAogICAgICBsb2NhbGUKICAgIH0pOyAvLyBTZXR1cCBoaWdobGlnaHQgb3ZlciBzZWxlY3RlZCBsaW5rLgoKICAgIHRoaXMuX3NldHVwTGlua0hpZ2hsaWdodCgpOwogIH0KICAvKioKICAgKiBQcm9jZXNzZXMgYW4gYXJyYXkgb2YgY29uZmlndXJlZCB7QGxpbmsgbW9kdWxlOmxpbmsvbGlua35MaW5rRGVjb3JhdG9yQXV0b21hdGljRGVmaW5pdGlvbiBhdXRvbWF0aWMgZGVjb3JhdG9yc30KICAgKiBhbmQgcmVnaXN0ZXJzIGEge0BsaW5rIG1vZHVsZTplbmdpbmUvY29udmVyc2lvbi9kb3duY2FzdGRpc3BhdGNoZXJ+RG93bmNhc3REaXNwYXRjaGVyIGRvd25jYXN0IGRpc3BhdGNoZXJ9CiAgICogZm9yIGVhY2ggb25lIG9mIHRoZW0uIERvd25jYXN0IGRpc3BhdGNoZXJzIGFyZSBvYnRhaW5lZCB1c2luZyB0aGUKICAgKiB7QGxpbmsgbW9kdWxlOmxpbmsvdXRpbHN+QXV0b21hdGljRGVjb3JhdG9ycyNnZXREaXNwYXRjaGVyfSBtZXRob2QuCiAgICoKICAgKiAqKk5vdGUqKjogVGhpcyBtZXRob2QgYWxzbyBhY3RpdmF0ZXMgdGhlIGF1dG9tYXRpYyBleHRlcm5hbCBsaW5rIGRlY29yYXRvciBpZiBlbmFibGVkIHdpdGgKICAgKiB7QGxpbmsgbW9kdWxlOmxpbmsvbGlua35MaW5rQ29uZmlnI2FkZFRhcmdldFRvRXh0ZXJuYWxMaW5rcyBgY29uZmlnLmxpbmsuYWRkVGFyZ2V0VG9FeHRlcm5hbExpbmtzYH0uCiAgICoKICAgKiBAcHJpdmF0ZQogICAqIEBwYXJhbSB7QXJyYXkuPG1vZHVsZTpsaW5rL2xpbmt+TGlua0RlY29yYXRvckF1dG9tYXRpY0RlZmluaXRpb24+fSBhdXRvbWF0aWNEZWNvcmF0b3JEZWZpbml0aW9ucwogICAqLwoKCiAgX2VuYWJsZUF1dG9tYXRpY0RlY29yYXRvcnMoYXV0b21hdGljRGVjb3JhdG9yRGVmaW5pdGlvbnMpIHsKICAgIGNvbnN0IGVkaXRvciA9IHRoaXMuZWRpdG9yOwogICAgY29uc3QgYXV0b21hdGljRGVjb3JhdG9ycyA9IG5ldyBBdXRvbWF0aWNEZWNvcmF0b3JzKCk7IC8vIEFkZHMgYSBkZWZhdWx0IGRlY29yYXRvciBmb3IgZXh0ZXJuYWwgbGlua3MuCgogICAgaWYgKGVkaXRvci5jb25maWcuZ2V0KCdsaW5rLmFkZFRhcmdldFRvRXh0ZXJuYWxMaW5rcycpKSB7CiAgICAgIGF1dG9tYXRpY0RlY29yYXRvcnMuYWRkKHsKICAgICAgICBpZDogJ2xpbmtJc0V4dGVybmFsJywKICAgICAgICBtb2RlOiBERUNPUkFUT1JfQVVUT01BVElDLAogICAgICAgIGNhbGxiYWNrOiB1cmwgPT4gRVhURVJOQUxfTElOS1NfUkVHRVhQLnRlc3QodXJsKSwKICAgICAgICBhdHRyaWJ1dGVzOiB7CiAgICAgICAgICB0YXJnZXQ6ICdfYmxhbmsnLAogICAgICAgICAgcmVsOiAnbm9vcGVuZXIgbm9yZWZlcnJlcicKICAgICAgICB9CiAgICAgIH0pOwogICAgfQoKICAgIGF1dG9tYXRpY0RlY29yYXRvcnMuYWRkKGF1dG9tYXRpY0RlY29yYXRvckRlZmluaXRpb25zKTsKCiAgICBpZiAoYXV0b21hdGljRGVjb3JhdG9ycy5sZW5ndGgpIHsKICAgICAgZWRpdG9yLmNvbnZlcnNpb24uZm9yKCdkb3duY2FzdCcpLmFkZChhdXRvbWF0aWNEZWNvcmF0b3JzLmdldERpc3BhdGNoZXIoKSk7CiAgICB9CiAgfQogIC8qKgogICAqIFByb2Nlc3NlcyBhbiBhcnJheSBvZiBjb25maWd1cmVkIHtAbGluayBtb2R1bGU6bGluay9saW5rfkxpbmtEZWNvcmF0b3JNYW51YWxEZWZpbml0aW9uIG1hbnVhbCBkZWNvcmF0b3JzfSwKICAgKiB0cmFuc2Zvcm1zIHRoZW0gaW50byB7QGxpbmsgbW9kdWxlOmxpbmsvdXRpbHN+TWFudWFsRGVjb3JhdG9yfSBpbnN0YW5jZXMgYW5kIHN0b3JlcyB0aGVtIGluIHRoZQogICAqIHtAbGluayBtb2R1bGU6bGluay9saW5rY29tbWFuZH5MaW5rQ29tbWFuZCNtYW51YWxEZWNvcmF0b3JzfSBjb2xsZWN0aW9uIChhIG1vZGVsIGZvciBtYW51YWwgZGVjb3JhdG9ycyBzdGF0ZSkuCiAgICoKICAgKiBBbHNvIHJlZ2lzdGVycyBhbiB7QGxpbmsgbW9kdWxlOmVuZ2luZS9jb252ZXJzaW9uL2Rvd25jYXN0aGVscGVyc35Eb3duY2FzdEhlbHBlcnMjYXR0cmlidXRlVG9FbGVtZW50IGF0dHJpYnV0ZS10by1lbGVtZW50fQogICAqIGNvbnZlcnRlciBmb3IgZWFjaCBtYW51YWwgZGVjb3JhdG9yIGFuZCBleHRlbmRzIHRoZSB7QGxpbmsgbW9kdWxlOmVuZ2luZS9tb2RlbC9zY2hlbWF+U2NoZW1hIG1vZGVsJ3Mgc2NoZW1hfQogICAqIHdpdGggYWRlcXVhdGUgbW9kZWwgYXR0cmlidXRlcy4KICAgKgogICAqIEBwcml2YXRlCiAgICogQHBhcmFtIHtBcnJheS48bW9kdWxlOmxpbmsvbGlua35MaW5rRGVjb3JhdG9yTWFudWFsRGVmaW5pdGlvbj59IG1hbnVhbERlY29yYXRvckRlZmluaXRpb25zCiAgICovCgoKICBfZW5hYmxlTWFudWFsRGVjb3JhdG9ycyhtYW51YWxEZWNvcmF0b3JEZWZpbml0aW9ucykgewogICAgaWYgKCFtYW51YWxEZWNvcmF0b3JEZWZpbml0aW9ucy5sZW5ndGgpIHsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIGNvbnN0IGVkaXRvciA9IHRoaXMuZWRpdG9yOwogICAgY29uc3QgY29tbWFuZCA9IGVkaXRvci5jb21tYW5kcy5nZXQoJ2xpbmsnKTsKICAgIGNvbnN0IG1hbnVhbERlY29yYXRvcnMgPSBjb21tYW5kLm1hbnVhbERlY29yYXRvcnM7CiAgICBtYW51YWxEZWNvcmF0b3JEZWZpbml0aW9ucy5mb3JFYWNoKGRlY29yYXRvciA9PiB7CiAgICAgIGVkaXRvci5tb2RlbC5zY2hlbWEuZXh0ZW5kKCckdGV4dCcsIHsKICAgICAgICBhbGxvd0F0dHJpYnV0ZXM6IGRlY29yYXRvci5pZAogICAgICB9KTsgLy8gS2VlcHMgcmVmZXJlbmNlIHRvIG1hbnVhbCBkZWNvcmF0b3IgdG8gZGVjb2RlIGl0cyBuYW1lIHRvIGF0dHJpYnV0ZXMgZHVyaW5nIGRvd25jYXN0LgoKICAgICAgbWFudWFsRGVjb3JhdG9ycy5hZGQobmV3IE1hbnVhbERlY29yYXRvcihkZWNvcmF0b3IpKTsKICAgICAgZWRpdG9yLmNvbnZlcnNpb24uZm9yKCdkb3duY2FzdCcpLmF0dHJpYnV0ZVRvRWxlbWVudCh7CiAgICAgICAgbW9kZWw6IGRlY29yYXRvci5pZCwKICAgICAgICB2aWV3OiAobWFudWFsRGVjb3JhdG9yTmFtZSwgd3JpdGVyKSA9PiB7CiAgICAgICAgICBpZiAobWFudWFsRGVjb3JhdG9yTmFtZSkgewogICAgICAgICAgICBjb25zdCBhdHRyaWJ1dGVzID0gbWFudWFsRGVjb3JhdG9ycy5nZXQoZGVjb3JhdG9yLmlkKS5hdHRyaWJ1dGVzOwogICAgICAgICAgICBjb25zdCBlbGVtZW50ID0gd3JpdGVyLmNyZWF0ZUF0dHJpYnV0ZUVsZW1lbnQoJ2EnLCBhdHRyaWJ1dGVzLCB7CiAgICAgICAgICAgICAgcHJpb3JpdHk6IDUKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHdyaXRlci5zZXRDdXN0b21Qcm9wZXJ0eSgnbGluaycsIHRydWUsIGVsZW1lbnQpOwogICAgICAgICAgICByZXR1cm4gZWxlbWVudDsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOwogICAgICBlZGl0b3IuY29udmVyc2lvbi5mb3IoJ3VwY2FzdCcpLmVsZW1lbnRUb0F0dHJpYnV0ZSh7CiAgICAgICAgdmlldzogewogICAgICAgICAgbmFtZTogJ2EnLAogICAgICAgICAgYXR0cmlidXRlczogbWFudWFsRGVjb3JhdG9ycy5nZXQoZGVjb3JhdG9yLmlkKS5hdHRyaWJ1dGVzCiAgICAgICAgfSwKICAgICAgICBtb2RlbDogewogICAgICAgICAga2V5OiBkZWNvcmF0b3IuaWQKICAgICAgICB9CiAgICAgIH0pOwogICAgfSk7CiAgfQogIC8qKgogICAqIEFkZHMgYSB2aXN1YWwgaGlnaGxpZ2h0IHN0eWxlIHRvIGEgbGluayBpbiB3aGljaCB0aGUgc2VsZWN0aW9uIGlzIGFuY2hvcmVkLgogICAqIFRvZ2V0aGVyIHdpdGggdHdvLXN0ZXAgY2FyZXQgbW92ZW1lbnQsIHRoZXkgaW5kaWNhdGUgdGhhdCB0aGUgdXNlciBpcyB0eXBpbmcgaW5zaWRlIHRoZSBsaW5rLgogICAqCiAgICogSGlnaGxpZ2h0IGlzIHR1cm5lZCBvbiBieSBhZGRpbmcgdGhlIGAuY2stbGlua19zZWxlY3RlZGAgY2xhc3MgdG8gdGhlIGxpbmsgaW4gdGhlIHZpZXc6CiAgICoKICAgKiAqIFRoZSBjbGFzcyBpcyByZW1vdmVkIGJlZm9yZSB0aGUgY29udmVyc2lvbiBoYXMgc3RhcnRlZCwgYXMgY2FsbGJhY2tzIGFkZGVkIHdpdGggdGhlIGAnaGlnaGVzdCdgIHByaW9yaXR5CiAgICogdG8ge0BsaW5rIG1vZHVsZTplbmdpbmUvY29udmVyc2lvbi9kb3duY2FzdGRpc3BhdGNoZXJ+RG93bmNhc3REaXNwYXRjaGVyfSBldmVudHMuCiAgICogKiBUaGUgY2xhc3MgaXMgYWRkZWQgaW4gdGhlIHZpZXcgcG9zdCBmaXhlciwgYWZ0ZXIgb3RoZXIgY2hhbmdlcyBpbiB0aGUgbW9kZWwgdHJlZSB3ZXJlIGNvbnZlcnRlZCB0byB0aGUgdmlldy4KICAgKgogICAqIFRoaXMgd2F5LCBhZGRpbmcgYW5kIHJlbW92aW5nIHRoZSBoaWdobGlnaHQgZG9lcyBub3QgaW50ZXJmZXJlIHdpdGggY29udmVyc2lvbi4KICAgKgogICAqIEBwcml2YXRlCiAgICovCgoKICBfc2V0dXBMaW5rSGlnaGxpZ2h0KCkgewogICAgY29uc3QgZWRpdG9yID0gdGhpcy5lZGl0b3I7CiAgICBjb25zdCB2aWV3ID0gZWRpdG9yLmVkaXRpbmcudmlldzsKICAgIGNvbnN0IGhpZ2hsaWdodGVkTGlua3MgPSBuZXcgU2V0KCk7IC8vIEFkZGluZyB0aGUgY2xhc3MuCgogICAgdmlldy5kb2N1bWVudC5yZWdpc3RlclBvc3RGaXhlcih3cml0ZXIgPT4gewogICAgICBjb25zdCBzZWxlY3Rpb24gPSBlZGl0b3IubW9kZWwuZG9jdW1lbnQuc2VsZWN0aW9uOwogICAgICBsZXQgY2hhbmdlZCA9IGZhbHNlOwoKICAgICAgaWYgKHNlbGVjdGlvbi5oYXNBdHRyaWJ1dGUoJ2xpbmtIcmVmJykpIHsKICAgICAgICBjb25zdCBtb2RlbFJhbmdlID0gZmluZExpbmtSYW5nZShzZWxlY3Rpb24uZ2V0Rmlyc3RQb3NpdGlvbigpLCBzZWxlY3Rpb24uZ2V0QXR0cmlidXRlKCdsaW5rSHJlZicpLCBlZGl0b3IubW9kZWwpOwogICAgICAgIGNvbnN0IHZpZXdSYW5nZSA9IGVkaXRvci5lZGl0aW5nLm1hcHBlci50b1ZpZXdSYW5nZShtb2RlbFJhbmdlKTsgLy8gVGhlcmUgbWlnaHQgYmUgbXVsdGlwbGUgYGFgIGVsZW1lbnRzIGluIHRoZSBgdmlld1JhbmdlYCwgZm9yIGV4YW1wbGUsIHdoZW4gdGhlIGBhYCBlbGVtZW50IGlzCiAgICAgICAgLy8gYnJva2VuIGJ5IGEgVUlFbGVtZW50LgoKICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2Ygdmlld1JhbmdlLmdldEl0ZW1zKCkpIHsKICAgICAgICAgIGlmIChpdGVtLmlzKCdhJykgJiYgIWl0ZW0uaGFzQ2xhc3MoSElHSExJR0hUX0NMQVNTKSkgewogICAgICAgICAgICB3cml0ZXIuYWRkQ2xhc3MoSElHSExJR0hUX0NMQVNTLCBpdGVtKTsKICAgICAgICAgICAgaGlnaGxpZ2h0ZWRMaW5rcy5hZGQoaXRlbSk7CiAgICAgICAgICAgIGNoYW5nZWQgPSB0cnVlOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIGNoYW5nZWQ7CiAgICB9KTsgLy8gUmVtb3ZpbmcgdGhlIGNsYXNzLgoKICAgIGVkaXRvci5jb252ZXJzaW9uLmZvcignZWRpdGluZ0Rvd25jYXN0JykuYWRkKGRpc3BhdGNoZXIgPT4gewogICAgICAvLyBNYWtlIHN1cmUgdGhlIGhpZ2hsaWdodCBpcyByZW1vdmVkIG9uIGV2ZXJ5IHBvc3NpYmxlIGV2ZW50LCBiZWZvcmUgY29udmVyc2lvbiBpcyBzdGFydGVkLgogICAgICBkaXNwYXRjaGVyLm9uKCdpbnNlcnQnLCByZW1vdmVIaWdobGlnaHQsIHsKICAgICAgICBwcmlvcml0eTogJ2hpZ2hlc3QnCiAgICAgIH0pOwogICAgICBkaXNwYXRjaGVyLm9uKCdyZW1vdmUnLCByZW1vdmVIaWdobGlnaHQsIHsKICAgICAgICBwcmlvcml0eTogJ2hpZ2hlc3QnCiAgICAgIH0pOwogICAgICBkaXNwYXRjaGVyLm9uKCdhdHRyaWJ1dGUnLCByZW1vdmVIaWdobGlnaHQsIHsKICAgICAgICBwcmlvcml0eTogJ2hpZ2hlc3QnCiAgICAgIH0pOwogICAgICBkaXNwYXRjaGVyLm9uKCdzZWxlY3Rpb24nLCByZW1vdmVIaWdobGlnaHQsIHsKICAgICAgICBwcmlvcml0eTogJ2hpZ2hlc3QnCiAgICAgIH0pOwoKICAgICAgZnVuY3Rpb24gcmVtb3ZlSGlnaGxpZ2h0KCkgewogICAgICAgIHZpZXcuY2hhbmdlKHdyaXRlciA9PiB7CiAgICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgaGlnaGxpZ2h0ZWRMaW5rcy52YWx1ZXMoKSkgewogICAgICAgICAgICB3cml0ZXIucmVtb3ZlQ2xhc3MoSElHSExJR0hUX0NMQVNTLCBpdGVtKTsKICAgICAgICAgICAgaGlnaGxpZ2h0ZWRMaW5rcy5kZWxldGUoaXRlbSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0pOwogIH0KCn0="},{"version":3,"sources":["/Users/antonyching/Desktop/project/new-builder-demo/node_modules/@ckeditor/ckeditor5-link/src/linkediting.js"],"names":["Plugin","LinkCommand","UnlinkCommand","createLinkElement","ensureSafeUrl","getLocalizedDecorators","normalizeDecorators","AutomaticDecorators","ManualDecorator","bindTwoStepCaretToAttribute","findLinkRange","HIGHLIGHT_CLASS","DECORATOR_AUTOMATIC","DECORATOR_MANUAL","EXTERNAL_LINKS_REGEXP","LinkEditing","pluginName","constructor","editor","config","define","addTargetToExternalLinks","init","locale","model","schema","extend","allowAttributes","conversion","for","attributeToElement","view","href","writer","elementToAttribute","name","attributes","key","value","viewElement","getAttribute","commands","add","linkDecorators","t","get","_enableAutomaticDecorators","filter","item","mode","_enableManualDecorators","editing","emitter","attribute","_setupLinkHighlight","automaticDecoratorDefinitions","automaticDecorators","id","callback","url","test","target","rel","length","getDispatcher","manualDecoratorDefinitions","command","manualDecorators","forEach","decorator","manualDecoratorName","element","createAttributeElement","priority","setCustomProperty","highlightedLinks","Set","document","registerPostFixer","selection","changed","hasAttribute","modelRange","getFirstPosition","viewRange","mapper","toViewRange","getItems","is","hasClass","addClass","dispatcher","on","removeHighlight","change","values","removeClass","delete"],"mappings":"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","sourcesContent":["/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module link/linkediting\n */\n\nimport Plugin from '@ckeditor/ckeditor5-core/src/plugin';\nimport LinkCommand from './linkcommand';\nimport UnlinkCommand from './unlinkcommand';\nimport { createLinkElement, ensureSafeUrl, getLocalizedDecorators, normalizeDecorators } from './utils';\nimport AutomaticDecorators from './utils/automaticdecorators';\nimport ManualDecorator from './utils/manualdecorator';\nimport bindTwoStepCaretToAttribute from '@ckeditor/ckeditor5-engine/src/utils/bindtwostepcarettoattribute';\nimport findLinkRange from './findlinkrange';\nimport '../theme/link.css';\n\nconst HIGHLIGHT_CLASS = 'ck-link_selected';\nconst DECORATOR_AUTOMATIC = 'automatic';\nconst DECORATOR_MANUAL = 'manual';\nconst EXTERNAL_LINKS_REGEXP = /^(https?:)?\\/\\//;\n\n/**\n * The link engine feature.\n *\n * It introduces the `linkHref=\"url\"` attribute in the model which renders to the view as a `<a href=\"url\">` element\n * as well as `'link'` and `'unlink'` commands.\n *\n * @extends module:core/plugin~Plugin\n */\nexport default class LinkEditing extends Plugin {\n\t/**\n\t * @inheritDoc\n\t */\n\tstatic get pluginName() {\n\t\treturn 'LinkEditing';\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tconstructor( editor ) {\n\t\tsuper( editor );\n\n\t\teditor.config.define( 'link', {\n\t\t\taddTargetToExternalLinks: false\n\t\t} );\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tinit() {\n\t\tconst editor = this.editor;\n\t\tconst locale = editor.locale;\n\n\t\t// Allow link attribute on all inline nodes.\n\t\teditor.model.schema.extend( '$text', { allowAttributes: 'linkHref' } );\n\n\t\teditor.conversion.for( 'dataDowncast' )\n\t\t\t.attributeToElement( { model: 'linkHref', view: createLinkElement } );\n\n\t\teditor.conversion.for( 'editingDowncast' )\n\t\t\t.attributeToElement( { model: 'linkHref', view: ( href, writer ) => {\n\t\t\t\treturn createLinkElement( ensureSafeUrl( href ), writer );\n\t\t\t} } );\n\n\t\teditor.conversion.for( 'upcast' )\n\t\t\t.elementToAttribute( {\n\t\t\t\tview: {\n\t\t\t\t\tname: 'a',\n\t\t\t\t\tattributes: {\n\t\t\t\t\t\thref: true\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tmodel: {\n\t\t\t\t\tkey: 'linkHref',\n\t\t\t\t\tvalue: viewElement => viewElement.getAttribute( 'href' )\n\t\t\t\t}\n\t\t\t} );\n\n\t\t// Create linking commands.\n\t\teditor.commands.add( 'link', new LinkCommand( editor ) );\n\t\teditor.commands.add( 'unlink', new UnlinkCommand( editor ) );\n\n\t\tconst linkDecorators = getLocalizedDecorators( editor.t, normalizeDecorators( editor.config.get( 'link.decorators' ) ) );\n\n\t\tthis._enableAutomaticDecorators( linkDecorators.filter( item => item.mode === DECORATOR_AUTOMATIC ) );\n\t\tthis._enableManualDecorators( linkDecorators.filter( item => item.mode === DECORATOR_MANUAL ) );\n\n\t\t// Enable two-step caret movement for `linkHref` attribute.\n\t\tbindTwoStepCaretToAttribute( {\n\t\t\tview: editor.editing.view,\n\t\t\tmodel: editor.model,\n\t\t\temitter: this,\n\t\t\tattribute: 'linkHref',\n\t\t\tlocale\n\t\t} );\n\n\t\t// Setup highlight over selected link.\n\t\tthis._setupLinkHighlight();\n\t}\n\n\t/**\n\t * Processes an array of configured {@link module:link/link~LinkDecoratorAutomaticDefinition automatic decorators}\n\t * and registers a {@link module:engine/conversion/downcastdispatcher~DowncastDispatcher downcast dispatcher}\n\t * for each one of them. Downcast dispatchers are obtained using the\n\t * {@link module:link/utils~AutomaticDecorators#getDispatcher} method.\n\t *\n\t * **Note**: This method also activates the automatic external link decorator if enabled with\n\t * {@link module:link/link~LinkConfig#addTargetToExternalLinks `config.link.addTargetToExternalLinks`}.\n\t *\n\t * @private\n\t * @param {Array.<module:link/link~LinkDecoratorAutomaticDefinition>} automaticDecoratorDefinitions\n\t */\n\t_enableAutomaticDecorators( automaticDecoratorDefinitions ) {\n\t\tconst editor = this.editor;\n\t\tconst automaticDecorators = new AutomaticDecorators();\n\n\t\t// Adds a default decorator for external links.\n\t\tif ( editor.config.get( 'link.addTargetToExternalLinks' ) ) {\n\t\t\tautomaticDecorators.add( {\n\t\t\t\tid: 'linkIsExternal',\n\t\t\t\tmode: DECORATOR_AUTOMATIC,\n\t\t\t\tcallback: url => EXTERNAL_LINKS_REGEXP.test( url ),\n\t\t\t\tattributes: {\n\t\t\t\t\ttarget: '_blank',\n\t\t\t\t\trel: 'noopener noreferrer'\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\n\t\tautomaticDecorators.add( automaticDecoratorDefinitions );\n\n\t\tif ( automaticDecorators.length ) {\n\t\t\teditor.conversion.for( 'downcast' ).add( automaticDecorators.getDispatcher() );\n\t\t}\n\t}\n\n\t/**\n\t * Processes an array of configured {@link module:link/link~LinkDecoratorManualDefinition manual decorators},\n\t * transforms them into {@link module:link/utils~ManualDecorator} instances and stores them in the\n\t * {@link module:link/linkcommand~LinkCommand#manualDecorators} collection (a model for manual decorators state).\n\t *\n\t * Also registers an {@link module:engine/conversion/downcasthelpers~DowncastHelpers#attributeToElement attribute-to-element}\n\t * converter for each manual decorator and extends the {@link module:engine/model/schema~Schema model's schema}\n\t * with adequate model attributes.\n\t *\n\t * @private\n\t * @param {Array.<module:link/link~LinkDecoratorManualDefinition>} manualDecoratorDefinitions\n\t */\n\t_enableManualDecorators( manualDecoratorDefinitions ) {\n\t\tif ( !manualDecoratorDefinitions.length ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst editor = this.editor;\n\t\tconst command = editor.commands.get( 'link' );\n\t\tconst manualDecorators = command.manualDecorators;\n\n\t\tmanualDecoratorDefinitions.forEach( decorator => {\n\t\t\teditor.model.schema.extend( '$text', { allowAttributes: decorator.id } );\n\n\t\t\t// Keeps reference to manual decorator to decode its name to attributes during downcast.\n\t\t\tmanualDecorators.add( new ManualDecorator( decorator ) );\n\n\t\t\teditor.conversion.for( 'downcast' ).attributeToElement( {\n\t\t\t\tmodel: decorator.id,\n\t\t\t\tview: ( manualDecoratorName, writer ) => {\n\t\t\t\t\tif ( manualDecoratorName ) {\n\t\t\t\t\t\tconst attributes = manualDecorators.get( decorator.id ).attributes;\n\t\t\t\t\t\tconst element = writer.createAttributeElement( 'a', attributes, { priority: 5 } );\n\t\t\t\t\t\twriter.setCustomProperty( 'link', true, element );\n\n\t\t\t\t\t\treturn element;\n\t\t\t\t\t}\n\t\t\t\t} } );\n\n\t\t\teditor.conversion.for( 'upcast' ).elementToAttribute( {\n\t\t\t\tview: {\n\t\t\t\t\tname: 'a',\n\t\t\t\t\tattributes: manualDecorators.get( decorator.id ).attributes\n\t\t\t\t},\n\t\t\t\tmodel: {\n\t\t\t\t\tkey: decorator.id\n\t\t\t\t}\n\t\t\t} );\n\t\t} );\n\t}\n\n\t/**\n\t * Adds a visual highlight style to a link in which the selection is anchored.\n\t * Together with two-step caret movement, they indicate that the user is typing inside the link.\n\t *\n\t * Highlight is turned on by adding the `.ck-link_selected` class to the link in the view:\n\t *\n\t * * The class is removed before the conversion has started, as callbacks added with the `'highest'` priority\n\t * to {@link module:engine/conversion/downcastdispatcher~DowncastDispatcher} events.\n\t * * The class is added in the view post fixer, after other changes in the model tree were converted to the view.\n\t *\n\t * This way, adding and removing the highlight does not interfere with conversion.\n\t *\n\t * @private\n\t */\n\t_setupLinkHighlight() {\n\t\tconst editor = this.editor;\n\t\tconst view = editor.editing.view;\n\t\tconst highlightedLinks = new Set();\n\n\t\t// Adding the class.\n\t\tview.document.registerPostFixer( writer => {\n\t\t\tconst selection = editor.model.document.selection;\n\t\t\tlet changed = false;\n\n\t\t\tif ( selection.hasAttribute( 'linkHref' ) ) {\n\t\t\t\tconst modelRange = findLinkRange( selection.getFirstPosition(), selection.getAttribute( 'linkHref' ), editor.model );\n\t\t\t\tconst viewRange = editor.editing.mapper.toViewRange( modelRange );\n\n\t\t\t\t// There might be multiple `a` elements in the `viewRange`, for example, when the `a` element is\n\t\t\t\t// broken by a UIElement.\n\t\t\t\tfor ( const item of viewRange.getItems() ) {\n\t\t\t\t\tif ( item.is( 'a' ) && !item.hasClass( HIGHLIGHT_CLASS ) ) {\n\t\t\t\t\t\twriter.addClass( HIGHLIGHT_CLASS, item );\n\t\t\t\t\t\thighlightedLinks.add( item );\n\t\t\t\t\t\tchanged = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn changed;\n\t\t} );\n\n\t\t// Removing the class.\n\t\teditor.conversion.for( 'editingDowncast' ).add( dispatcher => {\n\t\t\t// Make sure the highlight is removed on every possible event, before conversion is started.\n\t\t\tdispatcher.on( 'insert', removeHighlight, { priority: 'highest' } );\n\t\t\tdispatcher.on( 'remove', removeHighlight, { priority: 'highest' } );\n\t\t\tdispatcher.on( 'attribute', removeHighlight, { priority: 'highest' } );\n\t\t\tdispatcher.on( 'selection', removeHighlight, { priority: 'highest' } );\n\n\t\t\tfunction removeHighlight() {\n\t\t\t\tview.change( writer => {\n\t\t\t\t\tfor ( const item of highlightedLinks.values() ) {\n\t\t\t\t\t\twriter.removeClass( HIGHLIGHT_CLASS, item );\n\t\t\t\t\t\thighlightedLinks.delete( item );\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t}\n\t\t} );\n\t}\n}\n"]}]}