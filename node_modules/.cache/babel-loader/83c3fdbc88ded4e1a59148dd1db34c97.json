{"remainingRequest":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/babel-loader/lib/index.js!/Users/antonyching/Desktop/project/new-builder-demo/node_modules/@ckeditor/ckeditor5-image/src/imageupload/imageuploadprogress.js","dependencies":[{"path":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/@ckeditor/ckeditor5-image/src/imageupload/imageuploadprogress.js","mtime":499162500000},{"path":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/@ckeditor/ckeditor5-dev-webpack-plugin/lib/translatesourceloader.js","mtime":499162500000},{"path":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:LyoqCiAqIEBsaWNlbnNlIENvcHlyaWdodCAoYykgMjAwMy0yMDE5LCBDS1NvdXJjZSAtIEZyZWRlcmljbyBLbmFiYmVuLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKiBGb3IgbGljZW5zaW5nLCBzZWUgTElDRU5TRS5tZCBvciBodHRwczovL2NrZWRpdG9yLmNvbS9sZWdhbC9ja2VkaXRvci1vc3MtbGljZW5zZQogKi8KCi8qKgogKiBAbW9kdWxlIGltYWdlL2ltYWdldXBsb2FkL2ltYWdldXBsb2FkcHJvZ3Jlc3MKICovCgovKiBnbG9iYWxzIHNldFRpbWVvdXQgKi8KaW1wb3J0IFBsdWdpbiBmcm9tICdAY2tlZGl0b3IvY2tlZGl0b3I1LWNvcmUvc3JjL3BsdWdpbic7CmltcG9ydCBGaWxlUmVwb3NpdG9yeSBmcm9tICdAY2tlZGl0b3IvY2tlZGl0b3I1LXVwbG9hZC9zcmMvZmlsZXJlcG9zaXRvcnknOwppbXBvcnQgdXBsb2FkaW5nUGxhY2Vob2xkZXIgZnJvbSAnLi4vLi4vdGhlbWUvaWNvbnMvaW1hZ2VfcGxhY2Vob2xkZXIuc3ZnJzsKaW1wb3J0IGVudiBmcm9tICdAY2tlZGl0b3IvY2tlZGl0b3I1LXV0aWxzL3NyYy9lbnYnOwppbXBvcnQgJy4uLy4uL3RoZW1lL2ltYWdldXBsb2FkcHJvZ3Jlc3MuY3NzJzsKaW1wb3J0ICcuLi8uLi90aGVtZS9pbWFnZXVwbG9hZGljb24uY3NzJzsKaW1wb3J0ICcuLi8uLi90aGVtZS9pbWFnZXVwbG9hZGxvYWRlci5jc3MnOwovKioKICogVGhlIGltYWdlIHVwbG9hZCBwcm9ncmVzcyBwbHVnaW4uCiAqIEl0IHNob3dzIGEgcGxhY2Vob2xkZXIgd2hlbiB0aGUgaW1hZ2UgaXMgcmVhZCBmcm9tIHRoZSBkaXNrIGFuZCBhIHByb2dyZXNzIGJhciB3aGlsZSB0aGUgaW1hZ2UgaXMgdXBsb2FkaW5nLgogKgogKiBAZXh0ZW5kcyBtb2R1bGU6Y29yZS9wbHVnaW5+UGx1Z2luCiAqLwoKZXhwb3J0IGRlZmF1bHQgY2xhc3MgSW1hZ2VVcGxvYWRQcm9ncmVzcyBleHRlbmRzIFBsdWdpbiB7CiAgLyoqCiAgICogQGluaGVyaXREb2MKICAgKi8KICBjb25zdHJ1Y3RvcihlZGl0b3IpIHsKICAgIHN1cGVyKGVkaXRvcik7CiAgICAvKioKICAgICAqIFRoZSBpbWFnZSBwbGFjZWhvbGRlciB0aGF0IGlzIGRpc3BsYXllZCBiZWZvcmUgcmVhbCBpbWFnZSBkYXRhIGNhbiBiZSBhY2Nlc3NlZC4KICAgICAqCiAgICAgKiBAcHJvdGVjdGVkCiAgICAgKiBAbWVtYmVyIHtTdHJpbmd9ICNwbGFjZWhvbGRlcgogICAgICovCgogICAgdGhpcy5wbGFjZWhvbGRlciA9ICdkYXRhOmltYWdlL3N2Zyt4bWw7dXRmOCwnICsgZW5jb2RlVVJJQ29tcG9uZW50KHVwbG9hZGluZ1BsYWNlaG9sZGVyKTsKICB9CiAgLyoqCiAgICogQGluaGVyaXREb2MKICAgKi8KCgogIGluaXQoKSB7CiAgICBjb25zdCBlZGl0b3IgPSB0aGlzLmVkaXRvcjsgLy8gVXBsb2FkIHN0YXR1cyBjaGFuZ2UgLSB1cGRhdGUgaW1hZ2UncyB2aWV3IGFjY29yZGluZyB0byB0aGF0IHN0YXR1cy4KCiAgICBlZGl0b3IuZWRpdGluZy5kb3duY2FzdERpc3BhdGNoZXIub24oJ2F0dHJpYnV0ZTp1cGxvYWRTdGF0dXM6aW1hZ2UnLCAoLi4uYXJncykgPT4gdGhpcy51cGxvYWRTdGF0dXNDaGFuZ2UoLi4uYXJncykpOwogIH0KICAvKioKICAgKiBUaGlzIG1ldGhvZCBpcyBjYWxsZWQgZWFjaCB0aW1lIHRoZSBpbWFnZSBgdXBsb2FkU3RhdHVzYCBhdHRyaWJ1dGUgaXMgY2hhbmdlZC4KICAgKgogICAqIEBwYXJhbSB7bW9kdWxlOnV0aWxzL2V2ZW50aW5mb35FdmVudEluZm99IGV2dCBBbiBvYmplY3QgY29udGFpbmluZyBpbmZvcm1hdGlvbiBhYm91dCB0aGUgZmlyZWQgZXZlbnQuCiAgICogQHBhcmFtIHtPYmplY3R9IGRhdGEgQWRkaXRpb25hbCBpbmZvcm1hdGlvbiBhYm91dCB0aGUgY2hhbmdlLgogICAqIEBwYXJhbSB7bW9kdWxlOmVuZ2luZS9jb252ZXJzaW9uL2Rvd25jYXN0ZGlzcGF0Y2hlcn5Eb3duY2FzdENvbnZlcnNpb25BcGl9IGNvbnZlcnNpb25BcGkKICAgKi8KCgogIHVwbG9hZFN0YXR1c0NoYW5nZShldnQsIGRhdGEsIGNvbnZlcnNpb25BcGkpIHsKICAgIGNvbnN0IGVkaXRvciA9IHRoaXMuZWRpdG9yOwogICAgY29uc3QgbW9kZWxJbWFnZSA9IGRhdGEuaXRlbTsKICAgIGNvbnN0IHVwbG9hZElkID0gbW9kZWxJbWFnZS5nZXRBdHRyaWJ1dGUoJ3VwbG9hZElkJyk7CgogICAgaWYgKCFjb252ZXJzaW9uQXBpLmNvbnN1bWFibGUuY29uc3VtZShkYXRhLml0ZW0sIGV2dC5uYW1lKSkgewogICAgICByZXR1cm47CiAgICB9CgogICAgY29uc3QgZmlsZVJlcG9zaXRvcnkgPSBlZGl0b3IucGx1Z2lucy5nZXQoRmlsZVJlcG9zaXRvcnkpOwogICAgY29uc3Qgc3RhdHVzID0gdXBsb2FkSWQgPyBkYXRhLmF0dHJpYnV0ZU5ld1ZhbHVlIDogbnVsbDsKICAgIGNvbnN0IHBsYWNlaG9sZGVyID0gdGhpcy5wbGFjZWhvbGRlcjsKICAgIGNvbnN0IHZpZXdGaWd1cmUgPSBlZGl0b3IuZWRpdGluZy5tYXBwZXIudG9WaWV3RWxlbWVudChtb2RlbEltYWdlKTsKICAgIGNvbnN0IHZpZXdXcml0ZXIgPSBjb252ZXJzaW9uQXBpLndyaXRlcjsKCiAgICBpZiAoc3RhdHVzID09ICdyZWFkaW5nJykgewogICAgICAvLyBTdGFydCAiYXBwZWFyaW5nIiBlZmZlY3QgYW5kIHNob3cgcGxhY2Vob2xkZXIgd2l0aCBpbmZpbml0ZSBwcm9ncmVzcyBiYXIgb24gdGhlIHRvcAogICAgICAvLyB3aGlsZSBpbWFnZSBpcyByZWFkIGZyb20gZGlzay4KICAgICAgX3N0YXJ0QXBwZWFyRWZmZWN0KHZpZXdGaWd1cmUsIHZpZXdXcml0ZXIpOwoKICAgICAgX3Nob3dQbGFjZWhvbGRlcihwbGFjZWhvbGRlciwgdmlld0ZpZ3VyZSwgdmlld1dyaXRlcik7CgogICAgICByZXR1cm47CiAgICB9IC8vIFNob3cgcHJvZ3Jlc3MgYmFyIG9uIHRoZSB0b3Agb2YgdGhlIGltYWdlIHdoZW4gaW1hZ2UgaXMgdXBsb2FkaW5nLgoKCiAgICBpZiAoc3RhdHVzID09ICd1cGxvYWRpbmcnKSB7CiAgICAgIGNvbnN0IGxvYWRlciA9IGZpbGVSZXBvc2l0b3J5LmxvYWRlcnMuZ2V0KHVwbG9hZElkKTsgLy8gU3RhcnQgYXBwZWFyIGVmZmVjdCBpZiBuZWVkZWQgLSBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2NrZWRpdG9yL2NrZWRpdG9yNS1pbWFnZS9pc3N1ZXMvMTkxLgoKICAgICAgX3N0YXJ0QXBwZWFyRWZmZWN0KHZpZXdGaWd1cmUsIHZpZXdXcml0ZXIpOwoKICAgICAgaWYgKCFsb2FkZXIpIHsKICAgICAgICAvLyBUaGVyZSBpcyBubyBsb2FkZXIgYXNzb2NpYXRlZCB3aXRoIHVwbG9hZElkIC0gdGhpcyBtZWFucyB0aGF0IGltYWdlIGNhbWUgZnJvbSBleHRlcm5hbCBjaGFuZ2VzLgogICAgICAgIC8vIEluIHN1Y2ggY2FzZXMgd2Ugc3RpbGwgd2FudCB0byBzaG93IHRoZSBwbGFjZWhvbGRlciB1bnRpbCBpbWFnZSBpcyBmdWxseSB1cGxvYWRlZC4KICAgICAgICAvLyBTaG93IHBsYWNlaG9sZGVyIGlmIG5lZWRlZCAtIHNlZSBodHRwczovL2dpdGh1Yi5jb20vY2tlZGl0b3IvY2tlZGl0b3I1LWltYWdlL2lzc3Vlcy8xOTEuCiAgICAgICAgX3Nob3dQbGFjZWhvbGRlcihwbGFjZWhvbGRlciwgdmlld0ZpZ3VyZSwgdmlld1dyaXRlcik7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gSGlkZSBwbGFjZWhvbGRlciBhbmQgaW5pdGlhbGl6ZSBwcm9ncmVzcyBiYXIgc2hvd2luZyB1cGxvYWQgcHJvZ3Jlc3MuCiAgICAgICAgX2hpZGVQbGFjZWhvbGRlcih2aWV3RmlndXJlLCB2aWV3V3JpdGVyKTsKCiAgICAgICAgX3Nob3dQcm9ncmVzc0Jhcih2aWV3RmlndXJlLCB2aWV3V3JpdGVyLCBsb2FkZXIsIGVkaXRvci5lZGl0aW5nLnZpZXcpOwoKICAgICAgICBfZGlzcGxheUxvY2FsSW1hZ2Uodmlld0ZpZ3VyZSwgdmlld1dyaXRlciwgbG9hZGVyKTsKICAgICAgfQoKICAgICAgcmV0dXJuOwogICAgfSAvLyBCZWNhdXNlIGluIEVkZ2UgdGhlcmUgaXMgbm8gd2F5IHRvIHNob3cgZmFuY3kgYW5pbWF0aW9uIG9mIGNvbXBsZXRlSWNvbiB3ZSBuZWVkIHRvIHNraXAgaXQuCgoKICAgIGlmIChzdGF0dXMgPT0gJ2NvbXBsZXRlJyAmJiBmaWxlUmVwb3NpdG9yeS5sb2FkZXJzLmdldCh1cGxvYWRJZCkgJiYgIWVudi5pc0VkZ2UpIHsKICAgICAgX3Nob3dDb21wbGV0ZUljb24odmlld0ZpZ3VyZSwgdmlld1dyaXRlciwgZWRpdG9yLmVkaXRpbmcudmlldyk7CiAgICB9IC8vIENsZWFuIHVwLgoKCiAgICBfaGlkZVByb2dyZXNzQmFyKHZpZXdGaWd1cmUsIHZpZXdXcml0ZXIpOwoKICAgIF9oaWRlUGxhY2Vob2xkZXIodmlld0ZpZ3VyZSwgdmlld1dyaXRlcik7CgogICAgX3N0b3BBcHBlYXJFZmZlY3Qodmlld0ZpZ3VyZSwgdmlld1dyaXRlcik7CiAgfQoKfSAvLyBBZGRzIGNrLWFwcGVhciBjbGFzcyB0byB0aGUgaW1hZ2UgZmlndXJlIGlmIG9uZSBpcyBub3QgYWxyZWFkeSBhcHBsaWVkLgovLwovLyBAcGFyYW0ge21vZHVsZTplbmdpbmUvdmlldy9jb250YWluZXJlbGVtZW50fkNvbnRhaW5lckVsZW1lbnR9IHZpZXdGaWd1cmUKLy8gQHBhcmFtIHttb2R1bGU6ZW5naW5lL3ZpZXcvZG93bmNhc3R3cml0ZXJ+RG93bmNhc3RXcml0ZXJ9IHdyaXRlcgoKZnVuY3Rpb24gX3N0YXJ0QXBwZWFyRWZmZWN0KHZpZXdGaWd1cmUsIHdyaXRlcikgewogIGlmICghdmlld0ZpZ3VyZS5oYXNDbGFzcygnY2stYXBwZWFyJykpIHsKICAgIHdyaXRlci5hZGRDbGFzcygnY2stYXBwZWFyJywgdmlld0ZpZ3VyZSk7CiAgfQp9IC8vIFJlbW92ZXMgY2stYXBwZWFyIGNsYXNzIHRvIHRoZSBpbWFnZSBmaWd1cmUgaWYgb25lIGlzIG5vdCBhbHJlYWR5IHJlbW92ZWQuCi8vCi8vIEBwYXJhbSB7bW9kdWxlOmVuZ2luZS92aWV3L2NvbnRhaW5lcmVsZW1lbnR+Q29udGFpbmVyRWxlbWVudH0gdmlld0ZpZ3VyZQovLyBAcGFyYW0ge21vZHVsZTplbmdpbmUvdmlldy9kb3duY2FzdHdyaXRlcn5Eb3duY2FzdFdyaXRlcn0gd3JpdGVyCgoKZnVuY3Rpb24gX3N0b3BBcHBlYXJFZmZlY3Qodmlld0ZpZ3VyZSwgd3JpdGVyKSB7CiAgd3JpdGVyLnJlbW92ZUNsYXNzKCdjay1hcHBlYXInLCB2aWV3RmlndXJlKTsKfSAvLyBTaG93cyBwbGFjZWhvbGRlciB0b2dldGhlciB3aXRoIGluZmluaXRlIHByb2dyZXNzIGJhciBvbiBnaXZlbiBpbWFnZSBmaWd1cmUuCi8vCi8vIEBwYXJhbSB7U3RyaW5nfSBEYXRhLXVyaSB3aXRoIGEgc3ZnIHBsYWNlaG9sZGVyLgovLyBAcGFyYW0ge21vZHVsZTplbmdpbmUvdmlldy9jb250YWluZXJlbGVtZW50fkNvbnRhaW5lckVsZW1lbnR9IHZpZXdGaWd1cmUKLy8gQHBhcmFtIHttb2R1bGU6ZW5naW5lL3ZpZXcvZG93bmNhc3R3cml0ZXJ+RG93bmNhc3RXcml0ZXJ9IHdyaXRlcgoKCmZ1bmN0aW9uIF9zaG93UGxhY2Vob2xkZXIocGxhY2Vob2xkZXIsIHZpZXdGaWd1cmUsIHdyaXRlcikgewogIGlmICghdmlld0ZpZ3VyZS5oYXNDbGFzcygnY2staW1hZ2UtdXBsb2FkLXBsYWNlaG9sZGVyJykpIHsKICAgIHdyaXRlci5hZGRDbGFzcygnY2staW1hZ2UtdXBsb2FkLXBsYWNlaG9sZGVyJywgdmlld0ZpZ3VyZSk7CiAgfQoKICBjb25zdCB2aWV3SW1nID0gdmlld0ZpZ3VyZS5nZXRDaGlsZCgwKTsKCiAgaWYgKHZpZXdJbWcuZ2V0QXR0cmlidXRlKCdzcmMnKSAhPT0gcGxhY2Vob2xkZXIpIHsKICAgIHdyaXRlci5zZXRBdHRyaWJ1dGUoJ3NyYycsIHBsYWNlaG9sZGVyLCB2aWV3SW1nKTsKICB9CgogIGlmICghX2dldFVJRWxlbWVudCh2aWV3RmlndXJlLCAncGxhY2Vob2xkZXInKSkgewogICAgd3JpdGVyLmluc2VydCh3cml0ZXIuY3JlYXRlUG9zaXRpb25BZnRlcih2aWV3SW1nKSwgX2NyZWF0ZVBsYWNlaG9sZGVyKHdyaXRlcikpOwogIH0KfSAvLyBSZW1vdmVzIHBsYWNlaG9sZGVyIHRvZ2V0aGVyIHdpdGggaW5maW5pdGUgcHJvZ3Jlc3MgYmFyIG9uIGdpdmVuIGltYWdlIGZpZ3VyZS4KLy8KLy8gQHBhcmFtIHttb2R1bGU6ZW5naW5lL3ZpZXcvY29udGFpbmVyZWxlbWVudH5Db250YWluZXJFbGVtZW50fSB2aWV3RmlndXJlCi8vIEBwYXJhbSB7bW9kdWxlOmVuZ2luZS92aWV3L2Rvd25jYXN0d3JpdGVyfkRvd25jYXN0V3JpdGVyfSB3cml0ZXIKCgpmdW5jdGlvbiBfaGlkZVBsYWNlaG9sZGVyKHZpZXdGaWd1cmUsIHdyaXRlcikgewogIGlmICh2aWV3RmlndXJlLmhhc0NsYXNzKCdjay1pbWFnZS11cGxvYWQtcGxhY2Vob2xkZXInKSkgewogICAgd3JpdGVyLnJlbW92ZUNsYXNzKCdjay1pbWFnZS11cGxvYWQtcGxhY2Vob2xkZXInLCB2aWV3RmlndXJlKTsKICB9CgogIF9yZW1vdmVVSUVsZW1lbnQodmlld0ZpZ3VyZSwgd3JpdGVyLCAncGxhY2Vob2xkZXInKTsKfSAvLyBTaG93cyBwcm9ncmVzcyBiYXIgZGlzcGxheWluZyB1cGxvYWQgcHJvZ3Jlc3MuCi8vIEF0dGFjaGVzIGl0IHRvIHRoZSBmaWxlIGxvYWRlciB0byB1cGRhdGUgd2hlbiB1cGxvYWQgcGVyY2VudGFjZSBpcyBjaGFuZ2VkLgovLwovLyBAcGFyYW0ge21vZHVsZTplbmdpbmUvdmlldy9jb250YWluZXJlbGVtZW50fkNvbnRhaW5lckVsZW1lbnR9IHZpZXdGaWd1cmUKLy8gQHBhcmFtIHttb2R1bGU6ZW5naW5lL3ZpZXcvZG93bmNhc3R3cml0ZXJ+RG93bmNhc3RXcml0ZXJ9IHdyaXRlcgovLyBAcGFyYW0ge21vZHVsZTp1cGxvYWQvZmlsZXJlcG9zaXRvcnl+RmlsZUxvYWRlcn0gbG9hZGVyCi8vIEBwYXJhbSB7bW9kdWxlOmVuZ2luZS92aWV3L3ZpZXd+Vmlld30gdmlldwoKCmZ1bmN0aW9uIF9zaG93UHJvZ3Jlc3NCYXIodmlld0ZpZ3VyZSwgd3JpdGVyLCBsb2FkZXIsIHZpZXcpIHsKICBjb25zdCBwcm9ncmVzc0JhciA9IF9jcmVhdGVQcm9ncmVzc0Jhcih3cml0ZXIpOwoKICB3cml0ZXIuaW5zZXJ0KHdyaXRlci5jcmVhdGVQb3NpdGlvbkF0KHZpZXdGaWd1cmUsICdlbmQnKSwgcHJvZ3Jlc3NCYXIpOyAvLyBVcGRhdGUgcHJvZ3Jlc3MgYmFyIHdpZHRoIHdoZW4gdXBsb2FkZWRQZXJjZW50IGlzIGNoYW5nZWQuCgogIGxvYWRlci5vbignY2hhbmdlOnVwbG9hZGVkUGVyY2VudCcsIChldnQsIG5hbWUsIHZhbHVlKSA9PiB7CiAgICB2aWV3LmNoYW5nZSh3cml0ZXIgPT4gewogICAgICB3cml0ZXIuc2V0U3R5bGUoJ3dpZHRoJywgdmFsdWUgKyAnJScsIHByb2dyZXNzQmFyKTsKICAgIH0pOwogIH0pOwp9IC8vIEhpZGVzIHVwbG9hZCBwcm9ncmVzcyBiYXIuCi8vCi8vIEBwYXJhbSB7bW9kdWxlOmVuZ2luZS92aWV3L2NvbnRhaW5lcmVsZW1lbnR+Q29udGFpbmVyRWxlbWVudH0gdmlld0ZpZ3VyZQovLyBAcGFyYW0ge21vZHVsZTplbmdpbmUvdmlldy9kb3duY2FzdHdyaXRlcn5Eb3duY2FzdFdyaXRlcn0gd3JpdGVyCgoKZnVuY3Rpb24gX2hpZGVQcm9ncmVzc0Jhcih2aWV3RmlndXJlLCB3cml0ZXIpIHsKICBfcmVtb3ZlVUlFbGVtZW50KHZpZXdGaWd1cmUsIHdyaXRlciwgJ3Byb2dyZXNzQmFyJyk7Cn0gLy8gU2hvd3MgY29tcGxldGUgaWNvbiBhbmQgaGlkZXMgYWZ0ZXIgYSBjZXJ0YWluIGFtb3VudCBvZiB0aW1lLgovLwovLyBAcGFyYW0ge21vZHVsZTplbmdpbmUvdmlldy9jb250YWluZXJlbGVtZW50fkNvbnRhaW5lckVsZW1lbnR9IHZpZXdGaWd1cmUKLy8gQHBhcmFtIHttb2R1bGU6ZW5naW5lL3ZpZXcvZG93bmNhc3R3cml0ZXJ+RG93bmNhc3RXcml0ZXJ9IHdyaXRlcgovLyBAcGFyYW0ge21vZHVsZTplbmdpbmUvdmlldy92aWV3flZpZXd9IHZpZXcKCgpmdW5jdGlvbiBfc2hvd0NvbXBsZXRlSWNvbih2aWV3RmlndXJlLCB3cml0ZXIsIHZpZXcpIHsKICBjb25zdCBjb21wbGV0ZUljb24gPSB3cml0ZXIuY3JlYXRlVUlFbGVtZW50KCdkaXYnLCB7CiAgICBjbGFzczogJ2NrLWltYWdlLXVwbG9hZC1jb21wbGV0ZS1pY29uJwogIH0pOwogIHdyaXRlci5pbnNlcnQod3JpdGVyLmNyZWF0ZVBvc2l0aW9uQXQodmlld0ZpZ3VyZSwgJ2VuZCcpLCBjb21wbGV0ZUljb24pOwogIHNldFRpbWVvdXQoKCkgPT4gewogICAgdmlldy5jaGFuZ2Uod3JpdGVyID0+IHdyaXRlci5yZW1vdmUod3JpdGVyLmNyZWF0ZVJhbmdlT24oY29tcGxldGVJY29uKSkpOwogIH0sIDMwMDApOwp9IC8vIENyZWF0ZSBwcm9ncmVzcyBiYXIgZWxlbWVudCB1c2luZyB7QGxpbmsgbW9kdWxlOmVuZ2luZS92aWV3L3VpZWxlbWVudH5VSUVsZW1lbnR9LgovLwovLyBAcHJpdmF0ZQovLyBAcGFyYW0ge21vZHVsZTplbmdpbmUvdmlldy9kb3duY2FzdHdyaXRlcn5Eb3duY2FzdFdyaXRlcn0gd3JpdGVyCi8vIEByZXR1cm5zIHttb2R1bGU6ZW5naW5lL3ZpZXcvdWllbGVtZW50flVJRWxlbWVudH0KCgpmdW5jdGlvbiBfY3JlYXRlUHJvZ3Jlc3NCYXIod3JpdGVyKSB7CiAgY29uc3QgcHJvZ3Jlc3NCYXIgPSB3cml0ZXIuY3JlYXRlVUlFbGVtZW50KCdkaXYnLCB7CiAgICBjbGFzczogJ2NrLXByb2dyZXNzLWJhcicKICB9KTsKICB3cml0ZXIuc2V0Q3VzdG9tUHJvcGVydHkoJ3Byb2dyZXNzQmFyJywgdHJ1ZSwgcHJvZ3Jlc3NCYXIpOwogIHJldHVybiBwcm9ncmVzc0JhcjsKfSAvLyBDcmVhdGUgcGxhY2Vob2xkZXIgZWxlbWVudCB1c2luZyB7QGxpbmsgbW9kdWxlOmVuZ2luZS92aWV3L3VpZWxlbWVudH5VSUVsZW1lbnR9LgovLwovLyBAcHJpdmF0ZQovLyBAcGFyYW0ge21vZHVsZTplbmdpbmUvdmlldy9kb3duY2FzdHdyaXRlcn5Eb3duY2FzdFdyaXRlcn0gd3JpdGVyCi8vIEByZXR1cm5zIHttb2R1bGU6ZW5naW5lL3ZpZXcvdWllbGVtZW50flVJRWxlbWVudH0KCgpmdW5jdGlvbiBfY3JlYXRlUGxhY2Vob2xkZXIod3JpdGVyKSB7CiAgY29uc3QgcGxhY2Vob2xkZXIgPSB3cml0ZXIuY3JlYXRlVUlFbGVtZW50KCdkaXYnLCB7CiAgICBjbGFzczogJ2NrLXVwbG9hZC1wbGFjZWhvbGRlci1sb2FkZXInCiAgfSk7CiAgd3JpdGVyLnNldEN1c3RvbVByb3BlcnR5KCdwbGFjZWhvbGRlcicsIHRydWUsIHBsYWNlaG9sZGVyKTsKICByZXR1cm4gcGxhY2Vob2xkZXI7Cn0gLy8gUmV0dXJucyB7QGxpbmsgbW9kdWxlOmVuZ2luZS92aWV3L3VpZWxlbWVudH5VSUVsZW1lbnR9IG9mIGdpdmVuIHVuaXF1ZSBwcm9wZXJ0eSBmcm9tIGltYWdlIGZpZ3VyZSBlbGVtZW50LgovLyBSZXR1cm5zIGB1bmRlZmluZWRgIGlmIGVsZW1lbnQgaXMgbm90IGZvdW5kLgovLwovLyBAcHJpdmF0ZQovLyBAcGFyYW0ge21vZHVsZTplbmdpbmUvdmlldy9lbGVtZW50fkVsZW1lbnR9IGltYWdlRmlndXJlCi8vIEBwYXJhbSB7U3RyaW5nfSB1bmlxdWVQcm9wZXJ0eQovLyBAcmV0dXJucyB7bW9kdWxlOmVuZ2luZS92aWV3L3VpZWxlbWVudH5VSUVsZW1lbnR8dW5kZWZpbmVkfQoKCmZ1bmN0aW9uIF9nZXRVSUVsZW1lbnQoaW1hZ2VGaWd1cmUsIHVuaXF1ZVByb3BlcnR5KSB7CiAgZm9yIChjb25zdCBjaGlsZCBvZiBpbWFnZUZpZ3VyZS5nZXRDaGlsZHJlbigpKSB7CiAgICBpZiAoY2hpbGQuZ2V0Q3VzdG9tUHJvcGVydHkodW5pcXVlUHJvcGVydHkpKSB7CiAgICAgIHJldHVybiBjaGlsZDsKICAgIH0KICB9Cn0gLy8gUmVtb3ZlcyB7QGxpbmsgbW9kdWxlOmVuZ2luZS92aWV3L3VpZWxlbWVudH5VSUVsZW1lbnR9IG9mIGdpdmVuIHVuaXF1ZSBwcm9wZXJ0eSBmcm9tIGltYWdlIGZpZ3VyZSBlbGVtZW50LgovLwovLyBAcHJpdmF0ZQovLyBAcGFyYW0ge21vZHVsZTplbmdpbmUvdmlldy9lbGVtZW50fkVsZW1lbnR9IGltYWdlRmlndXJlCi8vIEBwYXJhbSB7bW9kdWxlOmVuZ2luZS92aWV3L2Rvd25jYXN0d3JpdGVyfkRvd25jYXN0V3JpdGVyfSB3cml0ZXIKLy8gQHBhcmFtIHtTdHJpbmd9IHVuaXF1ZVByb3BlcnR5CgoKZnVuY3Rpb24gX3JlbW92ZVVJRWxlbWVudCh2aWV3RmlndXJlLCB3cml0ZXIsIHVuaXF1ZVByb3BlcnR5KSB7CiAgY29uc3QgZWxlbWVudCA9IF9nZXRVSUVsZW1lbnQodmlld0ZpZ3VyZSwgdW5pcXVlUHJvcGVydHkpOwoKICBpZiAoZWxlbWVudCkgewogICAgd3JpdGVyLnJlbW92ZSh3cml0ZXIuY3JlYXRlUmFuZ2VPbihlbGVtZW50KSk7CiAgfQp9IC8vIERpc3BsYXlzIGxvY2FsIGRhdGEgZnJvbSBmaWxlIGxvYWRlci4KLy8KLy8gQHBhcmFtIHttb2R1bGU6ZW5naW5lL3ZpZXcvZWxlbWVudH5FbGVtZW50fSBpbWFnZUZpZ3VyZQovLyBAcGFyYW0ge21vZHVsZTplbmdpbmUvdmlldy9kb3duY2FzdHdyaXRlcn5Eb3duY2FzdFdyaXRlcn0gd3JpdGVyCi8vIEBwYXJhbSB7bW9kdWxlOnVwbG9hZC9maWxlcmVwb3NpdG9yeX5GaWxlTG9hZGVyfSBsb2FkZXIKCgpmdW5jdGlvbiBfZGlzcGxheUxvY2FsSW1hZ2Uodmlld0ZpZ3VyZSwgd3JpdGVyLCBsb2FkZXIpIHsKICBpZiAobG9hZGVyLmRhdGEpIHsKICAgIGNvbnN0IHZpZXdJbWcgPSB2aWV3RmlndXJlLmdldENoaWxkKDApOwogICAgd3JpdGVyLnNldEF0dHJpYnV0ZSgnc3JjJywgbG9hZGVyLmRhdGEsIHZpZXdJbWcpOwogIH0KfQ=="},{"version":3,"sources":["/Users/antonyching/Desktop/project/new-builder-demo/node_modules/@ckeditor/ckeditor5-image/src/imageupload/imageuploadprogress.js"],"names":["Plugin","FileRepository","uploadingPlaceholder","env","ImageUploadProgress","constructor","editor","placeholder","encodeURIComponent","init","editing","downcastDispatcher","on","args","uploadStatusChange","evt","data","conversionApi","modelImage","item","uploadId","getAttribute","consumable","consume","name","fileRepository","plugins","get","status","attributeNewValue","viewFigure","mapper","toViewElement","viewWriter","writer","_startAppearEffect","_showPlaceholder","loader","loaders","_hidePlaceholder","_showProgressBar","view","_displayLocalImage","isEdge","_showCompleteIcon","_hideProgressBar","_stopAppearEffect","hasClass","addClass","removeClass","viewImg","getChild","setAttribute","_getUIElement","insert","createPositionAfter","_createPlaceholder","_removeUIElement","progressBar","_createProgressBar","createPositionAt","value","change","setStyle","completeIcon","createUIElement","class","setTimeout","remove","createRangeOn","setCustomProperty","imageFigure","uniqueProperty","child","getChildren","getCustomProperty","element"],"mappings":"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","sourcesContent":["/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module image/imageupload/imageuploadprogress\n */\n\n/* globals setTimeout */\n\nimport Plugin from '@ckeditor/ckeditor5-core/src/plugin';\nimport FileRepository from '@ckeditor/ckeditor5-upload/src/filerepository';\nimport uploadingPlaceholder from '../../theme/icons/image_placeholder.svg';\nimport env from '@ckeditor/ckeditor5-utils/src/env';\n\nimport '../../theme/imageuploadprogress.css';\nimport '../../theme/imageuploadicon.css';\nimport '../../theme/imageuploadloader.css';\n\n/**\n * The image upload progress plugin.\n * It shows a placeholder when the image is read from the disk and a progress bar while the image is uploading.\n *\n * @extends module:core/plugin~Plugin\n */\nexport default class ImageUploadProgress extends Plugin {\n\t/**\n\t * @inheritDoc\n\t */\n\tconstructor( editor ) {\n\t\tsuper( editor );\n\n\t\t/**\n\t\t * The image placeholder that is displayed before real image data can be accessed.\n\t\t *\n\t\t * @protected\n\t\t * @member {String} #placeholder\n\t\t */\n\t\tthis.placeholder = 'data:image/svg+xml;utf8,' + encodeURIComponent( uploadingPlaceholder );\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tinit() {\n\t\tconst editor = this.editor;\n\n\t\t// Upload status change - update image's view according to that status.\n\t\teditor.editing.downcastDispatcher.on( 'attribute:uploadStatus:image', ( ...args ) => this.uploadStatusChange( ...args ) );\n\t}\n\n\t/**\n\t * This method is called each time the image `uploadStatus` attribute is changed.\n\t *\n\t * @param {module:utils/eventinfo~EventInfo} evt An object containing information about the fired event.\n\t * @param {Object} data Additional information about the change.\n\t * @param {module:engine/conversion/downcastdispatcher~DowncastConversionApi} conversionApi\n\t */\n\tuploadStatusChange( evt, data, conversionApi ) {\n\t\tconst editor = this.editor;\n\t\tconst modelImage = data.item;\n\t\tconst uploadId = modelImage.getAttribute( 'uploadId' );\n\n\t\tif ( !conversionApi.consumable.consume( data.item, evt.name ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst fileRepository = editor.plugins.get( FileRepository );\n\t\tconst status = uploadId ? data.attributeNewValue : null;\n\t\tconst placeholder = this.placeholder;\n\t\tconst viewFigure = editor.editing.mapper.toViewElement( modelImage );\n\t\tconst viewWriter = conversionApi.writer;\n\n\t\tif ( status == 'reading' ) {\n\t\t\t// Start \"appearing\" effect and show placeholder with infinite progress bar on the top\n\t\t\t// while image is read from disk.\n\t\t\t_startAppearEffect( viewFigure, viewWriter );\n\t\t\t_showPlaceholder( placeholder, viewFigure, viewWriter );\n\n\t\t\treturn;\n\t\t}\n\n\t\t// Show progress bar on the top of the image when image is uploading.\n\t\tif ( status == 'uploading' ) {\n\t\t\tconst loader = fileRepository.loaders.get( uploadId );\n\n\t\t\t// Start appear effect if needed - see https://github.com/ckeditor/ckeditor5-image/issues/191.\n\t\t\t_startAppearEffect( viewFigure, viewWriter );\n\n\t\t\tif ( !loader ) {\n\t\t\t\t// There is no loader associated with uploadId - this means that image came from external changes.\n\t\t\t\t// In such cases we still want to show the placeholder until image is fully uploaded.\n\t\t\t\t// Show placeholder if needed - see https://github.com/ckeditor/ckeditor5-image/issues/191.\n\t\t\t\t_showPlaceholder( placeholder, viewFigure, viewWriter );\n\t\t\t} else {\n\t\t\t\t// Hide placeholder and initialize progress bar showing upload progress.\n\t\t\t\t_hidePlaceholder( viewFigure, viewWriter );\n\t\t\t\t_showProgressBar( viewFigure, viewWriter, loader, editor.editing.view );\n\t\t\t\t_displayLocalImage( viewFigure, viewWriter, loader );\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\t// Because in Edge there is no way to show fancy animation of completeIcon we need to skip it.\n\t\tif ( status == 'complete' && fileRepository.loaders.get( uploadId ) && !env.isEdge ) {\n\t\t\t_showCompleteIcon( viewFigure, viewWriter, editor.editing.view );\n\t\t}\n\n\t\t// Clean up.\n\t\t_hideProgressBar( viewFigure, viewWriter );\n\t\t_hidePlaceholder( viewFigure, viewWriter );\n\t\t_stopAppearEffect( viewFigure, viewWriter );\n\t}\n}\n\n// Adds ck-appear class to the image figure if one is not already applied.\n//\n// @param {module:engine/view/containerelement~ContainerElement} viewFigure\n// @param {module:engine/view/downcastwriter~DowncastWriter} writer\nfunction _startAppearEffect( viewFigure, writer ) {\n\tif ( !viewFigure.hasClass( 'ck-appear' ) ) {\n\t\twriter.addClass( 'ck-appear', viewFigure );\n\t}\n}\n\n// Removes ck-appear class to the image figure if one is not already removed.\n//\n// @param {module:engine/view/containerelement~ContainerElement} viewFigure\n// @param {module:engine/view/downcastwriter~DowncastWriter} writer\nfunction _stopAppearEffect( viewFigure, writer ) {\n\twriter.removeClass( 'ck-appear', viewFigure );\n}\n\n// Shows placeholder together with infinite progress bar on given image figure.\n//\n// @param {String} Data-uri with a svg placeholder.\n// @param {module:engine/view/containerelement~ContainerElement} viewFigure\n// @param {module:engine/view/downcastwriter~DowncastWriter} writer\nfunction _showPlaceholder( placeholder, viewFigure, writer ) {\n\tif ( !viewFigure.hasClass( 'ck-image-upload-placeholder' ) ) {\n\t\twriter.addClass( 'ck-image-upload-placeholder', viewFigure );\n\t}\n\n\tconst viewImg = viewFigure.getChild( 0 );\n\n\tif ( viewImg.getAttribute( 'src' ) !== placeholder ) {\n\t\twriter.setAttribute( 'src', placeholder, viewImg );\n\t}\n\n\tif ( !_getUIElement( viewFigure, 'placeholder' ) ) {\n\t\twriter.insert( writer.createPositionAfter( viewImg ), _createPlaceholder( writer ) );\n\t}\n}\n\n// Removes placeholder together with infinite progress bar on given image figure.\n//\n// @param {module:engine/view/containerelement~ContainerElement} viewFigure\n// @param {module:engine/view/downcastwriter~DowncastWriter} writer\nfunction _hidePlaceholder( viewFigure, writer ) {\n\tif ( viewFigure.hasClass( 'ck-image-upload-placeholder' ) ) {\n\t\twriter.removeClass( 'ck-image-upload-placeholder', viewFigure );\n\t}\n\n\t_removeUIElement( viewFigure, writer, 'placeholder' );\n}\n\n// Shows progress bar displaying upload progress.\n// Attaches it to the file loader to update when upload percentace is changed.\n//\n// @param {module:engine/view/containerelement~ContainerElement} viewFigure\n// @param {module:engine/view/downcastwriter~DowncastWriter} writer\n// @param {module:upload/filerepository~FileLoader} loader\n// @param {module:engine/view/view~View} view\nfunction _showProgressBar( viewFigure, writer, loader, view ) {\n\tconst progressBar = _createProgressBar( writer );\n\twriter.insert( writer.createPositionAt( viewFigure, 'end' ), progressBar );\n\n\t// Update progress bar width when uploadedPercent is changed.\n\tloader.on( 'change:uploadedPercent', ( evt, name, value ) => {\n\t\tview.change( writer => {\n\t\t\twriter.setStyle( 'width', value + '%', progressBar );\n\t\t} );\n\t} );\n}\n\n// Hides upload progress bar.\n//\n// @param {module:engine/view/containerelement~ContainerElement} viewFigure\n// @param {module:engine/view/downcastwriter~DowncastWriter} writer\nfunction _hideProgressBar( viewFigure, writer ) {\n\t_removeUIElement( viewFigure, writer, 'progressBar' );\n}\n\n// Shows complete icon and hides after a certain amount of time.\n//\n// @param {module:engine/view/containerelement~ContainerElement} viewFigure\n// @param {module:engine/view/downcastwriter~DowncastWriter} writer\n// @param {module:engine/view/view~View} view\nfunction _showCompleteIcon( viewFigure, writer, view ) {\n\tconst completeIcon = writer.createUIElement( 'div', { class: 'ck-image-upload-complete-icon' } );\n\n\twriter.insert( writer.createPositionAt( viewFigure, 'end' ), completeIcon );\n\n\tsetTimeout( () => {\n\t\tview.change( writer => writer.remove( writer.createRangeOn( completeIcon ) ) );\n\t}, 3000 );\n}\n\n// Create progress bar element using {@link module:engine/view/uielement~UIElement}.\n//\n// @private\n// @param {module:engine/view/downcastwriter~DowncastWriter} writer\n// @returns {module:engine/view/uielement~UIElement}\nfunction _createProgressBar( writer ) {\n\tconst progressBar = writer.createUIElement( 'div', { class: 'ck-progress-bar' } );\n\n\twriter.setCustomProperty( 'progressBar', true, progressBar );\n\n\treturn progressBar;\n}\n\n// Create placeholder element using {@link module:engine/view/uielement~UIElement}.\n//\n// @private\n// @param {module:engine/view/downcastwriter~DowncastWriter} writer\n// @returns {module:engine/view/uielement~UIElement}\nfunction _createPlaceholder( writer ) {\n\tconst placeholder = writer.createUIElement( 'div', { class: 'ck-upload-placeholder-loader' } );\n\n\twriter.setCustomProperty( 'placeholder', true, placeholder );\n\n\treturn placeholder;\n}\n\n// Returns {@link module:engine/view/uielement~UIElement} of given unique property from image figure element.\n// Returns `undefined` if element is not found.\n//\n// @private\n// @param {module:engine/view/element~Element} imageFigure\n// @param {String} uniqueProperty\n// @returns {module:engine/view/uielement~UIElement|undefined}\nfunction _getUIElement( imageFigure, uniqueProperty ) {\n\tfor ( const child of imageFigure.getChildren() ) {\n\t\tif ( child.getCustomProperty( uniqueProperty ) ) {\n\t\t\treturn child;\n\t\t}\n\t}\n}\n\n// Removes {@link module:engine/view/uielement~UIElement} of given unique property from image figure element.\n//\n// @private\n// @param {module:engine/view/element~Element} imageFigure\n// @param {module:engine/view/downcastwriter~DowncastWriter} writer\n// @param {String} uniqueProperty\nfunction _removeUIElement( viewFigure, writer, uniqueProperty ) {\n\tconst element = _getUIElement( viewFigure, uniqueProperty );\n\n\tif ( element ) {\n\t\twriter.remove( writer.createRangeOn( element ) );\n\t}\n}\n\n// Displays local data from file loader.\n//\n// @param {module:engine/view/element~Element} imageFigure\n// @param {module:engine/view/downcastwriter~DowncastWriter} writer\n// @param {module:upload/filerepository~FileLoader} loader\nfunction _displayLocalImage( viewFigure, writer, loader ) {\n\tif ( loader.data ) {\n\t\tconst viewImg = viewFigure.getChild( 0 );\n\n\t\twriter.setAttribute( 'src', loader.data, viewImg );\n\t}\n}\n"]}]}