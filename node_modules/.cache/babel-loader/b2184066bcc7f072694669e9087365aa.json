{"remainingRequest":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/babel-loader/lib/index.js!/Users/antonyching/Desktop/project/new-builder-demo/node_modules/@ckeditor/ckeditor5-ui/src/toolbar/toolbarview.js","dependencies":[{"path":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/@ckeditor/ckeditor5-ui/src/toolbar/toolbarview.js","mtime":499162500000},{"path":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/@ckeditor/ckeditor5-dev-webpack-plugin/lib/translatesourceloader.js","mtime":499162500000},{"path":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:LyoqCiAqIEBsaWNlbnNlIENvcHlyaWdodCAoYykgMjAwMy0yMDE5LCBDS1NvdXJjZSAtIEZyZWRlcmljbyBLbmFiYmVuLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKiBGb3IgbGljZW5zaW5nLCBzZWUgTElDRU5TRS5tZCBvciBodHRwczovL2NrZWRpdG9yLmNvbS9sZWdhbC9ja2VkaXRvci1vc3MtbGljZW5zZQogKi8KCi8qKgogKiBAbW9kdWxlIHVpL3Rvb2xiYXIvdG9vbGJhcnZpZXcKICovCgovKiBnbG9iYWxzIGNvbnNvbGUgKi8KaW1wb3J0IFZpZXcgZnJvbSAnLi4vdmlldyc7CmltcG9ydCBGb2N1c1RyYWNrZXIgZnJvbSAnQGNrZWRpdG9yL2NrZWRpdG9yNS11dGlscy9zcmMvZm9jdXN0cmFja2VyJzsKaW1wb3J0IEZvY3VzQ3ljbGVyIGZyb20gJy4uL2ZvY3VzY3ljbGVyJzsKaW1wb3J0IEtleXN0cm9rZUhhbmRsZXIgZnJvbSAnQGNrZWRpdG9yL2NrZWRpdG9yNS11dGlscy9zcmMva2V5c3Ryb2tlaGFuZGxlcic7CmltcG9ydCBUb29sYmFyU2VwYXJhdG9yVmlldyBmcm9tICcuL3Rvb2xiYXJzZXBhcmF0b3J2aWV3JzsKaW1wb3J0IGdldFJlc2l6ZU9ic2VydmVyIGZyb20gJ0Bja2VkaXRvci9ja2VkaXRvcjUtdXRpbHMvc3JjL2RvbS9nZXRyZXNpemVvYnNlcnZlcic7CmltcG9ydCBwcmV2ZW50RGVmYXVsdCBmcm9tICcuLi9iaW5kaW5ncy9wcmV2ZW50ZGVmYXVsdC5qcyc7CmltcG9ydCBSZWN0IGZyb20gJ0Bja2VkaXRvci9ja2VkaXRvcjUtdXRpbHMvc3JjL2RvbS9yZWN0JzsKaW1wb3J0IGdsb2JhbCBmcm9tICdAY2tlZGl0b3IvY2tlZGl0b3I1LXV0aWxzL3NyYy9kb20vZ2xvYmFsJzsKaW1wb3J0IHsgY3JlYXRlRHJvcGRvd24sIGFkZFRvb2xiYXJUb0Ryb3Bkb3duIH0gZnJvbSAnLi4vZHJvcGRvd24vdXRpbHMnOwppbXBvcnQgeyBhdHRhY2hMaW5rVG9Eb2N1bWVudGF0aW9uIH0gZnJvbSAnQGNrZWRpdG9yL2NrZWRpdG9yNS11dGlscy9zcmMvY2tlZGl0b3JlcnJvcic7CmltcG9ydCB2ZXJ0aWNhbERvdHNJY29uIGZyb20gJ0Bja2VkaXRvci9ja2VkaXRvcjUtY29yZS90aGVtZS9pY29ucy90aHJlZS12ZXJ0aWNhbC1kb3RzLnN2Zyc7CmltcG9ydCAnLi4vLi4vdGhlbWUvY29tcG9uZW50cy90b29sYmFyL3Rvb2xiYXIuY3NzJzsKLyoqCiAqIFRoZSB0b29sYmFyIHZpZXcgY2xhc3MuCiAqCiAqIEBleHRlbmRzIG1vZHVsZTp1aS92aWV3flZpZXcKICogQGltcGxlbWVudHMgbW9kdWxlOnVpL2Ryb3Bkb3duL2Ryb3Bkb3ducGFuZWxmb2N1c2FibGV+RHJvcGRvd25QYW5lbEZvY3VzYWJsZQogKi8KCmV4cG9ydCBkZWZhdWx0IGNsYXNzIFRvb2xiYXJWaWV3IGV4dGVuZHMgVmlldyB7CiAgLyoqCiAgICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiB0aGUge0BsaW5rIG1vZHVsZTp1aS90b29sYmFyL3Rvb2xiYXJ2aWV3flRvb2xiYXJWaWV3fSBjbGFzcy4KICAgKgogICAqIEFsc28gc2VlIHtAbGluayAjcmVuZGVyfS4KICAgKgogICAqIEBwYXJhbSB7bW9kdWxlOnV0aWxzL2xvY2FsZX5Mb2NhbGV9IGxvY2FsZSBUaGUgbG9jYWxpemF0aW9uIHNlcnZpY2VzIGluc3RhbmNlLgogICAqIEBwYXJhbSB7bW9kdWxlOnVpL3Rvb2xiYXIvdG9vbGJhcnZpZXd+VG9vbGJhck9wdGlvbnN9IFtvcHRpb25zXSBDb25maWd1cmF0aW9uIG9wdGlvbnMgb2YgdGhlIHRvb2xiYXIuCiAgICovCiAgY29uc3RydWN0b3IobG9jYWxlLCBvcHRpb25zKSB7CiAgICBzdXBlcihsb2NhbGUpOwogICAgY29uc3QgYmluZCA9IHRoaXMuYmluZFRlbXBsYXRlOwogICAgY29uc3QgdCA9IHRoaXMudDsKICAgIC8qKgogICAgICogQSByZWZlcmVuY2UgdG8gdGhlIG9wdGlvbnMgb2JqZWN0IHBhc3NlZCB0byB0aGUgY29uc3RydWN0b3IuCiAgICAgKgogICAgICogQHJlYWRvbmx5CiAgICAgKiBAbWVtYmVyIHttb2R1bGU6dWkvdG9vbGJhci90b29sYmFydmlld35Ub29sYmFyT3B0aW9uc30KICAgICAqLwoKICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnMgfHwge307CiAgICAvKioKICAgICAqIExhYmVsIHVzZWQgYnkgYXNzaXN0aXZlIHRlY2hub2xvZ2llcyB0byBkZXNjcmliZSB0aGlzIHRvb2xiYXIgZWxlbWVudC4KICAgICAqCiAgICAgKiBAZGVmYXVsdCAnRWRpdG9yIHRvb2xiYXInCiAgICAgKiBAbWVtYmVyIHtTdHJpbmd9ICNhcmlhTGFiZWwKICAgICAqLwoKICAgIHRoaXMuc2V0KCdhcmlhTGFiZWwnLCB0KCdFZGl0b3IgdG9vbGJhcicpKTsKICAgIC8qKgogICAgICogQSBjb2xsZWN0aW9uIG9mIHRvb2xiYXIgaXRlbXMgKGJ1dHRvbnMsIGRyb3Bkb3ducywgZXRjLikuCiAgICAgKgogICAgICogQHJlYWRvbmx5CiAgICAgKiBAbWVtYmVyIHttb2R1bGU6dWkvdmlld2NvbGxlY3Rpb25+Vmlld0NvbGxlY3Rpb259CiAgICAgKi8KCiAgICB0aGlzLml0ZW1zID0gdGhpcy5jcmVhdGVDb2xsZWN0aW9uKCk7CiAgICAvKioKICAgICAqIFRyYWNrcyBpbmZvcm1hdGlvbiBhYm91dCB0aGUgRE9NIGZvY3VzIGluIHRoZSB0b29sYmFyLgogICAgICoKICAgICAqIEByZWFkb25seQogICAgICogQG1lbWJlciB7bW9kdWxlOnV0aWxzL2ZvY3VzdHJhY2tlcn5Gb2N1c1RyYWNrZXJ9CiAgICAgKi8KCiAgICB0aGlzLmZvY3VzVHJhY2tlciA9IG5ldyBGb2N1c1RyYWNrZXIoKTsKICAgIC8qKgogICAgICogQW4gaW5zdGFuY2Ugb2YgdGhlIHtAbGluayBtb2R1bGU6dXRpbHMva2V5c3Ryb2tlaGFuZGxlcn5LZXlzdHJva2VIYW5kbGVyfQogICAgICogdG8gaGFuZGxlIGtleWJvYXJkIG5hdmlnYXRpb24gaW4gdGhlIHRvb2xiYXIuCiAgICAgKgogICAgICogQHJlYWRvbmx5CiAgICAgKiBAbWVtYmVyIHttb2R1bGU6dXRpbHMva2V5c3Ryb2tlaGFuZGxlcn5LZXlzdHJva2VIYW5kbGVyfQogICAgICovCgogICAgdGhpcy5rZXlzdHJva2VzID0gbmV3IEtleXN0cm9rZUhhbmRsZXIoKTsKICAgIC8qKgogICAgICogQW4gYWRkaXRpb25hbCBDU1MgY2xhc3MgYWRkZWQgdG8gdGhlIHtAbGluayAjZWxlbWVudH0uCiAgICAgKgogICAgICogQG9ic2VydmFibGUKICAgICAqIEBtZW1iZXIge1N0cmluZ30gI2NsYXNzCiAgICAgKi8KCiAgICB0aGlzLnNldCgnY2xhc3MnKTsKICAgIC8qKgogICAgICogQSAoY2hpbGQpIHZpZXcgY29udGFpbmluZyB7QGxpbmsgI2l0ZW1zIHRvb2xiYXIgaXRlbXN9LgogICAgICoKICAgICAqIEByZWFkb25seQogICAgICogQG1lbWJlciB7bW9kdWxlOnVpL3Rvb2xiYXIvdG9vbGJhcnZpZXd+SXRlbXNWaWV3fQogICAgICovCgogICAgdGhpcy5pdGVtc1ZpZXcgPSBuZXcgSXRlbXNWaWV3KGxvY2FsZSk7CiAgICAvKioKICAgICAqIEEgdG9w4oCTbGV2ZWwgY29sbGVjdGlvbiBhZ2dyZWdhdGluZyBidWlsZGluZyBibG9ja3Mgb2YgdGhlIHRvb2xiYXIuCiAgICAgKgogICAgICoJ4pSM4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAIFRvb2xiYXJWaWV3IOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUkAogICAgICoJfCDilIzilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIAgI2NoaWxkcmVuIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUkCB8CiAgICAgKgl8IHwgICDilIzilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIAgI2l0ZW1zVmlldyDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilJAgICB8IHwKICAgICAqCXwgfCAgIHwgWyBpdGVtMSBdIFsgaXRlbTIgXSAuLi4gWyBpdGVtTiBdIHwgICB8IHwKICAgICAqCXwgfCAgIOKUlOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgC3ilJggICB8IHwKICAgICAqCXwg4pSU4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSYIHwKICAgICAqCeKUlOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUmAogICAgICoKICAgICAqIEJ5IGRlZmF1bHQsIGl0IGNvbnRhaW5zIHRoZSB7QGxpbmsgI2l0ZW1zVmlld30gYnV0IGl0IGNhbiBiZSBleHRlbmRlZCB3aXRoIGFkZGl0aW9uYWwKICAgICAqIFVJIGVsZW1lbnRzIHdoZW4gbmVjZXNzYXJ5LgogICAgICoKICAgICAqIEByZWFkb25seQogICAgICogQG1lbWJlciB7bW9kdWxlOnVpL3ZpZXdjb2xsZWN0aW9uflZpZXdDb2xsZWN0aW9ufQogICAgICovCgogICAgdGhpcy5jaGlsZHJlbiA9IHRoaXMuY3JlYXRlQ29sbGVjdGlvbigpOwogICAgdGhpcy5jaGlsZHJlbi5hZGQodGhpcy5pdGVtc1ZpZXcpOwogICAgLyoqCiAgICAgKiBBIGNvbGxlY3Rpb24gb2Yge0BsaW5rICNpdGVtc30gdGhhdCB0YWtlIHBhcnQgaW4gdGhlIGZvY3VzIGN5Y2xpbmcKICAgICAqIChpLmUuIG5hdmlnYXRpb24gdXNpbmcgdGhlIGtleWJvYXJkKS4gVXN1YWxseSwgaXQgY29udGFpbnMgYSBzdWJzZXQgb2Yge0BsaW5rICNpdGVtc30gd2l0aAogICAgICogc29tZSBvcHRpb25hbCBVSSBlbGVtZW50cyB0aGF0IGFsc28gYmVsb25nIHRvIHRoZSB0b29sYmFyIGFuZCBzaG91bGQgYmUgZm9jdXNhYmxlCiAgICAgKiBieSB0aGUgdXNlci4KICAgICAqCiAgICAgKiBAcmVhZG9ubHkKICAgICAqIEBtZW1iZXIge21vZHVsZTp1aS92aWV3Y29sbGVjdGlvbn5WaWV3Q29sbGVjdGlvbn0KICAgICAqLwoKICAgIHRoaXMuZm9jdXNhYmxlcyA9IHRoaXMuY3JlYXRlQ29sbGVjdGlvbigpOwogICAgLyoqCiAgICAgKiBDb250cm9scyB0aGUgb3JpZW50YXRpb24gb2YgdG9vbGJhciBpdGVtcy4gT25seSBhdmFpbGFibGUgd2hlbgogICAgICoge0BsaW5rIG1vZHVsZTp1aS90b29sYmFyL3Rvb2xiYXJ2aWV3flRvb2xiYXJPcHRpb25zI3Nob3VsZEdyb3VwV2hlbkZ1bGwgZHluYW1pYyBpdGVtcyBncm91cGluZ30KICAgICAqIGlzICoqZGlzYWJsZWQqKi4KICAgICAqCiAgICAgKiBAb2JzZXJ2YWJsZQogICAgICogQG1lbWJlciB7Qm9vbGVhbn0gI2lzVmVydGljYWwKICAgICAqLwoKICAgIC8qKgogICAgICogSGVscHMgY3ljbGluZyBvdmVyIHtAbGluayAjZm9jdXNhYmxlcyBmb2N1c2FibGUgaXRlbXN9IGluIHRoZSB0b29sYmFyLgogICAgICoKICAgICAqIEByZWFkb25seQogICAgICogQHByb3RlY3RlZAogICAgICogQG1lbWJlciB7bW9kdWxlOnVpL2ZvY3VzY3ljbGVyfkZvY3VzQ3ljbGVyfQogICAgICovCgogICAgdGhpcy5fZm9jdXNDeWNsZXIgPSBuZXcgRm9jdXNDeWNsZXIoewogICAgICBmb2N1c2FibGVzOiB0aGlzLmZvY3VzYWJsZXMsCiAgICAgIGZvY3VzVHJhY2tlcjogdGhpcy5mb2N1c1RyYWNrZXIsCiAgICAgIGtleXN0cm9rZUhhbmRsZXI6IHRoaXMua2V5c3Ryb2tlcywKICAgICAgYWN0aW9uczogewogICAgICAgIC8vIE5hdmlnYXRlIHRvb2xiYXIgaXRlbXMgYmFja3dhcmRzIHVzaW5nIHRoZSBhcnJvd1tsZWZ0LHVwXSBrZXlzLgogICAgICAgIGZvY3VzUHJldmlvdXM6IFsnYXJyb3dsZWZ0JywgJ2Fycm93dXAnXSwKICAgICAgICAvLyBOYXZpZ2F0ZSB0b29sYmFyIGl0ZW1zIGZvcndhcmRzIHVzaW5nIHRoZSBhcnJvd1tyaWdodCxkb3duXSBrZXlzLgogICAgICAgIGZvY3VzTmV4dDogWydhcnJvd3JpZ2h0JywgJ2Fycm93ZG93biddCiAgICAgIH0KICAgIH0pOwogICAgdGhpcy5zZXRUZW1wbGF0ZSh7CiAgICAgIHRhZzogJ2RpdicsCiAgICAgIGF0dHJpYnV0ZXM6IHsKICAgICAgICBjbGFzczogWydjaycsICdjay10b29sYmFyJywgYmluZC50bygnY2xhc3MnKV0sCiAgICAgICAgcm9sZTogJ3Rvb2xiYXInLAogICAgICAgICdhcmlhLWxhYmVsJzogYmluZC50bygnYXJpYUxhYmVsJykKICAgICAgfSwKICAgICAgY2hpbGRyZW46IHRoaXMuY2hpbGRyZW4sCiAgICAgIG9uOiB7CiAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2NrZWRpdG9yL2NrZWRpdG9yNS11aS9pc3N1ZXMvMjA2CiAgICAgICAgbW91c2Vkb3duOiBwcmV2ZW50RGVmYXVsdCh0aGlzKQogICAgICB9CiAgICB9KTsKICAgIC8qKgogICAgICogQW4gaW5zdGFuY2Ugb2YgdGhlIGFjdGl2ZSB0b29sYmFyIGJlaGF2aW9yIHRoYXQgc2hhcGVzIGl0cyBsb29rIGFuZCBmdW5jdGlvbmFsaXR5LgogICAgICoKICAgICAqIFNlZSB7QGxpbmsgbW9kdWxlOnVpL3Rvb2xiYXIvdG9vbGJhcnZpZXd+VG9vbGJhckJlaGF2aW9yfSB0byBsZWFybiBtb3JlLgogICAgICoKICAgICAqIEBwcm90ZWN0ZWQKICAgICAqIEByZWFkb25seQogICAgICogQG1lbWJlciB7bW9kdWxlOnVpL3Rvb2xiYXIvdG9vbGJhcnZpZXd+VG9vbGJhckJlaGF2aW9yfQogICAgICovCgogICAgdGhpcy5fYmVoYXZpb3IgPSB0aGlzLm9wdGlvbnMuc2hvdWxkR3JvdXBXaGVuRnVsbCA/IG5ldyBEeW5hbWljR3JvdXBpbmcodGhpcykgOiBuZXcgU3RhdGljTGF5b3V0KHRoaXMpOwogIH0KICAvKioKICAgKiBAaW5oZXJpdERvYwogICAqLwoKCiAgcmVuZGVyKCkgewogICAgc3VwZXIucmVuZGVyKCk7IC8vIENoaWxkcmVuIGFkZGVkIGJlZm9yZSByZW5kZXJpbmcgc2hvdWxkIGJlIGtub3duIHRvIHRoZSAjZm9jdXNUcmFja2VyLgoKICAgIGZvciAoY29uc3QgaXRlbSBvZiB0aGlzLml0ZW1zKSB7CiAgICAgIHRoaXMuZm9jdXNUcmFja2VyLmFkZChpdGVtLmVsZW1lbnQpOwogICAgfQoKICAgIHRoaXMuaXRlbXMub24oJ2FkZCcsIChldnQsIGl0ZW0pID0+IHsKICAgICAgdGhpcy5mb2N1c1RyYWNrZXIuYWRkKGl0ZW0uZWxlbWVudCk7CiAgICB9KTsKICAgIHRoaXMuaXRlbXMub24oJ3JlbW92ZScsIChldnQsIGl0ZW0pID0+IHsKICAgICAgdGhpcy5mb2N1c1RyYWNrZXIucmVtb3ZlKGl0ZW0uZWxlbWVudCk7CiAgICB9KTsgLy8gU3RhcnQgbGlzdGVuaW5nIGZvciB0aGUga2V5c3Ryb2tlcyBjb21pbmcgZnJvbSAjZWxlbWVudC4KCiAgICB0aGlzLmtleXN0cm9rZXMubGlzdGVuVG8odGhpcy5lbGVtZW50KTsKCiAgICB0aGlzLl9iZWhhdmlvci5yZW5kZXIodGhpcyk7CiAgfQogIC8qKgogICAqIEBpbmhlcml0RG9jCiAgICovCgoKICBkZXN0cm95KCkgewogICAgdGhpcy5fYmVoYXZpb3IuZGVzdHJveSgpOwoKICAgIHJldHVybiBzdXBlci5kZXN0cm95KCk7CiAgfQogIC8qKgogICAqIEZvY3VzZXMgdGhlIGZpcnN0IGZvY3VzYWJsZSBpbiB7QGxpbmsgI2ZvY3VzYWJsZXN9LgogICAqLwoKCiAgZm9jdXMoKSB7CiAgICB0aGlzLl9mb2N1c0N5Y2xlci5mb2N1c0ZpcnN0KCk7CiAgfQogIC8qKgogICAqIEZvY3VzZXMgdGhlIGxhc3QgZm9jdXNhYmxlIGluIHtAbGluayAjZm9jdXNhYmxlc30uCiAgICovCgoKICBmb2N1c0xhc3QoKSB7CiAgICB0aGlzLl9mb2N1c0N5Y2xlci5mb2N1c0xhc3QoKTsKICB9CiAgLyoqCiAgICogQSB1dGlsaXR5IHRoYXQgZXhwYW5kcyB0aGUgcGxhaW4gdG9vbGJhciBjb25maWd1cmF0aW9uIGludG8KICAgKiB7QGxpbmsgbW9kdWxlOnVpL3Rvb2xiYXIvdG9vbGJhcnZpZXd+VG9vbGJhclZpZXcjaXRlbXN9IHVzaW5nIGEgZ2l2ZW4gY29tcG9uZW50IGZhY3RvcnkuCiAgICoKICAgKiBAcGFyYW0ge0FycmF5LjxTdHJpbmc+fSBjb25maWcgVGhlIHRvb2xiYXIgaXRlbXMgY29uZmlndXJhdGlvbi4KICAgKiBAcGFyYW0ge21vZHVsZTp1aS9jb21wb25lbnRmYWN0b3J5fkNvbXBvbmVudEZhY3Rvcnl9IGZhY3RvcnkgQSBmYWN0b3J5IHByb2R1Y2luZyB0b29sYmFyIGl0ZW1zLgogICAqLwoKCiAgZmlsbEZyb21Db25maWcoY29uZmlnLCBmYWN0b3J5KSB7CiAgICBjb25maWcubWFwKG5hbWUgPT4gewogICAgICBpZiAobmFtZSA9PSAnfCcpIHsKICAgICAgICB0aGlzLml0ZW1zLmFkZChuZXcgVG9vbGJhclNlcGFyYXRvclZpZXcoKSk7CiAgICAgIH0gZWxzZSBpZiAoZmFjdG9yeS5oYXMobmFtZSkpIHsKICAgICAgICB0aGlzLml0ZW1zLmFkZChmYWN0b3J5LmNyZWF0ZShuYW1lKSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLyoqCiAgICAgICAgICogVGhlcmUgd2FzIGEgcHJvYmxlbSBwcm9jZXNzaW5nIHRoZSBjb25maWd1cmF0aW9uIG9mIHRoZSB0b29sYmFyLiBUaGUgaXRlbSB3aXRoIHRoZSBnaXZlbgogICAgICAgICAqIG5hbWUgZG9lcyBub3QgZXhpc3Qgc28gaXQgd2FzIG9taXR0ZWQgd2hlbiByZW5kZXJpbmcgdGhlIHRvb2xiYXIuCiAgICAgICAgICoKICAgICAgICAgKiBUaGlzIHdhcm5pbmcgdXN1YWxseSBzaG93cyB1cCB3aGVuIHRoZSB7QGxpbmsgbW9kdWxlOmNvcmUvcGx1Z2luflBsdWdpbn0gd2hpY2ggaXMgc3VwcG9zZWQKICAgICAgICAgKiB0byBwcm92aWRlIGEgdG9vbGJhciBpdGVtIGhhcyBub3QgYmVlbiBsb2FkZWQgb3IgdGhlcmUgaXMgYSB0eXBvIGluIHRoZSBjb25maWd1cmF0aW9uLgogICAgICAgICAqCiAgICAgICAgICogTWFrZSBzdXJlIHRoZSBwbHVnaW4gcmVzcG9uc2libGUgZm9yIHRoaXMgdG9vbGJhciBpdGVtIGlzIGxvYWRlZCBhbmQgdGhlIHRvb2xiYXIgY29uZmlndXJhdGlvbgogICAgICAgICAqIGlzIGNvcnJlY3QsIGUuZy4ge0BsaW5rIG1vZHVsZTpiYXNpYy1zdHlsZXMvYm9sZH5Cb2xkfSBpcyBsb2FkZWQgZm9yIHRoZSBgJ2JvbGQnYCB0b29sYmFyIGl0ZW0uCiAgICAgICAgICoKICAgICAgICAgKiBZb3UgY2FuIHVzZSB0aGUgZm9sbG93aW5nIHNuaXBwZXQgdG8gcmV0cmlldmUgYWxsIGF2YWlsYWJsZSB0b29sYmFyIGl0ZW1zOgogICAgICAgICAqCiAgICAgICAgICoJCUFycmF5LmZyb20oIGVkaXRvci51aS5jb21wb25lbnRGYWN0b3J5Lm5hbWVzKCkgKTsKICAgICAgICAgKgogICAgICAgICAqIEBlcnJvciB0b29sYmFydmlldy1pdGVtLXVuYXZhaWxhYmxlCiAgICAgICAgICogQHBhcmFtIHtTdHJpbmd9IG5hbWUgVGhlIG5hbWUgb2YgdGhlIGNvbXBvbmVudC4KICAgICAgICAgKi8KICAgICAgICBjb25zb2xlLndhcm4oYXR0YWNoTGlua1RvRG9jdW1lbnRhdGlvbigndG9vbGJhcnZpZXctaXRlbS11bmF2YWlsYWJsZTogVGhlIHJlcXVlc3RlZCB0b29sYmFyIGl0ZW0gaXMgdW5hdmFpbGFibGUuJyksIHsKICAgICAgICAgIG5hbWUKICAgICAgICB9KTsKICAgICAgfQogICAgfSk7CiAgfQoKfQovKioKICogQW4gaW5uZXIgYmxvY2sgb2YgdGhlIHtAbGluayBtb2R1bGU6dWkvdG9vbGJhci90b29sYmFydmlld35Ub29sYmFyVmlld30gaG9zdGluZyBpdHMKICoge0BsaW5rIG1vZHVsZTp1aS90b29sYmFyL3Rvb2xiYXJ2aWV3flRvb2xiYXJWaWV3I2l0ZW1zfS4KICoKICogQHByaXZhdGUKICogQGV4dGVuZHMgbW9kdWxlOnVpL3ZpZXd+VmlldwogKi8KCmNsYXNzIEl0ZW1zVmlldyBleHRlbmRzIFZpZXcgewogIC8qKgogICAqIEBpbmhlcml0RG9jCiAgICovCiAgY29uc3RydWN0b3IobG9jYWxlKSB7CiAgICBzdXBlcihsb2NhbGUpOwogICAgLyoqCiAgICAgKiBBIGNvbGxlY3Rpb24gb2YgaXRlbXMgKGJ1dHRvbnMsIGRyb3Bkb3ducywgZXRjLikuCiAgICAgKgogICAgICogQHJlYWRvbmx5CiAgICAgKiBAbWVtYmVyIHttb2R1bGU6dWkvdmlld2NvbGxlY3Rpb25+Vmlld0NvbGxlY3Rpb259CiAgICAgKi8KCiAgICB0aGlzLmNoaWxkcmVuID0gdGhpcy5jcmVhdGVDb2xsZWN0aW9uKCk7CiAgICB0aGlzLnNldFRlbXBsYXRlKHsKICAgICAgdGFnOiAnZGl2JywKICAgICAgYXR0cmlidXRlczogewogICAgICAgIGNsYXNzOiBbJ2NrJywgJ2NrLXRvb2xiYXJfX2l0ZW1zJ10KICAgICAgfSwKICAgICAgY2hpbGRyZW46IHRoaXMuY2hpbGRyZW4KICAgIH0pOwogIH0KCn0KLyoqCiAqIEEgdG9vbGJhciBiZWhhdmlvciB0aGF0IG1ha2VzIGl0IHN0YXRpYyBhbmQgdW5yZXNwb25zaXZlIHRvIHRoZSBjaGFuZ2VzIG9mIHRoZSBlbnZpcm9ubWVudC4KICogQXQgdGhlIHNhbWUgdGltZSwgaXQgYWxzbyBtYWtlcyBpdCBwb3NzaWJsZSB0byBkaXNwbGF5IGEgdG9vbGJhciB3aXRoIGEgdmVydGljYWwgbGF5b3V0CiAqIHVzaW5nIHRoZSB7QGxpbmsgbW9kdWxlOnVpL3Rvb2xiYXIvdG9vbGJhcnZpZXd+VG9vbGJhclZpZXcjaXNWZXJ0aWNhbH0gcHJvcGVydHkuCiAqCiAqIEBwcml2YXRlCiAqIEBpbXBsZW1lbnRzIG1vZHVsZTp1aS90b29sYmFyL3Rvb2xiYXJ2aWV3flRvb2xiYXJCZWhhdmlvcgogKi8KCgpjbGFzcyBTdGF0aWNMYXlvdXQgewogIC8qKgogICAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgdGhlIHtAbGluayBtb2R1bGU6dWkvdG9vbGJhci90b29sYmFydmlld35TdGF0aWNMYXlvdXR9IHRvb2xiYXIKICAgKiBiZWhhdmlvci4KICAgKgogICAqIEBwYXJhbSB7bW9kdWxlOnVpL3Rvb2xiYXIvdG9vbGJhcnZpZXd+VG9vbGJhclZpZXd9IHZpZXcgQW4gaW5zdGFuY2Ugb2YgdGhlIHRvb2xiYXIgdGhhdCB0aGlzIGJlaGF2aW9yCiAgICogaXMgYWRkZWQgdG8uCiAgICovCiAgY29uc3RydWN0b3IodmlldykgewogICAgY29uc3QgYmluZCA9IHZpZXcuYmluZFRlbXBsYXRlOyAvLyBTdGF0aWMgdG9vbGJhciBjYW4gYmUgdmVydGljYWwgd2hlbiBuZWVkZWQuCgogICAgdmlldy5zZXQoJ2lzVmVydGljYWwnLCBmYWxzZSk7IC8vIDE6MSBwYXNz4oCTdGhyb3VnaCBiaW5kaW5nLCBhbGwgVG9vbGJhclZpZXcjaXRlbXMgYXJlIHZpc2libGUuCgogICAgdmlldy5pdGVtc1ZpZXcuY2hpbGRyZW4uYmluZFRvKHZpZXcuaXRlbXMpLnVzaW5nKGl0ZW0gPT4gaXRlbSk7IC8vIDE6MSBwYXNz4oCTdGhyb3VnaCBiaW5kaW5nLCBhbGwgVG9vbGJhclZpZXcjaXRlbXMgYXJlIGZvY3VzYWJsZS4KCiAgICB2aWV3LmZvY3VzYWJsZXMuYmluZFRvKHZpZXcuaXRlbXMpLnVzaW5nKGl0ZW0gPT4gaXRlbSk7CiAgICB2aWV3LmV4dGVuZFRlbXBsYXRlKHsKICAgICAgYXR0cmlidXRlczogewogICAgICAgIGNsYXNzOiBbLy8gV2hlbiB2ZXJ0aWNhbCwgdGhlIHRvb2xiYXIgaGFzIGFuIGFkZGl0aW9uYWwgQ1NTIGNsYXNzLgogICAgICAgIGJpbmQuaWYoJ2lzVmVydGljYWwnLCAnY2stdG9vbGJhcl92ZXJ0aWNhbCcpXQogICAgICB9CiAgICB9KTsKICB9CiAgLyoqCiAgICogQGluaGVyaXREb2MKICAgKi8KCgogIHJlbmRlcigpIHt9CiAgLyoqCiAgICogQGluaGVyaXREb2MKICAgKi8KCgogIGRlc3Ryb3koKSB7fQoKfQovKioKICogQSB0b29sYmFyIGJlaGF2aW9yIHRoYXQgbWFrZXMgdGhlIGl0ZW1zIHJlc3BvbmQgdG8gY2hhbmdlcyBpbiB0aGUgZ2VvbWV0cnkuCiAqCiAqIEluIGEgbnV0c2hlbGwsIGl0IGdyb3VwcyB7QGxpbmsgbW9kdWxlOnVpL3Rvb2xiYXIvdG9vbGJhcnZpZXd+VG9vbGJhclZpZXcjaXRlbXN9CiAqIHRoYXQgZG8gbm90IGZpdCB2aXN1YWxseSBpbnRvIGEgc2luZ2xlIHJvdyBvZiB0aGUgdG9vbGJhciAoZHVlIHRvIGxpbWl0ZWQgc3BhY2UpLgogKiBJdGVtcyB0aGF0IGRvIG5vdCBmaXQgYXJlIGFnZ3JlZ2F0ZWQgaW4gYSBkcm9wZG93biBkaXNwbGF5ZWQgYXQgdGhlIGVuZCBvZiB0aGUgdG9vbGJhci4KICoKICoJ4pSM4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAIFRvb2xiYXJWaWV3IOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUkAogKgl8IOKUjOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgCAjY2hpbGRyZW4g4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSQIHwKICoJfCB8ICAg4pSM4pSA4pSA4pSA4pSA4pSA4pSA4pSAICNpdGVtc1ZpZXcg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSQIOKUjOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUkCDilIzilIDilIAgI2dyb3VwZWRJdGVtc0Ryb3Bkb3duIOKUgOKUgOKUgOKUkCAgIHwgfAogKgl8IHwgICB8ICAgICAgICN1bmdyb3VwZWRJdGVtcyAgICAgfCB8IFRvb2xiYXJTZXBhcmF0b3JWaWV3IHwgfCAgICAgICAgI2dyb3VwZWRJdGVtcyAgICAgICB8ICAgfCB8CiAqCXwgfCAgIOKUlOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgC3ilJgg4pSU4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSYIOKUlOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUmCAgIHwgfAogKgl8IHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXC0tLS0tLS0tLS0gb25seSB3aGVuIHRvb2xiYXIgaXRlbXMgb3ZlcmZsb3cgLS0tLS0tLS0vICAgIHwgfAogKgl8IOKUlOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUmCB8CiAqCeKUlOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUmAogKgogKiBAcHJpdmF0ZQogKiBAaW1wbGVtZW50cyBtb2R1bGU6dWkvdG9vbGJhci90b29sYmFydmlld35Ub29sYmFyQmVoYXZpb3IKICovCgoKY2xhc3MgRHluYW1pY0dyb3VwaW5nIHsKICAvKioKICAgKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIHRoZSB7QGxpbmsgbW9kdWxlOnVpL3Rvb2xiYXIvdG9vbGJhcnZpZXd+RHluYW1pY0dyb3VwaW5nfSB0b29sYmFyCiAgICogYmVoYXZpb3IuCiAgICoKICAgKiBAcGFyYW0ge21vZHVsZTp1aS90b29sYmFyL3Rvb2xiYXJ2aWV3flRvb2xiYXJWaWV3fSB2aWV3IEFuIGluc3RhbmNlIG9mIHRoZSB0b29sYmFyIHRoYXQgdGhpcyBiZWhhdmlvcgogICAqIGlzIGFkZGVkIHRvLgogICAqLwogIGNvbnN0cnVjdG9yKHZpZXcpIHsKICAgIC8qKgogICAgICogQSBjb2xsZWN0aW9uIG9mIHRvb2xiYXIgY2hpbGRyZW4uCiAgICAgKgogICAgICogQHJlYWRvbmx5CiAgICAgKiBAbWVtYmVyIHttb2R1bGU6dWkvdmlld2NvbGxlY3Rpb25+Vmlld0NvbGxlY3Rpb259CiAgICAgKi8KICAgIHRoaXMudmlld0NoaWxkcmVuID0gdmlldy5jaGlsZHJlbjsKICAgIC8qKgogICAgICogQSBjb2xsZWN0aW9uIG9mIGZvY3VzYWJsZSB0b29sYmFyIGVsZW1lbnRzLgogICAgICoKICAgICAqIEByZWFkb25seQogICAgICogQG1lbWJlciB7bW9kdWxlOnVpL3ZpZXdjb2xsZWN0aW9uflZpZXdDb2xsZWN0aW9ufQogICAgICovCgogICAgdGhpcy52aWV3Rm9jdXNhYmxlcyA9IHZpZXcuZm9jdXNhYmxlczsKICAgIC8qKgogICAgICogQSB2aWV3IGNvbnRhaW5pbmcgdG9vbGJhciBpdGVtcy4KICAgICAqCiAgICAgKiBAcmVhZG9ubHkKICAgICAqIEBtZW1iZXIge21vZHVsZTp1aS90b29sYmFyL3Rvb2xiYXJ2aWV3fkl0ZW1zVmlld30KICAgICAqLwoKICAgIHRoaXMudmlld0l0ZW1zVmlldyA9IHZpZXcuaXRlbXNWaWV3OwogICAgLyoqCiAgICAgKiBUb29sYmFyIGZvY3VzIHRyYWNrZXIuCiAgICAgKgogICAgICogQHJlYWRvbmx5CiAgICAgKiBAbWVtYmVyIHttb2R1bGU6dXRpbHMvZm9jdXN0cmFja2VyfkZvY3VzVHJhY2tlcn0KICAgICAqLwoKICAgIHRoaXMudmlld0ZvY3VzVHJhY2tlciA9IHZpZXcuZm9jdXNUcmFja2VyOwogICAgLyoqCiAgICAgKiBUb29sYmFyIGxvY2FsZS4KICAgICAqCiAgICAgKiBAcmVhZG9ubHkKICAgICAqIEBtZW1iZXIge21vZHVsZTp1dGlscy9sb2NhbGV+TG9jYWxlfQogICAgICovCgogICAgdGhpcy52aWV3TG9jYWxlID0gdmlldy5sb2NhbGU7CiAgICAvKioKICAgICAqIFRvb2xiYXIgZWxlbWVudC4KICAgICAqCiAgICAgKiBAcmVhZG9ubHkKICAgICAqIEBtZW1iZXIge0hUTUxFbGVtZW50fSAjdmlld0VsZW1lbnQKICAgICAqLwoKICAgIC8qKgogICAgICogQSBzdWJzZXQgb2YgdG9vbGJhciB7QGxpbmsgbW9kdWxlOnVpL3Rvb2xiYXIvdG9vbGJhcnZpZXd+VG9vbGJhclZpZXcjaXRlbXN9LgogICAgICogQWdncmVnYXRlcyBpdGVtcyB0aGF0IGZpdCBpbnRvIGEgc2luZ2xlIHJvdyBvZiB0aGUgdG9vbGJhciBhbmQgd2VyZSBub3Qge0BsaW5rICNncm91cGVkSXRlbXMgZ3JvdXBlZH0KICAgICAqIGludG8gYSB7QGxpbmsgI2dyb3VwZWRJdGVtc0Ryb3Bkb3duIGRyb3Bkb3dufS4gSXRlbXMgb2YgdGhpcyBjb2xsZWN0aW9uIGFyZSBkaXNwbGF5ZWQgaW4gdGhlCiAgICAgKiB7QGxpbmsgbW9kdWxlOnVpL3Rvb2xiYXIvdG9vbGJhcnZpZXd+VG9vbGJhclZpZXcjaXRlbXNWaWV3fS4KICAgICAqCiAgICAgKiBXaGVuIG5vbmUgb2YgdGhlIHtAbGluayBtb2R1bGU6dWkvdG9vbGJhci90b29sYmFydmlld35Ub29sYmFyVmlldyNpdGVtc30gd2VyZSBncm91cGVkLCBpdAogICAgICogbWF0Y2hlcyB0aGUge0BsaW5rIG1vZHVsZTp1aS90b29sYmFyL3Rvb2xiYXJ2aWV3flRvb2xiYXJWaWV3I2l0ZW1zfSBjb2xsZWN0aW9uIGluIHNpemUgYW5kIG9yZGVyLgogICAgICoKICAgICAqIEByZWFkb25seQogICAgICogQG1lbWJlciB7bW9kdWxlOnVpL3ZpZXdjb2xsZWN0aW9uflZpZXdDb2xsZWN0aW9ufQogICAgICovCgogICAgdGhpcy51bmdyb3VwZWRJdGVtcyA9IHZpZXcuY3JlYXRlQ29sbGVjdGlvbigpOwogICAgLyoqCiAgICAgKiBBIHN1YnNldCBvZiB0b29sYmFyIHtAbGluayBtb2R1bGU6dWkvdG9vbGJhci90b29sYmFydmlld35Ub29sYmFyVmlldyNpdGVtc30uCiAgICAgKiBBIGNvbGxlY3Rpb24gb2YgdGhlIHRvb2xiYXIgaXRlbXMgdGhhdCBkbyBub3QgZml0IGludG8gYSBzaW5nbGUgcm93IG9mIHRoZSB0b29sYmFyLgogICAgICogR3JvdXBlZCBpdGVtcyBhcmUgZGlzcGxheWVkIGluIGEgZGVkaWNhdGVkIHtAbGluayAjZ3JvdXBlZEl0ZW1zRHJvcGRvd24gZHJvcGRvd259LgogICAgICoKICAgICAqIFdoZW4gbm9uZSBvZiB0aGUge0BsaW5rIG1vZHVsZTp1aS90b29sYmFyL3Rvb2xiYXJ2aWV3flRvb2xiYXJWaWV3I2l0ZW1zfSB3ZXJlIGdyb3VwZWQsCiAgICAgKiB0aGlzIGNvbGxlY3Rpb24gaXMgZW1wdHkuCiAgICAgKgogICAgICogQHJlYWRvbmx5CiAgICAgKiBAbWVtYmVyIHttb2R1bGU6dWkvdmlld2NvbGxlY3Rpb25+Vmlld0NvbGxlY3Rpb259CiAgICAgKi8KCiAgICB0aGlzLmdyb3VwZWRJdGVtcyA9IHZpZXcuY3JlYXRlQ29sbGVjdGlvbigpOwogICAgLyoqCiAgICAgKiBUaGUgZHJvcGRvd24gdGhhdCBhZ2dyZWdhdGVzIHtAbGluayAjZ3JvdXBlZEl0ZW1zIGdyb3VwZWQgaXRlbXN9IHRoYXQgZG8gbm90IGZpdCBpbnRvIGEgc2luZ2xlCiAgICAgKiByb3cgb2YgdGhlIHRvb2xiYXIuIEl0IGlzIGRpc3BsYXllZCBvbiBkZW1hbmQgYXMgdGhlIGxhc3Qgb2YKICAgICAqIHtAbGluayBtb2R1bGU6dWkvdG9vbGJhci90b29sYmFydmlld35Ub29sYmFyVmlldyNjaGlsZHJlbiB0b29sYmFyIGNoaWxkcmVufSBhbmQgb2ZmZXJzIGFub3RoZXIKICAgICAqIChuZXN0ZWQpIHRvb2xiYXIgd2hpY2ggZGlzcGxheXMgaXRlbXMgdGhhdCB3b3VsZCBub3JtYWxseSBvdmVyZmxvdy4KICAgICAqCiAgICAgKiBAcmVhZG9ubHkKICAgICAqIEBtZW1iZXIge21vZHVsZTp1aS9kcm9wZG93bi9kcm9wZG93bnZpZXd+RHJvcGRvd25WaWV3fQogICAgICovCgogICAgdGhpcy5ncm91cGVkSXRlbXNEcm9wZG93biA9IHRoaXMuX2NyZWF0ZUdyb3VwZWRJdGVtc0Ryb3Bkb3duKCk7CiAgICAvKioKICAgICAqIEFuIGluc3RhbmNlIG9mIHRoZSByZXNpemUgb2JzZXJ2ZXIgdGhhdCBoZWxwcyBkeW5hbWljYWxseSBkZXRlcm1pbmUgdGhlIGdlb21ldHJ5IG9mIHRoZSB0b29sYmFyCiAgICAgKiBhbmQgbWFuYWdlIGl0ZW1zIHRoYXQgZG8gbm90IGZpdCBpbnRvIGEgc2luZ2xlIHJvdy4KICAgICAqCiAgICAgKiAqKk5vdGU6KiogQ3JlYXRlZCBpbiB7QGxpbmsgI19lbmFibGVHcm91cGluZ09uUmVzaXplfS4KICAgICAqCiAgICAgKiBAcmVhZG9ubHkKICAgICAqIEBtZW1iZXIge21vZHVsZTp1dGlscy9kb20vZ2V0cmVzaXplb2JzZXJ2ZXJ+UmVzaXplT2JzZXJ2ZXJ9CiAgICAgKi8KCiAgICB0aGlzLnJlc2l6ZU9ic2VydmVyID0gbnVsbDsKICAgIC8qKgogICAgICogQSBjYWNoZWQgdmFsdWUgb2YgdGhlIGhvcml6b250YWwgcGFkZGluZyBzdHlsZSB1c2VkIGJ5IHtAbGluayAjX3VwZGF0ZUdyb3VwaW5nfQogICAgICogdG8gbWFuYWdlIHRoZSB7QGxpbmsgbW9kdWxlOnVpL3Rvb2xiYXIvdG9vbGJhcnZpZXd+VG9vbGJhclZpZXcjaXRlbXN9IHRoYXQgZG8gbm90IGZpdCBpbnRvCiAgICAgKiBhIHNpbmdsZSB0b29sYmFyIGxpbmUuIFRoaXMgdmFsdWUgY2FuIGJlIHJldXNlZCBiZXR3ZWVuIHVwZGF0ZXMgYmVjYXVzZSBpdCBpcyB1bmxpa2VseSB0aGF0CiAgICAgKiB0aGUgcGFkZGluZyB3aWxsIGNoYW5nZSBhbmQgcmXigJN1c2luZyBgV2luZG93LmdldENvbXB1dGVkU3R5bGUoKWAgaXMgZXhwZW5zaXZlLgogICAgICoKICAgICAqIEByZWFkb25seQogICAgICogQG1lbWJlciB7TnVtYmVyfQogICAgICovCgogICAgdGhpcy5jYWNoZWRQYWRkaW5nID0gbnVsbDsgLy8gT25seSB0aG9zZSBpdGVtcyB0aGF0IHdlcmUgbm90IGdyb3VwZWQgYXJlIHZpc2libGUgdG8gdGhlIHVzZXIuCgogICAgdmlldy5pdGVtc1ZpZXcuY2hpbGRyZW4uYmluZFRvKHRoaXMudW5ncm91cGVkSXRlbXMpLnVzaW5nKGl0ZW0gPT4gaXRlbSk7IC8vIE1ha2Ugc3VyZSBhbGwgI2l0ZW1zIHZpc2libGUgaW4gdGhlIG1haW4gc3BhY2Ugb2YgdGhlIHRvb2xiYXIgYXJlICJmb2N1c2N5Y2xlYWJsZSIuCgogICAgdGhpcy51bmdyb3VwZWRJdGVtcy5vbignYWRkJywgdGhpcy5fdXBkYXRlRm9jdXNDeWNsZWFibGVJdGVtcy5iaW5kKHRoaXMpKTsKICAgIHRoaXMudW5ncm91cGVkSXRlbXMub24oJ3JlbW92ZScsIHRoaXMuX3VwZGF0ZUZvY3VzQ3ljbGVhYmxlSXRlbXMuYmluZCh0aGlzKSk7IC8vIE1ha2Ugc3VyZSB0aGUgI2dyb3VwZWRJdGVtc0Ryb3Bkb3duIGlzIGFsc28gaW5jbHVkZWQgaW4gY3ljbGluZyB3aGVuIGl0IGFwcGVhcnMuCgogICAgdmlldy5jaGlsZHJlbi5vbignYWRkJywgdGhpcy5fdXBkYXRlRm9jdXNDeWNsZWFibGVJdGVtcy5iaW5kKHRoaXMpKTsKICAgIHZpZXcuY2hpbGRyZW4ub24oJ3JlbW92ZScsIHRoaXMuX3VwZGF0ZUZvY3VzQ3ljbGVhYmxlSXRlbXMuYmluZCh0aGlzKSk7IC8vIFRvb2xiYXJWaWV3I2l0ZW1zIGlzIGR5bmFtaWMuIFdoZW4gYW4gaXRlbSBpcyBhZGRlZCwgaXQgc2hvdWxkIGJlIGF1dG9tYXRpY2FsbHkKICAgIC8vIHJlcHJlc2VudGVkIGluIGVpdGhlciBncm91cGVkIG9yIHVuZ3JvdXBlZCBpdGVtcyBhdCB0aGUgcmlnaHQgaW5kZXguCiAgICAvLyBJbiBvdGhlciB3b3JkcyAjaXRlbXMgPT0gY29uY2F0KCAjdW5ncm91cGVkSXRlbXMsICNncm91cGVkSXRlbXMgKQogICAgLy8gKGluIGxlbmd0aCBhbmQgb3JkZXIpLgoKICAgIHZpZXcuaXRlbXMub24oJ2FkZCcsIChldnQsIGl0ZW0sIGluZGV4KSA9PiB7CiAgICAgIGlmIChpbmRleCA+IHRoaXMudW5ncm91cGVkSXRlbXMubGVuZ3RoKSB7CiAgICAgICAgdGhpcy5ncm91cGVkSXRlbXMuYWRkKGl0ZW0sIGluZGV4IC0gdGhpcy51bmdyb3VwZWRJdGVtcy5sZW5ndGgpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMudW5ncm91cGVkSXRlbXMuYWRkKGl0ZW0sIGluZGV4KTsKICAgICAgfSAvLyBXaGVuIGEgbmV3IHVuZ3JvdXBlZCBpdGVtIGpvaW5zIGluIGFuZCBsYW5kcyBpbiAjdW5ncm91cGVkSXRlbXMsIHRoZXJlJ3MgYSBjaGFuY2UgaXQgY2F1c2VzCiAgICAgIC8vIHRoZSB0b29sYmFyIHRvIG92ZXJmbG93LgoKCiAgICAgIHRoaXMuX3VwZGF0ZUdyb3VwaW5nKCk7CiAgICB9KTsgLy8gV2hlbiBhbiBpdGVtIGlzIHJlbW92ZWQgZnJvbSBUb29sYmFyVmlldyNpdGVtcywgaXQgc2hvdWxkIGJlIGF1dG9tYXRpY2FsbHkKICAgIC8vIHJlbW92ZWQgZnJvbSBlaXRoZXIgZ3JvdXBlZCBvciB1bmdyb3VwZWQgaXRlbXMuCgogICAgdmlldy5pdGVtcy5vbigncmVtb3ZlJywgKGV2dCwgaXRlbSwgaW5kZXgpID0+IHsKICAgICAgaWYgKGluZGV4ID4gdGhpcy51bmdyb3VwZWRJdGVtcy5sZW5ndGgpIHsKICAgICAgICB0aGlzLmdyb3VwZWRJdGVtcy5yZW1vdmUoaXRlbSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy51bmdyb3VwZWRJdGVtcy5yZW1vdmUoaXRlbSk7CiAgICAgIH0gLy8gV2hldGhlciByZW1vdmVkIGZyb20gZ3JvdXBlZCBvciB1bmdyb3VwZWQgaXRlbXMsIHRoZXJlIGlzIGEgY2hhbmNlCiAgICAgIC8vIHNvbWUgbmV3IHNwYWNlIGlzIGF2YWlsYWJsZSBhbmQgd2UgY291bGQgZG8gc29tZSB1bmdyb3VwaW5nLgoKCiAgICAgIHRoaXMuX3VwZGF0ZUdyb3VwaW5nKCk7CiAgICB9KTsKICAgIHZpZXcuZXh0ZW5kVGVtcGxhdGUoewogICAgICBhdHRyaWJ1dGVzOiB7CiAgICAgICAgY2xhc3M6IFsvLyBUbyBncm91cCBpdGVtcyBkeW5hbWljYWxseSwgdGhlIHRvb2xiYXIgbmVlZHMgYSBkZWRpY2F0ZWQgQ1NTIGNsYXNzLgogICAgICAgICdjay10b29sYmFyX2dyb3VwaW5nJ10KICAgICAgfQogICAgfSk7CiAgfQogIC8qKgogICAqIEVuYWJsZXMgZHluYW1pYyBpdGVtcyBncm91cGluZyBiYXNlZCBvbiB0aGUgZGltZW5zaW9ucyBvZiB0aGUgdG9vbGJhci4KICAgKgogICAqIEBwYXJhbSB7bW9kdWxlOnVpL3Rvb2xiYXIvdG9vbGJhcnZpZXd+VG9vbGJhclZpZXd9IHZpZXcgQW4gaW5zdGFuY2Ugb2YgdGhlIHRvb2xiYXIgdGhhdCB0aGlzIGJlaGF2aW9yCiAgICogaXMgYWRkZWQgdG8uCiAgICovCgoKICByZW5kZXIodmlldykgewogICAgdGhpcy52aWV3RWxlbWVudCA9IHZpZXcuZWxlbWVudDsKCiAgICB0aGlzLl9lbmFibGVHcm91cGluZ09uUmVzaXplKCk7CiAgfQogIC8qKgogICAqIENsZWFucyB1cCB0aGUgaW50ZXJuYWxzIHVzZWQgYnkgdGhpcyBiZWhhdmlvci4KICAgKi8KCgogIGRlc3Ryb3koKSB7CiAgICAvLyBUaGUgZHJvcGRvd24gbWF5IG5vdCBiZSBpbiBUb29sYmFyVmlldyNjaGlsZHJlbiBhdCB0aGUgbW9tZW50IG9mIHRvb2xiYXIgZGVzdHJ1Y3Rpb24KICAgIC8vIHNvIGxldCdzIG1ha2Ugc3VyZSBpdCdzIGFjdHVhbGx5IGRlc3Ryb3llZCBhbG9uZyB3aXRoIHRoZSB0b29sYmFyLgogICAgdGhpcy5ncm91cGVkSXRlbXNEcm9wZG93bi5kZXN0cm95KCk7CiAgICB0aGlzLnJlc2l6ZU9ic2VydmVyLmRpc2Nvbm5lY3QoKTsKICB9CiAgLyoqCiAgICogV2hlbiBjYWxsZWQsIGl0IHdpbGwgY2hlY2sgaWYgYW55IG9mIHRoZSB7QGxpbmsgI3VuZ3JvdXBlZEl0ZW1zfSBkbyBub3QgZml0IGludG8gYSBzaW5nbGUgcm93IG9mIHRoZSB0b29sYmFyLAogICAqIGFuZCBpdCB3aWxsIG1vdmUgdGhlbSB0byB0aGUge0BsaW5rICNncm91cGVkSXRlbXN9IHdoZW4gaXQgaGFwcGVucy4KICAgKgogICAqIEF0IHRoZSBzYW1lIHRpbWUsIGl0IHdpbGwgYWxzbyBjaGVjayBpZiB0aGVyZSBpcyBlbm91Z2ggc3BhY2UgaW4gdGhlIHRvb2xiYXIgZm9yIHRoZSBmaXJzdCBvZiB0aGUKICAgKiB7QGxpbmsgI2dyb3VwZWRJdGVtc30gdG8gYmUgcmV0dXJuZWQgYmFjayB0byB7QGxpbmsgI3VuZ3JvdXBlZEl0ZW1zfSBhbmQgc3RpbGwgZml0IGludG8gYSBzaW5nbGUgcm93CiAgICogd2l0aG91dCB0aGUgdG9vbGJhciB3cmFwcGluZy4KICAgKgogICAqIEBwcm90ZWN0ZWQKICAgKi8KCgogIF91cGRhdGVHcm91cGluZygpIHsKICAgIC8vIERvIG5vIGdyb3VwaW5n4oCTcmVsYXRlZCBnZW9tZXRyeSBhbmFseXNpcyB3aGVuIHRoZSB0b29sYmFyIGlzIGRldGFjaGVkIGZyb20gdmlzaWJsZSBET00sCiAgICAvLyBmb3IgaW5zdGFuY2UgYmVmb3JlICNyZW5kZXIoKSwgb3IgYWZ0ZXIgcmVuZGVyIGJ1dCB3aXRob3V0IGEgcGFyZW50IG9yIGEgcGFyZW50IGRldGFjaGVkCiAgICAvLyBmcm9tIERPTS4gRE9NUmVjdHMgd29uJ3Qgd29yayBhbnl3YXkgYW5kIHRoZXJlIHdpbGwgYmUgdG9ucyBvZiB3YXJuaW5nIGluIHRoZSBjb25zb2xlIGFuZAogICAgLy8gbm90aGluZyBlbHNlLgogICAgaWYgKCF0aGlzLnZpZXdFbGVtZW50Lm93bmVyRG9jdW1lbnQuYm9keS5jb250YWlucyh0aGlzLnZpZXdFbGVtZW50KSkgewogICAgICByZXR1cm47CiAgICB9CgogICAgbGV0IHdlcmVJdGVtc0dyb3VwZWQ7IC8vIEdyb3VwICNpdGVtcyBhcyBsb25nIGFzIHNvbWUgd3JhcCB0byB0aGUgbmV4dCByb3cuIFRoaXMgd2lsbCBoYXBwZW4sIGZvciBpbnN0YW5jZSwKICAgIC8vIHdoZW4gdGhlIHRvb2xiYXIgaXMgZ2V0dGluZyBuYXJyb3cgYW5kIHRoZXJlIGlzIG5vdCBlbm91Z2ggc3BhY2UgdG8gZGlzcGxheSBhbGwgaXRlbXMgaW4KICAgIC8vIGEgc2luZ2xlIHJvdy4KCiAgICB3aGlsZSAodGhpcy5fYXJlSXRlbXNPdmVyZmxvd2luZykgewogICAgICB0aGlzLl9ncm91cExhc3RJdGVtKCk7CgogICAgICB3ZXJlSXRlbXNHcm91cGVkID0gdHJ1ZTsKICAgIH0gLy8gSWYgbm9uZSB3ZXJlIGdyb3VwZWQgbm93IGJ1dCB0aGVyZSB3ZXJlIHNvbWUgaXRlbXMgYWxyZWFkeSBncm91cGVkIGJlZm9yZSwKICAgIC8vIHRoZW4sIHdoYXQgdGhlIGhlbGwsIG1heWJlIGxldCdzIHNlZSBpZiBzb21lIG9mIHRoZW0gY2FuIGJlIHVuZ3JvdXBlZC4gVGhpcyBoYXBwZW5zIHdoZW4sCiAgICAvLyBmb3IgaW5zdGFuY2UsIHRoZSB0b29sYmFyIGlzIHN0cmV0Y2hpbmcgYW5kIHRoZXJlJ3MgbW9yZSBzcGFjZSBpbiBpdCB0aGFuIGJlZm9yZS4KCgogICAgaWYgKCF3ZXJlSXRlbXNHcm91cGVkICYmIHRoaXMuZ3JvdXBlZEl0ZW1zLmxlbmd0aCkgewogICAgICAvLyBVbmdyb3VwIGl0ZW1zIGFzIGxvbmcgYXMgbm9uZSBhcmUgb3ZlcmZsb3dpbmcgb3IgdGhlcmUgYXJlIG5vbmUgdG8gdW5ncm91cCBsZWZ0LgogICAgICB3aGlsZSAodGhpcy5ncm91cGVkSXRlbXMubGVuZ3RoICYmICF0aGlzLl9hcmVJdGVtc092ZXJmbG93aW5nKSB7CiAgICAgICAgdGhpcy5fdW5ncm91cEZpcnN0SXRlbSgpOwogICAgICB9IC8vIElmIHRoZSB1bmdyb3VwaW5nIGVuZGVkIHVwIHdpdGggc29tZSBpdGVtIHdyYXBwaW5nIHRvIHRoZSBuZXh0IHJvdywKICAgICAgLy8gcHV0IGl0IGJhY2sgdG8gdGhlIGdyb3VwIHRvb2xiYXIgKCJ1bmRvIHRoZSBsYXN0IHVuZ3JvdXAiKS4gV2UgZG9uJ3Qga25vdyB3aGV0aGVyCiAgICAgIC8vIGFuIGl0ZW0gd2lsbCB3cmFwIG9yIG5vdCB1bnRpbCB3ZSB1bmdyb3VwIGl0ICh0aGF0J3MgYSBET00vQ1NTIHRoaW5nKSBzbyB0aGlzCiAgICAgIC8vIGNsZWFu4oCTdXAgaXMgdml0YWwgZm9yIHRoZSBhbGdvcml0aG0uCgoKICAgICAgaWYgKHRoaXMuX2FyZUl0ZW1zT3ZlcmZsb3dpbmcpIHsKICAgICAgICB0aGlzLl9ncm91cExhc3RJdGVtKCk7CiAgICAgIH0KICAgIH0KICB9CiAgLyoqCiAgICogUmV0dXJucyBgdHJ1ZWAgd2hlbiB7QGxpbmsgbW9kdWxlOnVpL3Rvb2xiYXIvdG9vbGJhcnZpZXd+VG9vbGJhclZpZXcjZWxlbWVudH0gY2hpbGRyZW4gdmlzdWFsbHkgb3ZlcmZsb3csCiAgICogZm9yIGluc3RhbmNlIGlmIHRoZSB0b29sYmFyIGlzIG5hcnJvd2VyIHRoYW4gaXRzIG1lbWJlcnMuIFJldHVybnMgYGZhbHNlYCBvdGhlcndpc2UuCiAgICoKICAgKiBAcHJpdmF0ZQogICAqIEB0eXBlIHtCb29sZWFufQogICAqLwoKCiAgZ2V0IF9hcmVJdGVtc092ZXJmbG93aW5nKCkgewogICAgLy8gQW4gZW1wdHkgdG9vbGJhciBjYW5ub3Qgb3ZlcmZsb3cuCiAgICBpZiAoIXRoaXMudW5ncm91cGVkSXRlbXMubGVuZ3RoKSB7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICBjb25zdCBlbGVtZW50ID0gdGhpcy52aWV3RWxlbWVudDsKICAgIGNvbnN0IHVpTGFuZ3VhZ2VEaXJlY3Rpb24gPSB0aGlzLnZpZXdMb2NhbGUudWlMYW5ndWFnZURpcmVjdGlvbjsKICAgIGNvbnN0IGxhc3RDaGlsZFJlY3QgPSBuZXcgUmVjdChlbGVtZW50Lmxhc3RDaGlsZCk7CiAgICBjb25zdCB0b29sYmFyUmVjdCA9IG5ldyBSZWN0KGVsZW1lbnQpOwoKICAgIGlmICghdGhpcy5jYWNoZWRQYWRkaW5nKSB7CiAgICAgIGNvbnN0IGNvbXB1dGVkU3R5bGUgPSBnbG9iYWwud2luZG93LmdldENvbXB1dGVkU3R5bGUoZWxlbWVudCk7CiAgICAgIGNvbnN0IHBhZGRpbmdQcm9wZXJ0eSA9IHVpTGFuZ3VhZ2VEaXJlY3Rpb24gPT09ICdsdHInID8gJ3BhZGRpbmdSaWdodCcgOiAncGFkZGluZ0xlZnQnOyAvLyBwYXJzZUludCgpIGlzIGVzc2VudGlhbCBiZWNhdXNlIG9mIHF1aXJreSBmbG9hdGluZyBwb2ludCBudW1iZXJzIGxvZ2ljIGFuZCBET00uCiAgICAgIC8vIElmIHRoZSBwYWRkaW5nIHR1cm5lZCBvdXQgdG9vIGJpZyBiZWNhdXNlIG9mIHRoYXQsIHRoZSBncm91cGVkIGl0ZW1zIGRyb3Bkb3duIHdvdWxkCiAgICAgIC8vIGFsd2F5cyBsb29rIChmcm9tIHRoZSBSZWN0IHBlcnNwZWN0aXZlKSBsaWtlIGl0IG92ZXJmbG93cyAod2hpbGUgaXQncyBub3QpLgoKICAgICAgdGhpcy5jYWNoZWRQYWRkaW5nID0gTnVtYmVyLnBhcnNlSW50KGNvbXB1dGVkU3R5bGVbcGFkZGluZ1Byb3BlcnR5XSk7CiAgICB9CgogICAgaWYgKHVpTGFuZ3VhZ2VEaXJlY3Rpb24gPT09ICdsdHInKSB7CiAgICAgIHJldHVybiBsYXN0Q2hpbGRSZWN0LnJpZ2h0ID4gdG9vbGJhclJlY3QucmlnaHQgLSB0aGlzLmNhY2hlZFBhZGRpbmc7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gbGFzdENoaWxkUmVjdC5sZWZ0IDwgdG9vbGJhclJlY3QubGVmdCArIHRoaXMuY2FjaGVkUGFkZGluZzsKICAgIH0KICB9CiAgLyoqCiAgICogRW5hYmxlcyB0aGUgZnVuY3Rpb25hbGl0eSB0aGF0IHByZXZlbnRzIHtAbGluayAjdW5ncm91cGVkSXRlbXN9IGZyb20gb3ZlcmZsb3dpbmcgKHdyYXBwaW5nIHRvIHRoZSBuZXh0IHJvdykKICAgKiB1cG9uIHJlc2l6ZSB3aGVuIHRoZXJlIGlzIGxpdHRsZSBzcGFjZSBhdmFpbGFibGUuIEluc3RlYWQsIHRoZSB0b29sYmFyIGl0ZW1zIGFyZSBtb3ZlZCB0byB0aGUKICAgKiB7QGxpbmsgI2dyb3VwZWRJdGVtc30gY29sbGVjdGlvbiBhbmQgZGlzcGxheWVkIGluIGEgZHJvcGRvd24gYXQgdGhlIGVuZCBvZiB0aGUgcm93ICh3aGljaCBoYXMgaXRzIG93biBuZXN0ZWQgdG9vbGJhcikuCiAgICoKICAgKiBXaGVuIGNhbGxlZCwgdGhlIHRvb2xiYXIgd2lsbCBhdXRvbWF0aWNhbGx5IGFuYWx5emUgdGhlIGxvY2F0aW9uIG9mIGl0cyB7QGxpbmsgI3VuZ3JvdXBlZEl0ZW1zfSBhbmQgImdyb3VwIgogICAqIHRoZW0gaW4gdGhlIGRyb3Bkb3duIGlmIG5lY2Vzc2FyeS4gSXQgd2lsbCBhbHNvIG9ic2VydmUgdGhlIGJyb3dzZXIgd2luZG93IGZvciBzaXplIGNoYW5nZXMgaW4KICAgKiB0aGUgZnV0dXJlIGFuZCByZXNwb25kIHRvIHRoZW0gYnkgZ3JvdXBpbmcgbW9yZSBpdGVtcyBvciByZXZlcnRpbmcgYWxyZWFkeSBncm91cGVkIGJhY2ssIGRlcGVuZGluZwogICAqIG9uIHRoZSB2aXN1YWwgc3BhY2UgYXZhaWxhYmxlLgogICAqCiAgICogQHByaXZhdGUKICAgKi8KCgogIF9lbmFibGVHcm91cGluZ09uUmVzaXplKCkgewogICAgbGV0IHByZXZpb3VzV2lkdGg7IC8vIFRPRE86IENvbnNpZGVyIGRlYm91bmNlLgoKICAgIHRoaXMucmVzaXplT2JzZXJ2ZXIgPSBnZXRSZXNpemVPYnNlcnZlcigoW2VudHJ5XSkgPT4gewogICAgICBpZiAoIXByZXZpb3VzV2lkdGggfHwgcHJldmlvdXNXaWR0aCAhPT0gZW50cnkuY29udGVudFJlY3Qud2lkdGgpIHsKICAgICAgICB0aGlzLl91cGRhdGVHcm91cGluZygpOwoKICAgICAgICBwcmV2aW91c1dpZHRoID0gZW50cnkuY29udGVudFJlY3Qud2lkdGg7CiAgICAgIH0KICAgIH0pOwogICAgdGhpcy5yZXNpemVPYnNlcnZlci5vYnNlcnZlKHRoaXMudmlld0VsZW1lbnQpOwoKICAgIHRoaXMuX3VwZGF0ZUdyb3VwaW5nKCk7CiAgfQogIC8qKgogICAqIFdoZW4gY2FsbGVkLCBpdCB3aWxsIHJlbW92ZSB0aGUgbGFzdCBpdGVtIGZyb20ge0BsaW5rICN1bmdyb3VwZWRJdGVtc30gYW5kIG1vdmUgaXQgYmFjawogICAqIHRvIHRoZSB7QGxpbmsgI2dyb3VwZWRJdGVtc30gY29sbGVjdGlvbi4KICAgKgogICAqIFRoZSBvcHBvc2l0ZSBvZiB7QGxpbmsgI191bmdyb3VwRmlyc3RJdGVtfS4KICAgKgogICAqIEBwcml2YXRlCiAgICovCgoKICBfZ3JvdXBMYXN0SXRlbSgpIHsKICAgIGlmICghdGhpcy5ncm91cGVkSXRlbXMubGVuZ3RoKSB7CiAgICAgIHRoaXMudmlld0NoaWxkcmVuLmFkZChuZXcgVG9vbGJhclNlcGFyYXRvclZpZXcoKSk7CiAgICAgIHRoaXMudmlld0NoaWxkcmVuLmFkZCh0aGlzLmdyb3VwZWRJdGVtc0Ryb3Bkb3duKTsKICAgICAgdGhpcy52aWV3Rm9jdXNUcmFja2VyLmFkZCh0aGlzLmdyb3VwZWRJdGVtc0Ryb3Bkb3duLmVsZW1lbnQpOwogICAgfQoKICAgIHRoaXMuZ3JvdXBlZEl0ZW1zLmFkZCh0aGlzLnVuZ3JvdXBlZEl0ZW1zLnJlbW92ZSh0aGlzLnVuZ3JvdXBlZEl0ZW1zLmxhc3QpLCAwKTsKICB9CiAgLyoqCiAgICogTW92ZXMgdGhlIHZlcnkgZmlyc3QgaXRlbSBiZWxvbmdpbmcgdG8ge0BsaW5rICNncm91cGVkSXRlbXN9IGJhY2sKICAgKiB0byB0aGUge0BsaW5rICN1bmdyb3VwZWRJdGVtc30gY29sbGVjdGlvbi4KICAgKgogICAqIFRoZSBvcHBvc2l0ZSBvZiB7QGxpbmsgI19ncm91cExhc3RJdGVtfS4KICAgKgogICAqIEBwcml2YXRlCiAgICovCgoKICBfdW5ncm91cEZpcnN0SXRlbSgpIHsKICAgIHRoaXMudW5ncm91cGVkSXRlbXMuYWRkKHRoaXMuZ3JvdXBlZEl0ZW1zLnJlbW92ZSh0aGlzLmdyb3VwZWRJdGVtcy5maXJzdCkpOwoKICAgIGlmICghdGhpcy5ncm91cGVkSXRlbXMubGVuZ3RoKSB7CiAgICAgIHRoaXMudmlld0NoaWxkcmVuLnJlbW92ZSh0aGlzLmdyb3VwZWRJdGVtc0Ryb3Bkb3duKTsKICAgICAgdGhpcy52aWV3Q2hpbGRyZW4ucmVtb3ZlKHRoaXMudmlld0NoaWxkcmVuLmxhc3QpOwogICAgICB0aGlzLnZpZXdGb2N1c1RyYWNrZXIucmVtb3ZlKHRoaXMuZ3JvdXBlZEl0ZW1zRHJvcGRvd24uZWxlbWVudCk7CiAgICB9CiAgfQogIC8qKgogICAqIENyZWF0ZXMgdGhlIHtAbGluayAjZ3JvdXBlZEl0ZW1zRHJvcGRvd259IHRoYXQgaG9zdHMgdGhlIG1lbWJlcnMgb2YgdGhlIHtAbGluayAjZ3JvdXBlZEl0ZW1zfQogICAqIGNvbGxlY3Rpb24gd2hlbiB0aGVyZSBpcyBub3QgZW5vdWdoIHNwYWNlIGluIHRoZSB0b29sYmFyIHRvIGRpc3BsYXkgYWxsIGl0ZW1zIGluIGEgc2luZ2xlIHJvdy4KICAgKgogICAqIEBwcml2YXRlCiAgICogQHJldHVybnMge21vZHVsZTp1aS9kcm9wZG93bi9kcm9wZG93bnZpZXd+RHJvcGRvd25WaWV3fQogICAqLwoKCiAgX2NyZWF0ZUdyb3VwZWRJdGVtc0Ryb3Bkb3duKCkgewogICAgY29uc3QgbG9jYWxlID0gdGhpcy52aWV3TG9jYWxlOwogICAgY29uc3QgdCA9IGxvY2FsZS50OwogICAgY29uc3QgZHJvcGRvd24gPSBjcmVhdGVEcm9wZG93bihsb2NhbGUpOwogICAgZHJvcGRvd24uY2xhc3MgPSAnY2stdG9vbGJhcl9fZ3JvdXBlZC1kcm9wZG93bic7IC8vIE1ha2Ugc3VyZSB0aGUgZHJvcGRvd24gbmV2ZXIgc3RpY2tzIG91dCB0byB0aGUgbGVmdC9yaWdodC4gSXQgc2hvdWxkIGJlIHVuZGVyIHRoZSBtYWluIHRvb2xiYXIuCiAgICAvLyAoaHR0cHM6Ly9naXRodWIuY29tL2NrZWRpdG9yL2NrZWRpdG9yNS9pc3N1ZXMvNTYwOCkKCiAgICBkcm9wZG93bi5wYW5lbFBvc2l0aW9uID0gbG9jYWxlLnVpTGFuZ3VhZ2VEaXJlY3Rpb24gPT09ICdsdHInID8gJ3N3JyA6ICdzZSc7CiAgICBhZGRUb29sYmFyVG9Ecm9wZG93bihkcm9wZG93biwgW10pOwogICAgZHJvcGRvd24uYnV0dG9uVmlldy5zZXQoewogICAgICBsYWJlbDogdCgnU2hvdyBtb3JlIGl0ZW1zJyksCiAgICAgIHRvb2x0aXA6IHRydWUsCiAgICAgIGljb246IHZlcnRpY2FsRG90c0ljb24KICAgIH0pOyAvLyAxOjEgcGFzc+KAk3Rocm91Z2ggYmluZGluZy4KCiAgICBkcm9wZG93bi50b29sYmFyVmlldy5pdGVtcy5iaW5kVG8odGhpcy5ncm91cGVkSXRlbXMpLnVzaW5nKGl0ZW0gPT4gaXRlbSk7CiAgICByZXR1cm4gZHJvcGRvd247CiAgfQogIC8qKgogICAqIFVwZGF0ZXMgdGhlIHtAbGluayBtb2R1bGU6dWkvdG9vbGJhci90b29sYmFydmlld35Ub29sYmFyVmlldyNmb2N1c2FibGVzIGZvY3Vz4oCTY3ljbGVhYmxlIGl0ZW1zfQogICAqIGNvbGxlY3Rpb24gc28gaXQgcmVwcmVzZW50cyB0aGUgdXDigJN0b+KAk2RhdGUgc3RhdGUgb2YgdGhlIFVJIGZyb20gdGhlIHBlcnNwZWN0aXZlIG9mIHRoZSB1c2VyLgogICAqCiAgICogRm9yIGluc3RhbmNlLCB0aGUge0BsaW5rICNncm91cGVkSXRlbXNEcm9wZG93bn0gY2FuIHNob3cgdXAgYW5kIGhpZGUgYnV0IHdoZW4gaXQgaXMgdmlzaWJsZSwKICAgKiBpdCBtdXN0IGJlIHN1YmplY3QgdG8gZm9jdXMgY3ljbGluZyBpbiB0aGUgdG9vbGJhci4KICAgKgogICAqIFNlZSB0aGUge0BsaW5rIG1vZHVsZTp1aS90b29sYmFyL3Rvb2xiYXJ2aWV3flRvb2xiYXJWaWV3I2ZvY3VzYWJsZXMgY29sbGVjdGlvbn0gZG9jdW1lbnRhdGlvbgogICAqIHRvIGxlYXJuIG1vcmUgYWJvdXQgdGhlIHB1cnBvc2Ugb2YgdGhpcyBtZXRob2QuCiAgICoKICAgKiBAcHJpdmF0ZQogICAqLwoKCiAgX3VwZGF0ZUZvY3VzQ3ljbGVhYmxlSXRlbXMoKSB7CiAgICB0aGlzLnZpZXdGb2N1c2FibGVzLmNsZWFyKCk7CiAgICB0aGlzLnVuZ3JvdXBlZEl0ZW1zLm1hcChpdGVtID0+IHsKICAgICAgdGhpcy52aWV3Rm9jdXNhYmxlcy5hZGQoaXRlbSk7CiAgICB9KTsKCiAgICBpZiAodGhpcy5ncm91cGVkSXRlbXMubGVuZ3RoKSB7CiAgICAgIHRoaXMudmlld0ZvY3VzYWJsZXMuYWRkKHRoaXMuZ3JvdXBlZEl0ZW1zRHJvcGRvd24pOwogICAgfQogIH0KCn0KLyoqCiAqIE9wdGlvbnMgcGFzc2VkIHRvIHRoZSB7QGxpbmsgbW9kdWxlOnVpL3Rvb2xiYXIvdG9vbGJhcnZpZXd+VG9vbGJhclZpZXcjY29uc3RydWN0b3J9IG9mIHRoZSB0b29sYmFyLgogKgogKiBAaW50ZXJmYWNlIG1vZHVsZTp1aS90b29sYmFyL3Rvb2xiYXJ2aWV3flRvb2xiYXJPcHRpb25zCiAqLwoKLyoqCiAqIFdoZW4gc2V0IHRvIGB0cnVlYCwgdGhlIHRvb2xiYXIgd2lsbCBhdXRvbWF0aWNhbGx5IGdyb3VwIHtAbGluayBtb2R1bGU6dWkvdG9vbGJhci90b29sYmFydmlld35Ub29sYmFyVmlldyNpdGVtc30gdGhhdAogKiB3b3VsZCBub3JtYWxseSB3cmFwIHRvIHRoZSBuZXh0IGxpbmUgd2hlbiB0aGVyZSBpcyBub3QgZW5vdWdoIHNwYWNlIHRvIGRpc3BsYXkgdGhlbSBpbiBhIHNpbmdsZSByb3csIGZvcgogKiBpbnN0YW5jZSwgaWYgdGhlIHBhcmVudCBjb250YWluZXIgb2YgdGhlIHRvb2xiYXIgaXMgbmFycm93LgogKgogKiBAbWVtYmVyIHtCb29sZWFufSBtb2R1bGU6dWkvdG9vbGJhci90b29sYmFydmlld35Ub29sYmFyT3B0aW9ucyNzaG91bGRHcm91cFdoZW5GdWxsCiAqLwoKLyoqCiAqIEEgY2xhc3MgaW50ZXJmYWNlIGRlZmluaW5nIHRoZSBiZWhhdmlvciBvZiB0aGUge0BsaW5rIG1vZHVsZTp1aS90b29sYmFyL3Rvb2xiYXJ2aWV3flRvb2xiYXJWaWV3fS4KICoKICogVG9vbGJhciBiZWhhdmlvcnMgZXh0ZW5kIGl0cyBsb29rIGFuZCBmdW5jdGlvbmFsaXR5IGFuZCBoYXZlIGFuIGltcGFjdCBvbiB0aGUKICoge0BsaW5rIG1vZHVsZTp1aS90b29sYmFyL3Rvb2xiYXJ2aWV3flRvb2xiYXJWaWV3I2VsZW1lbnR9IHRlbXBsYXRlIG9yCiAqIHtAbGluayBtb2R1bGU6dWkvdG9vbGJhci90b29sYmFydmlld35Ub29sYmFyVmlldyNyZW5kZXIgcmVuZGVyaW5nfS4gVGhleSBjYW4gYmUgZW5hYmxlZAogKiBjb25kaXRpb25hbGx5LCBlLmcuIGRlcGVuZGluZyBvbiB0aGUgY29uZmlndXJhdGlvbiBvZiB0aGUgdG9vbGJhci4KICoKICogQHByaXZhdGUKICogQGludGVyZmFjZSBtb2R1bGU6dWkvdG9vbGJhci90b29sYmFydmlld35Ub29sYmFyQmVoYXZpb3IKICovCgovKioKICogQ3JlYXRlcyBhIG5ldyB0b29sYmFyIGJlaGF2aW9yIGluc3RhbmNlLgogKgogKiBUaGUgaW5zdGFuY2UgaXMgY3JlYXRlZCBpbiB0aGUge0BsaW5rIG1vZHVsZTp1aS90b29sYmFyL3Rvb2xiYXJ2aWV3flRvb2xiYXJWaWV3I2NvbnN0cnVjdG9yfSBvZiB0aGUgdG9vbGJhci4KICogVGhpcyBpcyB0aGUgcmlnaHQgcGxhY2UgdG8gZXh0ZW5kIHRoZSB7QGxpbmsgbW9kdWxlOnVpL3Rvb2xiYXIvdG9vbGJhcnZpZXd+VG9vbGJhclZpZXcjdGVtcGxhdGV9IG9mCiAqIHRoZSB0b29sYmFyLCBkZWZpbmUgZXh0cmEgdG9vbGJhciBwcm9wZXJ0aWVzLCBldGMuCiAqCiAqIEBtZXRob2QgI2NvbnN0cnVjdG9yCiAqIEBwYXJhbSB7bW9kdWxlOnVpL3Rvb2xiYXIvdG9vbGJhcnZpZXd+VG9vbGJhclZpZXd9IHZpZXcgQW4gaW5zdGFuY2Ugb2YgdGhlIHRvb2xiYXIgdGhhdCB0aGlzIGJlaGF2aW9yIGlzIGFkZGVkIHRvLgogKi8KCi8qKgogKiBBIG1ldGhvZCBjYWxsZWQgYWZ0ZXIgdGhlIHRvb2xiYXIgaGFzIGJlZW4ge0BsaW5rIG1vZHVsZTp1aS90b29sYmFyL3Rvb2xiYXJ2aWV3flRvb2xiYXJWaWV3I3JlbmRlciByZW5kZXJlZH0uCiAqIEl0IGNhbiBiZSB1c2VkIHRvLCBmb3IgZXhhbXBsZSwgY3VzdG9taXplIHRoZSBiZWhhdmlvciBvZiB0aGUgdG9vbGJhciB3aGVuIGl0cyB7QGxpbmsgbW9kdWxlOnVpL3Rvb2xiYXIvdG9vbGJhcnZpZXd+VG9vbGJhclZpZXcjZWxlbWVudH0KICogaXMgYXZhaWxhYmxlLgogKgogKiBAcmVhZG9ubHkKICogQG1lbWJlciB7RnVuY3Rpb259ICNyZW5kZXIKICogQHBhcmFtIHttb2R1bGU6dWkvdG9vbGJhci90b29sYmFydmlld35Ub29sYmFyVmlld30gdmlldyBBbiBpbnN0YW5jZSBvZiB0aGUgdG9vbGJhciBiZWluZyByZW5kZXJlZC4KICovCgovKioKICogQSBtZXRob2QgY2FsbGVkIGFmdGVyIHRoZSB0b29sYmFyIGhhcyBiZWVuIHtAbGluayBtb2R1bGU6dWkvdG9vbGJhci90b29sYmFydmlld35Ub29sYmFyVmlldyNkZXN0cm95IGRlc3Ryb3llZH0uCiAqIEl0IGFsbG93cyBjbGVhbmluZyB1cCBhZnRlciB0aGUgdG9vbGJhciBiZWhhdmlvciwgZm9yIGluc3RhbmNlLCB0aGlzIGlzIHRoZSByaWdodCBwbGFjZSB0byBkZXRhY2gKICogZXZlbnQgbGlzdGVuZXJzLCBmcmVlIHVwIHJlZmVyZW5jZXMsIGV0Yy4KICoKICogQHJlYWRvbmx5CiAqIEBtZW1iZXIge0Z1bmN0aW9ufSAjZGVzdHJveQogKi8="},{"version":3,"sources":["/Users/antonyching/Desktop/project/new-builder-demo/node_modules/@ckeditor/ckeditor5-ui/src/toolbar/toolbarview.js"],"names":["View","FocusTracker","FocusCycler","KeystrokeHandler","ToolbarSeparatorView","getResizeObserver","preventDefault","Rect","global","createDropdown","addToolbarToDropdown","attachLinkToDocumentation","verticalDotsIcon","ToolbarView","constructor","locale","options","bind","bindTemplate","t","set","items","createCollection","focusTracker","keystrokes","itemsView","ItemsView","children","add","focusables","_focusCycler","keystrokeHandler","actions","focusPrevious","focusNext","setTemplate","tag","attributes","class","to","role","on","mousedown","_behavior","shouldGroupWhenFull","DynamicGrouping","StaticLayout","render","item","element","evt","remove","listenTo","destroy","focus","focusFirst","focusLast","fillFromConfig","config","factory","map","name","has","create","console","warn","view","bindTo","using","extendTemplate","if","viewChildren","viewFocusables","viewItemsView","viewFocusTracker","viewLocale","ungroupedItems","groupedItems","groupedItemsDropdown","_createGroupedItemsDropdown","resizeObserver","cachedPadding","_updateFocusCycleableItems","index","length","_updateGrouping","viewElement","_enableGroupingOnResize","disconnect","ownerDocument","body","contains","wereItemsGrouped","_areItemsOverflowing","_groupLastItem","_ungroupFirstItem","uiLanguageDirection","lastChildRect","lastChild","toolbarRect","computedStyle","window","getComputedStyle","paddingProperty","Number","parseInt","right","left","previousWidth","entry","contentRect","width","observe","last","first","dropdown","panelPosition","buttonView","label","tooltip","icon","toolbarView","clear"],"mappings":"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","sourcesContent":["/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module ui/toolbar/toolbarview\n */\n\n/* globals console */\n\nimport View from '../view';\nimport FocusTracker from '@ckeditor/ckeditor5-utils/src/focustracker';\nimport FocusCycler from '../focuscycler';\nimport KeystrokeHandler from '@ckeditor/ckeditor5-utils/src/keystrokehandler';\nimport ToolbarSeparatorView from './toolbarseparatorview';\nimport getResizeObserver from '@ckeditor/ckeditor5-utils/src/dom/getresizeobserver';\nimport preventDefault from '../bindings/preventdefault.js';\nimport Rect from '@ckeditor/ckeditor5-utils/src/dom/rect';\nimport global from '@ckeditor/ckeditor5-utils/src/dom/global';\nimport { createDropdown, addToolbarToDropdown } from '../dropdown/utils';\nimport { attachLinkToDocumentation } from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\nimport verticalDotsIcon from '@ckeditor/ckeditor5-core/theme/icons/three-vertical-dots.svg';\n\nimport '../../theme/components/toolbar/toolbar.css';\n\n/**\n * The toolbar view class.\n *\n * @extends module:ui/view~View\n * @implements module:ui/dropdown/dropdownpanelfocusable~DropdownPanelFocusable\n */\nexport default class ToolbarView extends View {\n\t/**\n\t * Creates an instance of the {@link module:ui/toolbar/toolbarview~ToolbarView} class.\n\t *\n\t * Also see {@link #render}.\n\t *\n\t * @param {module:utils/locale~Locale} locale The localization services instance.\n\t * @param {module:ui/toolbar/toolbarview~ToolbarOptions} [options] Configuration options of the toolbar.\n\t */\n\tconstructor( locale, options ) {\n\t\tsuper( locale );\n\n\t\tconst bind = this.bindTemplate;\n\t\tconst t = this.t;\n\n\t\t/**\n\t\t * A reference to the options object passed to the constructor.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:ui/toolbar/toolbarview~ToolbarOptions}\n\t\t */\n\t\tthis.options = options || {};\n\n\t\t/**\n\t\t * Label used by assistive technologies to describe this toolbar element.\n\t\t *\n\t\t * @default 'Editor toolbar'\n\t\t * @member {String} #ariaLabel\n\t\t */\n\t\tthis.set( 'ariaLabel', t( 'Editor toolbar' ) );\n\n\t\t/**\n\t\t * A collection of toolbar items (buttons, dropdowns, etc.).\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:ui/viewcollection~ViewCollection}\n\t\t */\n\t\tthis.items = this.createCollection();\n\n\t\t/**\n\t\t * Tracks information about the DOM focus in the toolbar.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:utils/focustracker~FocusTracker}\n\t\t */\n\t\tthis.focusTracker = new FocusTracker();\n\n\t\t/**\n\t\t * An instance of the {@link module:utils/keystrokehandler~KeystrokeHandler}\n\t\t * to handle keyboard navigation in the toolbar.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:utils/keystrokehandler~KeystrokeHandler}\n\t\t */\n\t\tthis.keystrokes = new KeystrokeHandler();\n\n\t\t/**\n\t\t * An additional CSS class added to the {@link #element}.\n\t\t *\n\t\t * @observable\n\t\t * @member {String} #class\n\t\t */\n\t\tthis.set( 'class' );\n\n\t\t/**\n\t\t * A (child) view containing {@link #items toolbar items}.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:ui/toolbar/toolbarview~ItemsView}\n\t\t */\n\t\tthis.itemsView = new ItemsView( locale );\n\n\t\t/**\n\t\t * A top–level collection aggregating building blocks of the toolbar.\n\t\t *\n\t\t *\t┌───────────────── ToolbarView ─────────────────┐\n\t\t *\t| ┌──────────────── #children ────────────────┐ |\n\t\t *\t| |   ┌──────────── #itemsView ───────────┐   | |\n\t\t *\t| |   | [ item1 ] [ item2 ] ... [ itemN ] |   | |\n\t\t *\t| |   └──────────────────────────────────-┘   | |\n\t\t *\t| └───────────────────────────────────────────┘ |\n\t\t *\t└───────────────────────────────────────────────┘\n\t\t *\n\t\t * By default, it contains the {@link #itemsView} but it can be extended with additional\n\t\t * UI elements when necessary.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:ui/viewcollection~ViewCollection}\n\t\t */\n\t\tthis.children = this.createCollection();\n\t\tthis.children.add( this.itemsView );\n\n\t\t/**\n\t\t * A collection of {@link #items} that take part in the focus cycling\n\t\t * (i.e. navigation using the keyboard). Usually, it contains a subset of {@link #items} with\n\t\t * some optional UI elements that also belong to the toolbar and should be focusable\n\t\t * by the user.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:ui/viewcollection~ViewCollection}\n\t\t */\n\t\tthis.focusables = this.createCollection();\n\n\t\t/**\n\t\t * Controls the orientation of toolbar items. Only available when\n\t\t * {@link module:ui/toolbar/toolbarview~ToolbarOptions#shouldGroupWhenFull dynamic items grouping}\n\t\t * is **disabled**.\n\t\t *\n\t\t * @observable\n\t\t * @member {Boolean} #isVertical\n\t\t */\n\n\t\t/**\n\t\t * Helps cycling over {@link #focusables focusable items} in the toolbar.\n\t\t *\n\t\t * @readonly\n\t\t * @protected\n\t\t * @member {module:ui/focuscycler~FocusCycler}\n\t\t */\n\t\tthis._focusCycler = new FocusCycler( {\n\t\t\tfocusables: this.focusables,\n\t\t\tfocusTracker: this.focusTracker,\n\t\t\tkeystrokeHandler: this.keystrokes,\n\t\t\tactions: {\n\t\t\t\t// Navigate toolbar items backwards using the arrow[left,up] keys.\n\t\t\t\tfocusPrevious: [ 'arrowleft', 'arrowup' ],\n\n\t\t\t\t// Navigate toolbar items forwards using the arrow[right,down] keys.\n\t\t\t\tfocusNext: [ 'arrowright', 'arrowdown' ]\n\t\t\t}\n\t\t} );\n\n\t\tthis.setTemplate( {\n\t\t\ttag: 'div',\n\t\t\tattributes: {\n\t\t\t\tclass: [\n\t\t\t\t\t'ck',\n\t\t\t\t\t'ck-toolbar',\n\t\t\t\t\tbind.to( 'class' )\n\t\t\t\t],\n\t\t\t\trole: 'toolbar',\n\t\t\t\t'aria-label': bind.to( 'ariaLabel' )\n\t\t\t},\n\n\t\t\tchildren: this.children,\n\n\t\t\ton: {\n\t\t\t\t// https://github.com/ckeditor/ckeditor5-ui/issues/206\n\t\t\t\tmousedown: preventDefault( this )\n\t\t\t}\n\t\t} );\n\n\t\t/**\n\t\t * An instance of the active toolbar behavior that shapes its look and functionality.\n\t\t *\n\t\t * See {@link module:ui/toolbar/toolbarview~ToolbarBehavior} to learn more.\n\t\t *\n\t\t * @protected\n\t\t * @readonly\n\t\t * @member {module:ui/toolbar/toolbarview~ToolbarBehavior}\n\t\t */\n\t\tthis._behavior = this.options.shouldGroupWhenFull ? new DynamicGrouping( this ) : new StaticLayout( this );\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\trender() {\n\t\tsuper.render();\n\n\t\t// Children added before rendering should be known to the #focusTracker.\n\t\tfor ( const item of this.items ) {\n\t\t\tthis.focusTracker.add( item.element );\n\t\t}\n\n\t\tthis.items.on( 'add', ( evt, item ) => {\n\t\t\tthis.focusTracker.add( item.element );\n\t\t} );\n\n\t\tthis.items.on( 'remove', ( evt, item ) => {\n\t\t\tthis.focusTracker.remove( item.element );\n\t\t} );\n\n\t\t// Start listening for the keystrokes coming from #element.\n\t\tthis.keystrokes.listenTo( this.element );\n\n\t\tthis._behavior.render( this );\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tdestroy() {\n\t\tthis._behavior.destroy();\n\n\t\treturn super.destroy();\n\t}\n\n\t/**\n\t * Focuses the first focusable in {@link #focusables}.\n\t */\n\tfocus() {\n\t\tthis._focusCycler.focusFirst();\n\t}\n\n\t/**\n\t * Focuses the last focusable in {@link #focusables}.\n\t */\n\tfocusLast() {\n\t\tthis._focusCycler.focusLast();\n\t}\n\n\t/**\n\t * A utility that expands the plain toolbar configuration into\n\t * {@link module:ui/toolbar/toolbarview~ToolbarView#items} using a given component factory.\n\t *\n\t * @param {Array.<String>} config The toolbar items configuration.\n\t * @param {module:ui/componentfactory~ComponentFactory} factory A factory producing toolbar items.\n\t */\n\tfillFromConfig( config, factory ) {\n\t\tconfig.map( name => {\n\t\t\tif ( name == '|' ) {\n\t\t\t\tthis.items.add( new ToolbarSeparatorView() );\n\t\t\t} else if ( factory.has( name ) ) {\n\t\t\t\tthis.items.add( factory.create( name ) );\n\t\t\t} else {\n\t\t\t\t/**\n\t\t\t\t * There was a problem processing the configuration of the toolbar. The item with the given\n\t\t\t\t * name does not exist so it was omitted when rendering the toolbar.\n\t\t\t\t *\n\t\t\t\t * This warning usually shows up when the {@link module:core/plugin~Plugin} which is supposed\n\t\t\t\t * to provide a toolbar item has not been loaded or there is a typo in the configuration.\n\t\t\t\t *\n\t\t\t\t * Make sure the plugin responsible for this toolbar item is loaded and the toolbar configuration\n\t\t\t\t * is correct, e.g. {@link module:basic-styles/bold~Bold} is loaded for the `'bold'` toolbar item.\n\t\t\t\t *\n\t\t\t\t * You can use the following snippet to retrieve all available toolbar items:\n\t\t\t\t *\n\t\t\t\t *\t\tArray.from( editor.ui.componentFactory.names() );\n\t\t\t\t *\n\t\t\t\t * @error toolbarview-item-unavailable\n\t\t\t\t * @param {String} name The name of the component.\n\t\t\t\t */\n\t\t\t\tconsole.warn( attachLinkToDocumentation(\n\t\t\t\t\t'toolbarview-item-unavailable: The requested toolbar item is unavailable.' ), { name } );\n\t\t\t}\n\t\t} );\n\t}\n}\n\n/**\n * An inner block of the {@link module:ui/toolbar/toolbarview~ToolbarView} hosting its\n * {@link module:ui/toolbar/toolbarview~ToolbarView#items}.\n *\n * @private\n * @extends module:ui/view~View\n */\nclass ItemsView extends View {\n\t/**\n\t * @inheritDoc\n\t */\n\tconstructor( locale ) {\n\t\tsuper( locale );\n\n\t\t/**\n\t\t * A collection of items (buttons, dropdowns, etc.).\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:ui/viewcollection~ViewCollection}\n\t\t */\n\t\tthis.children = this.createCollection();\n\n\t\tthis.setTemplate( {\n\t\t\ttag: 'div',\n\t\t\tattributes: {\n\t\t\t\tclass: [\n\t\t\t\t\t'ck',\n\t\t\t\t\t'ck-toolbar__items'\n\t\t\t\t],\n\t\t\t},\n\t\t\tchildren: this.children\n\t\t} );\n\t}\n}\n\n/**\n * A toolbar behavior that makes it static and unresponsive to the changes of the environment.\n * At the same time, it also makes it possible to display a toolbar with a vertical layout\n * using the {@link module:ui/toolbar/toolbarview~ToolbarView#isVertical} property.\n *\n * @private\n * @implements module:ui/toolbar/toolbarview~ToolbarBehavior\n */\nclass StaticLayout {\n\t/**\n\t * Creates an instance of the {@link module:ui/toolbar/toolbarview~StaticLayout} toolbar\n\t * behavior.\n\t *\n\t * @param {module:ui/toolbar/toolbarview~ToolbarView} view An instance of the toolbar that this behavior\n\t * is added to.\n\t */\n\tconstructor( view ) {\n\t\tconst bind = view.bindTemplate;\n\n\t\t// Static toolbar can be vertical when needed.\n\t\tview.set( 'isVertical', false );\n\n\t\t// 1:1 pass–through binding, all ToolbarView#items are visible.\n\t\tview.itemsView.children.bindTo( view.items ).using( item => item );\n\n\t\t// 1:1 pass–through binding, all ToolbarView#items are focusable.\n\t\tview.focusables.bindTo( view.items ).using( item => item );\n\n\t\tview.extendTemplate( {\n\t\t\tattributes: {\n\t\t\t\tclass: [\n\t\t\t\t\t// When vertical, the toolbar has an additional CSS class.\n\t\t\t\t\tbind.if( 'isVertical', 'ck-toolbar_vertical' )\n\t\t\t\t]\n\t\t\t}\n\t\t} );\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\trender() {}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tdestroy() {}\n}\n\n/**\n * A toolbar behavior that makes the items respond to changes in the geometry.\n *\n * In a nutshell, it groups {@link module:ui/toolbar/toolbarview~ToolbarView#items}\n * that do not fit visually into a single row of the toolbar (due to limited space).\n * Items that do not fit are aggregated in a dropdown displayed at the end of the toolbar.\n *\n *\t┌──────────────────────────────────────── ToolbarView ──────────────────────────────────────────┐\n *\t| ┌─────────────────────────────────────── #children ─────────────────────────────────────────┐ |\n *\t| |   ┌─────── #itemsView ────────┐ ┌──────────────────────┐ ┌── #groupedItemsDropdown ───┐   | |\n *\t| |   |       #ungroupedItems     | | ToolbarSeparatorView | |        #groupedItems       |   | |\n *\t| |   └──────────────────────────-┘ └──────────────────────┘ └────────────────────────────┘   | |\n *\t| |                                  \\---------- only when toolbar items overflow --------/    | |\n *\t| └───────────────────────────────────────────────────────────────────────────────────────────┘ |\n *\t└───────────────────────────────────────────────────────────────────────────────────────────────┘\n *\n * @private\n * @implements module:ui/toolbar/toolbarview~ToolbarBehavior\n */\nclass DynamicGrouping {\n\t/**\n\t * Creates an instance of the {@link module:ui/toolbar/toolbarview~DynamicGrouping} toolbar\n\t * behavior.\n\t *\n\t * @param {module:ui/toolbar/toolbarview~ToolbarView} view An instance of the toolbar that this behavior\n\t * is added to.\n\t */\n\tconstructor( view ) {\n\t\t/**\n\t\t * A collection of toolbar children.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:ui/viewcollection~ViewCollection}\n\t\t */\n\t\tthis.viewChildren = view.children;\n\n\t\t/**\n\t\t * A collection of focusable toolbar elements.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:ui/viewcollection~ViewCollection}\n\t\t */\n\t\tthis.viewFocusables = view.focusables;\n\n\t\t/**\n\t\t * A view containing toolbar items.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:ui/toolbar/toolbarview~ItemsView}\n\t\t */\n\t\tthis.viewItemsView = view.itemsView;\n\n\t\t/**\n\t\t * Toolbar focus tracker.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:utils/focustracker~FocusTracker}\n\t\t */\n\t\tthis.viewFocusTracker = view.focusTracker;\n\n\t\t/**\n\t\t * Toolbar locale.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:utils/locale~Locale}\n\t\t */\n\t\tthis.viewLocale = view.locale;\n\n\t\t/**\n\t\t * Toolbar element.\n\t\t *\n\t\t * @readonly\n\t\t * @member {HTMLElement} #viewElement\n\t\t */\n\n\t\t/**\n\t\t * A subset of toolbar {@link module:ui/toolbar/toolbarview~ToolbarView#items}.\n\t\t * Aggregates items that fit into a single row of the toolbar and were not {@link #groupedItems grouped}\n\t\t * into a {@link #groupedItemsDropdown dropdown}. Items of this collection are displayed in the\n\t\t * {@link module:ui/toolbar/toolbarview~ToolbarView#itemsView}.\n\t\t *\n\t\t * When none of the {@link module:ui/toolbar/toolbarview~ToolbarView#items} were grouped, it\n\t\t * matches the {@link module:ui/toolbar/toolbarview~ToolbarView#items} collection in size and order.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:ui/viewcollection~ViewCollection}\n\t\t */\n\t\tthis.ungroupedItems = view.createCollection();\n\n\t\t/**\n\t\t * A subset of toolbar {@link module:ui/toolbar/toolbarview~ToolbarView#items}.\n\t\t * A collection of the toolbar items that do not fit into a single row of the toolbar.\n\t\t * Grouped items are displayed in a dedicated {@link #groupedItemsDropdown dropdown}.\n\t\t *\n\t\t * When none of the {@link module:ui/toolbar/toolbarview~ToolbarView#items} were grouped,\n\t\t * this collection is empty.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:ui/viewcollection~ViewCollection}\n\t\t */\n\t\tthis.groupedItems = view.createCollection();\n\n\t\t/**\n\t\t * The dropdown that aggregates {@link #groupedItems grouped items} that do not fit into a single\n\t\t * row of the toolbar. It is displayed on demand as the last of\n\t\t * {@link module:ui/toolbar/toolbarview~ToolbarView#children toolbar children} and offers another\n\t\t * (nested) toolbar which displays items that would normally overflow.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:ui/dropdown/dropdownview~DropdownView}\n\t\t */\n\t\tthis.groupedItemsDropdown = this._createGroupedItemsDropdown();\n\n\t\t/**\n\t\t * An instance of the resize observer that helps dynamically determine the geometry of the toolbar\n\t\t * and manage items that do not fit into a single row.\n\t\t *\n\t\t * **Note:** Created in {@link #_enableGroupingOnResize}.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:utils/dom/getresizeobserver~ResizeObserver}\n\t\t */\n\t\tthis.resizeObserver = null;\n\n\t\t/**\n\t\t * A cached value of the horizontal padding style used by {@link #_updateGrouping}\n\t\t * to manage the {@link module:ui/toolbar/toolbarview~ToolbarView#items} that do not fit into\n\t\t * a single toolbar line. This value can be reused between updates because it is unlikely that\n\t\t * the padding will change and re–using `Window.getComputedStyle()` is expensive.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Number}\n\t\t */\n\t\tthis.cachedPadding = null;\n\n\t\t// Only those items that were not grouped are visible to the user.\n\t\tview.itemsView.children.bindTo( this.ungroupedItems ).using( item => item );\n\n\t\t// Make sure all #items visible in the main space of the toolbar are \"focuscycleable\".\n\t\tthis.ungroupedItems.on( 'add', this._updateFocusCycleableItems.bind( this ) );\n\t\tthis.ungroupedItems.on( 'remove', this._updateFocusCycleableItems.bind( this ) );\n\n\t\t// Make sure the #groupedItemsDropdown is also included in cycling when it appears.\n\t\tview.children.on( 'add', this._updateFocusCycleableItems.bind( this ) );\n\t\tview.children.on( 'remove', this._updateFocusCycleableItems.bind( this ) );\n\n\t\t// ToolbarView#items is dynamic. When an item is added, it should be automatically\n\t\t// represented in either grouped or ungrouped items at the right index.\n\t\t// In other words #items == concat( #ungroupedItems, #groupedItems )\n\t\t// (in length and order).\n\t\tview.items.on( 'add', ( evt, item, index ) => {\n\t\t\tif ( index > this.ungroupedItems.length ) {\n\t\t\t\tthis.groupedItems.add( item, index - this.ungroupedItems.length );\n\t\t\t} else {\n\t\t\t\tthis.ungroupedItems.add( item, index );\n\t\t\t}\n\n\t\t\t// When a new ungrouped item joins in and lands in #ungroupedItems, there's a chance it causes\n\t\t\t// the toolbar to overflow.\n\t\t\tthis._updateGrouping();\n\t\t} );\n\n\t\t// When an item is removed from ToolbarView#items, it should be automatically\n\t\t// removed from either grouped or ungrouped items.\n\t\tview.items.on( 'remove', ( evt, item, index ) => {\n\t\t\tif ( index > this.ungroupedItems.length ) {\n\t\t\t\tthis.groupedItems.remove( item );\n\t\t\t} else {\n\t\t\t\tthis.ungroupedItems.remove( item );\n\t\t\t}\n\n\t\t\t// Whether removed from grouped or ungrouped items, there is a chance\n\t\t\t// some new space is available and we could do some ungrouping.\n\t\t\tthis._updateGrouping();\n\t\t} );\n\n\t\tview.extendTemplate( {\n\t\t\tattributes: {\n\t\t\t\tclass: [\n\t\t\t\t\t// To group items dynamically, the toolbar needs a dedicated CSS class.\n\t\t\t\t\t'ck-toolbar_grouping'\n\t\t\t\t]\n\t\t\t}\n\t\t} );\n\t}\n\n\t/**\n\t * Enables dynamic items grouping based on the dimensions of the toolbar.\n\t *\n\t * @param {module:ui/toolbar/toolbarview~ToolbarView} view An instance of the toolbar that this behavior\n\t * is added to.\n\t */\n\trender( view ) {\n\t\tthis.viewElement = view.element;\n\n\t\tthis._enableGroupingOnResize();\n\t}\n\n\t/**\n\t * Cleans up the internals used by this behavior.\n\t */\n\tdestroy() {\n\t\t// The dropdown may not be in ToolbarView#children at the moment of toolbar destruction\n\t\t// so let's make sure it's actually destroyed along with the toolbar.\n\t\tthis.groupedItemsDropdown.destroy();\n\n\t\tthis.resizeObserver.disconnect();\n\t}\n\n\t/**\n\t * When called, it will check if any of the {@link #ungroupedItems} do not fit into a single row of the toolbar,\n\t * and it will move them to the {@link #groupedItems} when it happens.\n\t *\n\t * At the same time, it will also check if there is enough space in the toolbar for the first of the\n\t * {@link #groupedItems} to be returned back to {@link #ungroupedItems} and still fit into a single row\n\t * without the toolbar wrapping.\n\t *\n\t * @protected\n\t */\n\t_updateGrouping() {\n\t\t// Do no grouping–related geometry analysis when the toolbar is detached from visible DOM,\n\t\t// for instance before #render(), or after render but without a parent or a parent detached\n\t\t// from DOM. DOMRects won't work anyway and there will be tons of warning in the console and\n\t\t// nothing else.\n\t\tif ( !this.viewElement.ownerDocument.body.contains( this.viewElement ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet wereItemsGrouped;\n\n\t\t// Group #items as long as some wrap to the next row. This will happen, for instance,\n\t\t// when the toolbar is getting narrow and there is not enough space to display all items in\n\t\t// a single row.\n\t\twhile ( this._areItemsOverflowing ) {\n\t\t\tthis._groupLastItem();\n\n\t\t\twereItemsGrouped = true;\n\t\t}\n\n\t\t// If none were grouped now but there were some items already grouped before,\n\t\t// then, what the hell, maybe let's see if some of them can be ungrouped. This happens when,\n\t\t// for instance, the toolbar is stretching and there's more space in it than before.\n\t\tif ( !wereItemsGrouped && this.groupedItems.length ) {\n\t\t\t// Ungroup items as long as none are overflowing or there are none to ungroup left.\n\t\t\twhile ( this.groupedItems.length && !this._areItemsOverflowing ) {\n\t\t\t\tthis._ungroupFirstItem();\n\t\t\t}\n\n\t\t\t// If the ungrouping ended up with some item wrapping to the next row,\n\t\t\t// put it back to the group toolbar (\"undo the last ungroup\"). We don't know whether\n\t\t\t// an item will wrap or not until we ungroup it (that's a DOM/CSS thing) so this\n\t\t\t// clean–up is vital for the algorithm.\n\t\t\tif ( this._areItemsOverflowing ) {\n\t\t\t\tthis._groupLastItem();\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Returns `true` when {@link module:ui/toolbar/toolbarview~ToolbarView#element} children visually overflow,\n\t * for instance if the toolbar is narrower than its members. Returns `false` otherwise.\n\t *\n\t * @private\n\t * @type {Boolean}\n\t */\n\tget _areItemsOverflowing() {\n\t\t// An empty toolbar cannot overflow.\n\t\tif ( !this.ungroupedItems.length ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst element = this.viewElement;\n\t\tconst uiLanguageDirection = this.viewLocale.uiLanguageDirection;\n\t\tconst lastChildRect = new Rect( element.lastChild );\n\t\tconst toolbarRect = new Rect( element );\n\n\t\tif ( !this.cachedPadding ) {\n\t\t\tconst computedStyle = global.window.getComputedStyle( element );\n\t\t\tconst paddingProperty = uiLanguageDirection === 'ltr' ? 'paddingRight' : 'paddingLeft';\n\n\t\t\t// parseInt() is essential because of quirky floating point numbers logic and DOM.\n\t\t\t// If the padding turned out too big because of that, the grouped items dropdown would\n\t\t\t// always look (from the Rect perspective) like it overflows (while it's not).\n\t\t\tthis.cachedPadding = Number.parseInt( computedStyle[ paddingProperty ] );\n\t\t}\n\n\t\tif ( uiLanguageDirection === 'ltr' ) {\n\t\t\treturn lastChildRect.right > toolbarRect.right - this.cachedPadding;\n\t\t} else {\n\t\t\treturn lastChildRect.left < toolbarRect.left + this.cachedPadding;\n\t\t}\n\t}\n\n\t/**\n\t * Enables the functionality that prevents {@link #ungroupedItems} from overflowing (wrapping to the next row)\n\t * upon resize when there is little space available. Instead, the toolbar items are moved to the\n\t * {@link #groupedItems} collection and displayed in a dropdown at the end of the row (which has its own nested toolbar).\n\t *\n\t * When called, the toolbar will automatically analyze the location of its {@link #ungroupedItems} and \"group\"\n\t * them in the dropdown if necessary. It will also observe the browser window for size changes in\n\t * the future and respond to them by grouping more items or reverting already grouped back, depending\n\t * on the visual space available.\n\t *\n\t * @private\n\t */\n\t_enableGroupingOnResize() {\n\t\tlet previousWidth;\n\n\t\t// TODO: Consider debounce.\n\t\tthis.resizeObserver = getResizeObserver( ( [ entry ] ) => {\n\t\t\tif ( !previousWidth || previousWidth !== entry.contentRect.width ) {\n\t\t\t\tthis._updateGrouping();\n\n\t\t\t\tpreviousWidth = entry.contentRect.width;\n\t\t\t}\n\t\t} );\n\n\t\tthis.resizeObserver.observe( this.viewElement );\n\n\t\tthis._updateGrouping();\n\t}\n\n\t/**\n\t * When called, it will remove the last item from {@link #ungroupedItems} and move it back\n\t * to the {@link #groupedItems} collection.\n\t *\n\t * The opposite of {@link #_ungroupFirstItem}.\n\t *\n\t * @private\n\t */\n\t_groupLastItem() {\n\t\tif ( !this.groupedItems.length ) {\n\t\t\tthis.viewChildren.add( new ToolbarSeparatorView() );\n\t\t\tthis.viewChildren.add( this.groupedItemsDropdown );\n\t\t\tthis.viewFocusTracker.add( this.groupedItemsDropdown.element );\n\t\t}\n\n\t\tthis.groupedItems.add( this.ungroupedItems.remove( this.ungroupedItems.last ), 0 );\n\t}\n\n\t/**\n\t * Moves the very first item belonging to {@link #groupedItems} back\n\t * to the {@link #ungroupedItems} collection.\n\t *\n\t * The opposite of {@link #_groupLastItem}.\n\t *\n\t * @private\n\t */\n\t_ungroupFirstItem() {\n\t\tthis.ungroupedItems.add( this.groupedItems.remove( this.groupedItems.first ) );\n\n\t\tif ( !this.groupedItems.length ) {\n\t\t\tthis.viewChildren.remove( this.groupedItemsDropdown );\n\t\t\tthis.viewChildren.remove( this.viewChildren.last );\n\t\t\tthis.viewFocusTracker.remove( this.groupedItemsDropdown.element );\n\t\t}\n\t}\n\n\t/**\n\t * Creates the {@link #groupedItemsDropdown} that hosts the members of the {@link #groupedItems}\n\t * collection when there is not enough space in the toolbar to display all items in a single row.\n\t *\n\t * @private\n\t * @returns {module:ui/dropdown/dropdownview~DropdownView}\n\t */\n\t_createGroupedItemsDropdown() {\n\t\tconst locale = this.viewLocale;\n\t\tconst t = locale.t;\n\t\tconst dropdown = createDropdown( locale );\n\n\t\tdropdown.class = 'ck-toolbar__grouped-dropdown';\n\n\t\t// Make sure the dropdown never sticks out to the left/right. It should be under the main toolbar.\n\t\t// (https://github.com/ckeditor/ckeditor5/issues/5608)\n\t\tdropdown.panelPosition = locale.uiLanguageDirection === 'ltr' ? 'sw' : 'se';\n\n\t\taddToolbarToDropdown( dropdown, [] );\n\n\t\tdropdown.buttonView.set( {\n\t\t\tlabel: t( 'Show more items' ),\n\t\t\ttooltip: true,\n\t\t\ticon: verticalDotsIcon\n\t\t} );\n\n\t\t// 1:1 pass–through binding.\n\t\tdropdown.toolbarView.items.bindTo( this.groupedItems ).using( item => item );\n\n\t\treturn dropdown;\n\t}\n\n\t/**\n\t * Updates the {@link module:ui/toolbar/toolbarview~ToolbarView#focusables focus–cycleable items}\n\t * collection so it represents the up–to–date state of the UI from the perspective of the user.\n\t *\n\t * For instance, the {@link #groupedItemsDropdown} can show up and hide but when it is visible,\n\t * it must be subject to focus cycling in the toolbar.\n\t *\n\t * See the {@link module:ui/toolbar/toolbarview~ToolbarView#focusables collection} documentation\n\t * to learn more about the purpose of this method.\n\t *\n\t * @private\n\t */\n\t_updateFocusCycleableItems() {\n\t\tthis.viewFocusables.clear();\n\n\t\tthis.ungroupedItems.map( item => {\n\t\t\tthis.viewFocusables.add( item );\n\t\t} );\n\n\t\tif ( this.groupedItems.length ) {\n\t\t\tthis.viewFocusables.add( this.groupedItemsDropdown );\n\t\t}\n\t}\n}\n\n/**\n * Options passed to the {@link module:ui/toolbar/toolbarview~ToolbarView#constructor} of the toolbar.\n *\n * @interface module:ui/toolbar/toolbarview~ToolbarOptions\n */\n\n/**\n * When set to `true`, the toolbar will automatically group {@link module:ui/toolbar/toolbarview~ToolbarView#items} that\n * would normally wrap to the next line when there is not enough space to display them in a single row, for\n * instance, if the parent container of the toolbar is narrow.\n *\n * @member {Boolean} module:ui/toolbar/toolbarview~ToolbarOptions#shouldGroupWhenFull\n */\n\n/**\n * A class interface defining the behavior of the {@link module:ui/toolbar/toolbarview~ToolbarView}.\n *\n * Toolbar behaviors extend its look and functionality and have an impact on the\n * {@link module:ui/toolbar/toolbarview~ToolbarView#element} template or\n * {@link module:ui/toolbar/toolbarview~ToolbarView#render rendering}. They can be enabled\n * conditionally, e.g. depending on the configuration of the toolbar.\n *\n * @private\n * @interface module:ui/toolbar/toolbarview~ToolbarBehavior\n */\n\n/**\n * Creates a new toolbar behavior instance.\n *\n * The instance is created in the {@link module:ui/toolbar/toolbarview~ToolbarView#constructor} of the toolbar.\n * This is the right place to extend the {@link module:ui/toolbar/toolbarview~ToolbarView#template} of\n * the toolbar, define extra toolbar properties, etc.\n *\n * @method #constructor\n * @param {module:ui/toolbar/toolbarview~ToolbarView} view An instance of the toolbar that this behavior is added to.\n */\n\n/**\n * A method called after the toolbar has been {@link module:ui/toolbar/toolbarview~ToolbarView#render rendered}.\n * It can be used to, for example, customize the behavior of the toolbar when its {@link module:ui/toolbar/toolbarview~ToolbarView#element}\n * is available.\n *\n * @readonly\n * @member {Function} #render\n * @param {module:ui/toolbar/toolbarview~ToolbarView} view An instance of the toolbar being rendered.\n */\n\n/**\n * A method called after the toolbar has been {@link module:ui/toolbar/toolbarview~ToolbarView#destroy destroyed}.\n * It allows cleaning up after the toolbar behavior, for instance, this is the right place to detach\n * event listeners, free up references, etc.\n *\n * @readonly\n * @member {Function} #destroy\n */\n"]}]}