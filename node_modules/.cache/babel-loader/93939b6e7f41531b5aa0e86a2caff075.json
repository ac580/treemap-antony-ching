{"remainingRequest":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/babel-loader/lib/index.js!/Users/antonyching/Desktop/project/new-builder-demo/node_modules/@ckeditor/ckeditor5-media-embed/src/mediaembedcommand.js","dependencies":[{"path":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/@ckeditor/ckeditor5-media-embed/src/mediaembedcommand.js","mtime":499162500000},{"path":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/@ckeditor/ckeditor5-dev-webpack-plugin/lib/translatesourceloader.js","mtime":499162500000},{"path":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:LyoqCiAqIEBsaWNlbnNlIENvcHlyaWdodCAoYykgMjAwMy0yMDE5LCBDS1NvdXJjZSAtIEZyZWRlcmljbyBLbmFiYmVuLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKiBGb3IgbGljZW5zaW5nLCBzZWUgTElDRU5TRS5tZCBvciBodHRwczovL2NrZWRpdG9yLmNvbS9sZWdhbC9ja2VkaXRvci1vc3MtbGljZW5zZQogKi8KCi8qKgogKiBAbW9kdWxlIG1lZGlhLWVtYmVkL21lZGlhZW1iZWRjb21tYW5kCiAqLwppbXBvcnQgQ29tbWFuZCBmcm9tICdAY2tlZGl0b3IvY2tlZGl0b3I1LWNvcmUvc3JjL2NvbW1hbmQnOwppbXBvcnQgeyBmaW5kT3B0aW1hbEluc2VydGlvblBvc2l0aW9uIH0gZnJvbSAnQGNrZWRpdG9yL2NrZWRpdG9yNS13aWRnZXQvc3JjL3V0aWxzJzsKaW1wb3J0IHsgZ2V0U2VsZWN0ZWRNZWRpYU1vZGVsV2lkZ2V0LCBpbnNlcnRNZWRpYSB9IGZyb20gJy4vdXRpbHMnOwovKioKICogVGhlIGluc2VydCBtZWRpYSBjb21tYW5kLgogKgogKiBUaGUgY29tbWFuZCBpcyByZWdpc3RlcmVkIGJ5IHRoZSB7QGxpbmsgbW9kdWxlOm1lZGlhLWVtYmVkL21lZGlhZW1iZWRlZGl0aW5nfk1lZGlhRW1iZWRFZGl0aW5nfSBhcyBgJ21lZGlhRW1iZWQnYC4KICoKICogVG8gaW5zZXJ0IG1lZGlhIGF0IHRoZSBjdXJyZW50IHNlbGVjdGlvbiwgZXhlY3V0ZSB0aGUgY29tbWFuZCBhbmQgc3BlY2lmeSB0aGUgVVJMOgogKgogKgkJZWRpdG9yLmV4ZWN1dGUoICdtZWRpYUVtYmVkJywgJ2h0dHA6Ly91cmwudG8udGhlL21lZGlhJyApOwogKgogKiBAZXh0ZW5kcyBtb2R1bGU6Y29yZS9jb21tYW5kfkNvbW1hbmQKICovCgpleHBvcnQgZGVmYXVsdCBjbGFzcyBNZWRpYUVtYmVkQ29tbWFuZCBleHRlbmRzIENvbW1hbmQgewogIC8qKgogICAqIEBpbmhlcml0RG9jCiAgICovCiAgcmVmcmVzaCgpIHsKICAgIGNvbnN0IG1vZGVsID0gdGhpcy5lZGl0b3IubW9kZWw7CiAgICBjb25zdCBzZWxlY3Rpb24gPSBtb2RlbC5kb2N1bWVudC5zZWxlY3Rpb247CiAgICBjb25zdCBzY2hlbWEgPSBtb2RlbC5zY2hlbWE7CiAgICBjb25zdCBwb3NpdGlvbiA9IHNlbGVjdGlvbi5nZXRGaXJzdFBvc2l0aW9uKCk7CiAgICBjb25zdCBzZWxlY3RlZE1lZGlhID0gZ2V0U2VsZWN0ZWRNZWRpYU1vZGVsV2lkZ2V0KHNlbGVjdGlvbik7CiAgICBsZXQgcGFyZW50ID0gcG9zaXRpb24ucGFyZW50OwoKICAgIGlmIChwYXJlbnQgIT0gcGFyZW50LnJvb3QpIHsKICAgICAgcGFyZW50ID0gcGFyZW50LnBhcmVudDsKICAgIH0KCiAgICB0aGlzLnZhbHVlID0gc2VsZWN0ZWRNZWRpYSA/IHNlbGVjdGVkTWVkaWEuZ2V0QXR0cmlidXRlKCd1cmwnKSA6IG51bGw7CiAgICB0aGlzLmlzRW5hYmxlZCA9IHNjaGVtYS5jaGVja0NoaWxkKHBhcmVudCwgJ21lZGlhJyk7CiAgfQogIC8qKgogICAqIEV4ZWN1dGVzIHRoZSBjb21tYW5kLCB3aGljaCBlaXRoZXI6CiAgICoKICAgKiAqIHVwZGF0ZXMgdGhlIFVSTCBvZiB0aGUgc2VsZWN0ZWQgbWVkaWEsCiAgICogKiBpbnNlcnRzIHRoZSBuZXcgbWVkaWEgaW50byB0aGUgZWRpdG9yIGFuZCBwdXRzIHRoZSBzZWxlY3Rpb24gYXJvdW5kIGl0LgogICAqCiAgICogQGZpcmVzIGV4ZWN1dGUKICAgKiBAcGFyYW0ge1N0cmluZ30gdXJsIFRoZSBVUkwgb2YgdGhlIG1lZGlhLgogICAqLwoKCiAgZXhlY3V0ZSh1cmwpIHsKICAgIGNvbnN0IG1vZGVsID0gdGhpcy5lZGl0b3IubW9kZWw7CiAgICBjb25zdCBzZWxlY3Rpb24gPSBtb2RlbC5kb2N1bWVudC5zZWxlY3Rpb247CiAgICBjb25zdCBzZWxlY3RlZE1lZGlhID0gZ2V0U2VsZWN0ZWRNZWRpYU1vZGVsV2lkZ2V0KHNlbGVjdGlvbik7CgogICAgaWYgKHNlbGVjdGVkTWVkaWEpIHsKICAgICAgbW9kZWwuY2hhbmdlKHdyaXRlciA9PiB7CiAgICAgICAgd3JpdGVyLnNldEF0dHJpYnV0ZSgndXJsJywgdXJsLCBzZWxlY3RlZE1lZGlhKTsKICAgICAgfSk7CiAgICB9IGVsc2UgewogICAgICBjb25zdCBpbnNlcnRQb3NpdGlvbiA9IGZpbmRPcHRpbWFsSW5zZXJ0aW9uUG9zaXRpb24oc2VsZWN0aW9uLCBtb2RlbCk7CiAgICAgIGluc2VydE1lZGlhKG1vZGVsLCB1cmwsIGluc2VydFBvc2l0aW9uKTsKICAgIH0KICB9Cgp9"},{"version":3,"sources":["/Users/antonyching/Desktop/project/new-builder-demo/node_modules/@ckeditor/ckeditor5-media-embed/src/mediaembedcommand.js"],"names":["Command","findOptimalInsertionPosition","getSelectedMediaModelWidget","insertMedia","MediaEmbedCommand","refresh","model","editor","selection","document","schema","position","getFirstPosition","selectedMedia","parent","root","value","getAttribute","isEnabled","checkChild","execute","url","change","writer","setAttribute","insertPosition"],"mappings":"AAAA;;;;;AAKA;;;AAIA,OAAOA,OAAP,MAAoB,sCAApB;AACA,SAASC,4BAAT,QAA6C,sCAA7C;AACA,SAASC,2BAAT,EAAsCC,WAAtC,QAAyD,SAAzD;AAEA;;;;;;;;;;;;AAWA,eAAe,MAAMC,iBAAN,SAAgCJ,OAAhC,CAAwC;AACtD;;;AAGAK,EAAAA,OAAO,GAAG;AACT,UAAMC,KAAK,GAAG,KAAKC,MAAL,CAAYD,KAA1B;AACA,UAAME,SAAS,GAAGF,KAAK,CAACG,QAAN,CAAeD,SAAjC;AACA,UAAME,MAAM,GAAGJ,KAAK,CAACI,MAArB;AACA,UAAMC,QAAQ,GAAGH,SAAS,CAACI,gBAAV,EAAjB;AACA,UAAMC,aAAa,GAAGX,2BAA2B,CAAEM,SAAF,CAAjD;AAEA,QAAIM,MAAM,GAAGH,QAAQ,CAACG,MAAtB;;AAEA,QAAKA,MAAM,IAAIA,MAAM,CAACC,IAAtB,EAA6B;AAC5BD,MAAAA,MAAM,GAAGA,MAAM,CAACA,MAAhB;AACA;;AAED,SAAKE,KAAL,GAAaH,aAAa,GAAGA,aAAa,CAACI,YAAd,CAA4B,KAA5B,CAAH,GAAyC,IAAnE;AACA,SAAKC,SAAL,GAAiBR,MAAM,CAACS,UAAP,CAAmBL,MAAnB,EAA2B,OAA3B,CAAjB;AACA;AAED;;;;;;;;;;;AASAM,EAAAA,OAAO,CAAEC,GAAF,EAAQ;AACd,UAAMf,KAAK,GAAG,KAAKC,MAAL,CAAYD,KAA1B;AACA,UAAME,SAAS,GAAGF,KAAK,CAACG,QAAN,CAAeD,SAAjC;AACA,UAAMK,aAAa,GAAGX,2BAA2B,CAAEM,SAAF,CAAjD;;AAEA,QAAKK,aAAL,EAAqB;AACpBP,MAAAA,KAAK,CAACgB,MAAN,CAAcC,MAAM,IAAI;AACvBA,QAAAA,MAAM,CAACC,YAAP,CAAqB,KAArB,EAA4BH,GAA5B,EAAiCR,aAAjC;AACA,OAFD;AAGA,KAJD,MAIO;AACN,YAAMY,cAAc,GAAGxB,4BAA4B,CAAEO,SAAF,EAAaF,KAAb,CAAnD;AAEAH,MAAAA,WAAW,CAAEG,KAAF,EAASe,GAAT,EAAcI,cAAd,CAAX;AACA;AACD;;AA5CqD","sourcesContent":["/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module media-embed/mediaembedcommand\n */\n\nimport Command from '@ckeditor/ckeditor5-core/src/command';\nimport { findOptimalInsertionPosition } from '@ckeditor/ckeditor5-widget/src/utils';\nimport { getSelectedMediaModelWidget, insertMedia } from './utils';\n\n/**\n * The insert media command.\n *\n * The command is registered by the {@link module:media-embed/mediaembedediting~MediaEmbedEditing} as `'mediaEmbed'`.\n *\n * To insert media at the current selection, execute the command and specify the URL:\n *\n *\t\teditor.execute( 'mediaEmbed', 'http://url.to.the/media' );\n *\n * @extends module:core/command~Command\n */\nexport default class MediaEmbedCommand extends Command {\n\t/**\n\t * @inheritDoc\n\t */\n\trefresh() {\n\t\tconst model = this.editor.model;\n\t\tconst selection = model.document.selection;\n\t\tconst schema = model.schema;\n\t\tconst position = selection.getFirstPosition();\n\t\tconst selectedMedia = getSelectedMediaModelWidget( selection );\n\n\t\tlet parent = position.parent;\n\n\t\tif ( parent != parent.root ) {\n\t\t\tparent = parent.parent;\n\t\t}\n\n\t\tthis.value = selectedMedia ? selectedMedia.getAttribute( 'url' ) : null;\n\t\tthis.isEnabled = schema.checkChild( parent, 'media' );\n\t}\n\n\t/**\n\t * Executes the command, which either:\n\t *\n\t * * updates the URL of the selected media,\n\t * * inserts the new media into the editor and puts the selection around it.\n\t *\n\t * @fires execute\n\t * @param {String} url The URL of the media.\n\t */\n\texecute( url ) {\n\t\tconst model = this.editor.model;\n\t\tconst selection = model.document.selection;\n\t\tconst selectedMedia = getSelectedMediaModelWidget( selection );\n\n\t\tif ( selectedMedia ) {\n\t\t\tmodel.change( writer => {\n\t\t\t\twriter.setAttribute( 'url', url, selectedMedia );\n\t\t\t} );\n\t\t} else {\n\t\t\tconst insertPosition = findOptimalInsertionPosition( selection, model );\n\n\t\t\tinsertMedia( model, url, insertPosition );\n\t\t}\n\t}\n}\n\n"]}]}