{"remainingRequest":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/babel-loader/lib/index.js!/Users/antonyching/Desktop/project/new-builder-demo/node_modules/@ckeditor/ckeditor5-typing/src/deletecommand.js","dependencies":[{"path":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/@ckeditor/ckeditor5-typing/src/deletecommand.js","mtime":499162500000},{"path":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/@ckeditor/ckeditor5-dev-webpack-plugin/lib/translatesourceloader.js","mtime":499162500000},{"path":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:LyoqCiAqIEBsaWNlbnNlIENvcHlyaWdodCAoYykgMjAwMy0yMDE5LCBDS1NvdXJjZSAtIEZyZWRlcmljbyBLbmFiYmVuLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKiBGb3IgbGljZW5zaW5nLCBzZWUgTElDRU5TRS5tZCBvciBodHRwczovL2NrZWRpdG9yLmNvbS9sZWdhbC9ja2VkaXRvci1vc3MtbGljZW5zZQogKi8KCi8qKgogKiBAbW9kdWxlIHR5cGluZy9kZWxldGVjb21tYW5kCiAqLwppbXBvcnQgQ29tbWFuZCBmcm9tICdAY2tlZGl0b3IvY2tlZGl0b3I1LWNvcmUvc3JjL2NvbW1hbmQnOwppbXBvcnQgY291bnQgZnJvbSAnQGNrZWRpdG9yL2NrZWRpdG9yNS11dGlscy9zcmMvY291bnQnOwppbXBvcnQgQ2hhbmdlQnVmZmVyIGZyb20gJy4vdXRpbHMvY2hhbmdlYnVmZmVyJzsKLyoqCiAqIFRoZSBkZWxldGUgY29tbWFuZC4gVXNlZCBieSB0aGUge0BsaW5rIG1vZHVsZTp0eXBpbmcvZGVsZXRlfkRlbGV0ZSBkZWxldGUgZmVhdHVyZX0gdG8gaGFuZGxlIHRoZSA8a2JkPkRlbGV0ZTwva2JkPiBhbmQKICogPGtiZD5CYWNrc3BhY2U8L2tiZD4ga2V5cy4KICoKICogQGV4dGVuZHMgbW9kdWxlOmNvcmUvY29tbWFuZH5Db21tYW5kCiAqLwoKZXhwb3J0IGRlZmF1bHQgY2xhc3MgRGVsZXRlQ29tbWFuZCBleHRlbmRzIENvbW1hbmQgewogIC8qKgogICAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgdGhlIGNvbW1hbmQuCiAgICoKICAgKiBAcGFyYW0ge21vZHVsZTpjb3JlL2VkaXRvci9lZGl0b3J+RWRpdG9yfSBlZGl0b3IKICAgKiBAcGFyYW0geydmb3J3YXJkJ3wnYmFja3dhcmQnfSBkaXJlY3Rpb24gVGhlIGRpcmVjdGlvbmFsaXR5IG9mIHRoZSBkZWxldGUgZGVzY3JpYmluZyBpbiB3aGF0IGRpcmVjdGlvbiBpdAogICAqIHNob3VsZCBjb25zdW1lIHRoZSBjb250ZW50IHdoZW4gdGhlIHNlbGVjdGlvbiBpcyBjb2xsYXBzZWQuCiAgICovCiAgY29uc3RydWN0b3IoZWRpdG9yLCBkaXJlY3Rpb24pIHsKICAgIHN1cGVyKGVkaXRvcik7CiAgICAvKioKICAgICAqIFRoZSBkaXJlY3Rpb25hbGl0eSBvZiB0aGUgZGVsZXRlIGRlc2NyaWJpbmcgaW4gd2hhdCBkaXJlY3Rpb24gaXQgc2hvdWxkCiAgICAgKiBjb25zdW1lIHRoZSBjb250ZW50IHdoZW4gdGhlIHNlbGVjdGlvbiBpcyBjb2xsYXBzZWQuCiAgICAgKgogICAgICogQHJlYWRvbmx5CiAgICAgKiBAbWVtYmVyIHsnZm9yd2FyZCd8J2JhY2t3YXJkJ30gI2RpcmVjdGlvbgogICAgICovCgogICAgdGhpcy5kaXJlY3Rpb24gPSBkaXJlY3Rpb247CiAgICAvKioKICAgICAqIERlbGV0ZSdzIGNoYW5nZSBidWZmZXIgdXNlZCB0byBncm91cCBzdWJzZXF1ZW50IGNoYW5nZXMgaW50byBiYXRjaGVzLgogICAgICoKICAgICAqIEByZWFkb25seQogICAgICogQHByaXZhdGUKICAgICAqIEBtZW1iZXIge3R5cGluZy5DaGFuZ2VCdWZmZXJ9ICNidWZmZXIKICAgICAqLwoKICAgIHRoaXMuX2J1ZmZlciA9IG5ldyBDaGFuZ2VCdWZmZXIoZWRpdG9yLm1vZGVsLCBlZGl0b3IuY29uZmlnLmdldCgndHlwaW5nLnVuZG9TdGVwJykpOwogIH0KICAvKioKICAgKiBUaGUgY3VycmVudCBjaGFuZ2UgYnVmZmVyLgogICAqCiAgICogQHR5cGUge21vZHVsZTp0eXBpbmcvdXRpbHMvY2hhbmdlYnVmZmVyfkNoYW5nZUJ1ZmZlcn0KICAgKi8KCgogIGdldCBidWZmZXIoKSB7CiAgICByZXR1cm4gdGhpcy5fYnVmZmVyOwogIH0KICAvKioKICAgKiBFeGVjdXRlcyB0aGUgZGVsZXRlIGNvbW1hbmQuIERlcGVuZGluZyBvbiB3aGV0aGVyIHRoZSBzZWxlY3Rpb24gaXMgY29sbGFwc2VkIG9yIG5vdCwgZGVsZXRlcyBpdHMgY29udGVudAogICAqIG9yIGEgcGllY2Ugb2YgY29udGVudCBpbiB0aGUge0BsaW5rICNkaXJlY3Rpb24gZGVmaW5lZCBkaXJlY3Rpb259LgogICAqCiAgICogQGZpcmVzIGV4ZWN1dGUKICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdIFRoZSBjb21tYW5kIG9wdGlvbnMuCiAgICogQHBhcmFtIHsnY2hhcmFjdGVyJ30gW29wdGlvbnMudW5pdD0nY2hhcmFjdGVyJ10gU2VlIHtAbGluayBtb2R1bGU6ZW5naW5lL21vZGVsL3V0aWxzL21vZGlmeXNlbGVjdGlvbn5tb2RpZnlTZWxlY3Rpb259J3Mgb3B0aW9ucy4KICAgKiBAcGFyYW0ge051bWJlcn0gW29wdGlvbnMuc2VxdWVuY2U9MV0gQSBudW1iZXIgZGVzY3JpYmluZyB3aGljaCBzdWJzZXF1ZW50IGRlbGV0ZSBldmVudCBpdCBpcyB3aXRob3V0IHRoZSBrZXkgYmVpbmcgcmVsZWFzZWQuCiAgICogU2VlIHRoZSB7QGxpbmsgbW9kdWxlOmVuZ2luZS92aWV3L2RvY3VtZW50fkRvY3VtZW50I2V2ZW50OmRlbGV0ZX0gZXZlbnQgZGF0YS4KICAgKiBAcGFyYW0ge21vZHVsZTplbmdpbmUvbW9kZWwvc2VsZWN0aW9uflNlbGVjdGlvbn0gW29wdGlvbnMuc2VsZWN0aW9uXSBTZWxlY3Rpb24gdG8gcmVtb3ZlLiBJZiBub3Qgc2V0LCBjdXJyZW50IG1vZGVsIHNlbGVjdGlvbgogICAqIHdpbGwgYmUgdXNlZC4KICAgKi8KCgogIGV4ZWN1dGUob3B0aW9ucyA9IHt9KSB7CiAgICBjb25zdCBtb2RlbCA9IHRoaXMuZWRpdG9yLm1vZGVsOwogICAgY29uc3QgZG9jID0gbW9kZWwuZG9jdW1lbnQ7CiAgICBtb2RlbC5lbnF1ZXVlQ2hhbmdlKHRoaXMuX2J1ZmZlci5iYXRjaCwgd3JpdGVyID0+IHsKICAgICAgdGhpcy5fYnVmZmVyLmxvY2soKTsKCiAgICAgIGNvbnN0IHNlbGVjdGlvbiA9IHdyaXRlci5jcmVhdGVTZWxlY3Rpb24ob3B0aW9ucy5zZWxlY3Rpb24gfHwgZG9jLnNlbGVjdGlvbik7IC8vIERvIG5vdCByZXBsYWNlIHRoZSB3aG9sZSBzZWxlY3RlZCBjb250ZW50IGlmIHNlbGVjdGlvbiB3YXMgY29sbGFwc2VkLgogICAgICAvLyBUaGlzIHByZXZlbnRzIHN1Y2ggc2l0dWF0aW9uOgogICAgICAvLwogICAgICAvLyA8aDE+PC9oMT48cD5bXTwvcD4JLS0+ICA8aDE+WzwvaDE+PHA+XTwvcD4gCQktLT4gIDxwPjwvcD4KICAgICAgLy8gc3RhcnRpbmcgY29udGVudAkJLS0+ICAgYWZ0ZXIgYG1vZGlmeVNlbGVjdGlvbmAJLS0+ICBhZnRlciBgZGVsZXRlQ29udGVudGAuCgogICAgICBjb25zdCBkb05vdFJlc2V0RW50aXJlQ29udGVudCA9IHNlbGVjdGlvbi5pc0NvbGxhcHNlZDsgLy8gVHJ5IHRvIGV4dGVuZCB0aGUgc2VsZWN0aW9uIGluIHRoZSBzcGVjaWZpZWQgZGlyZWN0aW9uLgoKICAgICAgaWYgKHNlbGVjdGlvbi5pc0NvbGxhcHNlZCkgewogICAgICAgIG1vZGVsLm1vZGlmeVNlbGVjdGlvbihzZWxlY3Rpb24sIHsKICAgICAgICAgIGRpcmVjdGlvbjogdGhpcy5kaXJlY3Rpb24sCiAgICAgICAgICB1bml0OiBvcHRpb25zLnVuaXQKICAgICAgICB9KTsKICAgICAgfSAvLyBDaGVjayBpZiBkZWxldGluZyBpbiBhbiBlbXB0eSBlZGl0b3IuIFNlZSAjNjEuCgoKICAgICAgaWYgKHRoaXMuX3Nob3VsZEVudGlyZUNvbnRlbnRCZVJlcGxhY2VkV2l0aFBhcmFncmFwaChvcHRpb25zLnNlcXVlbmNlIHx8IDEpKSB7CiAgICAgICAgdGhpcy5fcmVwbGFjZUVudGlyZUNvbnRlbnRXaXRoUGFyYWdyYXBoKHdyaXRlcik7CgogICAgICAgIHJldHVybjsKICAgICAgfSAvLyBJZiBzZWxlY3Rpb24gaXMgc3RpbGwgY29sbGFwc2VkLCB0aGVuIHRoZXJlJ3Mgbm90aGluZyB0byBkZWxldGUuCgoKICAgICAgaWYgKHNlbGVjdGlvbi5pc0NvbGxhcHNlZCkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgbGV0IGNoYW5nZUNvdW50ID0gMDsKICAgICAgc2VsZWN0aW9uLmdldEZpcnN0UmFuZ2UoKS5nZXRNaW5pbWFsRmxhdFJhbmdlcygpLmZvckVhY2gocmFuZ2UgPT4gewogICAgICAgIGNoYW5nZUNvdW50ICs9IGNvdW50KHJhbmdlLmdldFdhbGtlcih7CiAgICAgICAgICBzaW5nbGVDaGFyYWN0ZXJzOiB0cnVlLAogICAgICAgICAgaWdub3JlRWxlbWVudEVuZDogdHJ1ZSwKICAgICAgICAgIHNoYWxsb3c6IHRydWUKICAgICAgICB9KSk7CiAgICAgIH0pOwogICAgICBtb2RlbC5kZWxldGVDb250ZW50KHNlbGVjdGlvbiwgewogICAgICAgIGRvTm90UmVzZXRFbnRpcmVDb250ZW50CiAgICAgIH0pOwoKICAgICAgdGhpcy5fYnVmZmVyLmlucHV0KGNoYW5nZUNvdW50KTsKCiAgICAgIHdyaXRlci5zZXRTZWxlY3Rpb24oc2VsZWN0aW9uKTsKCiAgICAgIHRoaXMuX2J1ZmZlci51bmxvY2soKTsKICAgIH0pOwogIH0KICAvKioKICAgKiBJZiB0aGUgdXNlciBrZWVwcyA8a2JkPkJhY2tzcGFjZTwva2JkPiBvciA8a2JkPkRlbGV0ZTwva2JkPiBrZXkgcHJlc3NlZCwgdGhlIGNvbnRlbnQgb2YgdGhlIGN1cnJlbnQKICAgKiBlZGl0YWJsZSB3aWxsIGJlIGNsZWFyZWQuIEhvd2V2ZXIsIHRoaXMgd2lsbCBub3QgeWV0IGxlYWQgdG8gcmVzZXR0aW5nIHRoZSByZW1haW5pbmcgYmxvY2sgdG8gYSBwYXJhZ3JhcGgKICAgKiAod2hpY2ggaGFwcGVucyBlLmcuIHdoZW4gdGhlIHVzZXIgZG9lcyA8a2JkPkN0cmw8L2tiZD4gKyA8a2JkPkE8L2tiZD4sIDxrYmQ+QmFja3NwYWNlPC9rYmQ+KS4KICAgKgogICAqIEJ1dCwgaWYgdGhlIHVzZXIgcHJlc3NlZCB0aGUga2V5IGluIGFuIGVtcHR5IGVkaXRhYmxlIGZvciB0aGUgZmlyc3QgdGltZSwKICAgKiB3ZSB3YW50IHRvIHJlcGxhY2UgdGhlIGVudGlyZSBjb250ZW50IHdpdGggYSBwYXJhZ3JhcGggaWY6CiAgICoKICAgKiAqIHRoZSBjdXJyZW50IGxpbWl0IGVsZW1lbnQgaXMgZW1wdHksCiAgICogKiB0aGUgcGFyYWdyYXBoIGlzIGFsbG93ZWQgaW4gdGhlIGxpbWl0IGVsZW1lbnQsCiAgICogKiB0aGUgbGltaXQgZG9lc24ndCBhbHJlYWR5IGhhdmUgYSBwYXJhZ3JhcGggaW5zaWRlLgogICAqCiAgICogU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9ja2VkaXRvci9ja2VkaXRvcjUtdHlwaW5nL2lzc3Vlcy82MS4KICAgKgogICAqIEBwcml2YXRlCiAgICogQHBhcmFtIHtOdW1iZXJ9IHNlcXVlbmNlIEEgbnVtYmVyIGRlc2NyaWJpbmcgd2hpY2ggc3Vic2VxdWVudCBkZWxldGUgZXZlbnQgaXQgaXMgd2l0aG91dCB0aGUga2V5IGJlaW5nIHJlbGVhc2VkLgogICAqIEByZXR1cm5zIHtCb29sZWFufQogICAqLwoKCiAgX3Nob3VsZEVudGlyZUNvbnRlbnRCZVJlcGxhY2VkV2l0aFBhcmFncmFwaChzZXF1ZW5jZSkgewogICAgLy8gRG9lcyBub3RoaW5nIGlmIHVzZXIgcHJlc3NlZCBhbmQgaGVsZCB0aGUgIkJhY2tzcGFjZSIgb3IgIkRlbGV0ZSIga2V5LgogICAgaWYgKHNlcXVlbmNlID4gMSkgewogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgY29uc3QgbW9kZWwgPSB0aGlzLmVkaXRvci5tb2RlbDsKICAgIGNvbnN0IGRvYyA9IG1vZGVsLmRvY3VtZW50OwogICAgY29uc3Qgc2VsZWN0aW9uID0gZG9jLnNlbGVjdGlvbjsKICAgIGNvbnN0IGxpbWl0RWxlbWVudCA9IG1vZGVsLnNjaGVtYS5nZXRMaW1pdEVsZW1lbnQoc2VsZWN0aW9uKTsgLy8gSWYgYSBjb2xsYXBzZWQgc2VsZWN0aW9uIGNvbnRhaW5zIHRoZSB3aG9sZSBjb250ZW50IGl0IG1lYW5zIHRoYXQgdGhlIGNvbnRlbnQgaXMgZW1wdHkKICAgIC8vIChmcm9tIHRoZSB1c2VyIHBlcnNwZWN0aXZlKS4KCiAgICBjb25zdCBsaW1pdEVsZW1lbnRJc0VtcHR5ID0gc2VsZWN0aW9uLmlzQ29sbGFwc2VkICYmIHNlbGVjdGlvbi5jb250YWluc0VudGlyZUNvbnRlbnQobGltaXRFbGVtZW50KTsKCiAgICBpZiAoIWxpbWl0RWxlbWVudElzRW1wdHkpIHsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQoKICAgIGlmICghbW9kZWwuc2NoZW1hLmNoZWNrQ2hpbGQobGltaXRFbGVtZW50LCAncGFyYWdyYXBoJykpIHsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQoKICAgIGNvbnN0IGxpbWl0RWxlbWVudEZpcnN0Q2hpbGQgPSBsaW1pdEVsZW1lbnQuZ2V0Q2hpbGQoMCk7IC8vIERvZXMgbm90aGluZyBpZiB0aGUgbGltaXQgZWxlbWVudCBhbHJlYWR5IGNvbnRhaW5zIG9ubHkgYSBwYXJhZ3JhcGguCiAgICAvLyBXZSBpZ25vcmUgdGhlIGNhc2Ugd2hlbiBwYXJhZ3JhcGggbWlnaHQgaGF2ZSBzb21lIGlubGluZSBlbGVtZW50cyAoPHA+PGlubGluZVdpZGdldD5bXTwvaW5saW5lV2lkZ2V0PjwvcD4pCiAgICAvLyBiZWNhdXNlIHdlIGRvbid0IHN1cHBvcnQgc3VjaCBjYXNlcyB5ZXQgYW5kIGl0J3MgdW5jbGVhciB3aGV0aGVyIGlubGluZVdpZGdldCBzaG91bGRuJ3QgYmUgYSBsaW1pdCBpdHNlbGYuCgogICAgaWYgKGxpbWl0RWxlbWVudEZpcnN0Q2hpbGQgJiYgbGltaXRFbGVtZW50Rmlyc3RDaGlsZC5uYW1lID09PSAncGFyYWdyYXBoJykgewogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgcmV0dXJuIHRydWU7CiAgfQogIC8qKgogICAqIFRoZSBlbnRpcmUgY29udGVudCBpcyByZXBsYWNlZCB3aXRoIHRoZSBwYXJhZ3JhcGguIFNlbGVjdGlvbiBpcyBtb3ZlZCBpbnNpZGUgdGhlIHBhcmFncmFwaC4KICAgKgogICAqIEBwcml2YXRlCiAgICovCgoKICBfcmVwbGFjZUVudGlyZUNvbnRlbnRXaXRoUGFyYWdyYXBoKHdyaXRlcikgewogICAgY29uc3QgbW9kZWwgPSB0aGlzLmVkaXRvci5tb2RlbDsKICAgIGNvbnN0IGRvYyA9IG1vZGVsLmRvY3VtZW50OwogICAgY29uc3Qgc2VsZWN0aW9uID0gZG9jLnNlbGVjdGlvbjsKICAgIGNvbnN0IGxpbWl0RWxlbWVudCA9IG1vZGVsLnNjaGVtYS5nZXRMaW1pdEVsZW1lbnQoc2VsZWN0aW9uKTsKICAgIGNvbnN0IHBhcmFncmFwaCA9IHdyaXRlci5jcmVhdGVFbGVtZW50KCdwYXJhZ3JhcGgnKTsKICAgIHdyaXRlci5yZW1vdmUod3JpdGVyLmNyZWF0ZVJhbmdlSW4obGltaXRFbGVtZW50KSk7CiAgICB3cml0ZXIuaW5zZXJ0KHBhcmFncmFwaCwgbGltaXRFbGVtZW50KTsKICAgIHdyaXRlci5zZXRTZWxlY3Rpb24ocGFyYWdyYXBoLCAwKTsKICB9Cgp9"},{"version":3,"sources":["/Users/antonyching/Desktop/project/new-builder-demo/node_modules/@ckeditor/ckeditor5-typing/src/deletecommand.js"],"names":["Command","count","ChangeBuffer","DeleteCommand","constructor","editor","direction","_buffer","model","config","get","buffer","execute","options","doc","document","enqueueChange","batch","writer","lock","selection","createSelection","doNotResetEntireContent","isCollapsed","modifySelection","unit","_shouldEntireContentBeReplacedWithParagraph","sequence","_replaceEntireContentWithParagraph","changeCount","getFirstRange","getMinimalFlatRanges","forEach","range","getWalker","singleCharacters","ignoreElementEnd","shallow","deleteContent","input","setSelection","unlock","limitElement","schema","getLimitElement","limitElementIsEmpty","containsEntireContent","checkChild","limitElementFirstChild","getChild","name","paragraph","createElement","remove","createRangeIn","insert"],"mappings":"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","sourcesContent":["/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module typing/deletecommand\n */\n\nimport Command from '@ckeditor/ckeditor5-core/src/command';\nimport count from '@ckeditor/ckeditor5-utils/src/count';\n\nimport ChangeBuffer from './utils/changebuffer';\n\n/**\n * The delete command. Used by the {@link module:typing/delete~Delete delete feature} to handle the <kbd>Delete</kbd> and\n * <kbd>Backspace</kbd> keys.\n *\n * @extends module:core/command~Command\n */\nexport default class DeleteCommand extends Command {\n\t/**\n\t * Creates an instance of the command.\n\t *\n\t * @param {module:core/editor/editor~Editor} editor\n\t * @param {'forward'|'backward'} direction The directionality of the delete describing in what direction it\n\t * should consume the content when the selection is collapsed.\n\t */\n\tconstructor( editor, direction ) {\n\t\tsuper( editor );\n\n\t\t/**\n\t\t * The directionality of the delete describing in what direction it should\n\t\t * consume the content when the selection is collapsed.\n\t\t *\n\t\t * @readonly\n\t\t * @member {'forward'|'backward'} #direction\n\t\t */\n\t\tthis.direction = direction;\n\n\t\t/**\n\t\t * Delete's change buffer used to group subsequent changes into batches.\n\t\t *\n\t\t * @readonly\n\t\t * @private\n\t\t * @member {typing.ChangeBuffer} #buffer\n\t\t */\n\t\tthis._buffer = new ChangeBuffer( editor.model, editor.config.get( 'typing.undoStep' ) );\n\t}\n\n\t/**\n\t * The current change buffer.\n\t *\n\t * @type {module:typing/utils/changebuffer~ChangeBuffer}\n\t */\n\tget buffer() {\n\t\treturn this._buffer;\n\t}\n\n\t/**\n\t * Executes the delete command. Depending on whether the selection is collapsed or not, deletes its content\n\t * or a piece of content in the {@link #direction defined direction}.\n\t *\n\t * @fires execute\n\t * @param {Object} [options] The command options.\n\t * @param {'character'} [options.unit='character'] See {@link module:engine/model/utils/modifyselection~modifySelection}'s options.\n\t * @param {Number} [options.sequence=1] A number describing which subsequent delete event it is without the key being released.\n\t * See the {@link module:engine/view/document~Document#event:delete} event data.\n\t * @param {module:engine/model/selection~Selection} [options.selection] Selection to remove. If not set, current model selection\n\t * will be used.\n\t */\n\texecute( options = {} ) {\n\t\tconst model = this.editor.model;\n\t\tconst doc = model.document;\n\n\t\tmodel.enqueueChange( this._buffer.batch, writer => {\n\t\t\tthis._buffer.lock();\n\n\t\t\tconst selection = writer.createSelection( options.selection || doc.selection );\n\n\t\t\t// Do not replace the whole selected content if selection was collapsed.\n\t\t\t// This prevents such situation:\n\t\t\t//\n\t\t\t// <h1></h1><p>[]</p>\t-->  <h1>[</h1><p>]</p> \t\t-->  <p></p>\n\t\t\t// starting content\t\t-->   after `modifySelection`\t-->  after `deleteContent`.\n\t\t\tconst doNotResetEntireContent = selection.isCollapsed;\n\n\t\t\t// Try to extend the selection in the specified direction.\n\t\t\tif ( selection.isCollapsed ) {\n\t\t\t\tmodel.modifySelection( selection, { direction: this.direction, unit: options.unit } );\n\t\t\t}\n\n\t\t\t// Check if deleting in an empty editor. See #61.\n\t\t\tif ( this._shouldEntireContentBeReplacedWithParagraph( options.sequence || 1 ) ) {\n\t\t\t\tthis._replaceEntireContentWithParagraph( writer );\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// If selection is still collapsed, then there's nothing to delete.\n\t\t\tif ( selection.isCollapsed ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet changeCount = 0;\n\n\t\t\tselection.getFirstRange().getMinimalFlatRanges().forEach( range => {\n\t\t\t\tchangeCount += count(\n\t\t\t\t\trange.getWalker( { singleCharacters: true, ignoreElementEnd: true, shallow: true } )\n\t\t\t\t);\n\t\t\t} );\n\n\t\t\tmodel.deleteContent( selection, { doNotResetEntireContent } );\n\t\t\tthis._buffer.input( changeCount );\n\n\t\t\twriter.setSelection( selection );\n\n\t\t\tthis._buffer.unlock();\n\t\t} );\n\t}\n\n\t/**\n\t * If the user keeps <kbd>Backspace</kbd> or <kbd>Delete</kbd> key pressed, the content of the current\n\t * editable will be cleared. However, this will not yet lead to resetting the remaining block to a paragraph\n\t * (which happens e.g. when the user does <kbd>Ctrl</kbd> + <kbd>A</kbd>, <kbd>Backspace</kbd>).\n\t *\n\t * But, if the user pressed the key in an empty editable for the first time,\n\t * we want to replace the entire content with a paragraph if:\n\t *\n\t * * the current limit element is empty,\n\t * * the paragraph is allowed in the limit element,\n\t * * the limit doesn't already have a paragraph inside.\n\t *\n\t * See https://github.com/ckeditor/ckeditor5-typing/issues/61.\n\t *\n\t * @private\n\t * @param {Number} sequence A number describing which subsequent delete event it is without the key being released.\n\t * @returns {Boolean}\n\t */\n\t_shouldEntireContentBeReplacedWithParagraph( sequence ) {\n\t\t// Does nothing if user pressed and held the \"Backspace\" or \"Delete\" key.\n\t\tif ( sequence > 1 ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst model = this.editor.model;\n\t\tconst doc = model.document;\n\t\tconst selection = doc.selection;\n\t\tconst limitElement = model.schema.getLimitElement( selection );\n\n\t\t// If a collapsed selection contains the whole content it means that the content is empty\n\t\t// (from the user perspective).\n\t\tconst limitElementIsEmpty = selection.isCollapsed && selection.containsEntireContent( limitElement );\n\n\t\tif ( !limitElementIsEmpty ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif ( !model.schema.checkChild( limitElement, 'paragraph' ) ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst limitElementFirstChild = limitElement.getChild( 0 );\n\n\t\t// Does nothing if the limit element already contains only a paragraph.\n\t\t// We ignore the case when paragraph might have some inline elements (<p><inlineWidget>[]</inlineWidget></p>)\n\t\t// because we don't support such cases yet and it's unclear whether inlineWidget shouldn't be a limit itself.\n\t\tif ( limitElementFirstChild && limitElementFirstChild.name === 'paragraph' ) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t}\n\n\t/**\n\t * The entire content is replaced with the paragraph. Selection is moved inside the paragraph.\n\t *\n\t * @private\n\t */\n\t_replaceEntireContentWithParagraph( writer ) {\n\t\tconst model = this.editor.model;\n\t\tconst doc = model.document;\n\t\tconst selection = doc.selection;\n\t\tconst limitElement = model.schema.getLimitElement( selection );\n\t\tconst paragraph = writer.createElement( 'paragraph' );\n\n\t\twriter.remove( writer.createRangeIn( limitElement ) );\n\t\twriter.insert( paragraph, limitElement );\n\n\t\twriter.setSelection( paragraph, 0 );\n\t}\n}\n"]}]}