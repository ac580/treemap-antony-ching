{"remainingRequest":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/babel-loader/lib/index.js!/Users/antonyching/Desktop/project/new-builder-demo/node_modules/@ckeditor/ckeditor5-utils/src/dom/position.js","dependencies":[{"path":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/@ckeditor/ckeditor5-utils/src/dom/position.js","mtime":499162500000},{"path":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/@ckeditor/ckeditor5-dev-webpack-plugin/lib/translatesourceloader.js","mtime":499162500000},{"path":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:LyoqCiAqIEBsaWNlbnNlIENvcHlyaWdodCAoYykgMjAwMy0yMDE5LCBDS1NvdXJjZSAtIEZyZWRlcmljbyBLbmFiYmVuLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKiBGb3IgbGljZW5zaW5nLCBzZWUgTElDRU5TRS5tZCBvciBodHRwczovL2NrZWRpdG9yLmNvbS9sZWdhbC9ja2VkaXRvci1vc3MtbGljZW5zZQogKi8KCi8qKgogKiBAbW9kdWxlIHV0aWxzL2RvbS9wb3NpdGlvbgogKi8KaW1wb3J0IGdsb2JhbCBmcm9tICcuL2dsb2JhbCc7CmltcG9ydCBSZWN0IGZyb20gJy4vcmVjdCc7CmltcG9ydCBnZXRQb3NpdGlvbmVkQW5jZXN0b3IgZnJvbSAnLi9nZXRwb3NpdGlvbmVkYW5jZXN0b3InOwppbXBvcnQgZ2V0Qm9yZGVyV2lkdGhzIGZyb20gJy4vZ2V0Ym9yZGVyd2lkdGhzJzsKaW1wb3J0IHsgaXNGdW5jdGlvbiB9IGZyb20gJ2xvZGFzaC1lcyc7Ci8qKgogKiBDYWxjdWxhdGVzIHRoZSBgcG9zaXRpb246IGFic29sdXRlYCBjb29yZGluYXRlcyBvZiBhIGdpdmVuIGVsZW1lbnQgc28gaXQgY2FuIGJlIHBvc2l0aW9uZWQgd2l0aCByZXNwZWN0IHRvIHRoZQogKiB0YXJnZXQgaW4gdGhlIHZpc3VhbGx5IG1vc3QgZWZmaWNpZW50IHdheSwgdGFraW5nIHZhcmlvdXMgcmVzdHJpY3Rpb25zIGxpa2Ugdmlld3BvcnQgb3IgbGltaXRlciBnZW9tZXRyeQogKiBpbnRvIGNvbnNpZGVyYXRpb24uCiAqCiAqCQkvLyBUaGUgZWxlbWVudCB3aGljaCBpcyB0byBiZSBwb3NpdGlvbmVkLgogKgkJY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmJvZHkucXVlcnlTZWxlY3RvciggJyN0b29sYmFyJyApOwogKgogKgkJLy8gQSB0YXJnZXQgdG8gd2hpY2ggdGhlIGVsZW1lbnQgaXMgcG9zaXRpb25lZCByZWxhdGl2ZWx5LgogKgkJY29uc3QgdGFyZ2V0ID0gZG9jdW1lbnQuYm9keS5xdWVyeVNlbGVjdG9yKCAnI2NvbnRhaW5lcicgKTsKICoKICoJCS8vIEZpbmRpbmcgdGhlIG9wdGltYWwgY29vcmRpbmF0ZXMgZm9yIHRoZSBwb3NpdGlvbmluZy4KICoJCWNvbnN0IHsgbGVmdCwgdG9wLCBuYW1lIH0gPSBnZXRPcHRpbWFsUG9zaXRpb24oIHsKICoJCQllbGVtZW50OiBlbGVtZW50LAogKgkJCXRhcmdldDogdGFyZ2V0LAogKgogKiAJCQkvLyBUaGUgYWxnb3JpdGhtIHdpbGwgY2hvc2UgYW1vbmcgdGhlc2UgcG9zaXRpb25zIHRvIG1lZXQgdGhlIHJlcXVpcmVtZW50cyBzdWNoCiAqIAkJCS8vIGFzICJsaW1pdGVyIiBlbGVtZW50IG9yICJmaXRJblZpZXdwb3J0Iiwgc2V0IGJlbG93LiBUaGUgcG9zaXRpb25zIGFyZSBjb25zaWRlcmVkCiAqIAkJCS8vIGluIHRoZSBvcmRlciBvZiB0aGUgYXJyYXkuCiAqCQkJcG9zaXRpb25zOiBbCiAqCQkJCS8vCiAqCQkJIAkvLwlbIFRhcmdldCBdCiAqCQkJCS8vCSstLS0tLS0tLS0tLS0tLS0tLSsKICoJCQkJLy8JfCAgICAgRWxlbWVudCAgICAgfAogKgkJCQkvLwkrLS0tLS0tLS0tLS0tLS0tLS0rCiAqCQkJCS8vCiAqCQkJCXRhcmdldFJlY3QgPT4gKCB7CiAqCQkJCQl0b3A6IHRhcmdldFJlY3QuYm90dG9tLAogKgkJCQkJbGVmdDogdGFyZ2V0UmVjdC5sZWZ0LAogKgkJCQkJbmFtZTogJ215U291dGhFYXN0UG9zaXRpb24nCiAqCQkJCX0gKSwKICoKICoJCQkJLy8KICoJCQkJLy8JKy0tLS0tLS0tLS0tLS0tLS0tKwogKgkJCQkvLwl8ICAgICBFbGVtZW50ICAgICB8CiAqCQkJCS8vCSstLS0tLS0tLS0tLS0tLS0tLSsKICoJCQkJLy8JWyBUYXJnZXQgXQogKgkJCQkvLwogKgkJCQkoIHRhcmdldFJlY3QsIGVsZW1lbnRSZWN0ICkgPT4gKCB7CiAqCQkJCQl0b3A6IHRhcmdldFJlY3QudG9wIC0gZWxlbWVudFJlY3QuaGVpZ2h0LAogKgkJCQkJbGVmdDogdGFyZ2V0UmVjdC5sZWZ0LAogKgkJCQkJbmFtZTogJ215Tm9ydGhFYXN0UG9zaXRpb24nCiAqCQkJCX0gKQogKgkJCV0sCiAqCiAqCQkJLy8gRmluZCBhIHBvc2l0aW9uIHN1Y2ggZ3VhcmFudGVlcyB0aGUgZWxlbWVudCByZW1haW5zIHdpdGhpbiB2aXNpYmxlIGJvdW5kYXJpZXMgb2YgPGJvZHk+LgogKgkJCWxpbWl0ZXI6IGRvY3VtZW50LmJvZHksCiAqCiAqCQkJLy8gRmluZCBhIHBvc2l0aW9uIHN1Y2ggZ3VhcmFudGVlcyB0aGUgZWxlbWVudCByZW1haW5zIHdpdGhpbiB2aXNpYmxlIGJvdW5kYXJpZXMgb2YgdGhlIGJyb3dzZXIgdmlld3BvcnQuCiAqCQkJZml0SW5WaWV3cG9ydDogdHJ1ZQogKgkJfSApOwogKgogKgkJLy8gVGhlIGJlc3QgcG9zaXRpb24gd2hpY2ggZml0cyBpbnRvIGRvY3VtZW50LmJvZHkgYW5kIHRoZSB2aWV3cG9ydC4gTWF5IGJlIHVzZWZ1bAogKgkJLy8gdG8gc2V0IHByb3BlciBjbGFzcyBvbiB0aGUgYGVsZW1lbnRgLgogKgkJY29uc29sZS5sb2coIG5hbWUgKTsgLy8gLT4gIm15Tm9ydGhFYXN0UG9zaXRpb24iCiAqCiAqCQkvLyBVc2luZyB0aGUgYWJzb2x1dGUgY29vcmRpbmF0ZXMgd2hpY2ggaGFzIGJlZW4gZm91bmQgdG8gcG9zaXRpb24gdGhlIGVsZW1lbnQKICoJCS8vIGFzIGluIHRoZSBkaWFncmFtIGRlcGljdGluZyB0aGUgIm15Tm9ydGhFYXN0UG9zaXRpb24iIHBvc2l0aW9uLgogKgkJZWxlbWVudC5zdHlsZS50b3AgPSB0b3A7CiAqCQllbGVtZW50LnN0eWxlLmxlZnQgPSBsZWZ0OwogKgogKiBAcGFyYW0ge21vZHVsZTp1dGlscy9kb20vcG9zaXRpb25+T3B0aW9uc30gb3B0aW9ucyBQb3NpdGlvbmluZyBvcHRpb25zIG9iamVjdC4KICogQHJldHVybnMge21vZHVsZTp1dGlscy9kb20vcG9zaXRpb25+UG9zaXRpb259CiAqLwoKZXhwb3J0IGZ1bmN0aW9uIGdldE9wdGltYWxQb3NpdGlvbih7CiAgZWxlbWVudCwKICB0YXJnZXQsCiAgcG9zaXRpb25zLAogIGxpbWl0ZXIsCiAgZml0SW5WaWV3cG9ydAp9KSB7CiAgLy8gSWYgdGhlIHtAbGluayBtb2R1bGU6dXRpbHMvZG9tL3Bvc2l0aW9ufk9wdGlvbnMjdGFyZ2V0fSBpcyBhIGZ1bmN0aW9uLCB1c2Ugd2hhdCBpdCByZXR1cm5zLgogIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9ja2VkaXRvci9ja2VkaXRvcjUtdXRpbHMvaXNzdWVzLzE1NwogIGlmIChpc0Z1bmN0aW9uKHRhcmdldCkpIHsKICAgIHRhcmdldCA9IHRhcmdldCgpOwogIH0gLy8gSWYgdGhlIHtAbGluayBtb2R1bGU6dXRpbHMvZG9tL3Bvc2l0aW9ufk9wdGlvbnMjbGltaXRlcn0gaXMgYSBmdW5jdGlvbiwgdXNlIHdoYXQgaXQgcmV0dXJucy4KICAvLyBodHRwczovL2dpdGh1Yi5jb20vY2tlZGl0b3IvY2tlZGl0b3I1LXVpL2lzc3Vlcy8yNjAKCgogIGlmIChpc0Z1bmN0aW9uKGxpbWl0ZXIpKSB7CiAgICBsaW1pdGVyID0gbGltaXRlcigpOwogIH0KCiAgY29uc3QgcG9zaXRpb25lZEVsZW1lbnRBbmNlc3RvciA9IGdldFBvc2l0aW9uZWRBbmNlc3RvcihlbGVtZW50LnBhcmVudEVsZW1lbnQpOwogIGNvbnN0IGVsZW1lbnRSZWN0ID0gbmV3IFJlY3QoZWxlbWVudCk7CiAgY29uc3QgdGFyZ2V0UmVjdCA9IG5ldyBSZWN0KHRhcmdldCk7CiAgbGV0IGJlc3RQb3NpdGlvbjsKICBsZXQgbmFtZTsgLy8gSWYgdGhlcmUgYXJlIG5vIGxpbWl0cywganVzdCBncmFiIHRoZSB2ZXJ5IGZpcnN0IHBvc2l0aW9uIGFuZCBiZSBkb25lIHdpdGggdGhhdCBkcmFtYS4KCiAgaWYgKCFsaW1pdGVyICYmICFmaXRJblZpZXdwb3J0KSB7CiAgICBbbmFtZSwgYmVzdFBvc2l0aW9uXSA9IGdldFBvc2l0aW9uKHBvc2l0aW9uc1swXSwgdGFyZ2V0UmVjdCwgZWxlbWVudFJlY3QpOwogIH0gZWxzZSB7CiAgICBjb25zdCBsaW1pdGVyUmVjdCA9IGxpbWl0ZXIgJiYgbmV3IFJlY3QobGltaXRlcikuZ2V0VmlzaWJsZSgpOwogICAgY29uc3Qgdmlld3BvcnRSZWN0ID0gZml0SW5WaWV3cG9ydCAmJiBuZXcgUmVjdChnbG9iYWwud2luZG93KTsKICAgIFtuYW1lLCBiZXN0UG9zaXRpb25dID0gZ2V0QmVzdFBvc2l0aW9uKHBvc2l0aW9ucywgdGFyZ2V0UmVjdCwgZWxlbWVudFJlY3QsIGxpbWl0ZXJSZWN0LCB2aWV3cG9ydFJlY3QpIHx8IC8vIElmIHRoZXJlJ3Mgbm8gYmVzdCBwb3NpdGlvbiBmb3VuZCwgaS5lLiB3aGVuIGFsbCBpbnRlcnNlY3Rpb25zIGhhdmUgbm8gYXJlYSBiZWNhdXNlCiAgICAvLyByZWN0cyBoYXZlIG5vIHdpZHRoIG9yIGhlaWdodCwgdGhlbiBqdXN0IHVzZSB0aGUgZmlyc3QgYXZhaWxhYmxlIHBvc2l0aW9uLgogICAgZ2V0UG9zaXRpb24ocG9zaXRpb25zWzBdLCB0YXJnZXRSZWN0LCBlbGVtZW50UmVjdCk7CiAgfQoKICBsZXQgewogICAgbGVmdCwKICAgIHRvcAogIH0gPSBnZXRBYnNvbHV0ZVJlY3RDb29yZGluYXRlcyhiZXN0UG9zaXRpb24pOwoKICBpZiAocG9zaXRpb25lZEVsZW1lbnRBbmNlc3RvcikgewogICAgY29uc3QgYW5jZXN0b3JQb3NpdGlvbiA9IGdldEFic29sdXRlUmVjdENvb3JkaW5hdGVzKG5ldyBSZWN0KHBvc2l0aW9uZWRFbGVtZW50QW5jZXN0b3IpKTsKICAgIGNvbnN0IGFuY2VzdG9yQm9yZGVyV2lkdGhzID0gZ2V0Qm9yZGVyV2lkdGhzKHBvc2l0aW9uZWRFbGVtZW50QW5jZXN0b3IpOyAvLyAoaHR0cHM6Ly9naXRodWIuY29tL2NrZWRpdG9yL2NrZWRpdG9yNS11aS1kZWZhdWx0L2lzc3Vlcy8xMjYpCiAgICAvLyBJZiB0aGVyZSdzIHNvbWUgcG9zaXRpb25lZCBhbmNlc3RvciBvZiB0aGUgcGFuZWwsIHRoZW4gaXRzIGBSZWN0YCBtdXN0IGJlIHRha2VuIGludG8KICAgIC8vIGNvbnNpZGVyYXRpb24uIGBSZWN0YCBpcyBhbHdheXMgcmVsYXRpdmUgdG8gdGhlIHZpZXdwb3J0IHdoaWxlIGBwb3NpdGlvbjogYWJzb2x1dGVgIHdvcmtzCiAgICAvLyB3aXRoIHJlc3BlY3QgdG8gdGhhdCBwb3NpdGlvbmVkIGFuY2VzdG9yLgoKICAgIGxlZnQgLT0gYW5jZXN0b3JQb3NpdGlvbi5sZWZ0OwogICAgdG9wIC09IGFuY2VzdG9yUG9zaXRpb24udG9wOyAvLyAoaHR0cHM6Ly9naXRodWIuY29tL2NrZWRpdG9yL2NrZWRpdG9yNS11dGlscy9pc3N1ZXMvMTM5KQogICAgLy8gSWYgdGhlcmUncyBzb21lIHBvc2l0aW9uZWQgYW5jZXN0b3Igb2YgdGhlIHBhbmVsLCBub3Qgb25seSBpdHMgcG9zaXRpb24gbXVzdCBiZSB0YWtlbiBpbnRvCiAgICAvLyBjb25zaWRlcmF0aW9uIChzZWUgYWJvdmUpIGJ1dCBhbHNvIGl0cyBpbnRlcm5hbCBzY3JvbGxzLiBTY3JvbGwgaGF2ZSBhbiBpbXBhY3QgaGVyZSBiZWNhdXNlIGBSZWN0YAogICAgLy8gaXMgcmVsYXRpdmUgdG8gdGhlIHZpZXdwb3J0IChpdCBkb2Vzbid0IGNhcmUgYWJvdXQgc2Nyb2xsaW5nKSwgd2hpbGUgYHBvc2l0aW9uOiBhYnNvbHV0ZWAKICAgIC8vIG11c3QgY29tcGVuc2F0ZSB0aGF0IHNjcm9sbGluZy4KCiAgICBsZWZ0ICs9IHBvc2l0aW9uZWRFbGVtZW50QW5jZXN0b3Iuc2Nyb2xsTGVmdDsKICAgIHRvcCArPSBwb3NpdGlvbmVkRWxlbWVudEFuY2VzdG9yLnNjcm9sbFRvcDsgLy8gKGh0dHBzOi8vZ2l0aHViLmNvbS9ja2VkaXRvci9ja2VkaXRvcjUtdXRpbHMvaXNzdWVzLzEzOSkKICAgIC8vIElmIHRoZXJlJ3Mgc29tZSBwb3NpdGlvbmVkIGFuY2VzdG9yIG9mIHRoZSBwYW5lbCwgdGhlbiBpdHMgYFJlY3RgIGluY2x1ZGVzIGl0cyBDU1MgYGJvcmRlcldpZHRoYAogICAgLy8gd2hpbGUgYHBvc2l0aW9uOiBhYnNvbHV0ZWAgcG9zaXRpb25pbmcgZG9lcyBub3QgY29uc2lkZXIgaXQuCiAgICAvLyBFLmcuIGB7IHBvc2l0aW9uOiBhYnNvbHV0ZSwgdG9wOiAwLCBsZWZ0OiAwIH1gIG1lYW5zIHVwcGVyIGxlZnQgY29ybmVyIG9mIHRoZSBlbGVtZW50LAogICAgLy8gbm90IHVwcGVyLWxlZnQgY29ybmVyIG9mIGl0cyBib3JkZXIuCgogICAgbGVmdCAtPSBhbmNlc3RvckJvcmRlcldpZHRocy5sZWZ0OwogICAgdG9wIC09IGFuY2VzdG9yQm9yZGVyV2lkdGhzLnRvcDsKICB9CgogIHJldHVybiB7CiAgICBsZWZ0LAogICAgdG9wLAogICAgbmFtZQogIH07Cn0gLy8gRm9yIGdpdmVuIHBvc2l0aW9uIGZ1bmN0aW9uLCByZXR1cm5zIGEgY29ycmVzcG9uZGluZyBgUmVjdGAgaW5zdGFuY2UuCi8vCi8vIEBwcml2YXRlCi8vIEBwYXJhbSB7RnVuY3Rpb259IHBvc2l0aW9uIEEgZnVuY3Rpb24gcmV0dXJuaW5nIHtAbGluayBtb2R1bGU6dXRpbHMvZG9tL3Bvc2l0aW9uflBvc2l0aW9ufS4KLy8gQHBhcmFtIHt1dGlscy9kb20vcmVjdH5SZWN0fSB0YXJnZXRSZWN0IEEgcmVjdCBvZiB0aGUgdGFyZ2V0LgovLyBAcGFyYW0ge3V0aWxzL2RvbS9yZWN0flJlY3R9IGVsZW1lbnRSZWN0IEEgcmVjdCBvZiBwb3NpdGlvbmVkIGVsZW1lbnQuCi8vIEByZXR1cm5zIHtBcnJheX0gQW4gYXJyYXkgY29udGFpbmluZyBwb3NpdGlvbiBuYW1lIGFuZCBpdHMgUmVjdC4KCmZ1bmN0aW9uIGdldFBvc2l0aW9uKHBvc2l0aW9uLCB0YXJnZXRSZWN0LCBlbGVtZW50UmVjdCkgewogIGNvbnN0IHsKICAgIGxlZnQsCiAgICB0b3AsCiAgICBuYW1lCiAgfSA9IHBvc2l0aW9uKHRhcmdldFJlY3QsIGVsZW1lbnRSZWN0KTsKICByZXR1cm4gW25hbWUsIGVsZW1lbnRSZWN0LmNsb25lKCkubW92ZVRvKGxlZnQsIHRvcCldOwp9IC8vIEZvciBhIGdpdmVuIGFycmF5IG9mIHBvc2l0aW9uaW5nIGZ1bmN0aW9ucywgcmV0dXJucyBzdWNoIHRoYXQgcHJvdmlkZXMgdGhlIGJlc3QKLy8gZml0IG9mIHRoZSBgZWxlbWVudFJlY3RgIGludG8gdGhlIGBsaW1pdGVyUmVjdGAgYW5kIGB2aWV3cG9ydFJlY3RgLgovLwovLyBAcHJpdmF0ZQovLyBAcGFyYW0ge21vZHVsZTp1dGlscy9kb20vcG9zaXRpb25+T3B0aW9ucyNwb3NpdGlvbnN9IHBvc2l0aW9ucyBGdW5jdGlvbnMgcmV0dXJuaW5nCi8vIHtAbGluayBtb2R1bGU6dXRpbHMvZG9tL3Bvc2l0aW9uflBvc2l0aW9ufSB0byBiZSBjaGVja2VkLCBpbiB0aGUgb3JkZXIgb2YgcHJlZmVyZW5jZS4KLy8gQHBhcmFtIHt1dGlscy9kb20vcmVjdH5SZWN0fSB0YXJnZXRSZWN0IEEgcmVjdCBvZiB0aGUge0BsaW5rIG1vZHVsZTp1dGlscy9kb20vcG9zaXRpb25+T3B0aW9ucyN0YXJnZXR9LgovLyBAcGFyYW0ge3V0aWxzL2RvbS9yZWN0flJlY3R9IGVsZW1lbnRSZWN0IEEgcmVjdCBvZiBwb3NpdGlvbmVkIHtAbGluayBtb2R1bGU6dXRpbHMvZG9tL3Bvc2l0aW9ufk9wdGlvbnMjZWxlbWVudH0uCi8vIEBwYXJhbSB7dXRpbHMvZG9tL3JlY3R+UmVjdH0gbGltaXRlclJlY3QgQSByZWN0IG9mIHRoZSB7QGxpbmsgbW9kdWxlOnV0aWxzL2RvbS9wb3NpdGlvbn5PcHRpb25zI2xpbWl0ZXJ9LgovLyBAcGFyYW0ge3V0aWxzL2RvbS9yZWN0flJlY3R9IHZpZXdwb3J0UmVjdCBBIHJlY3Qgb2YgdGhlIHZpZXdwb3J0LgovLyBAcmV0dXJucyB7QXJyYXl9IEFuIGFycmF5IGNvbnRhaW5pbmcgdGhlIG5hbWUgb2YgdGhlIHBvc2l0aW9uIGFuZCBpdCdzIHJlY3QuCgoKZnVuY3Rpb24gZ2V0QmVzdFBvc2l0aW9uKHBvc2l0aW9ucywgdGFyZ2V0UmVjdCwgZWxlbWVudFJlY3QsIGxpbWl0ZXJSZWN0LCB2aWV3cG9ydFJlY3QpIHsKICBsZXQgbWF4TGltaXRlckludGVyc2VjdEFyZWEgPSAwOwogIGxldCBtYXhWaWV3cG9ydEludGVyc2VjdEFyZWEgPSAwOwogIGxldCBiZXN0UG9zaXRpb25SZWN0OwogIGxldCBiZXN0UG9zaXRpb25OYW1lOyAvLyBUaGlzIGlzIHdoZW4gZWxlbWVudCBpcyBmdWxseSB2aXNpYmxlLgoKICBjb25zdCBlbGVtZW50UmVjdEFyZWEgPSBlbGVtZW50UmVjdC5nZXRBcmVhKCk7CiAgcG9zaXRpb25zLnNvbWUocG9zaXRpb24gPT4gewogICAgY29uc3QgW3Bvc2l0aW9uTmFtZSwgcG9zaXRpb25SZWN0XSA9IGdldFBvc2l0aW9uKHBvc2l0aW9uLCB0YXJnZXRSZWN0LCBlbGVtZW50UmVjdCk7CiAgICBsZXQgbGltaXRlckludGVyc2VjdEFyZWE7CiAgICBsZXQgdmlld3BvcnRJbnRlcnNlY3RBcmVhOwoKICAgIGlmIChsaW1pdGVyUmVjdCkgewogICAgICBpZiAodmlld3BvcnRSZWN0KSB7CiAgICAgICAgLy8gQ29uc2lkZXIgb25seSB0aGUgcGFydCBvZiB0aGUgbGltaXRlciB3aGljaCBpcyB2aXNpYmxlIGluIHRoZSB2aWV3cG9ydC4gU28gdGhlIGxpbWl0ZXIgaXMgZ2V0dGluZyBsaW1pdGVkLgogICAgICAgIGNvbnN0IGxpbWl0ZXJWaWV3cG9ydEludGVyc2VjdFJlY3QgPSBsaW1pdGVyUmVjdC5nZXRJbnRlcnNlY3Rpb24odmlld3BvcnRSZWN0KTsKCiAgICAgICAgaWYgKGxpbWl0ZXJWaWV3cG9ydEludGVyc2VjdFJlY3QpIHsKICAgICAgICAgIC8vIElmIHRoZSBsaW1pdGVyIGlzIHdpdGhpbiB0aGUgdmlld3BvcnQsIHRoZW4gY2hlY2sgdGhlIGludGVyc2VjdGlvbiBiZXR3ZWVuIHRoYXQgcGFydCBvZiB0aGUKICAgICAgICAgIC8vIGxpbWl0ZXIgYW5kIGFjdHVhbCBwb3NpdGlvbi4KICAgICAgICAgIGxpbWl0ZXJJbnRlcnNlY3RBcmVhID0gbGltaXRlclZpZXdwb3J0SW50ZXJzZWN0UmVjdC5nZXRJbnRlcnNlY3Rpb25BcmVhKHBvc2l0aW9uUmVjdCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGxpbWl0ZXJJbnRlcnNlY3RBcmVhID0gMDsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbGltaXRlckludGVyc2VjdEFyZWEgPSBsaW1pdGVyUmVjdC5nZXRJbnRlcnNlY3Rpb25BcmVhKHBvc2l0aW9uUmVjdCk7CiAgICAgIH0KICAgIH0KCiAgICBpZiAodmlld3BvcnRSZWN0KSB7CiAgICAgIHZpZXdwb3J0SW50ZXJzZWN0QXJlYSA9IHZpZXdwb3J0UmVjdC5nZXRJbnRlcnNlY3Rpb25BcmVhKHBvc2l0aW9uUmVjdCk7CiAgICB9IC8vIFRoZSBvbmx5IGNyaXRlcmlvbjogaW50ZXJzZWN0aW9uIHdpdGggdGhlIHZpZXdwb3J0LgoKCiAgICBpZiAodmlld3BvcnRSZWN0ICYmICFsaW1pdGVyUmVjdCkgewogICAgICBpZiAodmlld3BvcnRJbnRlcnNlY3RBcmVhID4gbWF4Vmlld3BvcnRJbnRlcnNlY3RBcmVhKSB7CiAgICAgICAgc2V0QmVzdFBvc2l0aW9uKCk7CiAgICAgIH0KICAgIH0gLy8gVGhlIG9ubHkgY3JpdGVyaW9uOiBpbnRlcnNlY3Rpb24gd2l0aCB0aGUgbGltaXRlci4KICAgIGVsc2UgaWYgKCF2aWV3cG9ydFJlY3QgJiYgbGltaXRlclJlY3QpIHsKICAgICAgICBpZiAobGltaXRlckludGVyc2VjdEFyZWEgPiBtYXhMaW1pdGVySW50ZXJzZWN0QXJlYSkgewogICAgICAgICAgc2V0QmVzdFBvc2l0aW9uKCk7CiAgICAgICAgfQogICAgICB9IC8vIFR3byBjcml0ZXJpYTogaW50ZXJzZWN0aW9uIHdpdGggdGhlIHZpZXdwb3J0IGFuZCB0aGUgbGltaXRlciB2aXNpYmxlIGluIHRoZSB2aWV3cG9ydC4KICAgICAgZWxzZSB7CiAgICAgICAgICBpZiAodmlld3BvcnRJbnRlcnNlY3RBcmVhID4gbWF4Vmlld3BvcnRJbnRlcnNlY3RBcmVhICYmIGxpbWl0ZXJJbnRlcnNlY3RBcmVhID49IG1heExpbWl0ZXJJbnRlcnNlY3RBcmVhKSB7CiAgICAgICAgICAgIHNldEJlc3RQb3NpdGlvbigpOwogICAgICAgICAgfSBlbHNlIGlmICh2aWV3cG9ydEludGVyc2VjdEFyZWEgPj0gbWF4Vmlld3BvcnRJbnRlcnNlY3RBcmVhICYmIGxpbWl0ZXJJbnRlcnNlY3RBcmVhID4gbWF4TGltaXRlckludGVyc2VjdEFyZWEpIHsKICAgICAgICAgICAgc2V0QmVzdFBvc2l0aW9uKCk7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgIGZ1bmN0aW9uIHNldEJlc3RQb3NpdGlvbigpIHsKICAgICAgbWF4Vmlld3BvcnRJbnRlcnNlY3RBcmVhID0gdmlld3BvcnRJbnRlcnNlY3RBcmVhOwogICAgICBtYXhMaW1pdGVySW50ZXJzZWN0QXJlYSA9IGxpbWl0ZXJJbnRlcnNlY3RBcmVhOwogICAgICBiZXN0UG9zaXRpb25SZWN0ID0gcG9zaXRpb25SZWN0OwogICAgICBiZXN0UG9zaXRpb25OYW1lID0gcG9zaXRpb25OYW1lOwogICAgfSAvLyBJZiBhIHN1Y2ggcG9zaXRpb24gaXMgZm91bmQgdGhhdCBlbGVtZW50IGlzIGZ1bGx5IGNvbnRhaW5lciBieSB0aGUgbGltaXRlciB0aGVuLCBvYnZpb3VzbHksCiAgICAvLyB0aGVyZSB3aWxsIGJlIG5vIGJldHRlciBvbmUsIHNvIGZpbmlzaGluZy4KCgogICAgcmV0dXJuIGxpbWl0ZXJJbnRlcnNlY3RBcmVhID09PSBlbGVtZW50UmVjdEFyZWE7CiAgfSk7CiAgcmV0dXJuIGJlc3RQb3NpdGlvblJlY3QgPyBbYmVzdFBvc2l0aW9uTmFtZSwgYmVzdFBvc2l0aW9uUmVjdF0gOiBudWxsOwp9IC8vIERPTVJlY3QgKGFsc28gUmVjdCkgd29ya3MgaW4gYSBzY3JvbGzigJNpbmRlcGVuZGVudCBnZW9tZXRyeSBidXQgYHBvc2l0aW9uOiBhYnNvbHV0ZWAgZG9lc24ndC4KLy8gVGhpcyBmdW5jdGlvbiBjb252ZXJ0cyBSZWN0IHRvIGBwb3NpdGlvbjogYWJzb2x1dGVgIGNvb3JkaW5hdGVzLgovLwovLyBAcHJpdmF0ZQovLyBAcGFyYW0ge3V0aWxzL2RvbS9yZWN0flJlY3R9IHJlY3QgQSByZWN0IHRvIGJlIGNvbnZlcnRlZC4KLy8gQHJldHVybnMge09iamVjdH0gT2JqZWN0IGNvbnRhaW5pbmcgYGxlZnRgIGFuZCBgdG9wYCBwcm9wZXJ0aWVzLCBpbiBhYnNvbHV0ZSBjb29yZGluYXRlcy4KCgpmdW5jdGlvbiBnZXRBYnNvbHV0ZVJlY3RDb29yZGluYXRlcyh7CiAgbGVmdCwKICB0b3AKfSkgewogIGNvbnN0IHsKICAgIHNjcm9sbFgsCiAgICBzY3JvbGxZCiAgfSA9IGdsb2JhbC53aW5kb3c7CiAgcmV0dXJuIHsKICAgIGxlZnQ6IGxlZnQgKyBzY3JvbGxYLAogICAgdG9wOiB0b3AgKyBzY3JvbGxZCiAgfTsKfQovKioKICogVGhlIGBnZXRPcHRpbWFsUG9zaXRpb25gIGhlbHBlciBvcHRpb25zLgogKgogKiBAaW50ZXJmYWNlIG1vZHVsZTp1dGlscy9kb20vcG9zaXRpb25+T3B0aW9ucwogKi8KCi8qKgogKiBFbGVtZW50IHRoYXQgaXMgdG8gYmUgcG9zaXRpb25lZC4KICoKICogQG1lbWJlciB7SFRNTEVsZW1lbnR9ICNlbGVtZW50CiAqLwoKLyoqCiAqIFRhcmdldCB3aXRoIHJlc3BlY3QgdG8gd2hpY2ggdGhlIGBlbGVtZW50YCBpcyB0byBiZSBwb3NpdGlvbmVkLgogKgogKiBAbWVtYmVyIHtIVE1MRWxlbWVudHxSYW5nZXxDbGllbnRSZWN0fFJlY3R8RnVuY3Rpb259ICN0YXJnZXQKICovCgovKioKICogQW4gYXJyYXkgb2YgZnVuY3Rpb25zIHdoaWNoIHJldHVybiB7QGxpbmsgbW9kdWxlOnV0aWxzL2RvbS9wb3NpdGlvbn5Qb3NpdGlvbn0gcmVsYXRpdmUKICogdG8gdGhlIGB0YXJnZXRgLCBpbiB0aGUgb3JkZXIgb2YgcHJlZmVyZW5jZS4KICoKICogQG1lbWJlciB7QXJyYXkuPEZ1bmN0aW9uPn0gI3Bvc2l0aW9ucwogKi8KCi8qKgogKiBXaGVuIHNldCwgdGhlIGFsZ29yaXRobSB3aWxsIGNob3NlIHBvc2l0aW9uIHdoaWNoIGZpdHMgdGhlIG1vc3QgaW4gdGhlCiAqIGxpbWl0ZXIncyBib3VuZGluZyByZWN0LgogKgogKiBAbWVtYmVyIHtIVE1MRWxlbWVudHxSYW5nZXxDbGllbnRSZWN0fFJlY3R8RnVuY3Rpb259ICNsaW1pdGVyCiAqLwoKLyoqCiAqIFdoZW4gc2V0LCB0aGUgYWxnb3JpdGhtIHdpbGwgY2hvc2Ugc3VjaCBhIHBvc2l0aW9uIHdoaWNoIGZpdHMgYGVsZW1lbnRgCiAqIHRoZSBtb3N0IGluc2lkZSB2aXNpYmxlIHZpZXdwb3J0LgogKgogKiBAbWVtYmVyIHtCb29sZWFufSAjZml0SW5WaWV3cG9ydAogKi8KCi8qKgogKiBBbiBvYmplY3QgZGVzY3JpYmluZyBhIHBvc2l0aW9uIGluIGBwb3NpdGlvbjogYWJzb2x1dGVgIGNvb3JkaW5hdGUKICogc3lzdGVtLCBhbG9uZyB3aXRoIHBvc2l0aW9uIG5hbWUuCiAqCiAqIEB0eXBlZGVmIHtPYmplY3R9IG1vZHVsZTp1dGlscy9kb20vcG9zaXRpb25+UG9zaXRpb24KICoKICogQHByb3BlcnR5IHtOdW1iZXJ9IHRvcCBUb3AgcG9zaXRpb24gb2Zmc2V0LgogKiBAcHJvcGVydHkge051bWJlcn0gbGVmdCBMZWZ0IHBvc2l0aW9uIG9mZnNldC4KICogQHByb3BlcnR5IHtTdHJpbmd9IG5hbWUgTmFtZSBvZiB0aGUgcG9zaXRpb24uCiAqLw=="},{"version":3,"sources":["/Users/antonyching/Desktop/project/new-builder-demo/node_modules/@ckeditor/ckeditor5-utils/src/dom/position.js"],"names":["global","Rect","getPositionedAncestor","getBorderWidths","isFunction","getOptimalPosition","element","target","positions","limiter","fitInViewport","positionedElementAncestor","parentElement","elementRect","targetRect","bestPosition","name","getPosition","limiterRect","getVisible","viewportRect","window","getBestPosition","left","top","getAbsoluteRectCoordinates","ancestorPosition","ancestorBorderWidths","scrollLeft","scrollTop","position","clone","moveTo","maxLimiterIntersectArea","maxViewportIntersectArea","bestPositionRect","bestPositionName","elementRectArea","getArea","some","positionName","positionRect","limiterIntersectArea","viewportIntersectArea","limiterViewportIntersectRect","getIntersection","getIntersectionArea","setBestPosition","scrollX","scrollY"],"mappings":"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","sourcesContent":["/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/dom/position\n */\n\nimport global from './global';\nimport Rect from './rect';\nimport getPositionedAncestor from './getpositionedancestor';\nimport getBorderWidths from './getborderwidths';\nimport { isFunction } from 'lodash-es';\n\n/**\n * Calculates the `position: absolute` coordinates of a given element so it can be positioned with respect to the\n * target in the visually most efficient way, taking various restrictions like viewport or limiter geometry\n * into consideration.\n *\n *\t\t// The element which is to be positioned.\n *\t\tconst element = document.body.querySelector( '#toolbar' );\n *\n *\t\t// A target to which the element is positioned relatively.\n *\t\tconst target = document.body.querySelector( '#container' );\n *\n *\t\t// Finding the optimal coordinates for the positioning.\n *\t\tconst { left, top, name } = getOptimalPosition( {\n *\t\t\telement: element,\n *\t\t\ttarget: target,\n *\n * \t\t\t// The algorithm will chose among these positions to meet the requirements such\n * \t\t\t// as \"limiter\" element or \"fitInViewport\", set below. The positions are considered\n * \t\t\t// in the order of the array.\n *\t\t\tpositions: [\n *\t\t\t\t//\n *\t\t\t \t//\t[ Target ]\n *\t\t\t\t//\t+-----------------+\n *\t\t\t\t//\t|     Element     |\n *\t\t\t\t//\t+-----------------+\n *\t\t\t\t//\n *\t\t\t\ttargetRect => ( {\n *\t\t\t\t\ttop: targetRect.bottom,\n *\t\t\t\t\tleft: targetRect.left,\n *\t\t\t\t\tname: 'mySouthEastPosition'\n *\t\t\t\t} ),\n *\n *\t\t\t\t//\n *\t\t\t\t//\t+-----------------+\n *\t\t\t\t//\t|     Element     |\n *\t\t\t\t//\t+-----------------+\n *\t\t\t\t//\t[ Target ]\n *\t\t\t\t//\n *\t\t\t\t( targetRect, elementRect ) => ( {\n *\t\t\t\t\ttop: targetRect.top - elementRect.height,\n *\t\t\t\t\tleft: targetRect.left,\n *\t\t\t\t\tname: 'myNorthEastPosition'\n *\t\t\t\t} )\n *\t\t\t],\n *\n *\t\t\t// Find a position such guarantees the element remains within visible boundaries of <body>.\n *\t\t\tlimiter: document.body,\n *\n *\t\t\t// Find a position such guarantees the element remains within visible boundaries of the browser viewport.\n *\t\t\tfitInViewport: true\n *\t\t} );\n *\n *\t\t// The best position which fits into document.body and the viewport. May be useful\n *\t\t// to set proper class on the `element`.\n *\t\tconsole.log( name ); // -> \"myNorthEastPosition\"\n *\n *\t\t// Using the absolute coordinates which has been found to position the element\n *\t\t// as in the diagram depicting the \"myNorthEastPosition\" position.\n *\t\telement.style.top = top;\n *\t\telement.style.left = left;\n *\n * @param {module:utils/dom/position~Options} options Positioning options object.\n * @returns {module:utils/dom/position~Position}\n */\nexport function getOptimalPosition( { element, target, positions, limiter, fitInViewport } ) {\n\t// If the {@link module:utils/dom/position~Options#target} is a function, use what it returns.\n\t// https://github.com/ckeditor/ckeditor5-utils/issues/157\n\tif ( isFunction( target ) ) {\n\t\ttarget = target();\n\t}\n\n\t// If the {@link module:utils/dom/position~Options#limiter} is a function, use what it returns.\n\t// https://github.com/ckeditor/ckeditor5-ui/issues/260\n\tif ( isFunction( limiter ) ) {\n\t\tlimiter = limiter();\n\t}\n\n\tconst positionedElementAncestor = getPositionedAncestor( element.parentElement );\n\tconst elementRect = new Rect( element );\n\tconst targetRect = new Rect( target );\n\n\tlet bestPosition;\n\tlet name;\n\n\t// If there are no limits, just grab the very first position and be done with that drama.\n\tif ( !limiter && !fitInViewport ) {\n\t\t[ name, bestPosition ] = getPosition( positions[ 0 ], targetRect, elementRect );\n\t} else {\n\t\tconst limiterRect = limiter && new Rect( limiter ).getVisible();\n\t\tconst viewportRect = fitInViewport && new Rect( global.window );\n\n\t\t[ name, bestPosition ] =\n\t\t\tgetBestPosition( positions, targetRect, elementRect, limiterRect, viewportRect ) ||\n\t\t\t// If there's no best position found, i.e. when all intersections have no area because\n\t\t\t// rects have no width or height, then just use the first available position.\n\t\t\tgetPosition( positions[ 0 ], targetRect, elementRect );\n\t}\n\n\tlet { left, top } = getAbsoluteRectCoordinates( bestPosition );\n\n\tif ( positionedElementAncestor ) {\n\t\tconst ancestorPosition = getAbsoluteRectCoordinates( new Rect( positionedElementAncestor ) );\n\t\tconst ancestorBorderWidths = getBorderWidths( positionedElementAncestor );\n\n\t\t// (https://github.com/ckeditor/ckeditor5-ui-default/issues/126)\n\t\t// If there's some positioned ancestor of the panel, then its `Rect` must be taken into\n\t\t// consideration. `Rect` is always relative to the viewport while `position: absolute` works\n\t\t// with respect to that positioned ancestor.\n\t\tleft -= ancestorPosition.left;\n\t\ttop -= ancestorPosition.top;\n\n\t\t// (https://github.com/ckeditor/ckeditor5-utils/issues/139)\n\t\t// If there's some positioned ancestor of the panel, not only its position must be taken into\n\t\t// consideration (see above) but also its internal scrolls. Scroll have an impact here because `Rect`\n\t\t// is relative to the viewport (it doesn't care about scrolling), while `position: absolute`\n\t\t// must compensate that scrolling.\n\t\tleft += positionedElementAncestor.scrollLeft;\n\t\ttop += positionedElementAncestor.scrollTop;\n\n\t\t// (https://github.com/ckeditor/ckeditor5-utils/issues/139)\n\t\t// If there's some positioned ancestor of the panel, then its `Rect` includes its CSS `borderWidth`\n\t\t// while `position: absolute` positioning does not consider it.\n\t\t// E.g. `{ position: absolute, top: 0, left: 0 }` means upper left corner of the element,\n\t\t// not upper-left corner of its border.\n\t\tleft -= ancestorBorderWidths.left;\n\t\ttop -= ancestorBorderWidths.top;\n\t}\n\n\treturn { left, top, name };\n}\n\n// For given position function, returns a corresponding `Rect` instance.\n//\n// @private\n// @param {Function} position A function returning {@link module:utils/dom/position~Position}.\n// @param {utils/dom/rect~Rect} targetRect A rect of the target.\n// @param {utils/dom/rect~Rect} elementRect A rect of positioned element.\n// @returns {Array} An array containing position name and its Rect.\nfunction getPosition( position, targetRect, elementRect ) {\n\tconst { left, top, name } = position( targetRect, elementRect );\n\n\treturn [ name, elementRect.clone().moveTo( left, top ) ];\n}\n\n// For a given array of positioning functions, returns such that provides the best\n// fit of the `elementRect` into the `limiterRect` and `viewportRect`.\n//\n// @private\n// @param {module:utils/dom/position~Options#positions} positions Functions returning\n// {@link module:utils/dom/position~Position} to be checked, in the order of preference.\n// @param {utils/dom/rect~Rect} targetRect A rect of the {@link module:utils/dom/position~Options#target}.\n// @param {utils/dom/rect~Rect} elementRect A rect of positioned {@link module:utils/dom/position~Options#element}.\n// @param {utils/dom/rect~Rect} limiterRect A rect of the {@link module:utils/dom/position~Options#limiter}.\n// @param {utils/dom/rect~Rect} viewportRect A rect of the viewport.\n// @returns {Array} An array containing the name of the position and it's rect.\nfunction getBestPosition( positions, targetRect, elementRect, limiterRect, viewportRect ) {\n\tlet maxLimiterIntersectArea = 0;\n\tlet maxViewportIntersectArea = 0;\n\tlet bestPositionRect;\n\tlet bestPositionName;\n\n\t// This is when element is fully visible.\n\tconst elementRectArea = elementRect.getArea();\n\n\tpositions.some( position => {\n\t\tconst [ positionName, positionRect ] = getPosition( position, targetRect, elementRect );\n\t\tlet limiterIntersectArea;\n\t\tlet viewportIntersectArea;\n\n\t\tif ( limiterRect ) {\n\t\t\tif ( viewportRect ) {\n\t\t\t\t// Consider only the part of the limiter which is visible in the viewport. So the limiter is getting limited.\n\t\t\t\tconst limiterViewportIntersectRect = limiterRect.getIntersection( viewportRect );\n\n\t\t\t\tif ( limiterViewportIntersectRect ) {\n\t\t\t\t\t// If the limiter is within the viewport, then check the intersection between that part of the\n\t\t\t\t\t// limiter and actual position.\n\t\t\t\t\tlimiterIntersectArea = limiterViewportIntersectRect.getIntersectionArea( positionRect );\n\t\t\t\t} else {\n\t\t\t\t\tlimiterIntersectArea = 0;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tlimiterIntersectArea = limiterRect.getIntersectionArea( positionRect );\n\t\t\t}\n\t\t}\n\n\t\tif ( viewportRect ) {\n\t\t\tviewportIntersectArea = viewportRect.getIntersectionArea( positionRect );\n\t\t}\n\n\t\t// The only criterion: intersection with the viewport.\n\t\tif ( viewportRect && !limiterRect ) {\n\t\t\tif ( viewportIntersectArea > maxViewportIntersectArea ) {\n\t\t\t\tsetBestPosition();\n\t\t\t}\n\t\t}\n\t\t// The only criterion: intersection with the limiter.\n\t\telse if ( !viewportRect && limiterRect ) {\n\t\t\tif ( limiterIntersectArea > maxLimiterIntersectArea ) {\n\t\t\t\tsetBestPosition();\n\t\t\t}\n\t\t}\n\t\t// Two criteria: intersection with the viewport and the limiter visible in the viewport.\n\t\telse {\n\t\t\tif ( viewportIntersectArea > maxViewportIntersectArea && limiterIntersectArea >= maxLimiterIntersectArea ) {\n\t\t\t\tsetBestPosition();\n\t\t\t} else if ( viewportIntersectArea >= maxViewportIntersectArea && limiterIntersectArea > maxLimiterIntersectArea ) {\n\t\t\t\tsetBestPosition();\n\t\t\t}\n\t\t}\n\n\t\tfunction setBestPosition() {\n\t\t\tmaxViewportIntersectArea = viewportIntersectArea;\n\t\t\tmaxLimiterIntersectArea = limiterIntersectArea;\n\t\t\tbestPositionRect = positionRect;\n\t\t\tbestPositionName = positionName;\n\t\t}\n\n\t\t// If a such position is found that element is fully container by the limiter then, obviously,\n\t\t// there will be no better one, so finishing.\n\t\treturn limiterIntersectArea === elementRectArea;\n\t} );\n\n\treturn bestPositionRect ? [ bestPositionName, bestPositionRect ] : null;\n}\n\n// DOMRect (also Rect) works in a scroll–independent geometry but `position: absolute` doesn't.\n// This function converts Rect to `position: absolute` coordinates.\n//\n// @private\n// @param {utils/dom/rect~Rect} rect A rect to be converted.\n// @returns {Object} Object containing `left` and `top` properties, in absolute coordinates.\nfunction getAbsoluteRectCoordinates( { left, top } ) {\n\tconst { scrollX, scrollY } = global.window;\n\n\treturn {\n\t\tleft: left + scrollX,\n\t\ttop: top + scrollY,\n\t};\n}\n\n/**\n * The `getOptimalPosition` helper options.\n *\n * @interface module:utils/dom/position~Options\n */\n\n/**\n * Element that is to be positioned.\n *\n * @member {HTMLElement} #element\n */\n\n/**\n * Target with respect to which the `element` is to be positioned.\n *\n * @member {HTMLElement|Range|ClientRect|Rect|Function} #target\n */\n\n/**\n * An array of functions which return {@link module:utils/dom/position~Position} relative\n * to the `target`, in the order of preference.\n *\n * @member {Array.<Function>} #positions\n */\n\n/**\n * When set, the algorithm will chose position which fits the most in the\n * limiter's bounding rect.\n *\n * @member {HTMLElement|Range|ClientRect|Rect|Function} #limiter\n */\n\n/**\n * When set, the algorithm will chose such a position which fits `element`\n * the most inside visible viewport.\n *\n * @member {Boolean} #fitInViewport\n */\n\n/**\n * An object describing a position in `position: absolute` coordinate\n * system, along with position name.\n *\n * @typedef {Object} module:utils/dom/position~Position\n *\n * @property {Number} top Top position offset.\n * @property {Number} left Left position offset.\n * @property {String} name Name of the position.\n */\n"]}]}