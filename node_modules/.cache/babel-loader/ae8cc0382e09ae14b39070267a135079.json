{"remainingRequest":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/babel-loader/lib/index.js!/Users/antonyching/Desktop/project/new-builder-demo/node_modules/@ckeditor/ckeditor5-table/src/commands/removerowcommand.js","dependencies":[{"path":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/@ckeditor/ckeditor5-table/src/commands/removerowcommand.js","mtime":499162500000},{"path":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/@ckeditor/ckeditor5-dev-webpack-plugin/lib/translatesourceloader.js","mtime":499162500000},{"path":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/antonyching/Desktop/project/new-builder-demo/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:LyoqCiAqIEBsaWNlbnNlIENvcHlyaWdodCAoYykgMjAwMy0yMDE5LCBDS1NvdXJjZSAtIEZyZWRlcmljbyBLbmFiYmVuLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKiBGb3IgbGljZW5zaW5nLCBzZWUgTElDRU5TRS5tZCBvciBodHRwczovL2NrZWRpdG9yLmNvbS9sZWdhbC9ja2VkaXRvci1vc3MtbGljZW5zZQogKi8KCi8qKgogKiBAbW9kdWxlIHRhYmxlL2NvbW1hbmRzL3JlbW92ZXJvd2NvbW1hbmQKICovCmltcG9ydCBDb21tYW5kIGZyb20gJ0Bja2VkaXRvci9ja2VkaXRvcjUtY29yZS9zcmMvY29tbWFuZCc7CmltcG9ydCBUYWJsZVdhbGtlciBmcm9tICcuLi90YWJsZXdhbGtlcic7CmltcG9ydCB7IGZpbmRBbmNlc3RvciwgdXBkYXRlTnVtZXJpY0F0dHJpYnV0ZSB9IGZyb20gJy4vdXRpbHMnOwovKioKICogVGhlIHJlbW92ZSByb3cgY29tbWFuZC4KICoKICogVGhlIGNvbW1hbmQgaXMgcmVnaXN0ZXJlZCBieSB7QGxpbmsgbW9kdWxlOnRhYmxlL3RhYmxlZWRpdGluZ35UYWJsZUVkaXRpbmd9IGFzIGAncmVtb3ZlVGFibGVSb3cnYCBlZGl0b3IgY29tbWFuZC4KICoKICogVG8gcmVtb3ZlIHRoZSByb3cgY29udGFpbmluZyB0aGUgc2VsZWN0ZWQgY2VsbCwgZXhlY3V0ZSB0aGUgY29tbWFuZDoKICoKICoJCWVkaXRvci5leGVjdXRlKCAncmVtb3ZlVGFibGVSb3cnICk7CiAqCiAqIEBleHRlbmRzIG1vZHVsZTpjb3JlL2NvbW1hbmR+Q29tbWFuZAogKi8KCmV4cG9ydCBkZWZhdWx0IGNsYXNzIFJlbW92ZVJvd0NvbW1hbmQgZXh0ZW5kcyBDb21tYW5kIHsKICAvKioKICAgKiBAaW5oZXJpdERvYwogICAqLwogIHJlZnJlc2goKSB7CiAgICBjb25zdCBtb2RlbCA9IHRoaXMuZWRpdG9yLm1vZGVsOwogICAgY29uc3QgZG9jID0gbW9kZWwuZG9jdW1lbnQ7CiAgICBjb25zdCB0YWJsZUNlbGwgPSBmaW5kQW5jZXN0b3IoJ3RhYmxlQ2VsbCcsIGRvYy5zZWxlY3Rpb24uZ2V0Rmlyc3RQb3NpdGlvbigpKTsKICAgIHRoaXMuaXNFbmFibGVkID0gISF0YWJsZUNlbGwgJiYgdGFibGVDZWxsLnBhcmVudC5wYXJlbnQuY2hpbGRDb3VudCA+IDE7CiAgfQogIC8qKgogICAqIEBpbmhlcml0RG9jCiAgICovCgoKICBleGVjdXRlKCkgewogICAgY29uc3QgbW9kZWwgPSB0aGlzLmVkaXRvci5tb2RlbDsKICAgIGNvbnN0IHNlbGVjdGlvbiA9IG1vZGVsLmRvY3VtZW50LnNlbGVjdGlvbjsKICAgIGNvbnN0IGZpcnN0UG9zaXRpb24gPSBzZWxlY3Rpb24uZ2V0Rmlyc3RQb3NpdGlvbigpOwogICAgY29uc3QgdGFibGVDZWxsID0gZmluZEFuY2VzdG9yKCd0YWJsZUNlbGwnLCBmaXJzdFBvc2l0aW9uKTsKICAgIGNvbnN0IHRhYmxlUm93ID0gdGFibGVDZWxsLnBhcmVudDsKICAgIGNvbnN0IHRhYmxlID0gdGFibGVSb3cucGFyZW50OwogICAgY29uc3QgY3VycmVudFJvdyA9IHRhYmxlLmdldENoaWxkSW5kZXgodGFibGVSb3cpOwogICAgY29uc3QgaGVhZGluZ1Jvd3MgPSB0YWJsZS5nZXRBdHRyaWJ1dGUoJ2hlYWRpbmdSb3dzJykgfHwgMDsKICAgIG1vZGVsLmNoYW5nZSh3cml0ZXIgPT4gewogICAgICBpZiAoaGVhZGluZ1Jvd3MgJiYgY3VycmVudFJvdyA8PSBoZWFkaW5nUm93cykgewogICAgICAgIHVwZGF0ZU51bWVyaWNBdHRyaWJ1dGUoJ2hlYWRpbmdSb3dzJywgaGVhZGluZ1Jvd3MgLSAxLCB0YWJsZSwgd3JpdGVyLCAwKTsKICAgICAgfQoKICAgICAgY29uc3QgdGFibGVNYXAgPSBbLi4ubmV3IFRhYmxlV2Fsa2VyKHRhYmxlLCB7CiAgICAgICAgZW5kUm93OiBjdXJyZW50Um93CiAgICAgIH0pXTsKICAgICAgY29uc3QgY2VsbHNUb01vdmUgPSBuZXcgTWFwKCk7IC8vIEdldCBjZWxscyBmcm9tIHJlbW92ZWQgcm93IHRoYXQgYXJlIHNwYW5uZWQgb3ZlciBtdWx0aXBsZSByb3dzLgoKICAgICAgdGFibGVNYXAuZmlsdGVyKCh7CiAgICAgICAgcm93LAogICAgICAgIHJvd3NwYW4KICAgICAgfSkgPT4gcm93ID09PSBjdXJyZW50Um93ICYmIHJvd3NwYW4gPiAxKS5mb3JFYWNoKCh7CiAgICAgICAgY29sdW1uLAogICAgICAgIGNlbGwsCiAgICAgICAgcm93c3BhbgogICAgICB9KSA9PiBjZWxsc1RvTW92ZS5zZXQoY29sdW1uLCB7CiAgICAgICAgY2VsbCwKICAgICAgICByb3dzcGFuVG9TZXQ6IHJvd3NwYW4gLSAxCiAgICAgIH0pKTsgLy8gUmVkdWNlIHJvd3NwYW4gb24gY2VsbHMgdGhhdCBhcmUgYWJvdmUgcmVtb3ZlZCByb3cgYW5kIG92ZXJsYXBzIHJlbW92ZWQgcm93LgoKICAgICAgdGFibGVNYXAuZmlsdGVyKCh7CiAgICAgICAgcm93LAogICAgICAgIHJvd3NwYW4KICAgICAgfSkgPT4gcm93IDw9IGN1cnJlbnRSb3cgLSAxICYmIHJvdyArIHJvd3NwYW4gPiBjdXJyZW50Um93KS5mb3JFYWNoKCh7CiAgICAgICAgY2VsbCwKICAgICAgICByb3dzcGFuCiAgICAgIH0pID0+IHVwZGF0ZU51bWVyaWNBdHRyaWJ1dGUoJ3Jvd3NwYW4nLCByb3dzcGFuIC0gMSwgY2VsbCwgd3JpdGVyKSk7IC8vIE1vdmUgY2VsbHMgdG8gYW5vdGhlciByb3cuCgogICAgICBjb25zdCB0YXJnZXRSb3cgPSBjdXJyZW50Um93ICsgMTsKICAgICAgY29uc3QgdGFibGVXYWxrZXIgPSBuZXcgVGFibGVXYWxrZXIodGFibGUsIHsKICAgICAgICBpbmNsdWRlU3Bhbm5lZDogdHJ1ZSwKICAgICAgICBzdGFydFJvdzogdGFyZ2V0Um93LAogICAgICAgIGVuZFJvdzogdGFyZ2V0Um93CiAgICAgIH0pOwogICAgICBsZXQgcHJldmlvdXNDZWxsOwoKICAgICAgZm9yIChjb25zdCB7CiAgICAgICAgcm93LAogICAgICAgIGNvbHVtbiwKICAgICAgICBjZWxsCiAgICAgIH0gb2YgWy4uLnRhYmxlV2Fsa2VyXSkgewogICAgICAgIGlmIChjZWxsc1RvTW92ZS5oYXMoY29sdW1uKSkgewogICAgICAgICAgY29uc3QgewogICAgICAgICAgICBjZWxsOiBjZWxsVG9Nb3ZlLAogICAgICAgICAgICByb3dzcGFuVG9TZXQKICAgICAgICAgIH0gPSBjZWxsc1RvTW92ZS5nZXQoY29sdW1uKTsKICAgICAgICAgIGNvbnN0IHRhcmdldFBvc2l0aW9uID0gcHJldmlvdXNDZWxsID8gd3JpdGVyLmNyZWF0ZVBvc2l0aW9uQWZ0ZXIocHJldmlvdXNDZWxsKSA6IHdyaXRlci5jcmVhdGVQb3NpdGlvbkF0KHRhYmxlLmdldENoaWxkKHJvdyksIDApOwogICAgICAgICAgd3JpdGVyLm1vdmUod3JpdGVyLmNyZWF0ZVJhbmdlT24oY2VsbFRvTW92ZSksIHRhcmdldFBvc2l0aW9uKTsKICAgICAgICAgIHVwZGF0ZU51bWVyaWNBdHRyaWJ1dGUoJ3Jvd3NwYW4nLCByb3dzcGFuVG9TZXQsIGNlbGxUb01vdmUsIHdyaXRlcik7CiAgICAgICAgICBwcmV2aW91c0NlbGwgPSBjZWxsVG9Nb3ZlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBwcmV2aW91c0NlbGwgPSBjZWxsOwogICAgICAgIH0KICAgICAgfQoKICAgICAgd3JpdGVyLnJlbW92ZSh0YWJsZVJvdyk7CiAgICB9KTsKICB9Cgp9"},{"version":3,"sources":["/Users/antonyching/Desktop/project/new-builder-demo/node_modules/@ckeditor/ckeditor5-table/src/commands/removerowcommand.js"],"names":["Command","TableWalker","findAncestor","updateNumericAttribute","RemoveRowCommand","refresh","model","editor","doc","document","tableCell","selection","getFirstPosition","isEnabled","parent","childCount","execute","firstPosition","tableRow","table","currentRow","getChildIndex","headingRows","getAttribute","change","writer","tableMap","endRow","cellsToMove","Map","filter","row","rowspan","forEach","column","cell","set","rowspanToSet","targetRow","tableWalker","includeSpanned","startRow","previousCell","has","cellToMove","get","targetPosition","createPositionAfter","createPositionAt","getChild","move","createRangeOn","remove"],"mappings":"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","sourcesContent":["/**\n * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module table/commands/removerowcommand\n */\n\nimport Command from '@ckeditor/ckeditor5-core/src/command';\n\nimport TableWalker from '../tablewalker';\nimport { findAncestor, updateNumericAttribute } from './utils';\n\n/**\n * The remove row command.\n *\n * The command is registered by {@link module:table/tableediting~TableEditing} as `'removeTableRow'` editor command.\n *\n * To remove the row containing the selected cell, execute the command:\n *\n *\t\teditor.execute( 'removeTableRow' );\n *\n * @extends module:core/command~Command\n */\nexport default class RemoveRowCommand extends Command {\n\t/**\n\t * @inheritDoc\n\t */\n\trefresh() {\n\t\tconst model = this.editor.model;\n\t\tconst doc = model.document;\n\n\t\tconst tableCell = findAncestor( 'tableCell', doc.selection.getFirstPosition() );\n\n\t\tthis.isEnabled = !!tableCell && tableCell.parent.parent.childCount > 1;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\texecute() {\n\t\tconst model = this.editor.model;\n\t\tconst selection = model.document.selection;\n\n\t\tconst firstPosition = selection.getFirstPosition();\n\t\tconst tableCell = findAncestor( 'tableCell', firstPosition );\n\t\tconst tableRow = tableCell.parent;\n\t\tconst table = tableRow.parent;\n\n\t\tconst currentRow = table.getChildIndex( tableRow );\n\t\tconst headingRows = table.getAttribute( 'headingRows' ) || 0;\n\n\t\tmodel.change( writer => {\n\t\t\tif ( headingRows && currentRow <= headingRows ) {\n\t\t\t\tupdateNumericAttribute( 'headingRows', headingRows - 1, table, writer, 0 );\n\t\t\t}\n\n\t\t\tconst tableMap = [ ...new TableWalker( table, { endRow: currentRow } ) ];\n\n\t\t\tconst cellsToMove = new Map();\n\n\t\t\t// Get cells from removed row that are spanned over multiple rows.\n\t\t\ttableMap\n\t\t\t\t.filter( ( { row, rowspan } ) => row === currentRow && rowspan > 1 )\n\t\t\t\t.forEach( ( { column, cell, rowspan } ) => cellsToMove.set( column, { cell, rowspanToSet: rowspan - 1 } ) );\n\n\t\t\t// Reduce rowspan on cells that are above removed row and overlaps removed row.\n\t\t\ttableMap\n\t\t\t\t.filter( ( { row, rowspan } ) => row <= currentRow - 1 && row + rowspan > currentRow )\n\t\t\t\t.forEach( ( { cell, rowspan } ) => updateNumericAttribute( 'rowspan', rowspan - 1, cell, writer ) );\n\n\t\t\t// Move cells to another row.\n\t\t\tconst targetRow = currentRow + 1;\n\t\t\tconst tableWalker = new TableWalker( table, { includeSpanned: true, startRow: targetRow, endRow: targetRow } );\n\n\t\t\tlet previousCell;\n\n\t\t\tfor ( const { row, column, cell } of [ ...tableWalker ] ) {\n\t\t\t\tif ( cellsToMove.has( column ) ) {\n\t\t\t\t\tconst { cell: cellToMove, rowspanToSet } = cellsToMove.get( column );\n\t\t\t\t\tconst targetPosition = previousCell ?\n\t\t\t\t\t\twriter.createPositionAfter( previousCell ) :\n\t\t\t\t\t\twriter.createPositionAt( table.getChild( row ), 0 );\n\n\t\t\t\t\twriter.move( writer.createRangeOn( cellToMove ), targetPosition );\n\t\t\t\t\tupdateNumericAttribute( 'rowspan', rowspanToSet, cellToMove, writer );\n\n\t\t\t\t\tpreviousCell = cellToMove;\n\t\t\t\t} else {\n\t\t\t\t\tpreviousCell = cell;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\twriter.remove( tableRow );\n\t\t} );\n\t}\n}\n"]}]}